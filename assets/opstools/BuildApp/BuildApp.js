!function(i){function t(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return i[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e={};t.m=i,t.c=e,t.i=function(i){return i},t.d=function(i,e,n){t.o(i,e)||Object.defineProperty(i,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(i){var e=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(e,"a",e),e},t.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)},t.p="",t(t.s=3)}([function(i,t,e){"use strict";window.OP={},OP.Component={},OP.Models={},OP.Component.extend=function(i,t){OP.Component[i]=function(i){var e=t(i);if(e.logic.actions)for(var n in e.logic.actions)i.actions[n]=e.logic.actions[n];return e}}},function(i,t,e){"use strict";e(2),OP.Component.extend("ab_choose",function(i){var t={choose:i.unique("ab_choose")},e=OP.Component.ab_choose_list(i);return{ui:{id:t.choose,autoheight:!0,cells:[e.ui]},logic:{init:function(){i.actions,e.logic.init()},actions:{createApplicationRequest:function(){e.logic.reset()}}}}})},function(i,t,e){"use strict";function n(i,t){return AD.lang.label.getLabel(i)||t}var o={application:{title:n("ab.application.application","*Application"),createNew:n("ab.application.createNew","*Add new application")}};OP.Component.extend("ab_choose_list",function(i){o.common=i.labels.common;var t={component:i.unique("ab_choose_listcomponent"),list:i.unique("ab_choose_list"),toolBar:i.unique("ab_choose_list_toolbar"),buttonCreateNewApplication:i.unique("ab_choose_list_buttonNewApp")},e={cols:[{width:100},{id:t.component,autoheight:!0,autowidth:!0,rows:[{height:30},{view:"toolbar",id:t.toolBar,cols:[{view:"label",label:o.application.title,fillspace:!0},{id:t.buttonCreateNewApplication,view:"button",value:o.application.createNew,width:200,click:function(){i.actions.createApplicationRequest()}},{view:"uploader",value:o.common.import,width:200,upload:"/app_builder/appJSON",multiple:!1,autosend:!0,on:{onAfterFileAdd:function(){this.disable(),$$(t.list).showProgress({type:"icon"})},onFileUpload:function(i,e){n.loadData(),this.enable(),$$(t.list).hideProgress()},onFileUploadError:function(i,e){var o="Error: "+(e&&e.message);webix.message({type:"error",text:o}),n.loadData(),this.enable(),$$(t.list).hideProgress()}}}]},{id:t.list,view:"list",minHeight:227,autowidth:!0,css:"ab-app-select-list",template:function(i,t){return n.templateListItem(i,t)},type:{height:100,iconGear:"<span class='webix_icon fa-cog'></span>"},select:!1,onClick:{"ab-app-list-item":function(t,e,o){n.busy(),this.select(e);var a=data.filter(function(i){return i.id==e});return a&&a.length>0&&(n.ready(),i.actions.selectApplication(a[0])),!1},"ab-app-list-edit":function(i,t,e){return $$(self.webixUiId.appListMenu).show(e),this.select(t),!1}}}]},{width:100}]},n={init:function(){webix.extend($$(t.list),webix.ProgressBar),webix.extend($$(t.list),webix.OverlayBox),this.loadData()},busy:function(){$$(t.list).showProgress&&$$(t.list).showProgress({icon:"cursor"})},ready:function(){$$(t.list).hideProgress&&$$(t.list).hideProgress()},reset:function(){$$(t.list).unselectAll()},loadData:function(){AD.Model.get("opstools.BuildApp.ABApplication")},refreshList:function(){},templateListItem:function(i,t){return a.replace("#label#",i.label||"").replace("#description#",i.description||"").replace("{common.iconGear}",t.iconGear)}},a=["<div class='ab-app-list-item'>","<div class='ab-app-list-info'>","<div class='ab-app-list-name'>#label#</div>","<div class='ab-app-list-description'>#description#</div>","</div>","<div class='ab-app-list-edit'>","{common.iconGear}","</div>","</div>"].join("");return{ui:e,logic:n}})},function(i,t,e){"use strict";e(0),e(1),AD.Control.OpsTool.extend("BuildApp",{init:function(i,t){var e=this;t=AD.defaults({templateDOM:"/opstools/BuildApp/views/BuildApp/BuildApp.ejs",resize_notification:"BuildApp.resize",tool:null},t),e.options=t,e._super(i,t),e.data={},e.webixUiId={loadingScreen:"ab-loading-screen",syncButton:"ab-sync-button"},e.initDOM(function(){e.initWebixUI()})},initDOM:function(i){var t=this;can.view(this.options.templateDOM,{},function(e){t.element.html(e),i()})},initWebixUI:function(){function i(i,t){return AD.lang.label.getLabel(i)||t}var t=webix.uid(),e={actions:{selectApplication:function(i){}},unique:function(i){return i+t},labels:{common:{import:i("ab.common.import","*Import")}}},n=OP.Component.ab_choose(e);this.AppBuilder=webix.ui({id:e.unique("buld_app_loading_screen"),container:"ab-main-container",autoheight:!0,autowidth:!0,rows:[n.ui]}),this.AppBuilder.adjust(),n.logic.init()},resize:function(i){var t=this;i=i.height||i;var e=$(t.element);if(e){var n=e.parent().css("width");n&&(n=parseInt(n.replace("px",""))),e.width(n);var o=i-140,a=parseInt(e.css("min-height").replace("px",""));a<o?(e.height(o),$("#ab-main-container").height(o)):(e.height(a),$("#ab-main-container").height(a)),this.AppBuilder&&this.AppBuilder.adjust()}}})}]);