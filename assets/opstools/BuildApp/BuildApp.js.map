{"version":3,"sources":["webpack:///BuildApp.js","webpack:///webpack/bootstrap c0cef177ab350ee812d6","webpack:///./assets/opstools/AppBuilder/OP/OP.js","webpack:///./assets/opstools/AppBuilder/classes/ABApplication.js","webpack:///./assets/opstools/AppBuilder/classes/dataFields/ABField.js","webpack:///./assets/opstools/AppBuilder/OP/config/config.js","webpack:///./assets/opstools/AppBuilder/OP/form.js","webpack:///./assets/opstools/AppBuilder/OP/model.js","webpack:///./assets/opstools/AppBuilder/OP/multilingual.js","webpack:///./assets/opstools/AppBuilder/OP/util.js","webpack:///./assets/opstools/AppBuilder/OP/config/configDesktop.js","webpack:///./assets/opstools/AppBuilder/OP/config/configMobile.js","webpack:///./assets/opstools/AppBuilder/classes/dataFields/ABFieldComponent.js","webpack:///./assets/opstools/AppBuilder/classes/ABFieldManager.js","webpack:///./assets/opstools/AppBuilder/components/ab.js","webpack:///./assets/opstools/AppBuilder/AppBuilder.js","webpack:///./assets/opstools/AppBuilder/classes/ABObject.js","webpack:///./assets/opstools/AppBuilder/classes/dataFields/ABFieldImage.js","webpack:///./assets/opstools/AppBuilder/classes/dataFields/ABFieldNumber.js","webpack:///./assets/opstools/AppBuilder/classes/dataFields/ABFieldString.js","webpack:///./assets/opstools/AppBuilder/components/ab_choose.js","webpack:///./assets/opstools/AppBuilder/components/ab_choose_form.js","webpack:///./assets/opstools/AppBuilder/components/ab_choose_list.js","webpack:///./assets/opstools/AppBuilder/components/ab_choose_list_menu.js","webpack:///./assets/opstools/AppBuilder/components/ab_work.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_interface.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_list.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_list_newObject.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_list_newObject_blank.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace_datatable.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupDefineLabel.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupHeaderEditMenu.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupHideFields.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupNewDataField.js","webpack:///./assets/opstools/AppBuilder/data/ABApplication.js","webpack:///./assets/opstools/AppBuilder/webix_custom_components/editlist.js","webpack:///./assets/opstools/AppBuilder/webix_custom_components/edittree.js","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/fixUrls.js","webpack:///./assets/opstools/AppBuilder/AppBuilder.css","webpack:///./~/style-loader/addStyles.js","webpack:///./assets/opstools/AppBuilder/AppBuilder.css?8d71"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","OP","_interopRequireDefault","obj","default","_form","_form2","_multilingual","_multilingual2","_model","_model2","_util","_util2","_config","_config2","window","Component","CustomComponent","extend","key","fn","App","_newApp","component","actions","a","uuid","webix","uid","config","custom","labels","unique","this","Dialog","AD","op","Error","error","Form","Multilingual","Model","Util","_classCallCheck","instance","Constructor","TypeError","L","altText","lang","label","getLabel","toArray","DC","ary","id","getFirstId","element","getItem","push","getNextId","_createClass","defineProperties","target","props","length","descriptor","writable","protoProps","staticProps","_ABObject","_ABObject2","_AllApplications","ABApplication","attributes","_this","json","role","translate","fieldsMultilingual","newObjects","objects","forEach","_objects","Models","_this2","destroy","then","remove","_this3","values","toObj","update","updateItem","create","data","add","unTranslate","currObjects","permItems","_this4","Promise","resolve","reject","comm","service","put","url","roles","fail","done","_this5","_this6","post","_this7","delete","filter","save","ModelApplication","findAll","catch","newApp","app","errors","arrayApplications","nameMatch","trim","replace","toLowerCase","matchingApps","validationError","message","ABField","fieldDefaults","defaults","fromValues","type","icon","menuName","description","fields","f","columnName","fieldRemove","err","fieldSave","settings","translations","fieldType","fieldIcon","showIcon","parseInt","isObjectWorkspace","header","ids","defaultValues","$$","setValue","field","_logic","Field","onChange","newVal","oldVal","getValue","labelOnChange","rows","view","dataFieldHeaderLabel","placeholder","dataFieldHeaderLabelPlaceholder","labelWidth","labelWidthMedium","css","on","dataFieldColumnName","dataFieldColumnNamePlaceholder","fieldDescription","align","labelRight","dataFieldShowIcon","labelWidthCheckbox","_configDesktop","_configDesktop2","_configMobile","_configMobile2","innerWidth","errorObj","invalidAttributes","attr","isValidationError","form","hasFocused","raw","code","attrs","wasForm","elements","msg","markInvalid","join","focus","_restURLs","findOne","_Models","OPModel","staticData","instanceData","r","cond","verb","params","Array","isArray","newList","dc","DataCollection","onAfterDelete","nURI","k","oURI","util","string","replaceAll","item","parts","split","uri","pop","restURL","u","nameSpace","objectName","findObject","baseObj","nameList","curr","console","currLanguage","currentLanguage","t","language_code","foundOne","trans","appListRowHeight","buttonWidthLarge","buttonWidthMedium","buttonWidthSmall","buttonWidthExtraSmall","tabWidthLarge","tabWidthMedium","tabWidthSmall","tabWidthExtraSmall","smallSpacer","mediumSpacer","largeSpacer","appListSpacerRowHeight","appListSpacerColMinWidth","appListSpacerColMaxWidth","objectWorkspaceColWidth","labelWidthSmall","labelWidthLarge","hideMobile","_ABField","_ABField2","ABFieldComponent","options","rules","logic","init","idBase","eachDeep","e","_ui","autoheight","borderless","isNotEmpty","_init","clear","clearEditor","warn","clearValidation","hide","isValid","validate","populate","editorPopulate","show","b","getValues","editorValues","commonUI","definitionEditor","concat","_component","ui","list","cols","_ABFieldString","_ABFieldString2","_ABFieldNumber","_ABFieldNumber2","_ABFieldImage","_ABFieldImage2","Fields","allFields","newField","_edittree","_edittree2","_editlist","_editlist2","_AppBuilder","edit","export","formName","import","ok","cancel","yes","no","createErrorMessage","createSuccessMessage","updateErrorMessage","updateSucessMessage","deleteErrorMessage","deleteSuccessMessage","AppChooser","AppWorkspace","animate","transitionApplicationChooser","adjust","Control","OpsTool","self","templateDOM","resize_notification","tool","_super","webixUiId","loadingScreen","syncButton","initDOM","initWebixUI","cb","can","fragment","html","AppBuilder","container","resize","height","appListDom","$","width","parent","computedHeight","log","mh","_ABFieldManager","_ABFieldManager2","ABObject","application","labelFormat","isImported","urlPath","importFromObject","objectWorkspace","hiddenFields","newFields","fieldNew","_fields","objectSave","currFields","headers","idLookup","columnHeader","h","workspaceHiddenFields","hfID","hidden","set","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","constructor","setPrototypeOf","__proto__","_get","receiver","Function","desc","getOwnPropertyDescriptor","undefined","getPrototypeOf","_ABField3","_ABFieldComponent","_ABFieldComponent2","ABFieldImageDefaults","useWidth","imageWidth","useHeight","imageHeight","ABFieldImageComponent","idsUnique","click","enable","disable","ABFieldImage","dv","editor","sort","ABFieldNumberDefaults","formatList","sign","position","allowRequired","numberDefault","typeFormat","typeDecimals","typeDecimalPlaces","typeRounding","typeThousands","validation","validateMinimum","validateMaximum","ABFieldNumberComponent","inputWidth","RegExp","test","newValue","oldValue","disabled","vertical","ABFieldNumber","editors","number","text","ABFieldStringDefaults","ABFieldStringComponent","textDefault","supportMultilingual","ABFieldString","AppList","AppForm","cells","_ABApplication","_ABApplication2","formHeader","placeholderName","placeholderDescription","formDescription","sectionPermission","permissionHeader","createNewRole","invalidName","duplicateName","common","appFormPermissionList","appFormCreateRoleButton","saveButton","responsive","maxWidth","minWidth","responsiveCell","maxHeight","fillspace","margin","required","permissionRenameRole","labelAlign","template","autowidth","offIcon","onIcon","onItemClick","createRoleButtonClick","markCheckbox","node","permissionClick","buttonSaveClick","FormFields","ProgressBar","applicationCreate","async","waterfall","result","createdApp","permissionSave","formReady","buttonSaveEnable","transitionApplicationList","applicationUpdate","Application","formValues","next","app_role","buttonSaveDisable","formBusy","updateApp","getSelectedApplication","formValidate","formReset","appName","permissionAddNew","permissionRemoveNew","showProgress","formPopulate","hideProgress","permissionName","isApplicationRole","selectedIds","getSelectedId","select","List","isSelected","unselect","isNaN","permissionPopulate","PermForm","parsedRoles","map","available_roles","getPermissions","selected_role_ids","clearAll","parse","indexOf","markCreateButton","find","perm","editItem","saveRoleTasks","appRole","selectedPerms","getSelectedItem","createPermission","deletePermission","appRoleItem","assignPermissions","series","results","transitionApplicationForm","unselectApplication","title","createNew","noApplication","uploader","toolBar","buttonCreateNewApplication","MenuComponent","PopupMenu","upload","multiple","autosend","onAfterFileAdd","onFileUpload","response","onFileUploadError","details","templateListItem","iconGear","onClick","ab-app-list-item","ev","trg","onClickListItem","ab-app-list-edit","onClickListEdit","_data","busy","loadData","allApplications","ready","attachEvent","index","refreshOverlay","listApplications","refreshList","selectedApp","transitionWorkspace","errorMessage","Alert","appList","count","hideOverlay","showOverlay","reset","unselectAll","unsync","sync","refresh","_templateListItem","OverlayBox","deleteApplication","menu","confirmDeleteTitle","confirmDeleteMessage","head","body","command","datatype","timestamp","textContent","ConfirmDelete","callback","location","assign","backToApplication","synchronize","objectTitle","interfaceTitle","buttonSync","labelAppName","tabbar","tab_object","tab_interface","workspace","AppObjectWorkspace","AppInterfaceWorkspace","alrign","multiview","idNew","idOld","tabSwitch","applicationInit","define","idTab","applicationLoad","ObjectList","ObjectWorkspace","clearObjectWorkspace","addNew","buttonNew","editlist","editaction","editable","editValue","onAfterRender","onAfterSelect","selectObject","onBeforeEditStop","state","onAfterEditStop","ignoreUpdate","ab-object-list-edit","clickEditMenu","clickNewObject","listBusy","CurrentApplication","objectList","syncNumberRefresh","listReady","PopupNewObjectComponent","populateObjectWorkspace","callbackNewObject","newObject","PopupNewObject","onDone","getSelectedObject","BlankTab","modal","selectNewObject","callbacks","ourCBs","onCancel","onSave","currentApplication","objectNew","validationErrors","buttonSave","buttonCancel","formClear","addNewRow","hideFields","filterFields","sortFields","frozenColumns","defineLabel","permission","addFields","buttonAddField","buttonExport","buttonFieldsVisible","buttonFilter","buttonFrozen","buttonLabel","buttonRowNew","buttonSort","datatable","toolbar","noSelection","selectedObject","DataTable","PopupDefineLabelComponent","PopupDefineLabel","PopupNewDataFieldComponent","PopupHideFieldComponent","PopupHideField","badge","toolbarFieldsVisible","$view","toolbarFilter","toolbarSort","toolbarFrozen","toolbarDefineLabel","toolbarPermission","toolbarAddFields","toolbarButtonExport","rowAdd","onEditorMenu","callbackHeaderEditorMenu","callbackDefineLabel","callbackAddFields","callbackFieldsVisible","CurrentObject","action","Confirm","isOK","populateObjectPopupAddDataField","objectLoad","resizeColumn","resizeRow","prerender","fixedRowHeight","dragColumn","onBeforeSelect","preserve","prevent","onCheck","row","col","val","onColumnResize","newWidth","oldWidth","user_action","onBeforeColumnDrag","sourceId","event","onBeforeColumnDrop","targetId","onAfterColumnDrop","onAfterColumnShow","onAfterColumnHide","onHeaderClick","EditField","EditNode","callbackHeaderEdit","PopupHeaderEdit","column","PopupHeaderEditComponent","columnHeaders","refreshColumns","selectFieldToGenerate","labelFields","format","onShow","_currentObject","ButtonSave","each","listFields","selectedItem","Format","hideField","filterField","sortField","editField","deleteField","menuItems","imported","listItems","showAll","hideAll","clickShowAll","clickHideAll","listItemClick","iconsReset","newHidden","fID","iconShow","iconHide","querySelector","style","visibility","getItemNode","chooseType","addNewField","types","editDefinitions","submenu","typeClick","preventDefault","onMenuItemClick","onBeforeShow","resetState","onHide","_objectHash","_componentHash","_componentsByType","_currentEditor","defaultEditorComponent","_editField","submenus","newEditorList","F","editorComponent","propertiesComponent","firstID","oldData","modeAdd","modeEdit","subMenuId","getSubMenu","useSockets","componentKey","protoUI","EditAbility","tree","cssWithMappingToString","useSourceMap","content","cssMapping","btoa","sourceMapping","toComment","sources","source","sourceRoot","sourceMap","unescape","encodeURIComponent","JSON","stringify","toString","mediaQuery","alreadyImportedModules","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","unquotedOrigUrl","$1","newUrl","addStylesToDom","styles","domStyle","stylesInDom","refs","j","addStyle","listToStyles","newStyles","media","part","insertStyleElement","styleElement","styleTarget","getElement","insertInto","lastStyleElementInsertedAtTop","styleElementsInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","removeStyleElement","parentNode","removeChild","idx","splice","createStyleElement","document","createElement","attachTagAttrs","createLinkElement","linkElement","rel","keys","setAttribute","singleton","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","bind","URL","createObjectURL","revokeObjectURL","Blob","updateLink","href","applyToTag","newObj","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","fixUrls","blob","oldSrc","isOldIE","memo","apply","arguments","all","atob","selector","DEBUG","mayRemove","textStore","replacement","Boolean","locals"],"mappings":"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","file":"BuildApp.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 13);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _form = __webpack_require__(4);\n\nvar _form2 = _interopRequireDefault(_form);\n\nvar _multilingual = __webpack_require__(6);\n\nvar _multilingual2 = _interopRequireDefault(_multilingual);\n\nvar _model = __webpack_require__(5);\n\nvar _model2 = _interopRequireDefault(_model);\n\nvar _util = __webpack_require__(7);\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _config = __webpack_require__(3);\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.OP = {};\n\n// OP.xxxx      These properties hold the defined Class/Controller/Model definitions\n//              for our loaded projects.\n// OP.UI = {};    \t\t// webix UI definitions\n// OP.Logic = {}; \t\t// logic references for webix application\n\n/**\n * @class AD_Client\n * @parent index 4\n *\n * ###Client side global OpsPortal (OP) namespace.\n *\n * This file defines standard functions and calls for OpsPortal\n * objects on the client side.\n */\n\n// Create our OP  Namespace only if it hasn't been created already\n\n//// TODO: how to disable 'use strict'?  or perform this check without an error\n//// in 'use strict' ?\n\n// if (!window.OP) {\nOP.Component = {}; // our defined components\n\nOP.CustomComponent = {}; // separate holder for Webix Custom Components\n\n\n// OP.UI.extend = function(key, definition) {\n// \tOP.UI[key] = definition;\n// }\n\nOP.Component.extend = function (key, fn) {\n\tOP.Component[key] = function (App) {\n\n\t\t//// TODO: verify App has proper structure:\n\t\tif (!App) {\n\t\t\tApp = OP.Component._newApp();\n\t\t}\n\n\t\t// make an instance of the component.\n\t\tvar component = fn(App);\n\n\t\t// transfer to App, any actions in the component:\n\t\tif (component.actions) {\n\t\t\tfor (var a in component.actions) {\n\t\t\t\tApp.actions[a] = component.actions[a];\n\t\t\t}\n\t\t}\n\n\t\treturn component;\n\t};\n};\n\nOP.Component._newApp = function () {\n\treturn {\n\n\t\tuuid: webix.uid(),\n\n\t\t/*\n   * actions:\n   * a hash of exposed application methods that are shared among our\n   * components, so one component can invoke an action that updates\n   * another component.\n   */\n\t\tactions: {},\n\n\t\t/*\n   * config\n   * webix configuration settings for our current browser\n   */\n\t\tconfig: _config2.default.config(),\n\n\t\t/*\n   * custom\n   * a collection of custom components for this App Instance.\n   */\n\t\tcustom: {},\n\n\t\t/*\n   * labels\n   * a collection of labels that are common for the Application.\n   */\n\t\tlabels: {},\n\n\t\t/*\n   * unique()\n   * A function that returns a globally unique Key.\n   * @param {string} key   The key to modify and return.\n   * @return {string}\n   */\n\t\tunique: function unique(key) {\n\t\t\treturn key + this.uuid;\n\t\t}\n\n\t};\n};\n\nOP.CustomComponent.extend = function (key, fn) {\n\tOP.CustomComponent[key] = function (App, key) {\n\n\t\tif (!App) {\n\t\t\tApp = OP.Component._newApp();\n\t\t}\n\n\t\t// make an instance of the component.\n\t\treturn fn(App, key);\n\t};\n};\n\nOP.Dialog = AD.op.Dialog;\n\nOP.Error = AD.error;\n\nOP.Form = _form2.default;\n\nOP.Multilingual = _multilingual2.default;\nOP.Model = _model2.default;\n\nOP.Util = _util2.default;\n\nexports.default = OP;\n// }\n\n\n// import \"./model.js\"\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n// import OP from \"OP\"\n\n\n__webpack_require__(34);\n\nvar _ABObject = __webpack_require__(14);\n\nvar _ABObject2 = _interopRequireDefault(_ABObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _AllApplications = [];\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nfunction toDC(data) {\n\treturn new webix.DataCollection({\n\t\tdata: data\n\n\t});\n}\n\nfunction toArray(DC) {\n\tvar ary = [];\n\n\tvar id = DC.getFirstId();\n\twhile (id) {\n\t\tvar element = DC.getItem(id);\n\t\tary.push(element);\n\t\tid = DC.getNextId(id);\n\t}\n\n\treturn ary;\n}\n\nvar ABApplication = function () {\n\tfunction ABApplication(attributes) {\n\t\tvar _this = this;\n\n\t\t_classCallCheck(this, ABApplication);\n\n\t\t// ABApplication Attributes\n\t\tthis.id = attributes.id;\n\t\tthis.json = attributes.json;\n\t\tthis.name = attributes.name || this.json.name || \"\";\n\t\tthis.role = attributes.role;\n\n\t\t// multilingual fields: label, description\n\t\tOP.Multilingual.translate(this, this.json, ABApplication.fieldsMultilingual());\n\n\t\t// import all our ABObjects\n\t\tvar newObjects = [];\n\t\t(attributes.json.objects || []).forEach(function (obj) {\n\t\t\tnewObjects.push(new _ABObject2.default(obj, _this));\n\t\t});\n\t\tthis._objects = newObjects;\n\n\t\t// import all our ABViews\n\n\n\t\t// instance keeps a link to our Model for .save() and .destroy();\n\t\tthis.Model = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\tthis.Model.Models(ABApplication);\n\t}\n\n\t///\n\t/// Static Methods\n\t///\n\t/// Available to the Class level object.  These methods are not dependent\n\t/// on the instance values of the Application.\n\t///\n\n\n\t/**\n  * @function allApplications\n  *\n  * return a DataCollection that contains all the ABApplications this user\n  * can see (based upon server side permissions);\n  *\n  * NOTE: this manages the results in the _AllApplications dataCollection\n  * store.  Any future .create(), .destroy(), .updates() modify values in\n  * that collection.\n  *\n  * Any webix ui components synced to that collection will be automatically\n  * updated.\n  *\n  * @return {Promise}\n  */\n\n\n\t_createClass(ABApplication, [{\n\t\tkey: \"destroy\",\n\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\t/// ABApplication data methods\n\n\n\t\t/**\n   * @method destroy()\n   *\n   * destroy the current instance of ABApplication\n   *\n   * also remove it from our _AllApplications\n   *\n   * @return {Promise}\n   */\n\t\tvalue: function destroy() {\n\t\t\tvar _this2 = this;\n\n\t\t\tif (this.id) {\n\t\t\t\treturn this.Model.destroy(this.id).then(function () {\n\t\t\t\t\t_AllApplications.remove(_this2.id);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/**\n   * @method save()\n   *\n   * persist the current instance of ABApplication to the DB\n   *\n   * Also, keep the values in _AllApplications up to date.\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"save\",\n\t\tvalue: function save() {\n\t\t\tvar _this3 = this;\n\n\t\t\tvar values = this.toObj();\n\n\t\t\t// we already have an .id, so this must be an UPDATE\n\t\t\tif (values.id) {\n\n\t\t\t\treturn this.Model.update(values.id, values).then(function () {\n\t\t\t\t\t_AllApplications.updateItem(values.id, _this3);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\t// must be a CREATE:\n\t\t\t\treturn this.Model.create(values).then(function (data) {\n\t\t\t\t\t_this3.id = data.id;\n\t\t\t\t\t_AllApplications.add(_this3, 0);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\n\t}, {\n\t\tkey: \"toObj\",\n\t\tvalue: function toObj() {\n\n\t\t\tOP.Multilingual.unTranslate(this, this.json, ABApplication.fieldsMultilingual());\n\t\t\tthis.json.name = this.name;\n\n\t\t\t// for each Object: compile to json\n\t\t\tvar currObjects = [];\n\t\t\tthis._objects.forEach(function (obj) {\n\t\t\t\tcurrObjects.push(obj.toObj());\n\t\t\t});\n\t\t\tthis.json.objects = currObjects;\n\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tname: this.name,\n\t\t\t\tjson: this.json,\n\t\t\t\trole: this.role\n\t\t\t};\n\t\t}\n\n\t\t/// ABApplication Permission methods\n\n\n\t\t/**\n   * @method assignPermissions()\n   *\n   * Make sure the current ABApplication permissions match the given\n   * array of permissions.\n   *\n   * @param {array} permItems\tan array of role assignments that this\n   * \t\t\t\t\t\t\tABApplication should match.\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"assignPermissions\",\n\t\tvalue: function assignPermissions(permItems) {\n\t\t\tvar _this4 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tAD.comm.service.put({\n\t\t\t\t\turl: '/app_builder/' + _this4.id + '/role/assign',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\troles: permItems\n\t\t\t\t\t}\n\t\t\t\t}).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method getPermissions()\n   *\n   * Return an array of role assignments that are currently assigned to this\n   * ABApplication.\n   *\n   * @return {Promise} \tresolve(list) : list {array} Role assignments\n   */\n\n\t}, {\n\t\tkey: \"getPermissions\",\n\t\tvalue: function getPermissions() {\n\t\t\tvar _this5 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tAD.comm.service.get({ url: '/app_builder/' + _this5.id + '/role' }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method createPermission()\n   *\n   * Create a Role in the system after the name of the current ABApplication.\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"createPermission\",\n\t\tvalue: function createPermission() {\n\t\t\tvar _this6 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// TODO: need to take created role and store as : .json.applicationRole = role.id\n\n\t\t\t\tAD.comm.service.post({ url: '/app_builder/' + _this6.id + '/role' }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method deletePermission()\n   *\n   * Remove the Role in the system of the current ABApplication.\n   * (the one created by  .createPermission() )\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"deletePermission\",\n\t\tvalue: function deletePermission() {\n\t\t\tvar _this7 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// TODO: need to remove created role from : .json.applicationRole\n\t\t\t\tAD.comm.service.delete({ url: '/app_builder/' + _this7.id + '/role' }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\n\t\t///\n\t\t/// Objects\n\t\t///\n\n\n\t\t/**\n   * @method objects()\n   *\n   * return an array of all the ABObjects for this ABApplication.\n   *\n   * @param {fn} filter  \ta filter fn to return a set of ABObjects that this fn\n   *\t\t\t\t\t\treturns true for.\n   * @return {array} \tarray of ABObject\n   */\n\n\t}, {\n\t\tkey: \"objects\",\n\t\tvalue: function objects(filter) {\n\n\t\t\tfilter = filter || function () {\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\treturn this._objects.filter(filter);\n\t\t}\n\n\t\t/**\n   * @method objectNew()\n   *\n   * return an instance of a new (unsaved) ABObject that is tied to this\n   * ABApplication.\n   *\n   * NOTE: this new object is not included in our this.objects until a .save()\n   * is performed on the object.\n   *\n   * @return {ABObject}\n   */\n\n\t}, {\n\t\tkey: \"objectNew\",\n\t\tvalue: function objectNew(values) {\n\t\t\treturn new _ABObject2.default(values, this);\n\t\t}\n\n\t\t/**\n   * @method objectSave()\n   *\n   * persist the current ABObject in our list of ._objects.\n   *\n   * @param {ABObject} object\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"objectSave\",\n\t\tvalue: function objectSave(object) {\n\t\t\tvar isIncluded = this.objects(function (o) {\n\t\t\t\treturn o.id == object.id;\n\t\t\t}).length > 0;\n\t\t\tif (!isIncluded) {\n\t\t\t\tthis._objects.push(object);\n\t\t\t}\n\n\t\t\treturn this.save();\n\t\t}\n\t}], [{\n\t\tkey: \"allApplications\",\n\t\tvalue: function allApplications() {\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar ModelApplication = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\t\t\tModelApplication.Models(ABApplication); // set the Models  setting.\n\n\t\t\t\tModelApplication.findAll().then(function (data) {\n\n\t\t\t\t\t// NOTE: data is already a DataCollection from .findAll()\n\t\t\t\t\t_AllApplications = data;\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @function create\n   *\n   * take the initial values and create an instance of ABApplication.\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"create\",\n\t\tvalue: function create(values) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar newApp = {};\n\t\t\t\tOP.Multilingual.unTranslate(values, newApp, ABApplication.fieldsMultilingual());\n\t\t\t\tvalues.json = newApp;\n\t\t\t\tnewApp.name = values.name;\n\n\t\t\t\tvar ModelApplication = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\t\t\tModelApplication.create(values).then(function (app) {\n\n\t\t\t\t\t// return an instance of ABApplication\n\t\t\t\t\tvar App = new ABApplication(app);\n\n\t\t\t\t\t_AllApplications.add(App, 0);\n\t\t\t\t\tresolve(App);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method fieldsMultilingual()\n   *\n   * return an array of fields that are considered Multilingual labels for\n   * an ABApplication\n   *\n   * @return {array}\n   */\n\n\t}, {\n\t\tkey: \"fieldsMultilingual\",\n\t\tvalue: function fieldsMultilingual() {\n\t\t\treturn ['label', 'description'];\n\t\t}\n\n\t\t//// TODO: Refactor isValid() to ignore op and not error if duplicateName is own .id\n\n\t}, {\n\t\tkey: \"isValid\",\n\t\tvalue: function isValid(op, values) {\n\n\t\t\tvar errors = null;\n\n\t\t\t// during an ADD operation\n\t\t\tif (op == 'add') {\n\n\t\t\t\t// label/name must be unique:\n\t\t\t\tvar arrayApplications = toArray(_AllApplications);\n\n\t\t\t\tvar nameMatch = values.label.trim().replace(/ /g, '_').toLowerCase();\n\t\t\t\tvar matchingApps = arrayApplications.filter(function (app) {\n\t\t\t\t\treturn app.name.trim().toLowerCase() == nameMatch;\n\t\t\t\t});\n\t\t\t\tif (matchingApps && matchingApps.length > 0) {\n\n\t\t\t\t\terrors = OP.Form.validationError({\n\t\t\t\t\t\tname: 'label',\n\t\t\t\t\t\tmessage: L('ab_form_application_duplicate_name', \"*Name (#name#) is already in use\").replace('#name#', nameMatch)\n\t\t\t\t\t}, errors);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check the common validations:\n\t\t\t// TODO:\n\t\t\t// if (!inputValidator.validate(values.label)) {\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\n\t\t\treturn errors;\n\t\t}\n\t}]);\n\n\treturn ABApplication;\n}();\n\nexports.default = ABApplication;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n * ABField\n *\n * An ABField defines a single unique Field/Column in a ABObject.\n *\n */\n\n// import OP from \"../../OP/OP\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABField = function () {\n\tfunction ABField(values, object, fieldDefaults) {\n\t\t_classCallCheck(this, ABField);\n\n\t\t// NOTE: setup this first so later we can use .fieldType(), .fieldIcon()\n\t\tthis.defaults = fieldDefaults;\n\n\t\t/*\n  {\n  id:'uuid',\t\t\t\t\t// uuid value for this obj\n  type:'fieldType',\t\t\t// unique key for this Field\n  icon:'font',\t\t\t\t// fa-[icon] reference for an icon for this Field Type\n  label:'',\t\t\t\t\t// pulled from translation\n  columnName:'column_name',\t// a valid mysql table.column name \n  settings: {\t\t\t\t\t// unique settings for the type of field\n  showIcon:true/false,\t// only useful in Object Workspace DataTable\n  // specific for dataField\n  },\n  translations:[]\n  }\n  */\n\t\tthis.fromValues(values);\n\n\t\t// label is a multilingual value:\n\t\tOP.Multilingual.translate(this, this, ['label']);\n\n\t\tthis.object = object;\n\t}\n\n\t///\n\t/// Static Methods\n\t///\n\t/// Available to the Class level object.  These methods are not dependent\n\t/// on the instance values of the Application.\n\t///\n\n\t_createClass(ABField, [{\n\t\tkey: 'fieldName',\n\n\n\t\t// unique key to reference this specific DataField\n\t\tvalue: function fieldName() {\n\t\t\treturn this.defaults.name;\n\t\t}\n\n\t\t// http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\n\t}, {\n\t\tkey: 'fieldType',\n\t\tvalue: function fieldType() {\n\t\t\treturn this.defaults.type;\n\t\t}\n\n\t\t// font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\n\t}, {\n\t\tkey: 'fieldIcon',\n\t\tvalue: function fieldIcon() {\n\t\t\treturn this.defaults.icon;\n\t\t}\n\n\t\t// the multilingual text for the name of this data field.\n\n\t}, {\n\t\tkey: 'fieldMenuName',\n\t\tvalue: function fieldMenuName() {\n\t\t\treturn this.defaults.menuName;\n\t\t}\n\n\t\t// the multilingual text for the name of this data field.\n\n\t}, {\n\t\tkey: 'fieldDescription',\n\t\tvalue: function fieldDescription() {\n\t\t\treturn this.defaults.description;\n\t\t}\n\n\t\t/*\n   * @method isValid\n   * check the current values to make sure they are valid.\n   * Here we check the default values provided by ABField.\n   *\n   * @return null or [{OP.Form.validationError()}] objects.\n   */\n\n\t}, {\n\t\tkey: 'isValid',\n\t\tvalue: function isValid() {\n\t\t\tvar _this = this;\n\n\t\t\tvar errors = null;\n\n\t\t\t// .columnName must be unique among fileds on the same object\n\t\t\tvar isNameUnique = this.object.fields(function (f) {\n\t\t\t\tvar isDifferent = f.id != _this.id;\n\t\t\t\treturn f.id != _this.id && f.columnName.toLowerCase() == _this.columnName.toLowerCase();\n\t\t\t}).length == 0;\n\t\t\tif (!isNameUnique) {\n\t\t\t\terrors = OP.Form.validationError({\n\t\t\t\t\tname: 'columnName',\n\t\t\t\t\tmessage: L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.columnName)\n\t\t\t\t}, errors);\n\t\t\t}\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\t/// ABApplication data methods\n\n\n\t\t/**\n   * @method destroy()\n   *\n   * destroy the current instance of ABApplication\n   *\n   * also remove it from our _AllApplications\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: 'destroy',\n\t\tvalue: function destroy() {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// verify we have been .save()d before:\n\t\t\t\tif (_this2.id) {\n\n\t\t\t\t\t_this2.object.fieldRemove(_this2).then(function () {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\n\t\t\t\t\tresolve(); // nothing to do really\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method save()\n   *\n   * persist this instance of ABField with it's parent ABObject\n   *\n   *\n   * @return {Promise}\n   *\t\t\t\t\t\t.resolve( {this} )\n   */\n\n\t}, {\n\t\tkey: 'save',\n\t\tvalue: function save() {\n\t\t\tvar _this3 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// if this is our initial save()\n\t\t\t\tif (!_this3.id) {\n\t\t\t\t\t_this3.id = OP.Util.uuid(); // setup default .id\n\t\t\t\t}\n\n\t\t\t\t_this3.object.fieldSave(_this3).then(function () {\n\t\t\t\t\tresolve(_this3);\n\t\t\t\t}).catch(function (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABField instance\n   * into the values needed for saving to the DB.\n   *\n   * @return {json}\n   */\n\n\t}, {\n\t\tkey: 'toObj',\n\t\tvalue: function toObj() {\n\n\t\t\t// store \"label\" in our translations\n\t\t\tOP.Multilingual.unTranslate(this, this, [\"label\"]);\n\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\ttype: this.type,\n\t\t\t\ticon: this.icon,\n\t\t\t\tcolumnName: this.columnName,\n\t\t\t\tsettings: this.settings,\n\t\t\t\ttranslations: this.translations\n\t\t\t};\n\t\t}\n\t}, {\n\t\tkey: 'fromValues',\n\t\tvalue: function fromValues(values) {\n\n\t\t\tthis.id = values.id; // NOTE: only exists after .save()\n\t\t\tthis.type = values.type || this.fieldType();\n\t\t\tthis.icon = values.icon || this.fieldIcon();\n\n\t\t\t// if this is being instantiated on a read from the Property UI,\n\t\t\t// .label is coming in under .settings.label\n\t\t\tthis.label = values.label || values.settings.label || '?label?';\n\n\t\t\tthis.columnName = values.columnName || '';\n\t\t\tthis.translations = values.translations || [];\n\n\t\t\tthis.settings = values.settings || {};\n\t\t\tthis.settings.showIcon = values.settings.showIcon + \"\" || \"1\";\n\n\t\t\t// convert from \"0\" => 0\n\t\t\tthis.settings.showIcon = parseInt(this.settings.showIcon);\n\t\t}\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t/*\n   * @function columnHeader\n   * Return the column header for a webix grid component for this specific \n   * data field.\n   * @param {bool} isObjectWorkspace is this being used in the Object \n   *\t\t\t\t\t\t\t\t   workspace.\n   * @return {obj}  configuration obj\n   */\n\n\t}, {\n\t\tkey: 'columnHeader',\n\t\tvalue: function columnHeader(isObjectWorkspace) {\n\n\t\t\tvar config = {\n\t\t\t\tid: this.id,\n\t\t\t\theader: this.label\n\t\t\t};\n\n\t\t\tif (isObjectWorkspace) {\n\t\t\t\tif (this.settings.showIcon) {\n\t\t\t\t\tconfig.header = '<span class=\"webix_icon fa-{icon}\"></span>'.replace('{icon}', this.fieldIcon()) + config.header;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn config;\n\t\t}\n\t}], [{\n\t\tkey: 'clearEditor',\n\t\tvalue: function clearEditor(ids) {\n\n\t\t\tvar defaultValues = {\n\t\t\t\tlabel: '',\n\t\t\t\tcolumnName: '',\n\t\t\t\tshowIcon: 1\n\t\t\t};\n\n\t\t\tfor (var f in defaultValues) {\n\t\t\t\tvar component = $$(ids[f]);\n\t\t\t\tcomponent.setValue(defaultValues[f]);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'editorPopulate',\n\t\tvalue: function editorPopulate(ids, field) {\n\n\t\t\t$$(ids.label).setValue(field.label);\n\t\t\t$$(ids.columnName).setValue(field.columnName);\n\t\t\t$$(ids.showIcon).setValue(field.settings.showIcon);\n\t\t}\n\n\t\t/**\n   * @function definitionEditor\n   *\n   * Many DataFields share some base information for their usage\n   * in the AppBuilder.  The UI Editors have a common header\n   * and footer format, and this function allows child DataFields\n   * to not have to define those over and over.\n   *\n   * The common layout header contains:\n   *\t\t[Menu Label]\n   *\t\t[textBox: labelName]\n   *\t\t[text:    description]\n   *\n   * The defined DataField UI will be added at the end of this.\n   *\n   * This routine actually updated the live DataField definition\n   * with the common header info.\n   *\n   * @param {DataField} field  The DataField object to work with.\n   */\n\n\t}, {\n\t\tkey: 'definitionEditor',\n\t\tvalue: function definitionEditor(App, ids, _logic, Field) {\n\n\t\t\t/// TODO: maybe just pass in onChange instead of _logic\n\t\t\t/// if not onChange, then use our default:\n\n\t\t\t// setup our default labelOnChange functionality:\n\t\t\tvar _onChange = function onChange(newVal, oldVal) {\n\n\t\t\t\toldVal = oldVal || '';\n\n\t\t\t\tif (newVal != oldVal && oldVal == $$(ids.columnName).getValue()) {\n\t\t\t\t\t$$(ids.columnName).setValue(newVal);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// if they provided a labelOnChange() override, use that:\n\t\t\tif (_logic.labelOnChange) {\n\t\t\t\t_onChange = _logic.labelOnChange;\n\t\t\t}\n\n\t\t\tvar _ui = {\n\t\t\t\t// id: ids.component,\n\t\t\t\trows: [{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: \"<span class='webix_icon fa-{0}'></span>{1}\".replace('{0}', Field.icon).replace('{1}', Field.menuName)\n\t\t\t\t}, {\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tid: ids.label,\n\t\t\t\t\tname: 'label',\n\t\t\t\t\tlabel: App.labels.dataFieldHeaderLabel,\n\t\t\t\t\tplaceholder: App.labels.dataFieldHeaderLabelPlaceholder,\n\t\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\t\tcss: 'ab-new-label-name',\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: function onChange(newVal, oldVal) {\n\t\t\t\t\t\t\t_onChange(newVal, oldVal);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tid: ids.columnName,\n\t\t\t\t\tname: 'columnName',\n\t\t\t\t\tlabel: App.labels.dataFieldColumnName, // 'Name',\n\t\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\t\tplaceholder: App.labels.dataFieldColumnNamePlaceholder }, {\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tid: ids.fieldDescription,\n\t\t\t\t\tlabel: Field.description,\n\t\t\t\t\talign: \"right\"\n\t\t\t\t}, {\n\t\t\t\t\tview: 'checkbox',\n\t\t\t\t\tid: ids.showIcon,\n\t\t\t\t\tname: 'showIcon',\n\t\t\t\t\tlabelRight: App.labels.dataFieldShowIcon, // 'Show icon',\n\t\t\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\t\t\tvalue: true\n\t\t\t\t}]\n\t\t\t};\n\n\t\t\treturn _ui;\n\t\t}\n\t}, {\n\t\tkey: 'editorValues',\n\t\tvalue: function editorValues(settings) {\n\n\t\t\tvar obj = {\n\t\t\t\tlabel: settings.label,\n\t\t\t\tcolumnName: settings.columnName,\n\t\t\t\tsettings: settings\n\t\t\t};\n\n\t\t\tdelete settings.label;\n\t\t\tdelete settings.columnName;\n\n\t\t\treturn obj;\n\t\t}\n\t}]);\n\n\treturn ABField;\n}();\n\nexports.default = ABField;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _configDesktop = __webpack_require__(8);\n\nvar _configDesktop2 = _interopRequireDefault(_configDesktop);\n\nvar _configMobile = __webpack_require__(9);\n\nvar _configMobile2 = _interopRequireDefault(_configMobile);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @class config\n *\n * Manage our configuration settings.\n */\n\nexports.default = {\n\tconfig: function config() {\n\n\t\t// TODO: decide which config file to return here:\n\t\tif (window.innerWidth < 768) {\n\t\t\treturn _configMobile2.default;\n\t\t}\n\t\treturn _configDesktop2.default;\n\t}\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = {\n\n\t/**\n  * @function OP.Form.validationError\n  *\n  * creates an error object that can be used in OP.Form.isValidationError()\n  * to update a webix form with error validation messages.\n  *\n  * @param {json} error \tan error object\n  *\t\t\t\terror.name\t{string} the attribute name (Form.element[error.name])\n  *\t\t\t\terror.message {string} the message to display for the error\n  *\n  * @return {obj} an error object.\n  */\n\tvalidationError: function validationError(error, errorObj) {\n\n\t\terrorObj = errorObj || {\n\t\t\terror: 'E_VALIDATION',\n\t\t\tinvalidAttributes: {}\n\t\t};\n\n\t\tvar attr = errorObj.invalidAttributes;\n\t\tattr[error.name] = attr[error.name] || [];\n\n\t\tattr[error.name].push(error);\n\n\t\treturn errorObj;\n\t},\n\n\t/**\n  * @function OP.Form.isValidationError\n  *\n  * scans the given error to see if it is a sails' respone about an invalid\n  * value from one of the form elements.\n  *\n  * @codestart\n  * var form = $$('formID');\n  * var values = form.getValues();\n  * model.attr(values);\n  * model.save()\n  * .fail(function(err){\n  *     if (!OP.Form.isValidationError(err, form)) {\n  *         OP.error.log('Error saving current model ()', {error:err, values:values});\n  *     }\n  * })\n  * .then(function(newData){\n  * \n  * });\n  * @codeend\n  *\n  * @param {obj} error  the error response object\n  * @param {obj} form   the webix form instance (or reference)\n  * @return {bool}      true if error was about a form element.  false otherwise.\n  */\n\tisValidationError: function isValidationError(error, form) {\n\n\t\t// {bool} have we set focus to form component?\n\t\tvar hasFocused = false;\n\n\t\t// if we have an error object:\n\t\tif (error) {\n\n\t\t\t//// if the error obj is provided by Sails response, \n\t\t\t//// do some clean up on the error object:\n\n\n\t\t\t// dig down to sails provided error object:\n\t\t\tif (error.error && error.error == 'E_UNKNOWN' && error.raw && error.raw.length > 0) {\n\n\t\t\t\terror = error.raw[0];\n\t\t\t}\n\n\t\t\t// drill down to the embedded .err object if it exists\n\t\t\tif (error.err) {\n\t\t\t\terror = error.err;\n\t\t\t}\n\n\t\t\t//// Now process the error object\n\t\t\t//// \n\t\t\tif (error.error && error.error == 'E_VALIDATION' || error.code && error.code == 'E_VALIDATION') {\n\n\t\t\t\tvar attrs = error.invalidAttributes;\n\t\t\t\tif (attrs) {\n\n\t\t\t\t\tvar wasForm = false;\n\t\t\t\t\tfor (var attr in attrs) {\n\n\t\t\t\t\t\t// if this is a field in the form:\n\t\t\t\t\t\tif (form.elements[attr]) {\n\n\t\t\t\t\t\t\tvar errors = attrs[attr];\n\t\t\t\t\t\t\tvar msg = [];\n\t\t\t\t\t\t\terrors.forEach(function (err) {\n\t\t\t\t\t\t\t\tmsg.push(err.message);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// set the invalid error message\n\t\t\t\t\t\t\tform.markInvalid(attr, msg.join(', '));\n\n\t\t\t\t\t\t\t// set focus to the 1st form element we mark:\n\t\t\t\t\t\t\tif (!hasFocused) {\n\t\t\t\t\t\t\t\tform.elements[attr].focus();\n\t\t\t\t\t\t\t\thasFocused = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\twasForm = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (wasForm) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// if we missed updating our form with an error\n\t\t// this was not a validation error so return false\n\t\treturn false;\n\t}\n\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _restURLs = {\n\tfindAll: 'GET #url#',\n\tfindOne: 'GET #url#/{id}',\n\tcreate: 'POST #url#',\n\tupdate: 'PUT #url#/{id}',\n\tdestroy: 'DELETE #url#/{id}'\n};\n\nvar _Models = {};\n\nvar OPModel = function () {\n\tfunction OPModel(key, staticData, instanceData) {\n\t\t_classCallCheck(this, OPModel);\n\n\t\tthis.key = key;\n\t\tthis.staticData = staticData;\n\t\tthis.instanceData = instanceData;\n\t\tthis.Model = staticData.Model;\n\n\t\tthis.url = {};\n\t\tfor (var r in _restURLs) {\n\t\t\tthis.url[r] = staticData[r];\n\t\t}\n\t}\n\n\t_createClass(OPModel, [{\n\t\tkey: 'Models',\n\t\tvalue: function Models(Model) {\n\t\t\tthis.Model = Model;\n\t\t}\n\t}, {\n\t\tkey: 'findAll',\n\t\tvalue: function findAll(cond) {\n\t\t\tvar _this = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// NOTE: currently reusing AD.Model\n\n\t\t\t\t// var Model = AD.Model.get(this.key);\n\t\t\t\t// Model.findAll(cond)\n\n\t\t\t\tvar service = _this.service('findAll');\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: cond }).fail(reject).done(function (data) {\n\n\t\t\t\t\tdata = data.data || data;\n\n\t\t\t\t\t// our findAll() should return an array of items.\n\t\t\t\t\tif (!Array.isArray(data)) {\n\t\t\t\t\t\tdata = [data];\n\t\t\t\t\t}\n\n\t\t\t\t\t// return instances of this.Model if provided:\n\t\t\t\t\tif (_this.Model) {\n\t\t\t\t\t\tvar newList = []; // Model.List();\n\t\t\t\t\t\tdata.forEach(function (l) {\n\t\t\t\t\t\t\tif (l) {\n\t\t\t\t\t\t\t\tnewList.push(new _this.Model(l));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdata = newList;\n\t\t\t\t\t}\n\n\t\t\t\t\t// convert to a WebixDataCollection:\n\t\t\t\t\tvar dc = new webix.DataCollection({\n\t\t\t\t\t\tdata: data,\n\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonAfterDelete: function onAfterDelete(id) {}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// dc._toArray = function() {\n\t\t\t\t\t// \tvar data = [];\n\t\t\t\t\t// \tvar id = this.getFirstId();\n\t\t\t\t\t// \twhile(id) {\n\t\t\t\t\t// \t\tdata.push(this.getItem(id));\n\t\t\t\t\t// \t\tid = this.getNextId(id);\n\t\t\t\t\t// \t}\n\t\t\t\t\t// \treturn data;\n\t\t\t\t\t// }\n\n\n\t\t\t\t\tresolve(dc);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'findOne',\n\t\tvalue: function findOne(cond) {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar service = _this2.service('findOne');\n\n\t\t\t\tvar nURI = service.url;\n\t\t\t\tfor (var k in cond) {\n\t\t\t\t\tvar oURI = nURI;\n\t\t\t\t\tnURI = AD.util.string.replaceAll(nURI, \"{\" + k + \"}\", cond[k]);\n\n\t\t\t\t\t// if there was a change, remove k from cond:\n\t\t\t\t\tif (oURI != nURI) {\n\t\t\t\t\t\tdelete cond[k];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tservice.url = nURI;\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: cond }).fail(reject).done(function (item) {\n\t\t\t\t\tif (item.translate) item.translate();\n\n\t\t\t\t\tresolve(item.attr ? item.attr() : item);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'create',\n\t\tvalue: function create(attr) {\n\t\t\tvar _this3 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar service = _this3.service('create');\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: attr }).fail(reject).done(function (item) {\n\t\t\t\t\tif (item.translate) item.translate();\n\n\t\t\t\t\tresolve(item.attr ? item.attr() : item);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update(id, attr) {\n\t\t\tvar _this4 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar service = _this4.service('update', id);\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: attr }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'destroy',\n\t\tvalue: function destroy(id) {\n\t\t\tvar _this5 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar service = _this5.service('destroy', id);\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: {} }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'service',\n\t\tvalue: function service(key, id) {\n\t\t\tvar parts = this.url[key].split(' ');\n\t\t\tvar verb = parts[0].toLowerCase();\n\t\t\tvar uri = parts.pop();\n\n\t\t\tif (id) {\n\t\t\t\tvar key = '{id}';\n\t\t\t\turi = AD.util.string.replaceAll(uri, key, id);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tverb: verb,\n\t\t\t\turl: uri\n\t\t\t};\n\t\t}\n\t}]);\n\n\treturn OPModel;\n}();\n\nexports.default = {\n\n\textend: function extend(key, staticData, instance) {\n\n\t\t//\n\t\t// Create the AD.Model from this definition\n\t\t//\n\n\t\tif (staticData.restURL) {\n\t\t\tfor (var u in _restURLs) {\n\t\t\t\tstaticData[u] = _restURLs[u].replace('#url#', staticData.restURL);\n\t\t\t}\n\t\t}\n\n\t\t// var alreadyThere = AD.Model.get(key);\n\t\t// if (!alreadyThere) {\n\n\t\t// \tAD.Model.Base.extend(key, staticData, instance);\n\t\t// \tAD.Model.extend(key, staticData, instance);\n\t\t// }\n\n\t\t//\n\t\t// Now create our OP.Model:\n\t\t//\n\t\tvar curr = nameSpace(_Models, key);\n\t\tvar modelName = objectName(key);\n\n\t\tcurr[modelName] = new OPModel(key, staticData, instance);\n\t},\n\n\tget: function get(key) {\n\t\treturn findObject(_Models, key);\n\t}\n};\n\n/*\n * @function findObject\n *\n * Return the object specified by the given name space:\n *\n * @param {object} baseObj  The base object to search on\n *                          usually AD.models or AD.models_base\n *\n * @param {string} name   The provided namespace to parse and search for\n *                        The name can be spaced using '.' \n *                        eg.  'coolTool.Resource1' => AD.models.coolTool.Resource1\n *                             'coolerApp.tool1.Resource1' => AD.models.coolerApp.tool1.Resource1\n *\n * @returns {object}  the object resolved by the namespaced base \n *                    eg:  findObject(AD.models, 'Resource') => return AD.models.Resource\n *                         findObject(AD.models, 'coolTool.Resource1') => AD.models.coolTool.Resource1\n *\n *                    if an object is not found, null is returned.\n */\n\nvar findObject = function findObject(baseObj, name) {\n\n\t// first lets figure out our namespacing:\n\tvar nameList = name.split('.');\n\n\t// for each remaining name segments, make sure we have a \n\t// namespace container for it:\n\tvar curr = baseObj;\n\tnameList.forEach(function (name) {\n\n\t\tif (curr == null) {\n\t\t\tvar whoops = true;\n\t\t\tconsole.error('! current name segment is null.  Check your given name to make sure it is properly given: ', name);\n\t\t}\n\t\tif (curr) {\n\t\t\tif (typeof curr[name] == 'undefined') {\n\t\t\t\tcurr = null;\n\t\t\t}\n\t\t\tif (curr) curr = curr[name];\n\t\t}\n\t});\n\n\treturn curr;\n};\n\n/*\n * @function objectName\n *\n * parse the name and return the name of the object we will create.\n *\n * @param {string} name   The provided namespace to parse \n *                        The name can be spaced using '.' \n *\n * @returns {string}  the name of the model object \n *                    eg:  objectName('Resource') => return 'Resource'\n *                         objectName('coolTool.Resource1') => 'Resource1'\n */\nvar objectName = function objectName(name) {\n\n\t// first lets figure out our namespacing:\n\tvar nameList = name.split('.');\n\tvar objName = nameList.pop(); // remove the last one.\n\n\treturn objName;\n};\n\n/*\n * @function nameSpace\n *\n * Make sure the proper name space is created on the given base.\n *\n * @param {object} baseObj  The base object to create the namespace on\n *                          usually AD.models or AD.models_base\n *\n * @param {string} name   The provided namespace to parse and create\n *                        The name can be spaced using '.' \n *                        eg.  'coolTool.Resource1' => AD.models.coolTool.Resource1\n *                             'coolerApp.tool1.Resource1' => AD.models.coolerApp.tool1.Resource1\n *\n * @returns {object}  the object that represents the namespaced base \n *                    that the Model is to be created on.\n *                    eg:  nameSpace(AD.models, 'Resource') => return AD.models\n *                         nameSpace(AD.models, 'coolTool.Resource1') => AD.models.coolTool\n */\nvar nameSpace = function nameSpace(baseObj, name) {\n\n\t// first lets figure out our namespacing:\n\tvar nameList = name.split('.');\n\tvar controlName = nameList.pop(); // remove the last one.\n\n\t// for each remaining name segments, make sure we have a \n\t// namespace container for it:\n\tvar curr = baseObj;\n\tnameList.forEach(function (name) {\n\n\t\tif (typeof curr[name] == 'undefined') {\n\t\t\tcurr[name] = {};\n\t\t}\n\t\tcurr = curr[name];\n\t});\n\n\treturn curr;\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/*\n * OP.Multilingual\n *\n * A set of helpers for Multilingual Data.\n *\n */\n\nexports.default = {\n\n\t/**\n  * @function OP.Multilingual.translate\n  *\n  * Given a set of json data, pull out any multilingual translations\n  * and flatten those values to the base object.\n  *\n  * @param {obj} obj  The instance of the object being translated\n  * @param {json} json The json data being used for translation.\n  *\t\t\t\t\t\tThere should be json.translations = [ {transEntry}, ...]\n  *\t\t\t\t\t\twhere transEntry = {\n  *\t\t\t\t\t\t\tlanguage_code:'en',\n  *\t\t\t\t\t\t\tfield1:'value',\n  *\t\t\t\t\t\t\t...\n  *\t\t\t\t\t\t}\n  * @param {array} fields an Array of multilingual fields to pull to \n  *\t\t\t\t\t\t the obj[field] value.\n  *\n  */\n\ttranslate: function translate(obj, json, fields) {\n\n\t\tif (!json.translations) {\n\t\t\tjson.translations = [];\n\t\t}\n\n\t\tvar currLanguage = AD.lang.currentLanguage || 'en';\n\n\t\tif (fields && fields.length > 0) {\n\n\t\t\tjson.translations.forEach(function (t) {\n\t\t\t\t// find the translation for the current language code\n\t\t\t\tif (t.language_code == currLanguage) {\n\n\t\t\t\t\t// copy each field to the root object\n\t\t\t\t\tfields.forEach(function (f) {\n\t\t\t\t\t\tobj[f] = t[f] || ''; // default to '' if not found. \n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n  * @function OP.Multilingual.unTranslate\n  *\n  * Take the multilingual information in the base obj, and push that \n  * down into the json.translations data.\n  *\n  * @param {obj} obj  The instance of the object with the translation\n  * @param {json} json The json data being used for translation.\n  *\t\t\t\t\t\tThere should be json.translations = [ {transEntry}, ...]\n  *\t\t\t\t\t\twhere transEntry = {\n  *\t\t\t\t\t\t\tlanguage_code:'en',\n  *\t\t\t\t\t\t\tfield1:'value',\n  *\t\t\t\t\t\t\t...\n  *\t\t\t\t\t\t}\n  * @param {array} fields an Array of multilingual fields to pull from \n  *\t\t\t\t\t\t the obj[field] value.\n  *\n  */\n\tunTranslate: function unTranslate(obj, json, fields) {\n\n\t\tjson = json || {};\n\t\tfields = fields || [];\n\n\t\tif (!json.translations) {\n\t\t\tjson.translations = [];\n\t\t}\n\n\t\tvar currLanguage = AD.lang.currentLanguage || 'en';\n\n\t\tif (fields && fields.length > 0) {\n\n\t\t\tvar foundOne = false;\n\n\t\t\tjson.translations.forEach(function (t) {\n\t\t\t\t// find the translation for the current language code\n\t\t\t\tif (t.language_code == currLanguage) {\n\n\t\t\t\t\t// copy each field to the root object\n\t\t\t\t\tfields.forEach(function (f) {\n\t\t\t\t\t\tt[f] = obj[f];\n\t\t\t\t\t});\n\n\t\t\t\t\tfoundOne = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// if we didn't update an existing translation\n\t\t\tif (!foundOne) {\n\n\t\t\t\t// create a translation entry:\n\t\t\t\tvar trans = {};\n\n\t\t\t\t// assume current languageCode:\n\t\t\t\ttrans.language_code = currLanguage;\n\n\t\t\t\tfields.forEach(function (field) {\n\t\t\t\t\tif (obj[field] != null) {\n\t\t\t\t\t\ttrans[field] = obj[field];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tjson.translations.push(trans);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = {\n\n\tuuid: AD.util.uuid\n\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n/**\n * @class configDesktop\n *\n * Manage our configuration settings for Desktop styles.\n\n */\n\nexports.default = {\n\n\t// Application List\n\tappListRowHeight: 70,\n\n\t// button types\n\tbuttonWidthLarge: 200,\n\tbuttonWidthMedium: 150,\n\tbuttonWidthSmall: 100,\n\tbuttonWidthExtraSmall: 50,\n\n\t// tab types\n\ttabWidthLarge: 200,\n\ttabWidthMedium: 120,\n\ttabWidthSmall: 100,\n\ttabWidthExtraSmall: 50,\n\n\t// column types\n\n\n\t// spacers\n\tsmallSpacer: 10,\n\tmediumSpacer: 25,\n\tlargeSpacer: 50,\n\tappListSpacerRowHeight: 100,\n\tappListSpacerColMinWidth: 100,\n\tappListSpacerColMaxWidth: 200,\n\tobjectWorkspaceColWidth: 20,\n\n\t// labels\n\tlabelWidthSmall: 50,\n\tlabelWidthMedium: 80,\n\tlabelWidthLarge: 150,\n\tlabelWidthCheckbox: 0,\n\n\t// show elements on desktop\n\thideMobile: false\n\n};\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n/**\n * @class configMobile\n *\n * Manage our configuration settings for mobile styles.\n\n */\n\nexports.default = {\n\n\t// Application List\n\tappListRowHeight: 70,\n\n\t// button types\n\tbuttonWidthLarge: 200,\n\n\t// column types\n\n\n\t// spacers\n\tsmallSpacer: 1,\n\tmediumSpacer: 10,\n\tlargeSpacer: 20,\n\tappListSpacerRowHeight: 10,\n\tappListSpacerColMinWidth: 1,\n\tappListSpacerColMaxWidth: 1,\n\tobjectWorkspaceColWidth: 1,\n\n\t// labels\n\tlabelWidthSmall: 50,\n\tlabelWidthMedium: 80,\n\tlabelWidthLarge: 120,\n\tlabelWidthCheckbox: 0,\n\n\t// hide elements for mobile\n\thideMobile: true\n\n};\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ABFieldComponent\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * An ABFieldComponent defines the UI component used by an ABField to display it's properties.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _ABField = __webpack_require__(2);\n\nvar _ABField2 = _interopRequireDefault(_ABField);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABFieldComponent = function () {\n\tfunction ABFieldComponent(options) {\n\t\t_classCallCheck(this, ABFieldComponent);\n\n\t\tthis.options = options;\n\n\t\tthis.fieldDefaults = options.fieldDefaults || {};\n\n\t\tthis.elements = options.elements || function (App) {\n\t\t\treturn [];\n\t\t};\n\n\t\tthis.defaultValues = options.defaultValues || {};\n\n\t\tthis.rules = options.rules || {};\n\n\t\tthis.logic = options.logic || {};\n\n\t\tthis.init = options.init || function () {};\n\n\t\tthis.idBase = this.fieldDefaults.name || '??fieldName??';\n\n\t\t// this.ids = options.ids || {};\n\t\tthis.ids = {};\n\t}\n\n\t///\n\t/// Static Methods\n\t///\n\t/// Available to the Class level object.  These methods are not dependent\n\t/// on the instance values of the Application.\n\t///\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\t_createClass(ABFieldComponent, [{\n\t\tkey: 'component',\n\t\tvalue: function component(App) {\n\t\t\tvar _this = this;\n\n\t\t\t// for each provided element: create an this.ids for it:\n\t\t\tvar elements = this.elements(App, this);\n\n\t\t\t////\n\t\t\t//// prepare our ids\n\t\t\t////\n\n\t\t\tvar ids = {\n\n\t\t\t\tcomponent: App.unique(this.idBase + '_component'),\n\n\t\t\t\t// the common property fields\n\t\t\t\tlabel: App.unique(this.idBase + '_label'),\n\t\t\t\tcolumnName: App.unique(this.idBase + '_columnName'),\n\t\t\t\tfieldDescription: App.unique(this.idBase + '_fieldDescription'),\n\t\t\t\tshowIcon: App.unique(this.idBase + '_showIcon')\n\t\t\t};\n\n\t\t\tthis.eachDeep(elements, function (e) {\n\t\t\t\tif (e.name) {\n\t\t\t\t\t// if element has an .id, then use it in our list as is\n\t\t\t\t\tif (e.id) {\n\t\t\t\t\t\tids[e.name] = e.id;\n\t\t\t\t\t}\n\n\t\t\t\t\t// otherwise create a new entry in our base list\n\t\t\t\t\t_this.ids[e.name] = e.name;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// convert the entries in our base list into a globally acceptable id\n\t\t\t// and use that in our ids list if it doesn't already exist\n\t\t\tfor (var i in this.ids) {\n\t\t\t\tif (!ids[i]) {\n\t\t\t\t\tids[i] = App.unique(this.idBase + '_' + i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// update our elements to include our ids as we have them now.\n\t\t\tthis.eachDeep(elements, function (e) {\n\t\t\t\tif (e.name) {\n\t\t\t\t\te.id = ids[e.name];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t////\n\t\t\t//// our UI definition:\n\t\t\t////\n\n\t\t\t// our base form:\n\t\t\tvar _ui = {\n\t\t\t\tview: 'form',\n\t\t\t\tid: ids.component,\n\t\t\t\tautoheight: true,\n\t\t\t\tborderless: true,\n\t\t\t\telements: [\n\t\t\t\t\t// {\n\t\t\t\t\t// \tview: \"text\",\n\t\t\t\t\t// \tid: ids.textDefault,\n\t\t\t\t\t// \tname:'textDefault',\n\t\t\t\t\t// \tplaceholder: labels.component.defaultText\n\t\t\t\t\t// },\n\t\t\t\t\t// {\n\t\t\t\t\t// \tview: \"checkbox\",\n\t\t\t\t\t// \tid: ids.supportMultilingual,\n\t\t\t\t\t// \tname:'supportMultilingual',\n\t\t\t\t\t// \tlabelRight: labels.component.supportMultilingual,\n\t\t\t\t\t// \tlabelWidth: 0,\n\t\t\t\t\t// \tvalue: true\n\t\t\t\t\t// }\n\t\t\t\t],\n\n\t\t\t\trules: {\n\t\t\t\t\t'label': webix.rules.isNotEmpty,\n\t\t\t\t\t'columnName': webix.rules.isNotEmpty\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar _init = function _init() {\n\n\t\t\t\t// call our provided .init() routine\n\t\t\t\tthis.init(ids);\n\t\t\t};\n\n\t\t\tvar _logic = {\n\n\t\t\t\t/*\n     * @function clear\n     *\n     * clear the form.\n     */\n\t\t\t\tclear: function clear() {\n\n\t\t\t\t\t_ABField2.default.clearEditor(ids);\n\n\t\t\t\t\tfor (var f in _this.defaultValues) {\n\t\t\t\t\t\tvar component = $$(ids[f]);\n\t\t\t\t\t\tif (component) {\n\t\t\t\t\t\t\tcomponent.setValue(_this.defaultValues[f]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn('!! could not find component for default value: name:' + f + ' id:' + ids[f]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$$(ids.component).clearValidation();\n\n\t\t\t\t\t// perform provided .clear()\n\t\t\t\t\tif (_this.logic.clear) {\n\t\t\t\t\t\t_this.logic.clear(ids);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function hide\n     *\n     * hide this component.\n     */\n\t\t\t\thide: function hide() {\n\t\t\t\t\t$$(ids.component).clearValidation();\n\t\t\t\t\t$$(ids.component).hide(false, false);\n\n\t\t\t\t\t// perform provided .hide()\n\t\t\t\t\tif (_this.logic.hide) {\n\t\t\t\t\t\t_this.logic.hide(ids);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function isValid\n     *\n     * checks the current values on the componet to see if they are Valid\n     */\n\t\t\t\tisValid: function isValid() {\n\n\t\t\t\t\tvar isValid = $$(ids.component).validate();\n\n\t\t\t\t\t// perform provided .isValid()\n\t\t\t\t\tif (_this.logic.isValid) {\n\t\t\t\t\t\tisValid = _this.logic.isValid(ids, isValid);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn isValid;\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function labelOnChange\n     *\n     * The ABField.definitionEditor implements a default operation\n     * to update the value of the .columnName with the current value of \n     * label.\n     * \n     * if you want to override that functionality, implement this fn()\n     *\n     * @param {string} newVal\tThe new value of label\n     * @param {string} oldVal\tThe previous value\n     */\n\t\t\t\t// labelOnChange: function (newVal, oldVal) {\n\n\t\t\t\t// \t// When the Label value changes, update our Column Name value \n\t\t\t\t// \t// to match.\n\n\t\t\t\t// \toldVal = oldVal || '';\n\t\t\t\t// \tif (newVal != oldVal &&\n\t\t\t\t// \t\toldVal == $$(ids.columnName).getValue()) {\n\t\t\t\t// \t\t$$(ids.columnName).setValue(newVal);\n\t\t\t\t// \t}\n\t\t\t\t// },\n\n\n\t\t\t\t/*\n     * @function populate\n     *\n     * populate the form with the given ABField instance provided.\n     *\n     * @param {ABField} field\n     */\n\t\t\t\tpopulate: function populate(field) {\n\n\t\t\t\t\tconsole.error('TODO: .populate()');\n\n\t\t\t\t\t// populate the base ABField values:\n\t\t\t\t\t_ABField2.default.editorPopulate(ids, field);\n\n\t\t\t\t\t_this.eachDeep(elements, function (e) {\n\t\t\t\t\t\t$$(ids[e.name]).setValue(field.settings[e.name]);\n\t\t\t\t\t});\n\n\t\t\t\t\t// perform provided .populate()\n\t\t\t\t\tif (_this.logic.populate) {\n\t\t\t\t\t\t_this.logic.populate(ids, field);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function show\n     *\n     * show this component.\n     */\n\t\t\t\tshow: function show(a, b) {\n\t\t\t\t\t$$(ids.component).clearValidation();\n\t\t\t\t\t$$(ids.component).show(a, b);\n\n\t\t\t\t\t// perform provided .show()\n\t\t\t\t\tif (_this.logic.show) {\n\t\t\t\t\t\t_this.logic.show(ids);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function values\n     *\n     * return the values for this form.\n     * @return {obj}  \n     */\n\t\t\t\tvalues: function values() {\n\n\t\t\t\t\tvar settings = $$(ids.component).getValues();\n\t\t\t\t\tvar values = _ABField2.default.editorValues(settings);\n\n\t\t\t\t\tvalues.type = _this.fieldDefaults.type;\n\n\t\t\t\t\t// perform provided .values()\n\t\t\t\t\tif (_this.logic.values) {\n\t\t\t\t\t\tvalues = _this.logic.values(ids, values);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn values;\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\t// apply additional logic functions:\n\t\t\tfor (var l in this.logic) {\n\t\t\t\tif (!_logic[l]) _logic[l] = this.logic[l];\n\t\t\t}\n\n\t\t\t// make sure our given elements, have an id set:\n\n\n\t\t\t// get the common UI headers entries, and insert them above ours here:\n\t\t\t// NOTE: put this here so that _logic is defined.\n\t\t\tvar commonUI = _ABField2.default.definitionEditor(App, ids, _logic, this.fieldDefaults);\n\t\t\t_ui.elements = commonUI.rows.concat(elements);\n\n\t\t\tfor (var r in this.rules) {\n\t\t\t\t_ui.rules[r] = this.rules[r];\n\t\t\t}\n\n\t\t\t// return the current instance of this component:\n\t\t\treturn this._component = {\n\t\t\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\t\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\t\t\t// actions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t\t\t// DataField exposed actions:\n\t\t\t\tclear: _logic.clear,\n\t\t\t\thide: _logic.hide,\n\t\t\t\tisValid: _logic.isValid,\n\t\t\t\tpopulate: _logic.populate,\n\t\t\t\tshow: _logic.show,\n\t\t\t\tvalues: _logic.values,\n\n\t\t\t\t_logic: _logic // {obj} \tUnit Testing\n\t\t\t};\n\t\t}\n\n\t\t/**\n   * @function eachDeep\n   * a depth first fn to apply fn() to each element of our list.\n   * @param {array} list  array of webix elements to scan\n   * @param {fn} fn function to apply to each element.\n   */\n\n\t}, {\n\t\tkey: 'eachDeep',\n\t\tvalue: function eachDeep(list, fn) {\n\t\t\tvar _this2 = this;\n\n\t\t\tlist.forEach(function (e) {\n\n\t\t\t\t// process sub columns\n\t\t\t\tif (e.cols) {\n\t\t\t\t\t_this2.eachDeep(e.cols, fn);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// or rows\n\t\t\t\tif (e.rows) {\n\t\t\t\t\t_this2.eachDeep(e.rows, fn);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// or just process this element:\n\t\t\t\tfn(e);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'idsUnique',\n\t\tvalue: function idsUnique(ids, App) {\n\n\t\t\tfor (var i in ids) {\n\t\t\t\tif (ids[i] == '') {\n\t\t\t\t\tids[i] = App.unique(this.idBase + '_' + i);\n\t\t\t\t} else {\n\t\t\t\t\tids[i] = App.unique(this.idBase + '_' + ids[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ids;\n\t\t}\n\n\t\t// populate(field) {\n\t\t// \tthis._component.populate(field);\n\t\t// }\n\n\t}]);\n\n\treturn ABFieldComponent;\n}();\n\nexports.default = ABFieldComponent;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _ABFieldString = __webpack_require__(17);\n\nvar _ABFieldString2 = _interopRequireDefault(_ABFieldString);\n\nvar _ABFieldNumber = __webpack_require__(16);\n\nvar _ABFieldNumber2 = _interopRequireDefault(_ABFieldNumber);\n\nvar _ABFieldImage = __webpack_require__(15);\n\nvar _ABFieldImage2 = _interopRequireDefault(_ABFieldImage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* \n * Fields\n * A name => ABField  hash of the different ABFields available.\n */\nvar Fields = {}; /* \n                  * ABFieldManager\n                  * \n                  * An interface for managing the different ABFields available in our AppBuilder.\n                  *\n                  */\n\nFields[_ABFieldString2.default.defaults().name] = _ABFieldString2.default;\nFields[_ABFieldNumber2.default.defaults().name] = _ABFieldNumber2.default;\n\nFields[_ABFieldImage2.default.defaults().name] = _ABFieldImage2.default;\n\nexports.default = {\n\n\t/*\n  * @function allFields\n  * return all the currently defined ABFields in an array.\n  * @return [{ABField},...]\n  */\n\tallFields: function allFields() {\n\t\tvar fields = [];\n\t\tfor (var f in Fields) {\n\t\t\tfields.push(Fields[f]);\n\t\t}\n\t\treturn fields;\n\t},\n\n\t/*\n  * @function newField\n  * return an instance of an ABField based upon the values.type value.\n  * @return {ABField}\n  */\n\tnewField: function newField(values, object) {\n\n\t\tif (values.type) {\n\t\t\treturn new Fields[values.type](values, object);\n\t\t} else {\n\n\t\t\t//// TODO: what to do here?\n\t\t}\n\t}\n\n};\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\n__webpack_require__(18);\n\n__webpack_require__(22);\n\nvar _edittree = __webpack_require__(36);\n\nvar _edittree2 = _interopRequireDefault(_edittree);\n\nvar _editlist = __webpack_require__(35);\n\nvar _editlist2 = _interopRequireDefault(_editlist);\n\nvar _AppBuilder = __webpack_require__(41);\n\nvar _AppBuilder2 = _interopRequireDefault(_AppBuilder);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nOP.Component.extend('ab', function (App) {\n\n\tfunction L(key, altText) {\n\t\treturn AD.lang.label.getLabel(key) || altText;\n\t}\n\n\t// setup the common labels for our AppBuilder Application.\n\tApp.labels = {\n\t\tadd: L('ab.common.add', \"*Add\"),\n\t\tcreate: L('ab.common.create', \"*Create\"),\n\t\t\"delete\": L('ab.common.delete', \"*Delete\"),\n\t\tedit: L('ab.common.edit', \"*Edit\"),\n\t\t\"export\": L('ab.common.export', \"*Export\"),\n\t\tformName: L('ab.common.form.name', \"*Name\"),\n\t\t\"import\": L('ab.common.import', \"*Import\"),\n\t\tok: L('ab.common.ok', \"*Ok\"),\n\n\t\tcancel: L('ab.common.cancel', \"*Cancel\"),\n\t\tsave: L('ab.common.save', \"*Save\"),\n\n\t\tyes: L('ab.common.yes', \"*Yes\"),\n\t\tno: L('ab.common.no', \"*No\"),\n\n\t\tcreateErrorMessage: L('ab.common.create.error', \"*System could not create <b>{0}</b>.\"),\n\t\tcreateSuccessMessage: L('ab.common.create.success', \"*<b>{0}</b> is created.\"),\n\n\t\tupdateErrorMessage: L('ab.common.update.error', \"*System could not update <b>{0}</b>.\"),\n\t\tupdateSucessMessage: L('ab.common.update.success', \"*<b>{0}</b> is updated.\"),\n\n\t\tdeleteErrorMessage: L('ab.common.delete.error', \"*System could not delete <b>{0}</b>.\"),\n\t\tdeleteSuccessMessage: L('ab.common.delete.success', \"*<b>{0}</b> is deleted.\"),\n\n\t\t// Data Field  common Property labels:\n\t\tdataFieldHeaderLabel: L('ab.dataField.common.headerLabel', '*Label'),\n\t\tdataFieldHeaderLabelPlaceholder: L('ab.dataField.common.headerLabelPlaceholder', '*Header Name'),\n\n\t\tdataFieldColumnName: L('ab.dataField.common.columnName', '*Name'),\n\t\tdataFieldColumnNamePlaceholder: L('ab.dataField.common.columnNamePlaceholder', '*Column Name'),\n\n\t\tdataFieldShowIcon: L('ab.dataField.common.showIcon', '*show icon?')\n\t};\n\n\t// make instances of our Custom Components:\n\tOP.CustomComponent[_edittree2.default.key](App, 'edittree'); // ->  App.custom.edittree  now exists\n\tOP.CustomComponent[_editlist2.default.key](App, 'editlist'); // ->  App.custom.editlist  now exists\n\n\n\tvar ids = {\n\t\tcomponent: App.unique('app_builder_root')\n\t};\n\n\t// Define the external components used in this Component:\n\tvar AppChooser = OP.Component['ab_choose'](App);\n\tvar AppWorkspace = OP.Component['ab_work'](App);\n\n\t// This component's UI definition:\n\t// Application multi-views\n\tvar _ui = {\n\t\tid: ids.component,\n\t\tview: \"multiview\",\n\t\tborderless: true,\n\t\tanimate: false,\n\t\trows: [AppChooser.ui, AppWorkspace.ui]\n\t};\n\n\t// This component's init() definition:\n\tvar _init = function _init() {\n\n\t\tAppChooser.init();\n\t\tAppWorkspace.init();\n\n\t\t// start off only showing the App Chooser:\n\t\tApp.actions.transitionApplicationChooser();\n\n\t\t// perform an initial resize adjustment\n\t\t$$(ids.component).adjust();\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions // {ob}\t\thash of fn() to expose so other components can access.\n\t};\n});\n\n//// REFACTORING TODOs:\n// TODO: AppForm-> Permissions : refresh permission list, remove AppRole permission on Application.delete().\n\n\n// Import our Custom Components here:\n\n/*\n * AB\n *\n * The base AppBuilder component.  It manages these components:\n *   - ab_choose :  choose an application to work with\n *   - ab_work   :  load an application into the work area\n *\n */\n\n// import '../OP/OP'\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\n__webpack_require__(12);\n\nAD.Control.OpsTool.extend('BuildApp', {\n\n\tinit: function init(element, options) {\n\t\tvar self = this;\n\n\t\toptions = AD.defaults({\n\t\t\ttemplateDOM: '/opstools/BuildApp/views/BuildApp/BuildApp.ejs',\n\t\t\tresize_notification: 'BuildApp.resize',\n\t\t\ttool: null // the parent opsPortal Tool() object\n\t\t}, options);\n\t\tself.options = options;\n\n\t\t// Call parent init\n\t\tself._super(element, options);\n\n\t\tself.data = {};\n\n\t\tself.webixUiId = {\n\t\t\tloadingScreen: 'ab-loading-screen',\n\t\t\tsyncButton: 'ab-sync-button'\n\t\t};\n\n\t\tself.initDOM(function () {\n\t\t\tself.initWebixUI();\n\t\t});\n\t},\n\n\tinitDOM: function initDOM(cb) {\n\t\tvar _this = this;\n\n\t\tcan.view(this.options.templateDOM, {}, function (fragment) {\n\t\t\t_this.element.html(fragment);\n\n\t\t\t// _this.element.find(\".ab-app-list\").show();\n\t\t\t// _this.element.find(\".ab-app-workspace\").hide();\n\n\t\t\tcb();\n\t\t});\n\t},\n\n\tinitWebixUI: function initWebixUI() {\n\n\t\t// get the AppBuilder (AB) Webix Component\n\t\tvar AppBuilder = OP.Component['ab']();\n\t\tvar ui = AppBuilder.ui;\n\n\t\t// tell the AppBuilder where to attach\n\t\tui.container = 'ab-main-container';\n\n\t\t// instantiate the UI first\n\t\tthis.AppBuilder = webix.ui(ui);\n\n\t\t// then perform the init()\n\t\tAppBuilder.init();\n\t},\n\n\tresize: function resize(height) {\n\t\tvar self = this;\n\n\t\theight = height.height || height;\n\n\t\tvar appListDom = $(self.element);\n\n\t\tif (appListDom) {\n\t\t\tvar width = appListDom.parent().css('width');\n\t\t\tif (width) {\n\t\t\t\twidth = parseInt(width.replace('px', ''));\n\t\t\t}\n\t\t\tappListDom.width(width);\n\n\t\t\t// Removed this because the 140 pixels was causing the list to not scroll to the bottom of the page\n\t\t\t// var computedHeight = height - 140;\n\n\t\t\tvar computedHeight = height;\n\t\t\tconsole.log(\"computed height: \" + computedHeight);\n\t\t\tvar mh = parseInt(appListDom.css('min-height').replace('px', ''));\n\t\t\tconsole.log(\"min-height: \" + mh);\n\t\t\tif (mh < computedHeight) {\n\t\t\t\tappListDom.height(computedHeight);\n\t\t\t\t$('#ab-main-container').height(computedHeight);\n\t\t\t} else {\n\t\t\t\tappListDom.height(mh);\n\t\t\t\t$('#ab-main-container').height(mh);\n\t\t\t}\n\n\t\t\tif (this.AppBuilder) {\n\t\t\t\t// this.AppBuilder.define('height', height - 140);\n\t\t\t\tthis.AppBuilder.adjust();\n\t\t\t}\n\t\t}\n\t}\n\n});\n// import 'OP';\n// import '../../../../../assets/js/webix/webix'\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n// import OP from \"OP\"\n\n\nvar _ABFieldManager = __webpack_require__(11);\n\nvar _ABFieldManager2 = _interopRequireDefault(_ABFieldManager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction toDC(data) {\n\treturn new webix.DataCollection({\n\t\tdata: data\n\n\t});\n}\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABObject = function () {\n\tfunction ABObject(attributes, application) {\n\t\tvar _this = this;\n\n\t\t_classCallCheck(this, ABObject);\n\n\t\t/*\n  {\n  \tid: uuid(),\n  \tname: 'name',\n  \tlabelFormat: 'xxxxx',\n  \tisImported: 1/0,\n  \turlPath:'string',\n  \timportFromObject: 'string', // JSON Schema style reference:  '#[ABApplication.id]/objects/[ABObject.id]'\n  \t\t\t\t\t\t\t\t// to get other object:  ABApplication.objectFromRef(obj.importFromObject);\n  \ttranslations:[\n  \t\t{}\n  \t],\n  \tfields:[\n  \t\t{ABDataField}\n  \t]\n  }\n  */\n\n\t\t// ABApplication Attributes\n\t\tthis.id = attributes.id;\n\t\tthis.name = attributes.name || \"\";\n\t\tthis.labelFormat = attributes.labelFormat || \"\";\n\t\tthis.isImported = attributes.isImported || 0;\n\t\tthis.urlPath = attributes.urlPath || \"\";\n\t\tthis.importFromObject = attributes.importFromObject || \"\";\n\t\tthis.translations = attributes.translations;\n\n\t\tthis.objectWorkspace = attributes.objectWorkspace || {\n\t\t\thiddenFields: [] };\n\n\t\t// multilingual fields: label, description\n\t\tOP.Multilingual.translate(this, this, ['label']);\n\n\t\t// import all our ABObjects\n\t\tvar newFields = [];\n\t\t(attributes.fields || []).forEach(function (field) {\n\t\t\tnewFields.push(_this.fieldNew(field));\n\t\t});\n\t\tthis._fields = newFields;\n\n\t\t// link me to my parent ABApplication\n\t\tthis.application = application;\n\t}\n\n\t///\n\t/// Static Methods\n\t///\n\t/// Available to the Class level object.  These methods are not dependent\n\t/// on the instance values of the Application.\n\t///\n\n\n\t//// TODO: Refactor isValid() to ignore op and not error if duplicateName is own .id\n\n\t_createClass(ABObject, [{\n\t\tkey: \"isValid\",\n\t\tvalue: function isValid() {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar errors = null;\n\n\t\t\t// label/name must be unique:\n\t\t\tvar isNameUnique = this.application.objects(function (o) {\n\t\t\t\treturn o.name.toLowerCase() == _this2.name.toLowerCase();\n\t\t\t}).length == 0;\n\t\t\tif (!isNameUnique) {\n\t\t\t\terrors = OP.Form.validationError({\n\t\t\t\t\tname: 'name',\n\t\t\t\t\tmessage: L('ab.validation.object.name.unique', 'Object name must be unique (#name# already used in this Application)').replace('#name#', this.name)\n\t\t\t\t}, errors);\n\t\t\t}\n\n\t\t\t// Check the common validations:\n\t\t\t// TODO:\n\t\t\t// if (!inputValidator.validate(values.label)) {\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\t/// ABApplication data methods\n\n\n\t\t/**\n   * @method destroy()\n   *\n   * destroy the current instance of ABApplication\n   *\n   * also remove it from our _AllApplications\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"destroy\",\n\t\tvalue: function destroy() {\n\t\t\tif (this.id) {\n\t\t\t\tconsole.error('TODO: ABObject.destroy()');\n\t\t\t\t// return this.Model.destroy(this.id)\n\t\t\t\t// \t.then(()=>{\n\t\t\t\t// \t\t_AllApplications.remove(this.id);\n\t\t\t\t// \t});\n\t\t\t}\n\t\t}\n\n\t\t/**\n   * @method save()\n   *\n   * persist this instance of ABObject with it's parent ABApplication\n   *\n   *\n   * @return {Promise}\n   *\t\t\t\t\t\t.resolve( {this} )\n   */\n\n\t}, {\n\t\tkey: \"save\",\n\t\tvalue: function save() {\n\t\t\tvar _this3 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// if this is our initial save()\n\t\t\t\tif (!_this3.id) {\n\n\t\t\t\t\t_this3.id = OP.Util.uuid(); // setup default .id\n\t\t\t\t\t_this3.label = _this3.label || _this3.name;\n\t\t\t\t\t_this3.urlPath = _this3.urlPath || _this3.application.name + '/' + _this3.name;\n\t\t\t\t}\n\n\t\t\t\t_this3.application.objectSave(_this3).then(function () {\n\t\t\t\t\tresolve(_this3);\n\t\t\t\t}).catch(function (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\n\t}, {\n\t\tkey: \"toObj\",\n\t\tvalue: function toObj() {\n\n\t\t\tOP.Multilingual.unTranslate(this, this, [\"label\"]);\n\n\t\t\t// // for each Object: compile to json\n\t\t\tvar currFields = [];\n\t\t\tthis._fields.forEach(function (obj) {\n\t\t\t\tcurrFields.push(obj.toObj());\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tname: this.name,\n\t\t\t\tlabelFormat: this.labelFormat,\n\t\t\t\tisImported: this.isImported,\n\t\t\t\turlPath: this.urlPath,\n\t\t\t\timportFromObject: this.importFromObject,\n\t\t\t\tobjectWorkspace: this.objectWorkspace,\n\t\t\t\ttranslations: this.translations,\n\t\t\t\tfields: currFields\n\t\t\t};\n\t\t}\n\n\t\t///\n\t\t/// Fields\n\t\t///\n\n\n\t\t/**\n   * @method fields()\n   *\n   * return an array of all the ABFields for this ABObject.\n   *\n   * @return {array}\n   */\n\n\t}, {\n\t\tkey: \"fields\",\n\t\tvalue: function fields(filter) {\n\n\t\t\tfilter = filter || function () {\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\treturn this._fields.filter(filter);\n\t\t}\n\n\t\t/**\n   * @method fieldNew()\n   *\n   * return an instance of a new (unsaved) ABField that is tied to this\n   * ABObject.\n   *\n   * NOTE: this new field is not included in our this.fields until a .save()\n   * is performed on the field.\n   *\n   * @return {ABField}\n   */\n\n\t}, {\n\t\tkey: \"fieldNew\",\n\t\tvalue: function fieldNew(values) {\n\t\t\t// NOTE: ABFieldManager returns the proper ABFieldXXXX instance.\n\t\t\treturn _ABFieldManager2.default.newField(values, this);\n\t\t}\n\n\t\t/**\n   * @method fieldRemove()\n   *\n   * remove the given ABField from our ._fields array and persist the current\n   * values.\n   *\n   * @param {ABField} field The instance of the field to remove.\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"fieldRemove\",\n\t\tvalue: function fieldRemove(field) {\n\t\t\tthis._fields = this.fields(function (o) {\n\t\t\t\treturn o.id != field.id;\n\t\t\t});\n\n\t\t\treturn this.save();\n\t\t}\n\n\t\t/**\n   * @method fieldSave()\n   *\n   * save the given ABField in our ._fields array and persist the current\n   * values.\n   *\n   * @param {ABField} field The instance of the field to save.\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"fieldSave\",\n\t\tvalue: function fieldSave(field) {\n\t\t\tvar isIncluded = this.fields(function (o) {\n\t\t\t\treturn o.id == field.id;\n\t\t\t}).length > 0;\n\t\t\tif (!isIncluded) {\n\t\t\t\tthis._fields.push(field);\n\t\t\t}\n\n\t\t\treturn this.save();\n\t\t}\n\n\t\t///\n\t\t///\tObject Workspace Settings\n\t\t///\n\n\n\t}, {\n\t\tkey: \"columnHeaders\",\n\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t// return the column headers for this object\n\t\t// @param {bool} isObjectWorkspace  return the settings saved for the object workspace\n\t\tvalue: function columnHeaders(isObjectWorkspace) {\n\n\t\t\tvar headers = [];\n\t\t\tvar idLookup = {};\n\n\t\t\t// get the header for each of our fields:\n\t\t\tthis._fields.forEach(function (f) {\n\t\t\t\tvar header = f.columnHeader(isObjectWorkspace);\n\t\t\t\theaders.push(header);\n\t\t\t\tidLookup[header.id] = f.id; // name => id\n\t\t\t});\n\n\t\t\t// update our headers with any settings applied in the Object Workspace\n\t\t\tif (isObjectWorkspace) {\n\n\t\t\t\t// set column width to adjust:true by default;\n\t\t\t\theaders.forEach(function (h) {\n\t\t\t\t\th.adjust = true;\n\t\t\t\t});\n\n\t\t\t\t// hide any hiddenfields\n\t\t\t\tthis.workspaceHiddenFields.forEach(function (hfID) {\n\t\t\t\t\theaders.forEach(function (h) {\n\t\t\t\t\t\tif (idLookup[h.id] == hfID) {\n\t\t\t\t\t\t\th.hidden = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn headers;\n\t\t}\n\t}, {\n\t\tkey: \"workspaceHiddenFields\",\n\t\tget: function get() {\n\t\t\treturn this.objectWorkspace.hiddenFields;\n\t\t},\n\t\tset: function set(fields) {\n\t\t\tthis.objectWorkspace.hiddenFields = fields;\n\t\t}\n\t}]);\n\n\treturn ABObject;\n}();\n\nexports.default = ABObject;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _ABField2 = __webpack_require__(2);\n\nvar _ABField3 = _interopRequireDefault(_ABField2);\n\nvar _ABFieldComponent = __webpack_require__(10);\n\nvar _ABFieldComponent2 = _interopRequireDefault(_ABFieldComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ABFieldImage\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * An ABFieldImage defines a Image field type.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABFieldImageDefaults = {\n\tname: 'image', // unique key to reference this specific DataField\n\ttype: 'string', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\ticon: 'file-image-o', // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName: L('ab.dataField.image.menuName', '*Image Attachment'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.image.description', '*Attach an image to this object.')\n};\n\nvar defaultValues = {\n\t'useWidth': 0,\n\t'imageWidth': '',\n\t'useHeight': 0,\n\t'imageHeight': ''\n};\n\n/**\n * ABFieldImageComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\nvar ABFieldImageComponent = new _ABFieldComponent2.default({\n\n\tfieldDefaults: ABFieldImageDefaults,\n\n\telements: function elements(App, field) {\n\n\t\tvar ids = {\n\t\t\timageWidth: '',\n\t\t\timageHeight: ''\n\t\t};\n\t\tids = field.idsUnique(ids, App);\n\n\t\treturn [{\n\t\t\tcols: [{\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname: \"useWidth\",\n\t\t\t\tlabelRight: L('ab.dataField.image.width', \"*width\"),\n\t\t\t\twidth: 80,\n\t\t\t\tlabelWidth: 0,\n\t\t\t\tvalue: 1,\n\t\t\t\tclick: function click() {\n\t\t\t\t\tif (this.getValue()) $$(ids.imageWidth).enable();else $$(ids.imageWidth).disable();\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tview: 'text',\n\t\t\t\tname: 'imageWidth',\n\t\t\t\tid: ids.imageWidth\n\t\t\t}]\n\t\t}, {\n\t\t\tcols: [{\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname: \"useHeight\",\n\t\t\t\t// id:componentIds.useHeight, \n\t\t\t\tlabelRight: L('ab.dataField.image.height', \"*height\"),\n\t\t\t\twidth: 80,\n\t\t\t\tlabelWidth: 0,\n\t\t\t\tvalue: 1,\n\t\t\t\tclick: function click() {\n\t\t\t\t\tif (this.getValue()) $$(ids.imageHeight).enable();else $$(ids.imageHeight).disable();\n\t\t\t\t}\n\n\t\t\t}, {\n\t\t\t\tview: 'text',\n\t\t\t\tname: 'imageHeight',\n\t\t\t\tid: ids.imageHeight\n\t\t\t}]\n\t\t}];\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules: {\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic: {},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit: function init(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n});\n\nvar ABFieldImage = function (_ABField) {\n\t_inherits(ABFieldImage, _ABField);\n\n\tfunction ABFieldImage(values, object) {\n\t\t_classCallCheck(this, ABFieldImage);\n\n\t\t/*\n  {\n  settings: {\n  'useWidth':0,\n  'imageWidth':'',\n  'useHeight': 0,\n  'imageHeight': ''\n  }\n  }\n  */\n\n\t\t// we're responsible for setting up our specific settings:\n\t\tvar _this = _possibleConstructorReturn(this, (ABFieldImage.__proto__ || Object.getPrototypeOf(ABFieldImage)).call(this, values, object, ABFieldImageDefaults));\n\n\t\tfor (var dv in defaultValues) {\n\t\t\t_this.settings[dv] = values.settings[dv] || defaultValues[dv];\n\t\t}\n\n\t\t// text to Int:\n\t\t_this.settings.useWidth = parseInt(_this.settings.useWidth);\n\t\t_this.settings.useHeight = parseInt(_this.settings.useHeight);\n\t\treturn _this;\n\t}\n\n\t// return the default values for this DataField\n\n\n\t_createClass(ABFieldImage, [{\n\t\tkey: \"isValid\",\n\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\tvalue: function isValid() {\n\n\t\t\tvar errors = _get(ABFieldImage.prototype.__proto__ || Object.getPrototypeOf(ABFieldImage.prototype), \"isValid\", this).call(this);\n\n\t\t\t// errors = OP.Form.validationError({\n\t\t\t// \tname:'columnName',\n\t\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t\t// }, errors);\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\t\t// toObj () {\n\n\t\t// \tvar obj = super.toObj();\n\n\t\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t\t// \treturn obj;\n\t\t// }\n\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t// return the grid column header definition for this instance of ABFieldImage\n\n\t}, {\n\t\tkey: \"columnHeader\",\n\t\tvalue: function columnHeader(isObjectWorkspace) {\n\t\t\tvar config = _get(ABFieldImage.prototype.__proto__ || Object.getPrototypeOf(ABFieldImage.prototype), \"columnHeader\", this).call(this, isObjectWorkspace);\n\n\t\t\tconfig.editor = 'text'; // '[edit_type]'   for your unique situation\n\t\t\tconfig.sort = 'string'; // '[sort_type]'   for your unique situation\n\n\t\t\treturn config;\n\t\t}\n\t}], [{\n\t\tkey: \"defaults\",\n\t\tvalue: function defaults() {\n\t\t\treturn ABFieldImageDefaults;\n\t\t}\n\n\t\t/*\n   * @function propertiesComponent\n   *\n   * return a UI Component that contains the property definitions for this Field.\n   *\n   * @param {App} App the UI App instance passed around the Components.\n   * @return {Component}\n   */\n\n\t}, {\n\t\tkey: \"propertiesComponent\",\n\t\tvalue: function propertiesComponent(App) {\n\t\t\treturn ABFieldImageComponent.component(App);\n\t\t}\n\t}]);\n\n\treturn ABFieldImage;\n}(_ABField3.default);\n\n//// NOTE: if you need a unique [edit_type] by your returned config.editor above:\n// webix.editors = {\n//   \"[edit_type]\": {\n//     focus: function () {...}\n//     getValue: function () {...},\n//     setValue: function (value) {...},\n//     render: function () {...}\n//   }\n// };\n\n\n//// NOTE: if you need a unique [sort_type] by your returned config.sort above:\n// webix.DataStore.prototype.sorting.as.[sort_type] = function(a,b){ \n//     return a > b ? 1 : -1; \n// }\n\n\nexports.default = ABFieldImage;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _ABField2 = __webpack_require__(2);\n\nvar _ABField3 = _interopRequireDefault(_ABField2);\n\nvar _ABFieldComponent = __webpack_require__(10);\n\nvar _ABFieldComponent2 = _interopRequireDefault(_ABFieldComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ABFieldNumber\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * An ABFieldNumber defines a Number field type.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABFieldNumberDefaults = {\n\tname: 'number', // unique key to reference this specific DataField\n\ttype: 'number', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\t// NOTE: the server side implementation will read the instance.settings and return either a:\n\t//\t'float', or 'integer'\n\n\ticon: 'slack', // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName: L('ab.dataField.number.menuName', '*Number'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.number.description', '*A Float or Integer Value')\n};\n\nvar formatList = [{ id: 'none', value: L('ab.dataField.number.none', \"*None\") }, { id: 'dollar', value: L('ab.dataField.number.format.dollar', \"$\"), sign: \"$\", position: \"prefix\" }, { id: 'pound', value: L('ab.dataField.number.format.pound', \"£\"), sign: \"£\", position: \"prefix\" }, { id: 'euroBefore', value: L('ab.dataField.number.format.euroBefore', \"€ (before)\"), sign: \"€\", position: \"prefix\" }, { id: 'euroAfter', value: L('ab.dataField.number.format.euroAfter', \"€ (after)\"), sign: \"€\", position: \"postfix\" }, { id: 'percent', value: L('ab.dataField.number.format.percent', \"%\"), sign: \"%\", position: \"postfix\" }];\n\nvar defaultValues = {\n\t'allowRequired': 0,\n\t'numberDefault': '',\n\t'typeFormat': 'none',\n\t'typeDecimals': 'none',\n\t'typeDecimalPlaces': 'none',\n\t'typeRounding': 'none',\n\t'typeThousands': 'none',\n\t'validation': 0,\n\t'validateMinimum': '',\n\t'validateMaximum': ''\n};\n\n/**\n * ABFieldNumberComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\nvar ABFieldNumberComponent = new _ABFieldComponent2.default({\n\n\tfieldDefaults: ABFieldNumberDefaults,\n\n\telements: function elements(App, field) {\n\n\t\t// var idBase = ABFieldNumberDefaults.type;\n\t\t// var ids = {\n\t\t// \ttypeDecimalPlaces: this.unique(App, '_typeDecimalPlaces'),  // App.unique(idBase +'_typeDecimalPlaces'),\n\t\t// \ttypeRounding: App.unique(idBase +'_typeRounding'),\n\t\t// \tvalidateMinimum: App.unique(idBase + '_validateMinimum'),\n\t\t// \tvalidateMaximum: App.unique(idBase + '_validateMaximum')\n\t\t// }\n\n\t\tvar ids = {\n\t\t\ttypeDecimalPlaces: '',\n\t\t\ttypeRounding: '',\n\t\t\tvalidateMinimum: '',\n\t\t\tvalidateMaximum: ''\n\t\t};\n\t\tids = field.idsUnique(ids, App);\n\n\t\treturn [\n\t\t// {\n\t\t// \tview: \"text\",\n\t\t// \tname:'textDefault',\n\t\t// \tlabelWidth: App.config.labelWidthLarge,\n\t\t// \tplaceholder: L('ab.dataField.string.default', '*Default text')\n\t\t// },\n\t\t{\n\t\t\tview: \"checkbox\",\n\t\t\t// id: componentIds.allowRequired,\n\t\t\tname: \"allowRequired\",\n\t\t\tlabelRight: L(\"ab.dataField.number.required\", \"*Required\"),\n\t\t\tinputWidth: 130,\n\t\t\tlabelWidth: 0\n\t\t}, {\n\t\t\tview: \"text\",\n\t\t\tlabel: L(\"ab.dataField.number.defaultValue\", \"*Default Value\"),\n\t\t\tlabelWidth: \"100\",\n\t\t\t// id: componentIds.numberDefault,\n\t\t\tname: \"numberDefault\",\n\t\t\tplaceholder: L('ab.dataField.number.defaultNumber', '*Default number'),\n\t\t\ton: {\n\t\t\t\tonChange: function onChange(newVal, oldVal) {\n\t\t\t\t\t// Validate number\n\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t// $$(componentIds.numberDefault).setValue(oldVal);\n\t\t\t\t\t\tthis.setValue(oldVal);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tview: \"richselect\",\n\t\t\t// id: componentIds.typeFormat,\n\t\t\tname: 'typeFormat',\n\t\t\tlabel: L('ab.dataField.number.format', \"*Format\"),\n\t\t\tvalue: 'none',\n\t\t\toptions: formatList\n\t\t}, {\n\t\t\tcols: [{\n\t\t\t\tview: \"richselect\",\n\t\t\t\t// id: componentIds.typeDecimals,\n\t\t\t\tname: 'typeDecimals',\n\t\t\t\tlabel: L('ab.dataField.number.decimals', \"*Decimals\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\toptions: [{ id: 'none', value: L('ab.dataField.number.none', \"*None\") }, { id: 'period', value: L('ab.dataField.number.period', \"*Period\") }, { id: 'comma', value: L('ab.dataField.number.comma', \"*Comma\") }],\n\t\t\t\ton: {\n\t\t\t\t\t'onChange': function onChange(newValue, oldValue) {\n\t\t\t\t\t\tif (newValue == 'none') {\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).disable();\n\t\t\t\t\t\t\t$$(ids.typeRounding).disable();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).enable();\n\t\t\t\t\t\t\t$$(ids.typeRounding).enable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tview: \"richselect\",\n\t\t\t\tid: ids.typeDecimalPlaces,\n\t\t\t\tname: 'typeDecimalPlaces',\n\t\t\t\tlabel: \"Places\",\n\t\t\t\tvalue: 'none',\n\t\t\t\tdisabled: true,\n\t\t\t\toptions: [{ id: 'none', value: \"0\" }, { id: 1, value: \"1\" }, { id: 2, value: \"2\" }, { id: 3, value: \"3\" }, { id: 4, value: \"4\" }, { id: 5, value: \"5\" }, { id: 10, value: \"10\" }]\n\t\t\t}]\n\t\t}, {\n\t\t\tview: \"radio\",\n\t\t\tid: ids.typeRounding,\n\t\t\tname: 'typeRounding',\n\t\t\tlabel: L('ab.dataField.number.rounding', \"*Rounding\"),\n\t\t\tvalue: 'none',\n\t\t\tvertical: true,\n\t\t\tdisabled: true,\n\t\t\toptions: [{ id: 'none', value: L('ab.dataField.number.default', \"*Default\") }, { id: 'roundUp', value: L('ab.dataField.number.roundUp', \"*Round Up\") }, { id: 'roundDown', value: L('ab.dataField.number.roundDown', \"*Round Down\") }]\n\t\t}, {\n\t\t\tview: \"radio\",\n\t\t\t// id: componentIds.typeThousands,\n\t\t\tname: 'typeThousands',\n\t\t\tlabel: L('ab.dataField.number.thousands', \"*Thousands\"),\n\t\t\tvalue: 'none',\n\t\t\tvertical: true,\n\t\t\toptions: [{ id: 'none', value: L('ab.dataField.number.none', \"*None\") }, { id: 'comma', value: L('ab.dataField.number.comma', \"*Comma\") }, { id: 'period', value: L('ab.dataField.number.period', \"*Period\") }, { id: 'space', value: L('ab.dataField.number.space', \"*Space\") }]\n\t\t}, {\n\t\t\tview: 'checkbox',\n\t\t\t// id: componentIds.validate,\n\t\t\tname: 'validation',\n\t\t\tlabelWidth: 0,\n\t\t\tlabelRight: L('ab.dataField.number.validation', \"*Validation\"),\n\t\t\ton: {\n\t\t\t\tonChange: function onChange(newVal) {\n\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\t$$(ids.validateMinimum).enable();\n\t\t\t\t\t\t$$(ids.validateMaximum).enable();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$$(ids.validateMinimum).disable();\n\t\t\t\t\t\t$$(ids.validateMaximum).disable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tview: 'text',\n\t\t\tid: ids.validateMinimum,\n\t\t\tname: 'validateMinimum',\n\t\t\tlabel: L('ab.dataField.number.minimum', \"*Minimum\"),\n\t\t\ton: {\n\t\t\t\tonChange: function onChange(newVal, oldVal) {\n\t\t\t\t\t// Validate number\n\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t$$(ids.validateMinimum).setValue(oldVal || '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tview: 'text',\n\t\t\tid: ids.validateMaximum,\n\t\t\tname: 'validateMaximum',\n\t\t\tlabel: L('ab.dataField.number.maximum', \"*Maximum\"),\n\t\t\ton: {\n\t\t\t\tonChange: function onChange(newVal, oldVal) {\n\t\t\t\t\t// Validate number\n\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t$$(ids.validateMaximum).setValue(oldVal || '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}];\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules: {\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic: {\n\n\t\tpopulate: function populate(ids, values) {\n\t\t\tif (values.settings.validation) {\n\t\t\t\t$$(ids.validateMinimum).enable();\n\t\t\t\t$$(ids.validateMaximum).enable();\n\t\t\t} else {\n\t\t\t\t$$(ids.validateMinimum).disable();\n\t\t\t\t$$(ids.validateMaximum).disable();\n\t\t\t}\n\t\t}\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit: function init(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n});\n\nvar ABFieldNumber = function (_ABField) {\n\t_inherits(ABFieldNumber, _ABField);\n\n\tfunction ABFieldNumber(values, object) {\n\t\t_classCallCheck(this, ABFieldNumber);\n\n\t\t/*\n  {\n  settings: {\n  'allowRequired':0,\n  'numberDefault':null,\n  'typeFormat': 'none',\n  'typeDecimals': 'none',\n  'typeDecimalPlaces': 'none',\n  'typeRounding' : 'none',\n  'typeThousands': 'none',\n  'validation':0,\n  'validateMinimum':null,\n  'validateMaximum':null\n  }\n  }\n  */\n\n\t\t// we're responsible for setting up our specific settings:\n\t\tvar _this = _possibleConstructorReturn(this, (ABFieldNumber.__proto__ || Object.getPrototypeOf(ABFieldNumber)).call(this, values, object, ABFieldNumberDefaults));\n\n\t\tfor (var dv in defaultValues) {\n\t\t\t_this.settings[dv] = values.settings[dv] || defaultValues[dv];\n\t\t}\n\n\t\t// text to Int:\n\t\t_this.settings.allowRequired = parseInt(_this.settings.allowRequired);\n\t\t_this.settings.validation = parseInt(_this.settings.validation);\n\n\t\treturn _this;\n\t}\n\n\t// return the default values for this DataField\n\n\n\t_createClass(ABFieldNumber, [{\n\t\tkey: \"isValid\",\n\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\tvalue: function isValid() {\n\n\t\t\tvar errors = _get(ABFieldNumber.prototype.__proto__ || Object.getPrototypeOf(ABFieldNumber.prototype), \"isValid\", this).call(this);\n\n\t\t\t// errors = OP.Form.validationError({\n\t\t\t// \tname:'columnName',\n\t\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t\t// }, errors);\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\t\t// toObj () {\n\n\t\t// \tvar obj = super.toObj();\n\n\t\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t\t// \treturn obj;\n\t\t// }\n\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t// return the grid column header definition for this instance of ABFieldNumber\n\n\t}, {\n\t\tkey: \"columnHeader\",\n\t\tvalue: function columnHeader(isObjectWorkspace) {\n\t\t\tvar config = _get(ABFieldNumber.prototype.__proto__ || Object.getPrototypeOf(ABFieldNumber.prototype), \"columnHeader\", this).call(this, isObjectWorkspace);\n\n\t\t\tconfig.editor = 'number'; // [edit_type] simple inline editing.\n\t\t\tconfig.sort = 'int'; // [sort_type]\n\n\t\t\treturn config;\n\t\t}\n\t}], [{\n\t\tkey: \"defaults\",\n\t\tvalue: function defaults() {\n\t\t\treturn ABFieldNumberDefaults;\n\t\t}\n\n\t\t/*\n   * @function propertiesComponent\n   *\n   * return a UI Component that contains the property definitions for this Field.\n   *\n   * @param {App} App the UI App instance passed around the Components.\n   * @return {Component}\n   */\n\n\t}, {\n\t\tkey: \"propertiesComponent\",\n\t\tvalue: function propertiesComponent(App) {\n\t\t\treturn ABFieldNumberComponent.component(App);\n\t\t}\n\t}]);\n\n\treturn ABFieldNumber;\n}(_ABField3.default);\n\n// NOTE: if you need a unique [edit_type] by your returned config.editor above:\n\n\nwebix.editors.number = webix.extend({\n\t// TODO : Validate number only\n}, webix.editors.text);\n\n//// NOTE: if you need a unique [sort_type] by your returned config.sort above:\n// webix.DataStore.prototype.sorting.as.[sort_type] = function(a,b){ \n//     return a > b ? 1 : -1; \n// }\n\nexports.default = ABFieldNumber;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _ABField2 = __webpack_require__(2);\n\nvar _ABField3 = _interopRequireDefault(_ABField2);\n\nvar _ABFieldComponent = __webpack_require__(10);\n\nvar _ABFieldComponent2 = _interopRequireDefault(_ABFieldComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ABFieldString\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * An ABFieldString defines a string field type.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABFieldStringDefaults = {\n\tname: 'string', // unique key to reference this specific DataField\n\ttype: 'string', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\ticon: 'font', // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName: L('ab.dataField.string.menuName', '*Single line text'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.string.description', '*short string value')\n};\n\n/**\n * ABFieldStringComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\n// var ABFieldStringComponent = function(App) {\n\n// \tlabels.common = App.labels;\n\n// \tvar idBase = 'ab_datafield_string';\n\n\n// \tvar componentDefaults = {\n// \t\ttextDefault: '', \n// \t\tsupportMultilingual:1\n// \t};\n\n\n// \tvar ids = {\n\n// \t\tcomponent: App.unique(idBase+'_component'),\n\n\n// \t\ttextDefault: App.unique(idBase+'_textdefault'),\n// \t\tsupportMultilingual: App.unique(idBase+'_supportMultilingual'),\n\n\n// \t\t// the common property fields\n// \t\tlabel: App.unique(idBase+'_label'),\n// \t\tcolumnName: App.unique(idBase+'_columnName'),\n// \t\tfieldDescription: App.unique(idBase+'_fieldDescription'),\n// \t\tshowIcon: App.unique(idBase+'_showIcon'),\n// \t}\n\n\n// \t//// NOTE: we merge in the common headers below.\n// \tvar _ui = {\n// \t\tview:'form',\n// \t\tid: ids.component,\n// \t\tautoheight:true,\n// \t\tborderless:true,\n// \t\telements: [\n// \t\t\t{\n// \t\t\t\tview: \"text\",\n// \t\t\t\tid: ids.textDefault,\n// \t\t\t\tname:'textDefault',\n// \t\t\t\tplaceholder: labels.component.defaultText\n// \t\t\t},\n// \t\t\t{\n// \t\t\t\tview: \"checkbox\",\n// \t\t\t\tid: ids.supportMultilingual,\n// \t\t\t\tname:'supportMultilingual',\n// \t\t\t\tlabelRight: labels.component.supportMultilingual,\n// \t\t\t\tlabelWidth: 0,\n// \t\t\t\tvalue: true\n// \t\t\t}\n// \t\t],\n\n// \t\trules:{\n// \t\t\t'label':webix.rules.isNotEmpty,\n// \t\t\t'columnName':webix.rules.isNotEmpty\n// \t\t}\n// \t}\n\n\n// \tvar _init = function() {\n\n// \t\t// perform any additional setup actions.\n// \t\t// for example, don't want to show the description, then .hide() it here:\n// \t\t// $$(ids.fieldDescription).hide();\n// \t}\n\n\n// \tvar _logic = {\n\n// \t\t/*\n// \t\t * @function clear\n// \t\t *\n// \t\t * clear the form.\n// \t\t */\n// \t\tclear: function () {\n\n// \t\t\tABField.clearEditor(App, ids);\n\n// \t\t\tfor(var f in componentDefaults) { \n// \t\t\t\tvar component = $$(ids[f]);\n// \t\t\t\tcomponent.setValue(componentDefaults[f]);\n// \t\t\t}\n\n// \t\t\t$$(ids.component).clearValidation();\n// \t\t},\n\n\n// \t\t/*\n// \t\t * @function isValid\n// \t\t *\n// \t\t * checks the current values on the componet to see if they are Valid\n// \t\t */\n// \t\tisValid: function () {\n\n// \t\t\treturn $$(ids.component).validate();\n\n// \t\t},\n\n\n// \t\t * @function labelOnChange\n// \t\t *\n// \t\t * The ABField.definitionEditor implements a default operation\n// \t\t * to update the value of the .columnName with the current value of \n// \t\t * label.\n// \t\t * \n// \t\t * if you want to override that functionality, implement this fn()\n// \t\t *\n// \t\t * @param {string} newVal\tThe new value of label\n// \t\t * @param {string} oldVal\tThe previous value\n\n// \t\t// labelOnChange: function (newVal, oldVal) {\n\n// \t\t// \t// When the Label value changes, update our Column Name value \n// \t\t// \t// to match.\n\n// \t\t// \toldVal = oldVal || '';\n// \t\t// \tif (newVal != oldVal &&\n// \t\t// \t\toldVal == $$(ids.columnName).getValue()) {\n// \t\t// \t\t$$(ids.columnName).setValue(newVal);\n// \t\t// \t}\n// \t\t// },\n\n\n// \t\t/*\n// \t\t * @function populate\n// \t\t *\n// \t\t * populate the form with the given ABField instance provided.\n// \t\t *\n// \t\t * @param {ABFieldString} field\n// \t\t */\n// \t\tpopulate: function (field) {\n// console.error('TODO: .populate()');\n// \t\t},\n\n\n// \t\t/*\n// \t\t * @function show\n// \t\t *\n// \t\t * show this component.\n// \t\t */\n// \t\tshow: function() {\n// \t\t\t$$(ids.component).clearValidation();\n// \t\t\t$$(ids.component).show();\n// \t\t},\n\n\n// \t\t/*\n// \t\t * @function values\n// \t\t *\n// \t\t * return the values for this form.\n// \t\t * @return {obj}  \n// \t\t */\n// \t\tvalues: function () {\n\n// \t\t\tvar settings = $$(ids.component).getValues();\n// \t\t\tvar values = ABField.editorValues(settings);\n\n// \t\t\tvalues.type = ABFieldStringDefaults.type;\n\n// \t\t\treturn values;\n// \t\t}\n\n// \t}\n\n\n// \t// get the common UI headers entries, and insert them above ours here:\n// \t// NOTE: put this here so that _logic is defined.\n// \tvar commonUI = ABField.definitionEditor(App, ids, _logic, ABFieldStringDefaults);\n// \t_ui.elements = commonUI.rows.concat(_ui.elements);\n\n\n// \t// return the current instance of this component:\n// \treturn {\n// \t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n// \t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component  \n// \t\t// actions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n// \t\t// DataField exposed actions:\n// \t\tclear: _logic.clear,\n// \t\tisValid:_logic.isValid,\n// \t\tpopulate: _logic.populate,\n// \t\tshow: _logic.show,\n// \t\tvalues: _logic.values,\n\n\n// \t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n// \t}\n// }\n\n\nvar ABFieldStringComponent = new _ABFieldComponent2.default({\n\n\tfieldDefaults: ABFieldStringDefaults,\n\n\telements: function elements(App) {\n\t\treturn [{\n\t\t\tview: \"text\",\n\t\t\tname: 'textDefault',\n\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\tplaceholder: L('ab.dataField.string.default', '*Default text')\n\t\t}, {\n\t\t\tview: \"checkbox\",\n\t\t\tname: 'supportMultilingual',\n\t\t\tlabelRight: L('ab.dataField.string.supportMultilingual', '*Support multilingual'),\n\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\tvalue: true\n\t\t}];\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: {\n\t\t'textDefault': '',\n\t\t'supportMultilingual': 1\n\t},\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules: {\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic: {},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit: function init(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n});\n\nvar ABFieldString = function (_ABField) {\n\t_inherits(ABFieldString, _ABField);\n\n\tfunction ABFieldString(values, object) {\n\t\t_classCallCheck(this, ABFieldString);\n\n\t\t/*\n  {\n  settings: {\n  textDefault: 'string',\n  supportMultilingual: true/false\n  }\n  }\n  */\n\n\t\t// we're responsible for setting up our specific settings:\n\t\tvar _this = _possibleConstructorReturn(this, (ABFieldString.__proto__ || Object.getPrototypeOf(ABFieldString)).call(this, values, object, ABFieldStringDefaults));\n\n\t\t_this.settings.textDefault = values.settings.textDefault || '';\n\t\t_this.settings.supportMultilingual = values.settings.supportMultilingual + \"\" || \"1\";\n\n\t\t// text to Int:\n\t\t_this.settings.supportMultilingual = parseInt(_this.settings.supportMultilingual);\n\n\t\treturn _this;\n\t}\n\n\t// return the default values for this DataField\n\n\n\t_createClass(ABFieldString, [{\n\t\tkey: \"isValid\",\n\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\tvalue: function isValid() {\n\n\t\t\tvar errors = _get(ABFieldString.prototype.__proto__ || Object.getPrototypeOf(ABFieldString.prototype), \"isValid\", this).call(this);\n\n\t\t\t// errors = OP.Form.validationError({\n\t\t\t// \tname:'columnName',\n\t\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t\t// }, errors);\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\t\t// toObj () {\n\n\t\t// \tvar obj = super.toObj();\n\n\t\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t\t// \treturn obj;\n\t\t// }\n\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t// return the grid column header definition for this instance of ABFieldString\n\n\t}, {\n\t\tkey: \"columnHeader\",\n\t\tvalue: function columnHeader(isObjectWorkspace) {\n\t\t\tvar config = _get(ABFieldString.prototype.__proto__ || Object.getPrototypeOf(ABFieldString.prototype), \"columnHeader\", this).call(this, isObjectWorkspace);\n\n\t\t\tconfig.editor = 'text';\n\t\t\tconfig.sort = 'string';\n\n\t\t\treturn config;\n\t\t}\n\t}], [{\n\t\tkey: \"defaults\",\n\t\tvalue: function defaults() {\n\t\t\treturn ABFieldStringDefaults;\n\t\t}\n\n\t\t/*\n   * @function propertiesComponent\n   *\n   * return a UI Component that contains the property definitions for this Field.\n   *\n   * @param {App} App the UI App instance passed around the Components.\n   * @return {Component}\n   */\n\n\t}, {\n\t\tkey: \"propertiesComponent\",\n\t\tvalue: function propertiesComponent(App) {\n\t\t\treturn ABFieldStringComponent.component(App);\n\t\t}\n\t}]);\n\n\treturn ABFieldString;\n}(_ABField3.default);\n\nexports.default = ABFieldString;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\n__webpack_require__(20);\n\n__webpack_require__(19);\n\n/*\n * AB Choose\n *\n * When choosing an initial application to work with, we can\n *   - select an application from a list  :  ab_choose_list\n *   - create an application from a form  :  ab_choose_form\n *\n */\n\nvar idBase = 'ab_choose';\nOP.Component.extend(idBase, function (App) {\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\t};\n\n\t// Define the external components used in this Component:\n\tvar AppList = OP.Component['ab_choose_list'](App);\n\tvar AppForm = OP.Component['ab_choose_form'](App);\n\n\t// This component's UI definition:\n\t// Application multi-views\n\tvar _ui = {\n\t\tview: \"multiview\",\n\t\tanimate: false,\n\t\tid: ids.component,\n\t\tcells: [AppList.ui, AppForm.ui]\n\t};\n\n\t// This component's Init definition:\n\tvar _init = function _init() {\n\n\t\tAppList.init();\n\t\tAppForm.init();\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t/**\n   * @function transitionApplicationChooser\n   *\n   * Switch the AppBuilder UI to show the Application Chooser component.\n   */\n\t\ttransitionApplicationChooser: function transitionApplicationChooser() {\n\t\t\t$$(ids.component).show();\n\t\t}\n\n\t};\n\n\tvar _logic = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\t\tactions: _actions,\n\n\t\t_logic: _logic // Unit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nvar _ABApplication = __webpack_require__(1);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * AB Choose Form\n *\n * Display the form for creating a new Application.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tformHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\tplaceholderName: L('ab.application.form.placeholderName', \"*Application name\"),\n\t\tplaceholderDescription: L('ab.application.form.placeholderDescription', \"*Application description\"),\n\t\tformDescription: L('ab.application.form.formDescription', \"*Description\"),\n\n\t\tsectionPermission: L('ab.application.form.sectionPermission', \"*Permission\"),\n\t\tpermissionHeader: L('ab.application.form.headerPermission', \"*Who can use this app?\"),\n\t\tcreateNewRole: L('ab.application.form.createNewRoleButton', \"*Create new roll\"),\n\n\t\tinvalidName: L('ab.application.invalidName', \"*This application name is invalid\"),\n\t\tduplicateName: L('ab.application.duplicateName', \"*Name must be unique.\")\n\n\t}\n};\n\nvar idBase = 'ab_choose_form';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tform: App.unique(idBase + '_form'),\n\t\tappFormPermissionList: App.unique(idBase + '_permission'),\n\t\tappFormCreateRoleButton: App.unique(idBase + '_createRole'),\n\n\t\tsaveButton: App.unique(idBase + '_buttonSave')\n\t};\n\n\tvar _ui = {\n\n\t\tid: ids.component,\n\t\tresponsive: \"hide\",\n\t\tcols: [{\n\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t}, {\n\t\t\tresponsiveCell: false,\n\t\t\trows: [{\n\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\thidden: App.config.hideMobile\n\t\t\t}, {\n\t\t\t\tview: \"toolbar\",\n\t\t\t\tcols: [{ view: \"label\", label: labels.component.formHeader, fillspace: true }]\n\t\t\t}, {\n\t\t\t\tview: \"form\",\n\t\t\t\tid: ids.form,\n\t\t\t\tautoheight: true,\n\t\t\t\tmargin: 0,\n\t\t\t\telements: [\n\t\t\t\t//{ type: \"section\", template: '<span class=\"webix_icon fa-edit\" style=\"max-width:32px;\"></span>Information', margin: 0 },\n\t\t\t\t{\n\t\t\t\t\tname: \"label\",\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tlabel: labels.common.formName,\n\t\t\t\t\trequired: true,\n\t\t\t\t\tplaceholder: labels.component.placeholderName,\n\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: function onChange(newValue, oldValue) {\n\t\t\t\t\t\t\t_logic.permissionRenameRole(newValue, oldValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, { height: App.config.smallSpacer }, {\n\t\t\t\t\tname: \"description\",\n\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t// label: labels.common.formDescription,\n\t\t\t\t\tlabel: \"Description\",\n\t\t\t\t\tlabelAlign: \"left\",\n\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\tplaceholder: labels.component.placeholderDescription,\n\t\t\t\t\theight: 100\n\t\t\t\t}, { height: App.config.smallSpacer }, {\n\t\t\t\t\tview: \"toolbar\",\n\t\t\t\t\tcss: \"ab-toolbar-submenu\",\n\t\t\t\t\tcols: [{\n\t\t\t\t\t\ttemplate: labels.component.permissionHeader,\n\t\t\t\t\t\ttype: 'header',\n\t\t\t\t\t\tborderless: true\n\t\t\t\t\t}, {\n\t\t\t\t\t\tview: \"toggle\",\n\t\t\t\t\t\tid: ids.appFormCreateRoleButton,\n\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\talign: \"right\",\n\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\tcss: \"ab-standard-button\",\n\t\t\t\t\t\toffIcon: \"square-o\",\n\t\t\t\t\t\tonIcon: \"check-square-o\",\n\t\t\t\t\t\tlabel: labels.component.createNewRole,\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonItemClick: function onItemClick(id, e) {\n\t\t\t\t\t\t\t\t_logic.createRoleButtonClick();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\tname: \"permissions\",\n\t\t\t\t\tid: ids.appFormPermissionList,\n\t\t\t\t\tview: \"list\",\n\t\t\t\t\t//height: 130,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tautoheight: true,\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tcss: \"ab-app-form-permission\",\n\t\t\t\t\ttemplate: \"{common.markCheckbox()} #name#\",\n\t\t\t\t\ttype: {\n\t\t\t\t\t\tmarkCheckbox: function markCheckbox(obj) {\n\t\t\t\t\t\t\treturn \"<span class='check webix_icon fa-\" + (obj.markCheckbox ? \"check-\" : \"\") + \"square-o'></span>\";\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonItemClick: function onItemClick(id, e, node) {\n\t\t\t\t\t\t\t_logic.permissionClick(id, e, node);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, { height: App.config.smallSpacer }, {\n\t\t\t\t\tmargin: 5,\n\t\t\t\t\tcols: [{ fillspace: true }, {\n\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\tvalue: labels.common.cancel,\n\t\t\t\t\t\twidth: App.config.buttonWidthSmall,\n\t\t\t\t\t\tcss: \"ab-cancel-button\",\n\t\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t\t_logic.cancel();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid: ids.saveButton,\n\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\tlabel: labels.common.save,\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\twidth: App.config.buttonWidthSmall,\n\t\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t\t_logic.buttonSaveClick();\n\t\t\t\t\t\t} // end click()\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t}, {\n\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\thidden: App.config.hideMobile\n\t\t\t}]\n\t\t}, {\n\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t}]\n\t};\n\n\tvar FormFields = ['label', 'description'];\n\n\tvar _init = function _init() {\n\t\twebix.extend($$(ids.form), webix.ProgressBar);\n\t\twebix.extend($$(ids.appFormPermissionList), webix.ProgressBar);\n\t};\n\n\tvar _logic = {\n\n\t\t/**\n   * @function applicationCreate\n   *\n   * Step through the process of creating an ABApplication with the\n   * current state of the Form.\n   *\n   * @param {obj} values \tcurrent value hash of the form values.\n   */\n\t\tapplicationCreate: function applicationCreate(values) {\n\n\t\t\tvar newApp = {\n\t\t\t\tname: values.label,\n\t\t\t\tlabel: values.label,\n\t\t\t\tdescription: values.description\n\t\t\t};\n\n\t\t\tasync.waterfall([function (cb) {\n\t\t\t\t// Create application data\n\t\t\t\t_ABApplication2.default.create(newApp).then(function (result) {\n\t\t\t\t\tcb(null, result);\n\t\t\t\t}).catch(cb);\n\t\t\t}, function (createdApp, cb) {\n\t\t\t\t_logic.permissionSave(createdApp).then(function () {\n\t\t\t\t\tcb();\n\t\t\t\t}).catch(cb);\n\t\t\t}], function (err) {\n\t\t\t\t_logic.formReady();\n\n\t\t\t\tif (err) {\n\t\t\t\t\twebix.message({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttext: labels.common.createErrorMessage.replace('{0}', values.label)\n\t\t\t\t\t});\n\n\t\t\t\t\tAD.error.log('App Builder : Error create application data', { error: err });\n\n\t\t\t\t\t_logic.buttonSaveEnable();\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tApp.actions.transitionApplicationList();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\ttext: labels.common.createSuccessMessage.replace('{0}', values.label)\n\t\t\t\t});\n\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function applicationUpdate\n   *\n   * Step through the process of updating an ABApplication with the\n   * current state of the Form.\n   *\n   * @param {ABApplication} application\n   */\n\t\tapplicationUpdate: function applicationUpdate(Application) {\n\t\t\tvar values = _logic.formValues();\n\n\t\t\tasync.waterfall([function (next) {\n\t\t\t\t_logic.permissionSave(Application).then(function (result) {\n\t\t\t\t\tnext(null, result);\n\t\t\t\t}).catch(next);\n\t\t\t}, function (app_role, next) {\n\t\t\t\t// Update application data\n\t\t\t\tApplication.label = values.label;\n\t\t\t\tApplication.description = values.description;\n\n\t\t\t\tif (app_role && app_role.id) Application.role = app_role.id;else Application.role = null;\n\n\t\t\t\tApplication.save().then(function () {\n\t\t\t\t\tnext();\n\t\t\t\t}).catch(next);\n\t\t\t}], function (err) {\n\n\t\t\t\t_logic.formReady();\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\tif (err) {\n\t\t\t\t\twebix.message({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttext: labels.common.updateErrorMessage.replace('{0}', Application.label)\n\t\t\t\t\t});\n\t\t\t\t\tAD.error.log('App Builder : Error update application data', { error: err });\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tApp.actions.transitionApplicationList();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\ttext: labels.common.updateSucessMessage.replace('{0}', Application.label)\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function buttonSaveClick\n   *\n   * Process the user clicking on the [Save] button.\n   */\n\t\tbuttonSaveClick: function buttonSaveClick() {\n\n\t\t\t_logic.buttonSaveDisable();\n\t\t\t_logic.formBusy();\n\n\t\t\t// if there is a selected Application, then this is an UPDATE\n\t\t\tvar updateApp = App.actions.getSelectedApplication();\n\t\t\tif (updateApp) {\n\n\t\t\t\tif (_logic.formValidate('update')) {\n\n\t\t\t\t\t_logic.applicationUpdate(updateApp);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// else this is a Create\n\t\t\t\tif (_logic.formValidate('add')) {\n\n\t\t\t\t\t_logic.applicationCreate(_logic.formValues());\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function buttonSaveDisable\n   *\n   * Disable the save button.\n   */\n\t\tbuttonSaveDisable: function buttonSaveDisable() {\n\t\t\t$$(ids.saveButton).disable();\n\t\t},\n\n\t\t/**\n   * @function buttonSaveEnable\n   *\n   * Re-enable the save button.\n   */\n\t\tbuttonSaveEnable: function buttonSaveEnable() {\n\t\t\t$$(ids.saveButton).enable();\n\t\t},\n\n\t\t/**\n   * @function cancel\n   *\n   * Cancel the current Form Operation and return us to the AppList.\n   */\n\t\tcancel: function cancel() {\n\n\t\t\t_logic.formReset();\n\t\t\tApp.actions.transitionApplicationList();\n\t\t},\n\n\t\t/**\n   * @function createRoleButtonClick\n   *\n   * The user clicked the [Create Role] button.  Update the UI and add a\n   * unique Application permission to our list.\n   */\n\t\tcreateRoleButtonClick: function createRoleButtonClick() {\n\n\t\t\tif ($$(ids.appFormCreateRoleButton).getValue()) {\n\n\t\t\t\t// TODO: if not called from anywhere else, then move the name gathering into .permissionAddNew()\n\t\t\t\t// Add new app role\n\t\t\t\tvar appName = $$(ids.form).elements[\"label\"].getValue();\n\t\t\t\t_logic.permissionAddNew(appName);\n\t\t\t} else {\n\t\t\t\t// Remove app role\n\t\t\t\t_logic.permissionRemoveNew();\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function formBusy\n   *\n   * Show the progress indicator to indicate a Form operation is in\n   * progress.\n   */\n\t\tformBusy: function formBusy() {\n\n\t\t\t$$(ids.form).showProgress({ type: 'icon' });\n\t\t},\n\n\t\t/**\n   * @function formPopulate()\n   *\n   * populate the form values from the given ABApplication\n   *\n   * @param {ABApplication} application  instance of the ABApplication\n   */\n\t\tformPopulate: function formPopulate(application) {\n\n\t\t\tvar Form = $$(ids.form);\n\n\t\t\t// Populate data to form\n\t\t\tif (application) {\n\t\t\t\tFormFields.forEach(function (f) {\n\t\t\t\t\tif (Form.elements[f]) {\n\t\t\t\t\t\tForm.elements[f].setValue(application[f]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// _logic.permissionPopulate(application);\n\t\t},\n\n\t\t/**\n   * @function formReady()\n   *\n   * remove the busy indicator from the form.\n   */\n\t\tformReady: function formReady() {\n\t\t\t$$(ids.form).hideProgress();\n\t\t},\n\n\t\t/**\n   * @function formReset()\n   *\n   * return the form to an empty state.\n   */\n\t\tformReset: function formReset() {\n\n\t\t\t$$(ids.form).clear();\n\t\t\t$$(ids.form).clearValidation();\n\t\t\t// $$(self.webixUiids.appFormPermissionList).clearValidation();\n\t\t\t// $$(self.webixUiids.appFormPermissionList).clearAll();\n\t\t\t// $$(self.webixUiids.appFormCreateRoleButton).setValue(0);\n\t\t},\n\n\t\t/**\n   * @function formValidate()\n   *\n   * validate the form values.\n   *\n   * @return {bool}  true if all values pass validation.  false otherwise.\n   */\n\t\tformValidate: function formValidate(op) {\n\t\t\t// op : ['add', 'update', 'destroy']\n\n\t\t\tvar Form = $$(ids.form);\n\t\t\tif (!Form.validate()) {\n\t\t\t\t// TODO : Error message\n\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar errors = _ABApplication2.default.isValid(op, Form.getValues());\n\t\t\tif (OP.Form.isValidationError(errors, Form)) {\n\t\t\t\t_logic.formReady();\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t///// TODO: \n\t\t\t// Implement common Form Input Validations\n\t\t\t// convert this to:  \n\t\t\t// app = ABApplication.newApplication(Form.getValues())\n\t\t\t// errors = app.inValid()\n\t\t\t// if (OP.Form.isValidationError(errors, Form)) { }\n\n\n\t\t\t// var appName = $$(ids.form).elements['label'].getValue(),\n\t\t\t// \tappDescription = $$(ids.form).elements['description'].getValue();\n\n\t\t\t// if (!inputValidator.validate(appName)) {\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\t\t\t// // Prevent duplicate application name\n\t\t\t// if (self.data.filter(function (app) { return app.name.trim().toLowerCase() == appName.trim().replace(/ /g, '_').toLowerCase(); }).length > 0) {\n\t\t\t// \tOP.Dialog.Alert({\n\t\t\t// \t\ttitle: labels.component.invalidName,\n\t\t\t// \t\ttext: labels.component.duplicateName.replace(\"#appName#\", appName),\n\t\t\t// \t\tok: labels.common.ok\n\t\t\t// \t});\n\n\t\t\t// \t$$(ids.form).elements['label'].focus();\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\t\t\treturn true;\n\t\t},\n\n\t\t/**\n   * @function formValues()\n   *\n   * return an object hash of name:value pairs of the current Form.\n   *\n   * @return {obj}\n   */\n\t\tformValues: function formValues() {\n\t\t\t// return the current values of the Form elements.\n\t\t\treturn $$(ids.form).getValues();\n\t\t},\n\n\t\t/**\n   * @function permissionAddNew\n   *\n   * create a new permission entry based upon the current Application.label\n   *\n   * This not only adds it to our Permission List, but also selects it.\n   *\n   * @param {string} appName\tThe Application.label of the current Application\n   */\n\t\tpermissionAddNew: function permissionAddNew(appName) {\n\n\t\t\t// add new role entry\n\t\t\t$$(ids.appFormPermissionList).add({\n\t\t\t\tid: 'newRole',\n\t\t\t\tname: _logic.permissionName(appName),\n\t\t\t\tisApplicationRole: true,\n\t\t\t\tmarkCheckbox: 1\n\t\t\t}, 0);\n\n\t\t\t// Select new role\n\t\t\tvar selectedIds = $$(ids.appFormPermissionList).getSelectedId(true);\n\t\t\tselectedIds.push('newRole');\n\t\t\t$$(ids.appFormPermissionList).select(selectedIds);\n\t\t},\n\n\t\t/**\n   * @function permissionClick\n   *\n   * Process when a permission entry in the list is clicked.\n   */\n\t\tpermissionClick: function permissionClick(id, e, node) {\n\n\t\t\tvar List = $$(ids.appFormPermissionList);\n\n\t\t\tvar item = List.getItem(id);\n\n\t\t\tif (List.getItem(id).isApplicationRole) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (List.isSelected(id)) {\n\t\t\t\titem.markCheckbox = 0;\n\t\t\t\tList.unselect(id);\n\t\t\t} else {\n\t\t\t\titem.markCheckbox = 1;\n\t\t\t\tvar selectedIds = List.getSelectedId();\n\n\t\t\t\tif (typeof selectedIds === 'string' || !isNaN(selectedIds)) {\n\t\t\t\t\tif (selectedIds) selectedIds = [selectedIds];else selectedIds = [];\n\t\t\t\t}\n\n\t\t\t\tselectedIds.push(id);\n\n\t\t\t\tList.select(selectedIds);\n\n\t\t\t\tList.updateItem(id, item);\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function permissionName\n   *\n   * returns a formatted name for a Permission Role based upon the provided Application.label\n   *\n   * @param {string} appName\tthe current value of the Application.label\n   * @return {string} \tPermission Role Name.\n   */\n\t\tpermissionName: function permissionName(appName) {\n\t\t\treturn appName + \" Application Role\";\n\t\t},\n\n\t\t/**\n   * @function permissionPopulate\n   *\n   * fill out the Permission list\n   *\n   * @param {ABApplication} application\tthe current ABApplication we are editing\n   */\n\t\tpermissionPopulate: function permissionPopulate(application) {\n\n\t\t\tvar PermForm = $$(ids.appFormPermissionList);\n\t\t\t// Get user's roles\n\t\t\tPermForm.showProgress({ type: 'icon' });\n\t\t\tasync.waterfall([function (next) {\n\t\t\t\tAD.comm.service.get({ url: '/app_builder/user/roles' }).fail(function (err) {\n\t\t\t\t\tnext(err);\n\t\t\t\t}).done(function (roles) {\n\n\t\t\t\t\t// scan the roles and determine if any of them have been created\n\t\t\t\t\t// after the current Application.name:\n\t\t\t\t\tvar parsedRoles = roles.map(function (r) {\n\t\t\t\t\t\tif (application) {\n\t\t\t\t\t\t\tif (r.name == _logic.permissionName(application.name.split('_').join(' '))) {\n\t\t\t\t\t\t\t\tr.isApplicationRole = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn r;\n\t\t\t\t\t});\n\t\t\t\t\tnext(null, parsedRoles);\n\t\t\t\t});\n\t\t\t}, function (available_roles, next) {\n\t\t\t\tif (application && application.id) {\n\t\t\t\t\tapplication.getPermissions().then(function (selected_role_ids) {\n\t\t\t\t\t\tnext(null, available_roles, selected_role_ids);\n\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\tnext(err);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tnext(null, available_roles, []);\n\t\t\t\t}\n\t\t\t}, function (available_roles, selected_role_ids, next) {\n\n\t\t\t\t// mark the role(s) in available_roles that is tied\n\t\t\t\t// this application:\n\t\t\t\tif (application && application.role) {\n\t\t\t\t\tavailable_roles.forEach(function (r) {\n\t\t\t\t\t\tif (r.id == (application.role.id || application.role)) {\n\t\t\t\t\t\t\tr.isApplicationRole = true;\n\t\t\t\t\t\t\tr.markCheckbox = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Sort permission list\n\t\t\t\tavailable_roles.sort(function (a, b) {\n\t\t\t\t\treturn a.isApplicationRole === b.isApplicationRole ? 0 : a.isApplicationRole ? -1 : 1;\n\t\t\t\t});\n\n\t\t\t\t// reload list from our available_roles\n\t\t\t\tPermForm.clearAll();\n\t\t\t\tPermForm.parse(available_roles);\n\n\t\t\t\t// mark which roles have already been selected\n\t\t\t\tif (selected_role_ids && selected_role_ids.length > 0) {\n\t\t\t\t\t// Select permissions\n\t\t\t\t\tPermForm.select(selected_role_ids);\n\t\t\t\t\tavailable_roles.forEach(function (r) {\n\t\t\t\t\t\tif (selected_role_ids.indexOf(r.id) > -1) {\n\t\t\t\t\t\t\tvar item = $$(ids.appFormPermissionList).getItem(r.id);\n\t\t\t\t\t\t\titem.markCheckbox = 1;\n\t\t\t\t\t\t\t$$(ids.appFormPermissionList).updateItem(r.id, item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Select create role application button\n\t\t\t\t\tvar markCreateButton = available_roles.filter(function (r) {\n\t\t\t\t\t\treturn r.isApplicationRole;\n\t\t\t\t\t}).length > 0 ? 1 : 0;\n\t\t\t\t\t$$(ids.appFormCreateRoleButton).setValue(markCreateButton);\n\t\t\t\t}\n\n\t\t\t\tnext();\n\t\t\t}], function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\twebix.message(err.message);\n\t\t\t\t}\n\n\t\t\t\tPermForm.hideProgress();\n\t\t\t});\n\n\t\t\t// return appName  + \" Application Role\";\n\t\t},\n\n\t\t/**\n   * @function permissionRemoveNew()\n   *\n   * Intended to be called when the USER unselects the option to create a Permission\n   * for this Application.\n   *\n   * We remove any Permission Role created for this Application.\n   */\n\t\tpermissionRemoveNew: function permissionRemoveNew() {\n\n\t\t\t// find any roles that are put here from our application form:\n\t\t\tvar appRoles = $$(ids.appFormPermissionList).find(function (perm) {\n\t\t\t\treturn perm.isApplicationRole;\n\t\t\t});\n\n\t\t\t// remove them:\n\t\t\tappRoles.forEach(function (r) {\n\t\t\t\t$$(ids.appFormPermissionList).remove(r.id);\n\t\t\t});\n\t\t},\n\n\t\t/*\n   * permissionRenameRole\n   *\n   * When the name of the Appliction changes, change the Name of the Permission as well.\n   *\n   * @param {string} newValue  the current name of the application\n   * @param {string} oldValue  the previous name of the application\n   */\n\t\tpermissionRenameRole: function permissionRenameRole(newValue, oldValue) {\n\n\t\t\tvar editRole = $$(ids.appFormPermissionList).find(function (d) {\n\t\t\t\treturn d.name === _logic.permissionName(oldValue);\n\t\t\t});\n\n\t\t\teditRole.forEach(function (r) {\n\t\t\t\tvar editItem = $$(ids.appFormPermissionList).getItem(r.id);\n\t\t\t\teditItem.name = _logic.permissionName(newValue);\n\n\t\t\t\t$$(ids.appFormPermissionList).updateItem(editItem.id, editItem);\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function permissionSave()\n   *\n   * step through saving the current Permission Settings and associating\n   * them with the current Application.\n   *\n   * @param {ABApplication} App  \tThe current Application we are working with.\n   * @return {Promise}\t\t\t.resolve( {Permission} ) if one is created for this App\n   */\n\t\tpermissionSave: function permissionSave(app) {\n\t\t\t//// REFACTOR:\n\t\t\t// this step implies that ab_choose_form understands the intracies of how\n\t\t\t// ABApplication and Permissions work.\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar saveRoleTasks = [],\n\t\t\t\t    appRole = null;\n\n\t\t\t\t//// Process the option to create a newRole For this Application:\n\n\t\t\t\t// if the button is set\n\t\t\t\tif ($$(ids.appFormCreateRoleButton).getValue()) {\n\n\t\t\t\t\t// check to see if we already have a permission that isApplicationRole\n\t\t\t\t\tvar selectedPerms = $$(ids.appFormPermissionList).getSelectedItem(true);\n\t\t\t\t\tselectedPerms = selectedPerms.filter(function (perm) {\n\t\t\t\t\t\treturn perm.isApplicationRole;\n\t\t\t\t\t});\n\n\t\t\t\t\t// if not, then create one:\n\t\t\t\t\tif (selectedPerms.length == 0) {\n\n\t\t\t\t\t\t// Create new role for application\n\t\t\t\t\t\tsaveRoleTasks.push(function (cb) {\n\t\t\t\t\t\t\tapp.createPermission().then(function (result) {\n\n\t\t\t\t\t\t\t\t// remember the Role we just created\n\t\t\t\t\t\t\t\tappRole = result;\n\t\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t\t}).catch(cb);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Delete any existing application roles\n\t\t\t\t\tsaveRoleTasks.push(function (cb) {\n\t\t\t\t\t\tapp.deletePermission().then(function () {\n\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t}).catch(cb);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//// Now process any additional roles:\n\n\t\t\t\t// get array of selected permissions that are not our newRole\n\t\t\t\tvar permItems = $$(ids.appFormPermissionList).getSelectedItem(true);\n\t\t\t\tpermItems = permItems.filter(function (item) {\n\t\t\t\t\treturn item.id !== 'newRole';\n\t\t\t\t}); // Remove new role item\n\n\n\t\t\t\t// Make sure Application is linked to selected permission items:\n\t\t\t\tsaveRoleTasks.push(function (cb) {\n\n\t\t\t\t\t// ok, so we removed the 'newRole' entry, but we might\n\t\t\t\t\t// have created an entry for it earlier, if so, add in\n\t\t\t\t\t// the created one here:\n\t\t\t\t\tif ($$(ids.appFormCreateRoleButton).getValue() && appRole) {\n\n\t\t\t\t\t\t// make sure it isn't already in there:\n\t\t\t\t\t\tvar appRoleItem = permItems.filter(function (item) {\n\t\t\t\t\t\t\treturn item.id == appRole.id;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!appRoleItem || appRoleItem.length < 1) {\n\n\t\t\t\t\t\t\t// if not, add it :\n\t\t\t\t\t\t\tpermItems.push({\n\t\t\t\t\t\t\t\tid: appRole.id,\n\t\t\t\t\t\t\t\tisApplicationRole: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Assign Role Permissions\n\t\t\t\t\tapp.assignPermissions(permItems).then(function () {\n\t\t\t\t\t\tcb();\n\t\t\t\t\t}).catch(cb);\n\t\t\t\t});\n\n\t\t\t\tasync.series(saveRoleTasks, function (err, results) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// we return the instance of the newly created Permission.\n\t\t\t\t\t\tresolve(appRole);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t//// REFACTOR QUESTION:\n\t\t\t// why are we updating the app.permissions with this data structure?\n\t\t\t// where is this data structure being used?\n\t\t\t// Earlier we are using another structure (permissionAddNew()) ... how is that related to this?\n\n\t\t\t// // Final task\n\t\t\t// saveRoleTasks.push(function (cb) {\n\t\t\t// \t// Update store app data\n\t\t\t// \tvar applicationData = self.data.filter(function (d) { return d.id == app.id; });\n\t\t\t// \tapplicationData.forEach(function (app) {\n\t\t\t// \t\tapp.attr('permissions', $.map(permItems, function (item) {\n\t\t\t// \t\t\treturn {\n\t\t\t// \t\t\t\tapplication: app.id,\n\t\t\t// \t\t\t\tpermission: item.id,\n\t\t\t// \t\t\t\tisApplicationRole: item.isApplicationRole\n\t\t\t// \t\t\t}\n\t\t\t// \t\t}));\n\t\t\t// \t});\n\n\t\t\t// \tq.resolve(appRole);\n\t\t\t// \tcb();\n\t\t\t// })\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show the Form Component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t// initiate a request to create a new Application\n\t\ttransitionApplicationForm: function transitionApplicationForm(application) {\n\n\t\t\t// if no application is given, then this should be a [create] operation,\n\n\t\t\t// so clear our AppList\n\t\t\tif ('undefined' == typeof application) {\n\t\t\t\tApp.actions.unselectApplication();\n\t\t\t}\n\n\t\t\t// now prepare our form:\n\t\t\t_logic.formReset();\n\t\t\tif (application) {\n\t\t\t\t// populate Form here:\n\t\t\t\t_logic.formPopulate(application);\n\t\t\t}\n\t\t\t_logic.permissionPopulate(application);\n\t\t\t_logic.show();\n\t\t}\n\n\t};\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\t\tactions: _actions,\n\n\t\t_logic: _logic\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nvar _ABApplication = __webpack_require__(1);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(21);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * AB Choose List\n *\n * Display a list of Applications for the user to select.\n *\n */\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\ttitle: L('ab.application.application', '*Application'),\n\n\t\tcreateNew: L('ab.application.createNew', '*Add new application'),\n\t\tnoApplication: L('ab.application.noApplication', \"*There is no application data\")\n\t}\n};\n\nvar idBase = 'ab_choose_list';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tuploader: App.unique(idBase + '_uploader'),\n\t\tlist: App.unique(idBase + '_list'),\n\t\ttoolBar: App.unique(idBase + '_toolbar'),\n\t\tbuttonCreateNewApplication: App.unique(idBase + '_buttonNewApp')\n\t};\n\n\tvar MenuComponent = OP.Component['ab_choose_list_menu'](App);\n\tvar PopupMenu = webix.ui(MenuComponent.ui);\n\tPopupMenu.hide();\n\n\tvar _ui = {\n\n\t\tid: ids.component,\n\t\tresponsive: \"hide\",\n\n\t\tcols: [{\n\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t}, {\n\t\t\tresponsiveCell: false,\n\t\t\trows: [{\n\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\thidden: App.config.hideMobile\n\t\t\t},\n\t\t\t//\n\t\t\t// ToolBar\n\t\t\t//\n\t\t\t{\n\t\t\t\tview: \"toolbar\",\n\t\t\t\tid: ids.toolBar,\n\t\t\t\tcols: [{ view: \"label\", label: labels.component.title, fillspace: true }, {\n\t\t\t\t\tid: ids.buttonCreateNewApplication,\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tlabel: labels.component.createNew,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\ticon: \"plus\",\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t// Inform our Chooser we have a request to create an Application:\n\t\t\t\t\t\tApp.actions.transitionApplicationForm();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"uploader\",\n\t\t\t\t\tid: ids.uploader,\n\t\t\t\t\tlabel: labels.common.import,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tupload: '/app_builder/appJSON',\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\ticon: \"upload\",\n\t\t\t\t\tautosend: true,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonAfterFileAdd: function onAfterFileAdd() {\n\t\t\t\t\t\t\t_logic.onAfterFileAdd();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonFileUpload: function onFileUpload(item, response) {\n\t\t\t\t\t\t\t_logic.onFileUpload(item, response);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonFileUploadError: function onFileUploadError(details, response) {\n\t\t\t\t\t\t\t_logic.onFileUploadError(details, response);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t},\n\n\t\t\t//\n\t\t\t// The List of Applications\n\t\t\t//\n\t\t\t{\n\t\t\t\tid: ids.list,\n\t\t\t\tview: \"list\",\n\t\t\t\tcss: 'ab-app-select-list',\n\t\t\t\ttemplate: function template(obj, common) {\n\t\t\t\t\treturn _logic.templateListItem(obj, common);\n\t\t\t\t},\n\t\t\t\ttype: {\n\t\t\t\t\theight: App.config.appListRowHeight, // Defines item height\n\t\t\t\t\ticonGear: \"<span class='webix_icon fa-cog'></span>\"\n\t\t\t\t},\n\t\t\t\tselect: false,\n\t\t\t\tonClick: {\n\t\t\t\t\t\"ab-app-list-item\": function abAppListItem(ev, id, trg) {\n\t\t\t\t\t\treturn _logic.onClickListItem(ev, id, trg);\n\t\t\t\t\t},\n\t\t\t\t\t\"ab-app-list-edit\": function abAppListEdit(ev, id, trg) {\n\t\t\t\t\t\treturn _logic.onClickListEdit(ev, id, trg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\thidden: App.config.hideMobile\n\t\t\t}]\n\t\t}, {\n\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t}]\n\t};\n\n\tvar _data = {};\n\n\tvar _logic = {\n\n\t\t/**\n   * @function busy\n   *\n   * show a busy indicator on our App List\n   */\n\t\tbusy: function busy() {\n\t\t\tif ($$(ids.list).showProgress) $$(ids.list).showProgress({ icon: 'cursor' });\n\t\t},\n\n\t\t/**\n   * @function loadData\n   *\n   * Load all the ABApplications and display them in our App List\n   */\n\t\tloadData: function loadData() {\n\n\t\t\t// Get applications data from the server\n\t\t\t_logic.busy();\n\t\t\t_ABApplication2.default.allApplications().then(function (data) {\n\n\t\t\t\t_logic.ready();\n\n\t\t\t\t// make sure our overlay is updated when items are added/removed\n\t\t\t\t// from our data list.\n\t\t\t\tdata.attachEvent(\"onAfterAdd\", function (id, index) {\n\t\t\t\t\t_logic.refreshOverlay();\n\t\t\t\t});\n\n\t\t\t\tdata.attachEvent(\"onAfterDelete\", function (id) {\n\t\t\t\t\t_logic.refreshOverlay();\n\t\t\t\t});\n\n\t\t\t\t_data.listApplications = data;\n\n\t\t\t\t_logic.refreshList();\n\t\t\t}).catch(function (err) {\n\t\t\t\t_logic.ready();\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\ttext: err\n\t\t\t\t});\n\t\t\t\tAD.error.log('App Builder : Error loading application data', { error: err });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function onAfterFileAdd\n   *\n   * UI updates for when a file upload is initiated\n   */\n\t\tonAfterFileAdd: function onAfterFileAdd() {\n\t\t\t$$(ids.uploader).disable();\n\t\t\t_logic.busy();\n\t\t},\n\n\t\t/**\n   * @function onClickListEdit\n   *\n   * UI updates for when the edit gear is clicked\n   */\n\t\tonClickListEdit: function onClickListEdit(ev, id, trg) {\n\n\t\t\t// Show menu\n\t\t\tPopupMenu.show(trg);\n\t\t\t$$(ids.list).select(id);\n\n\t\t\treturn false; // block default behavior\n\t\t},\n\n\t\t/**\n   * @function onClickListItem\n   *\n   * An item in the list is selected. So update the workspace with that \n   * object.\n   */\n\t\tonClickListItem: function onClickListItem(ev, id, trg) {\n\n\t\t\t_logic.busy();\n\n\t\t\t$$(ids.list).select(id);\n\n\t\t\tvar selectedApp = $$(ids.list).getItem(id);\n\n\t\t\tif (selectedApp) {\n\n\t\t\t\t_logic.ready();\n\n\t\t\t\t// We've selected an Application to work with\n\t\t\t\tApp.actions.transitionWorkspace(selectedApp);\n\t\t\t}\n\n\t\t\treturn false; // block default behavior\n\t\t},\n\n\t\t/**\n   * @function onFileUpload\n   *\n   * The File Upload process finished.\n   */\n\t\tonFileUpload: function onFileUpload(item, response) {\n\t\t\t_logic.loadData(); // refresh app list\n\t\t\t$$(ids.uploader).enable();\n\t\t\t_logic.ready();\n\t\t},\n\n\t\t/**\n   * @function onFileUploadError\n   *\n   * The File Upload process exited with an error.\n   */\n\t\tonFileUploadError: function onFileUploadError(details, response) {\n\n\t\t\tvar errorMessage = 'Error: ' + (response && response.message);\n\t\t\tOP.Dialog.Alert({\n\t\t\t\ttext: errorMessage\n\t\t\t});\n\t\t\t// webix.message({\n\t\t\t// \ttype: 'error',\n\t\t\t// \ttext: errorMessage\n\t\t\t// });\n\t\t\t_logic.loadData(); // refresh app list\n\t\t\t$$(ids.uploader).enable();\n\t\t\t_logic.ready();\n\t\t},\n\n\t\t/**\n   * @function refreshOverlay\n   *\n   * If we have no items in our list, display a Message.\n   */\n\t\trefreshOverlay: function refreshOverlay() {\n\t\t\tvar appList = $$(ids.list);\n\n\t\t\tif (!appList.count()) //if no data is available\n\t\t\t\tappList.showOverlay(labels.component.noApplication);else appList.hideOverlay();\n\t\t},\n\n\t\t/**\n   * @function ready\n   *\n   * remove the busy indicator on our App List\n   */\n\t\tready: function ready() {\n\t\t\tif ($$(ids.list).hideProgress) $$(ids.list).hideProgress();\n\t\t},\n\n\t\t/**\n   * @function reset\n   *\n   * Return our App List to an unselected state.\n   */\n\t\treset: function reset() {\n\t\t\t$$(ids.list).unselectAll();\n\t\t},\n\n\t\t/**\n   * @function refreshList\n   *\n   * Apply our list of ABApplication data to our AppList\n   */\n\t\trefreshList: function refreshList() {\n\n\t\t\tvar appList = $$(ids.list);\n\n\t\t\tappList.clearAll();\n\t\t\tappList.data.unsync();\n\t\t\tappList.data.sync(_data.listApplications);\n\n\t\t\t_logic.refreshOverlay();\n\n\t\t\tappList.refresh();\n\n\t\t\t_logic.ready();\n\t\t},\n\n\t\t/**\n   * @function show\n   *\n   * Trigger our List component to show\n   */\n\t\tshow: function show() {\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\t\t/**\n   * @function templateListItem\n   *\n   * Defines the template for each row of our AppList.\n   *\n   * @param {obj} obj the current instance of ABApplication for the row.\n   * @param {?} common the webix.common icon data structure\n   * @return {string}\n   */\n\t\ttemplateListItem: function templateListItem(obj, common) {\n\t\t\treturn _templateListItem.replace('#label#', obj.label || '').replace('#description#', obj.description || '').replace('{common.iconGear}', common.iconGear);\n\t\t}\n\t};\n\n\t/*\n  * _templateListItem\n  *\n  * The AppList Row template definition.\n  */\n\tvar _templateListItem = [\"<div class='ab-app-list-item'>\", \"<div class='ab-app-list-info'>\", \"<div class='ab-app-list-name'>#label#</div>\", \"<div class='ab-app-list-description'>#description#</div>\", \"</div>\", \"<div class='ab-app-list-edit'>\", \"{common.iconGear}\", \"</div>\", \"</div>\"].join('');\n\n\t/*\n  * @function _init\n  *\n  * The init() that performs the necessary setup for our AppList chooser.\n  */\n\tvar _init = function _init() {\n\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t\twebix.extend($$(ids.list), webix.OverlayBox);\n\n\t\tMenuComponent.init();\n\n\t\t// start things off by loading the current list of Applications\n\t\t_logic.loadData();\n\t};\n\n\t/*\n  * {json} _actions\n  *\n  * The exported methods available to other Components.\n  */\n\tvar _actions = {\n\n\t\t/**\n   * @function unselectApplication\n   *\n   * resets the AppList to an unselected state.\n   */\n\t\tunselectApplication: function unselectApplication() {\n\t\t\t_logic.reset();\n\t\t},\n\n\t\t/**\n   * @function getSelectedApplication\n   *\n   * returns which ABApplication is currently selected.\n   * @return {ABApplication}  or {null} if nothing selected.\n   */\n\t\tgetSelectedApplication: function getSelectedApplication() {\n\t\t\treturn $$(ids.list).getSelectedItem();\n\t\t},\n\n\t\t/**\n   * @function deleteApplication\n   *\n   * deletes the given ABAppliction.\n   *\n   * NOTE: this assumes the component using this method has already\n   * provided the delete confirmation.\n   *\n   * @param {ABApplication} app  the ABAppliction to delete.\n   */\n\t\tdeleteApplication: function deleteApplication(app) {\n\n\t\t\tif (!app) return;\n\n\t\t\t// Delete application data\n\t\t\t_logic.busy();\n\n\t\t\tapp.destroy().then(function (result) {\n\t\t\t\t_logic.reset();\n\t\t\t\t_logic.ready();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\ttext: labels.common.deleteSuccessMessage.replace('{0}', app.label)\n\t\t\t\t});\n\t\t\t}).catch(function (err) {\n\t\t\t\t_logic.reset();\n\t\t\t\t_logic.ready();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\ttext: labels.common.deleteErrorMessage.replace(\"{0}\", app.label)\n\t\t\t\t});\n\n\t\t\t\tAD.error.log('App Builder : Error delete application data', { error: err });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function transitionApplicationList\n   *\n   * Trigger our List component to show\n   */\n\t\ttransitionApplicationList: function transitionApplicationList() {\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\t\tactions: _actions,\n\n\t\t_logic: _logic // exposed for Unit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\n/*\n * AB Choose List\n *\n * Display a list of Applications for the user to select.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\tmenu: L('ab.application.menu', \"*Application Menu\"),\n\t\tconfirmDeleteTitle: L('ab.application.delete.title', \"*Delete application\"),\n\t\tconfirmDeleteMessage: L('ab.application.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\t}\n};\n\nvar idBase = 'ab_choose_list_menu';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\tvar ids = {\n\t\tmenu: App.unique(idBase + '_menu')\n\t};\n\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.menu,\n\t\thead: labels.component.menu,\n\t\twidth: 100,\n\t\tbody: {\n\t\t\tview: \"list\",\n\t\t\tborderless: true,\n\t\t\tdata: [{ command: labels.common.edit, icon: \"fa-pencil-square-o\" }, { command: labels.common.export, icon: \"fa-download\" }, { command: labels.common.delete, icon: \"fa-trash\" }],\n\t\t\tdatatype: \"json\",\n\n\t\t\ttemplate: \"<i class='fa #icon#' aria-hidden='true'></i> #command#\",\n\t\t\tautoheight: true,\n\t\t\tselect: false,\n\t\t\ton: {\n\t\t\t\t'onItemClick': function onItemClick(timestamp, e, trg) {\n\t\t\t\t\treturn _logic.onItemClick(timestamp, e, trg);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _data = {};\n\n\tvar _init = function _init() {};\n\n\tvar _logic = {\n\n\t\t/**\n   * @function onItemClick\n   * process which item in our popup was selected.\n   */\n\t\tonItemClick: function onItemClick(timestamp, e, trg) {\n\n\t\t\t// hide our popup before we trigger any other possible UI animation: (like .edit)\n\t\t\t// NOTE: if the UI is animating another component, and we do .hide()\n\t\t\t// while it is in progress, the UI will glitch and give the user whiplash.\n\t\t\t$$(ids.menu).hide();\n\n\t\t\tvar selectedApp = App.actions.getSelectedApplication();\n\n\t\t\tswitch (trg.textContent.trim()) {\n\t\t\t\tcase labels.common.edit:\n\t\t\t\t\tApp.actions.transitionApplicationForm(selectedApp);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase labels.common.delete:\n\t\t\t\t\tOP.Dialog.ConfirmDelete({\n\t\t\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t\t\t\ttext: labels.component.confirmDeleteMessage.replace('{0}', selectedApp.label),\n\t\t\t\t\t\tcallback: function callback(result) {\n\n\t\t\t\t\t\t\tif (!result) return;\n\n\t\t\t\t\t\t\tApp.actions.deleteApplication(selectedApp);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase labels.common.export:\n\t\t\t\t\t// Download the JSON file to disk\n\t\t\t\t\twindow.location.assign('/app_builder/appJSON/' + selectedApp.id + '?download=1');\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t};\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\n\t\t_logic: _logic // exposed for Unit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nvar _ABApplication = __webpack_require__(1);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(24);\n\n__webpack_require__(23);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work\n *\n * Display the component for working with an ABApplication.\n *\n */\n\nvar labels = {\n\n\tapplication: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\tbackToApplication: L('ab.application.backToApplication', \"*Back to Applications page\"),\n\t\tsynchronize: L('ab.application.synchronize', \"*Synchronize\"),\n\t\tobjectTitle: L('ab.object.title', \"*Objects\"),\n\t\tinterfaceTitle: L('ab.interface.title', \"*Interface\")\n\t}\n};\n\nOP.Component.extend('ab_work', function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique('ab_work_component'),\n\t\ttoolBar: App.unique('ab_work_toolbar'),\n\t\tbuttonSync: App.unique('ab_work_button_sync'),\n\t\tlabelAppName: App.unique('ab_work_label_appname'),\n\t\ttabbar: App.unique('ab_work_tabbar'),\n\t\ttab_object: App.unique('ab_work_tab_object'),\n\t\ttab_interface: App.unique('ab_work_tab_interface'),\n\t\tworkspace: App.unique('ab_work_workspace')\n\t};\n\n\tvar AppObjectWorkspace = OP.Component['ab_work_object'](App);\n\tvar AppInterfaceWorkspace = OP.Component['ab_work_interface'](App);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\trows: [{\n\t\t\tview: \"toolbar\",\n\t\t\tid: ids.toolBar,\n\t\t\tautowidth: true,\n\t\t\tcols: [{\n\t\t\t\tview: \"button\",\n\t\t\t\tlabel: labels.application.backToApplication,\n\t\t\t\twidth: 200,\n\t\t\t\ttype: \"icon\",\n\t\t\t\ticon: \"arrow-left\",\n\t\t\t\talign: \"left\",\n\n\t\t\t\tclick: function click() {\n\t\t\t\t\tApp.actions.transitionApplicationChooser();\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tview: \"label\",\n\t\t\t\tid: ids.labelAppName,\n\t\t\t\talign: \"center\"\n\t\t\t}, {\n\t\t\t\tview: \"spacer\",\n\t\t\t\twidth: 200,\n\t\t\t\talrign: \"right\"\n\t\t\t}\n\t\t\t// {\n\t\t\t// \tid: ids.buttonSync,\n\t\t\t// \tview: \"button\",\n\t\t\t// \ttype: \"icon\",\n\t\t\t// \ticon: \"refresh\",\n\t\t\t// \tlabel: labels.application.synchronize,\n\t\t\t// \tautowidth: true,\n\t\t\t// \talign: \"right\",\n\t\t\t// \tclick: function () {\n\t\t\t// \t\t_logic.synchronize();\n\t\t\t// \t}\n\t\t\t// }\n\t\t\t]\n\t\t},\n\t\t//{ height: App.config.mediumSpacer },\n\t\t// {\n\t\t// \tview:\"segmented\",\n\t\t// \tid: ids.tabbar,\n\t\t// \tvalue: ids.tab_object,\n\t\t// \tmultiview: true,\n\t\t// \talign: \"center\",\n\t\t// \toptions:[\n\t\t// \t\t{\n\t\t// \t\t\tid: ids.tab_object,\n\t\t// \t\t\tvalue: labels.application.objectTitle,\n\t\t// \t\t\twidth: App.config.tabWidthMedium\n\t\t// \t\t},\n\t\t// \t\t{\n\t\t// \t\t\tid: ids.tab_interface,\n\t\t// \t\t\tvalue: labels.application.interfaceTitle,\n\t\t// \t\t\twidth: App.config.tabWidthMedium\n\t\t// \t\t}\n\t\t// \t],\n\t\t// \ton: {\n\t\t// \t\tonChange: function (idNew, idOld) {\n\t\t// \t\t\tif (idNew != idOld) {\n\t\t// \t\t\t\t_logic.tabSwitch(idNew, idOld);\n\t\t// \t\t\t}\n\t\t// \t\t}\n\t\t// \t}\n\t\t// },\n\t\t{ height: App.config.mediumSpacer }, {\n\t\t\tcols: [{\n\t\t\t\twidth: App.config.mediumSpacer\n\t\t\t}, {\n\t\t\t\trows: [{\n\t\t\t\t\tview: \"tabbar\",\n\t\t\t\t\tid: ids.tabbar,\n\t\t\t\t\tvalue: ids.tab_object,\n\t\t\t\t\tmultiview: true,\n\t\t\t\t\toptions: [{\n\t\t\t\t\t\tid: ids.tab_object,\n\t\t\t\t\t\tvalue: labels.application.objectTitle,\n\t\t\t\t\t\twidth: App.config.tabWidthMedium\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid: ids.tab_interface,\n\t\t\t\t\t\tvalue: labels.application.interfaceTitle,\n\t\t\t\t\t\twidth: App.config.tabWidthMedium\n\t\t\t\t\t}],\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: function onChange(idNew, idOld) {\n\t\t\t\t\t\t\tif (idNew != idOld) {\n\t\t\t\t\t\t\t\t_logic.tabSwitch(idNew, idOld);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tid: ids.workspace,\n\t\t\t\t\tcells: [AppObjectWorkspace.ui, AppInterfaceWorkspace.ui]\n\t\t\t\t}]\n\t\t\t}, {\n\t\t\t\twidth: App.config.mediumSpacer\n\t\t\t}]\n\t\t}, { height: App.config.mediumSpacer }]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {\n\n\t\tAppObjectWorkspace.init();\n\t\tAppInterfaceWorkspace.init();\n\n\t\t// initialize the Object Workspace to show first.\n\t\t_logic.tabSwitch(ids.tab_object);\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\tapplicationInit: function applicationInit(application) {\n\n\t\t\t// setup Application Label:\n\t\t\t$$(ids.labelAppName).define('label', application.label);\n\t\t\t$$(ids.labelAppName).refresh();\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\t\t/**\n   * @function synchronize\n   *\n   * Kick off the Synchronization process.\n   */\n\t\tsynchronize: function synchronize() {\n\n\t\t\t// self.element.trigger(self.options.synchronizeEvent, {\n\t\t\t// \tappID: AD.classes.AppBuilder.currApp.id\n\t\t\t// });\n\t\t\t//// Question: where should this logic go?  Here or in ab.js ?\n\n\t\t\tconsole.error('TODO: ab_work.logic.synchronize()!');\n\t\t},\n\n\t\t/**\n   * @function tabSwitch\n   *\n   * Every time a tab switch happens, decide which workspace to show.\n   *\n   * @param {string} idTab\tthe id of the tab that was changed to.\n   * @param {string} idOld\tthe previous tab id\n   */\n\t\ttabSwitch: function tabSwitch(idTab, idOld) {\n\n\t\t\tswitch (idTab) {\n\n\t\t\t\t// Object Workspace Tab\n\t\t\t\tcase ids.tab_object:\n\n\t\t\t\t\t// $$(ids.buttonSync).show();\n\t\t\t\t\tAppObjectWorkspace.show();\n\t\t\t\t\tbreak;\n\n\t\t\t\t// Interface Workspace Tab\n\t\t\t\tcase ids.tab_interface:\n\n\t\t\t\t\t// $$(ids.buttonSync).hide();\n\t\t\t\t\tAppInterfaceWorkspace.show();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t/**\n   * @function transitionWorkspace\n   *\n   * Switch the UI to view the App Workspace screen.\n   *\n   * @param {ABApplication} application\n   */\n\t\ttransitionWorkspace: function transitionWorkspace(application) {\n\n\t\t\t_logic.applicationInit(application);\n\t\t\tAppObjectWorkspace.applicationLoad(application);\n\t\t\tAppInterfaceWorkspace.applicationLoad(application);\n\n\t\t\t_logic.show();\n\t\t}\n\n\t};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nvar _ABApplication = __webpack_require__(1);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_interface\n *\n * Display the Interface for designing Pages and Views in the App Builder.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\n\t}\n};\n\nvar idBase = 'ab_work_interface';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\t//scroll: true,\n\t\trows: [{\n\t\t\tview: \"label\",\n\t\t\tlabel: \"interface workspace\"\n\t\t}]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {}\n\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t// our internal business logic\n\t;var _logic = {\n\n\t\t/**\n   * @function applicationLoad\n   *\n   * Initialize the Object Workspace with the given ABApplication.\n   *\n   * @param {ABApplication} application \n   */\n\t\tapplicationLoad: function applicationLoad(application) {\n\t\t\tconsole.error('TODO: ab_work_interface.applicationLoad()');\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\tapplicationLoad: _logic.applicationLoad,\n\t\tshow: _logic.show,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nvar _ABApplication = __webpack_require__(1);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(25);\n\n__webpack_require__(28);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object\n *\n * Display the Object Tab UI:\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\n\t}\n};\n\nvar idBase = 'ab_work_object';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\n\t};\n\n\tvar ObjectList = OP.Component['ab_work_object_list'](App);\n\tvar ObjectWorkspace = OP.Component['ab_work_object_workspace'](App);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\tautoheight: true,\n\t\tmargin: 20,\n\t\tcols: [ObjectList.ui, { view: \"resizer\" }, ObjectWorkspace.ui]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {\n\n\t\tObjectWorkspace.init();\n\t\tObjectList.init();\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\t/**\n   * @function applicationLoad\n   *\n   * Initialize the Object Workspace with the given ABApplication.\n   *\n   * @param {ABApplication} application \n   */\n\t\tapplicationLoad: function applicationLoad(application) {\n\t\t\tObjectList.applicationLoad(application);\n\t\t\tObjectWorkspace.clearObjectWorkspace();\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\tapplicationLoad: _logic.applicationLoad,\n\t\tshow: _logic.show,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nvar _ABApplication = __webpack_require__(1);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(26);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * ab_work_object_list\n *\n * Manage the Object List\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\taddNew: L('ab.object.addNew', '*Add new object')\n\n\t}\n};\n\nvar idBase = 'ab_work_object_list';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tlist: App.unique(idBase + '_editlist'),\n\t\tbuttonNew: App.unique(idBase + '_buttonNew')\n\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\trows: [{\n\t\t\tview: App.custom.editlist.view, // \"editlist\",\n\t\t\tid: ids.list,\n\t\t\twidth: 250,\n\n\t\t\theight: 800, // #Hack!\n\n\t\t\tselect: true,\n\t\t\teditaction: 'custom',\n\t\t\teditable: true,\n\t\t\teditor: \"text\",\n\t\t\teditValue: \"label\",\n\t\t\ttemplate: function template(obj, common) {\n\t\t\t\treturn _logic.templateListItem(obj, common);\n\t\t\t},\n\t\t\ttype: {\n\t\t\t\theight: \"auto\",\n\t\t\t\t// unsyncNumber: \"\",  // \"<span class='ab-object-unsync'><span class='ab-object-unsync-number'></span> unsync</span>\",\n\t\t\t\ticonGear: \"<div class='ab-object-list-edit'><span class='webix_icon fa-cog'></span></div>\"\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonAfterRender: function onAfterRender() {\n\t\t\t\t\t_logic.onAfterRender();\n\t\t\t\t},\n\t\t\t\tonAfterSelect: function onAfterSelect(id) {\n\t\t\t\t\t_logic.selectObject(id);\n\t\t\t\t},\n\t\t\t\tonAfterDelete: function onAfterDelete(id) {\n\t\t\t\t\t_logic.onAfterDelete(id);\n\t\t\t\t},\n\t\t\t\tonBeforeEditStop: function onBeforeEditStop(state, editor) {\n\t\t\t\t\t_logic.onBeforeEditStop(state, editor);\n\t\t\t\t},\n\t\t\t\tonAfterEditStop: function onAfterEditStop(state, editor, ignoreUpdate) {\n\t\t\t\t\t_logic.onAfterEditStop(state, editor, ignoreUpdate);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\t\"ab-object-list-edit\": function abObjectListEdit(e, id, trg) {\n\t\t\t\t\t_logic.clickEditMenu(e, id, trg);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tview: 'button',\n\t\t\tid: ids.buttonNew,\n\t\t\tvalue: labels.component.addNew,\n\t\t\tclick: function click() {\n\t\t\t\t_logic.clickNewObject();\n\t\t\t}\n\t\t}]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {\n\n\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t\t$$(ids.component).adjust();\n\t\t$$(ids.list).adjust();\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\t/**\n   * @function applicationLoad\n   *\n   * Initialize the Object List from the provided ABApplication\n   *\n   * If no ABApplication is provided, then show an empty form. (create operation)\n   *\n   * @param {ABApplication} application  \t[optional] The current ABApplication \n   *\t\t\t\t\t\t\t\t\t\twe are working with.\n   */\n\t\tapplicationLoad: function applicationLoad(application) {\n\t\t\t_logic.listBusy();\n\n\t\t\tCurrentApplication = application;\n\n\t\t\t// get a DataCollection of all our objects\n\t\t\tobjectList = new webix.DataCollection({\n\t\t\t\tdata: application.objects()\n\t\t\t});\n\n\t\t\t// clear our list and display our objects:\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.clearAll();\n\t\t\tList.data.unsync();\n\t\t\tList.data.sync(objectList);\n\t\t\tList.refresh();\n\t\t\tList.unselectAll();\n\n\t\t\t// \n\t\t\t_logic.syncNumberRefresh();\n\t\t\t_logic.listReady();\n\n\t\t\t// prepare our Popup with the current Application\n\t\t\tPopupNewObjectComponent.applicationLoad(application);\n\t\t},\n\n\t\tclickEditMenu: function clickEditMenu(e, id, trg) {\n\n\t\t\tconsole.error('!! TODO: clickEditMenu()');\n\t\t\t// // Show menu\n\t\t\t// $$(self.webixUiId.objectListMenuPopup).show(trg);\n\n\t\t\t// return false;\n\t\t},\n\n\t\tlistBusy: function listBusy() {\n\t\t\t$$(ids.list).showProgress({ type: \"icon\" });\n\t\t},\n\n\t\tlistReady: function listReady() {\n\t\t\t$$(ids.list).hideProgress();\n\t\t},\n\n\t\tonAfterDelete: function onAfterDelete(id) {\n\t\t\tconsole.error('!! todo: onAfterDelete()');\n\t\t},\n\n\t\tonAfterRender: function onAfterRender() {\n\t\t\tconsole.error('!! todo: onAfterRender() editing');\n\t\t\t// webix.once(function () {\n\t\t\t// \t$$(self.webixUiId.objectList).data.each(function (d) {\n\t\t\t// \t\t$($$(self.webixUiId.objectList).getItemNode(d.id)).find('.ab-object-unsync-number').html(99);\n\t\t\t// \t});\n\t\t\t// });\n\n\t\t\t// // Show gear icon\n\t\t\t// if (this.getSelectedId(true).length > 0) {\n\t\t\t// \t$(this.getItemNode(this.getSelectedId(false))).find('.ab-object-list-edit').show();\n\t\t\t// \tself.refreshUnsyncNumber();\n\t\t\t// }\n\t\t},\n\n\t\tonAfterEditStop: function onAfterEditStop(state, editor, ignoreUpdate) {\n\n\t\t\tconsole.error('!! todo: onAfterEditStop() editing');\n\t\t\t// if (state.value != state.old) {\n\t\t\t// \tvar _this = this;\n\n\t\t\t// \tthis.showProgress({ type: 'icon' });\n\n\t\t\t// \tvar selectedObject = AD.classes.AppBuilder.currApp.objects.filter(function (item, index, list) { return item.id == editor.id; })[0];\n\t\t\t// \tselectedObject.attr('label', state.value);\n\n\t\t\t// \t// Call server to rename\n\t\t\t// \tselectedObject.save()\n\t\t\t// \t\t.fail(function () {\n\t\t\t// \t\t\t_this.hideProgress();\n\n\t\t\t// \t\t\twebix.message({\n\t\t\t// \t\t\t\ttype: \"error\",\n\t\t\t// \t\t\t\ttext: self.labels.common.renameErrorMessage.replace(\"{0}\", state.old)\n\t\t\t// \t\t\t});\n\n\t\t\t// \t\t\tAD.error.log('Object List : Error rename object data', { error: err });\n\t\t\t// \t\t})\n\t\t\t// \t\t.then(function () {\n\t\t\t// \t\t\t_this.hideProgress();\n\n\t\t\t// \t\t\tif (selectedObject.translate) selectedObject.translate();\n\n\t\t\t// \t\t\t// Show success message\n\t\t\t// \t\t\twebix.message({\n\t\t\t// \t\t\t\ttype: \"success\",\n\t\t\t// \t\t\t\ttext: self.labels.common.renameSuccessMessage.replace('{0}', state.value)\n\t\t\t// \t\t\t});\n\n\t\t\t// \t\t\t// Show gear icon\n\t\t\t// \t\t\t$(_this.getItemNode(editor.id)).find('.ab-object-list-edit').show();\n\t\t\t// \t\t});\n\t\t\t// }\n\t\t},\n\n\t\tonBeforeEditStop: function onBeforeEditStop(state, editor) {\n\t\t\tconsole.error('!! todo: onBeforeEditStop() editing');\n\t\t\t// if (!inputValidator.validateFormat(state.value)) {\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\t\t\t// // Validation - check duplicate\n\t\t\t// if (!inputValidator.rules.preventDuplicateObjectName(state.value, editor.id) && state.value != state.old) {\n\t\t\t// \twebix.alert({\n\t\t\t// \t\ttitle: self.labels.object.invalidName,\n\t\t\t// \t\tok: self.labels.common.ok,\n\t\t\t// \t\ttext: self.labels.object.duplicateName.replace(\"{0}\", state.value)\n\t\t\t// \t});\n\n\t\t\t// \treturn false;\n\t\t\t// }\n\t\t},\n\n\t\t/**\n   * @function selectObject()\n   *\n   * Perform these actions when an Object is selected in the List.\n   */\n\t\tselectObject: function selectObject(id) {\n\n\t\t\tvar object = $$(ids.list).getItem(id);\n\t\t\tApp.actions.populateObjectWorkspace(object);\n\n\t\t\t//// TODO: do we need these?\n\n\t\t\t// // Refresh unsync number\n\t\t\t// self.refreshUnsyncNumber();\n\n\t\t\t// // Show gear icon\n\t\t\t// $(this.getItemNode(id)).find('.ab-object-list-edit').show();\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\t\tsyncNumberRefresh: function syncNumberRefresh() {\n\n\t\t\t//// NOTE: I think we are removing Sync Numbers with the refactor.\n\t\t\t//// probably wont need this.\n\t\t\tconsole.error('TODO: syncNumRefresh()');\n\t\t\t// var self = this,\n\t\t\t// \tobjects = [];\n\n\t\t\t// objects = $$(self.webixUiId.objectList).data.find(function (d) {\n\t\t\t// \treturn objectName ? d.name == objectName : true;\n\t\t\t// }, false, true);\n\n\t\t\t// objects.forEach(function (obj) {\n\t\t\t// \tvar objectModel = modelCreator.getModel(AD.classes.AppBuilder.currApp, obj.name),\n\t\t\t// \t\tunsyncNumber = (objectModel && objectModel.Cached ? objectModel.Cached.count() : 0),\n\t\t\t// \t\thtmlItem = $($$(self.webixUiId.objectList).getItemNode(obj.id));\n\n\t\t\t// \tif (unsyncNumber > 0) {\n\t\t\t// \t\thtmlItem.find('.ab-object-unsync-number').html(unsyncNumber);\n\t\t\t// \t\thtmlItem.find('.ab-object-unsync').show();\n\t\t\t// \t}\n\t\t\t// \telse {\n\t\t\t// \t\thtmlItem.find('.ab-object-unsync').hide();\n\t\t\t// \t}\n\t\t\t// });\n\t\t},\n\n\t\t/**\n   * @function templateListItem\n   *\n   * Defines the template for each row of our ObjectList.\n   *\n   * @param {obj} obj the current instance of ABObject for the row.\n   * @param {?} common the webix.common icon data structure\n   * @return {string}\n   */\n\t\ttemplateListItem: function templateListItem(obj, common) {\n\t\t\treturn _templateListItem.replace('#label#', obj.label || '??label??').replace('{common.iconGear}', common.iconGear);\n\t\t},\n\n\t\t/**\n   * @function callbackNewObject\n   *\n   * Once a New Object was created in the Popup, follow up with it here.\n   */\n\t\tcallbackNewObject: function callbackNewObject(err, object) {\n\n\t\t\tif (err) {\n\t\t\t\tOP.Error.log('Error creating New Object', { error: err });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tobjectList.add(object, 0);\n\t\t\t$$(ids.list).select(newObject.id);\n\t\t},\n\n\t\t/**\n   * @function clickNewObject\n   *\n   * Manages initiating the transition to the new Object Popup window\n   */\n\t\tclickNewObject: function clickNewObject() {\n\n\t\t\t// show the new popup\n\t\t\tPopupNewObject.show();\n\t\t}\n\t};\n\n\t/*\n  * _templateListItem\n  *\n  * The Object Row template definition.\n  */\n\tvar _templateListItem = [\"<div class='ab-object-list-item'>\", \"#label#\",\n\t// \"{common.unsyncNumber}\",\n\t\"{common.iconGear}\", \"</div>\"].join('');\n\n\t// Note: put these here so _logic is defined:\n\t// There is a Popup for adding a new Object:\n\tvar PopupNewObjectComponent = OP.Component['ab_work_object_list_newObject'](App);\n\tvar PopupNewObject = webix.ui(PopupNewObjectComponent.ui);\n\tPopupNewObjectComponent.init({\n\t\tonDone: _logic.callbackNewObject\n\t});\n\n\tvar CurrentApplication = null;\n\tvar objectList = null;\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t/**\n   * @function getSelectedObject\n   *\n   * returns which ABObject is currently selected.\n   * @return {ABObject}  or {null} if nothing selected.\n   */\n\t\tgetSelectedObject: function getSelectedObject() {\n\t\t\treturn $$(ids.list).getSelectedItem();\n\t\t}\n\n\t};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tapplicationLoad: _logic.applicationLoad,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\n__webpack_require__(27);\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_list_newObject\n *\n * Display the form for creating a new Object.  This Popup will manage several \n * different sub components for gathering Object data for saving.\n *\n * The sub components will gather the data for the object and do basic form \n * validations on their interface.  \n *\n * when ready, the sub component will call onSave(values, cb)  to allow this \n * component to manage the actual final object validation, and saving to this\n * application.  On success, cb(null) will be called.  on error cb(err) will\n * be called.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\taddNew: L('ab.object.addNew', '*Add new object')\n\n\t}\n};\n\nvar idBase = 'ab_work_object_list_newObject';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\t};\n\n\tvar BlankTab = OP.Component['ab_work_object_list_newObject_blank'](App);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"window\",\n\t\tid: ids.component,\n\t\twidth: 400,\n\t\tposition: \"center\",\n\t\tmodal: true,\n\t\thead: labels.component.addNew,\n\t\tselectNewObject: true,\n\t\tbody: {\n\t\t\tview: \"tabview\",\n\t\t\tcells: [BlankTab.ui]\n\t\t}\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\tvar ourCBs = {\n\t\t\tonCancel: _logic.hide,\n\t\t\tonSave: _logic.save\n\t\t};\n\n\t\tBlankTab.init(ourCBs);\n\t};\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\t/**\n   * @function applicationLoad()\n   *\n   * prepare ourself with the current application\n   */\n\t\tapplicationLoad: function applicationLoad(application) {\n\t\t\t// _logic.show();\n\t\t\tcurrentApplication = application; // remember our current Application.\n\t\t},\n\n\t\tcallbacks: {\n\t\t\tonDone: function onDone() {}\n\t\t},\n\n\t\t/**\n   * @function hide()\n   *\n   * remove the busy indicator from the form.\n   */\n\t\thide: function hide() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\t/**\n   * @function save\n   *\n   * take the data gathered by our child creation tabs, and \n   * add it to our current application.\n   *\n   * @param {obj} values  key=>value hash of model values.\n   * @param {fn}  cb \t\tnode style callback to indicate success/failure\n   */\n\t\tsave: function save(values, cb) {\n\n\t\t\t// must have an application set.\n\t\t\tif (!currentApplication) {\n\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\ttitle: 'Shoot!',\n\t\t\t\t\ttest: 'No Application Set!  Why?'\n\t\t\t\t});\n\t\t\t\tcb(true); // there was an error.\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// create a new (unsaved) instance of our object:\n\t\t\tvar newObject = currentApplication.objectNew(values);\n\n\t\t\t// have newObject validate it's values.\n\t\t\tvar validationErrors = newObject.isValid();\n\t\t\tif (validationErrors) {\n\t\t\t\tcb(validationErrors); // tell current Tab component the errors\n\t\t\t\treturn false; // stop here.\n\t\t\t}\n\n\t\t\t// if we get here, save the new Object\n\t\t\tnewObject.save().then(function (obj) {\n\n\t\t\t\t// successfully done:\n\t\t\t\tcb(); // tell current tab component save successful\n\t\t\t\t_logic.hide(); // hide our popup\n\t\t\t\t_logic.callbacks.onDone(null, obj); // tell parent component we're done\n\t\t\t}).catch(function (err) {\n\t\t\t\tcb(err); // tell current Tab component there was an error\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\tvar currentApplication = null;\n\t// var currentCallBack = null;\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tapplicationLoad: _logic.applicationLoad,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\n/*\n * ab_work_object_list_newObject_blank\n *\n * Display the form for creating a new Application.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\tplaceholderName: L('ab.object.form.placeholderName', \"*Object name\")\n\t}\n};\n\nvar idBase = 'ab_work_object_list_newObject_blank';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tform: App.unique(idBase + '_blank'),\n\t\tbuttonSave: App.unique(idBase + '_save'),\n\t\tbuttonCancel: App.unique(idBase + '_cancel')\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\theader: labels.common.create,\n\t\tbody: {\n\t\t\tview: \"form\",\n\t\t\tid: ids.form,\n\t\t\twidth: 400,\n\t\t\trules: {\n\n\t\t\t\t// TODO:\n\t\t\t\t// name: inputValidator.rules.validateObjectName\n\t\t\t},\n\t\t\telements: [{ view: \"text\", label: labels.common.formName, name: \"name\", required: true, placeholder: labels.component.placeholderName, labelWidth: 70 }, {\n\t\t\t\tmargin: 5,\n\t\t\t\tcols: [{\n\t\t\t\t\tview: \"button\", id: ids.buttonCancel, value: labels.common.cancel,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.cancel();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"button\", id: ids.buttonSave, value: labels.common.add, type: \"form\",\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\treturn _logic.save();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\t\t}\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t\t// load up our callbacks.\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\t};\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\tcallbacks: {\n\t\t\tonCancel: function onCancel() {\n\t\t\t\tconsole.warn('NO onCancel()!');\n\t\t\t},\n\t\t\tonSave: function onSave(values, cb) {\n\t\t\t\tconsole.warn('NO onSave()!');\n\t\t\t}\n\t\t},\n\n\t\tcancel: function cancel() {\n\n\t\t\t_logic.formClear();\n\t\t\t_logic.callbacks.onCancel();\n\t\t},\n\n\t\tformClear: function formClear() {\n\t\t\t$$(ids.form).clearValidation();\n\t\t\t$$(ids.form).clear();\n\t\t},\n\n\t\t/**\n   * @function hide()\n   *\n   * hide this component.\n   */\n\t\thide: function hide() {\n\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\t/**\n   * @function save\n   *\n   * verify the current info is ok, package it, and return it to be \n   * added to the application.createModel() method.\n   */\n\t\tsave: function save() {\n\t\t\tvar saveButton = $$(ids.buttonSave);\n\t\t\tsaveButton.disable();\n\n\t\t\tvar Form = $$(ids.form);\n\n\t\t\tForm.clearValidation();\n\n\t\t\t// if it doesn't pass the basic form validation, return:\n\t\t\tif (!Form.validate()) {\n\t\t\t\tsaveButton.enable();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar values = Form.getValues();\n\n\t\t\t// now send data back to be added:\n\t\t\t_logic.callbacks.onSave(values, function (err) {\n\n\t\t\t\tif (err) {\n\t\t\t\t\tif (OP.Form.isValidationError(err, Form)) {}\n\t\t\t\t\t// do I do anything else here?\n\t\t\t\t\t// this auto updates the form\n\n\n\t\t\t\t\t// get notified if there was an error saving.\n\t\t\t\t\tsaveButton.enable();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// if there was no error, clear the form for the next\n\t\t\t\t// entry:\n\t\t\t\t_logic.formClear();\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {}\n\n\t/**\n  * @function populateApplicationForm()\n  *\n  * Initialze the Form with the values from the provided ABApplication.\n  *\n  * If no ABApplication is provided, then show an empty form. (create operation)\n  *\n  * @param {ABApplication} Application  \t[optional] The current ABApplication \n  *\t\t\t\t\t\t\t\t\t\twe are working with.\n  */\n\t// populateApplicationForm:function(Application){\n\n\t// \t_logic.formReset();\n\t// \tif (Application) {\n\t// \t\t// populate Form here:\n\t// \t\t_logic.formPopulate(Application);\n\t// \t}\n\t// \t_logic.permissionPopulate(Application);\n\t// \t_logic.show();\n\t// }\n\n\t// return the current instance of this component:\n\t;return {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nvar _ABApplication = __webpack_require__(1);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(29);\n\n__webpack_require__(30);\n\n__webpack_require__(32);\n\n__webpack_require__(33);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_workspace\n *\n * Manage the Object Workspace area.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\taddNewRow: L('ab.object.addNewRow', \"*Add new row\"),\n\n\t\tselectObject: L('ab.object.selectObject', \"*Select an object to work with.\"),\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\n\t\t// Toolbar:\n\t\thideFields: L('ab.object.toolbar.hideFields', \"*Hide fields\"),\n\t\tfilterFields: L('ab.object.toolbar.filterFields', \"*Add filters\"),\n\t\tsortFields: L('ab.object.toolbar.sortFields', \"*Apply sort\"),\n\t\tfrozenColumns: L('ab.object.toolbar.frozenColumns', \"*Frozen columns\"),\n\t\tdefineLabel: L('ab.object.toolbar.defineLabel', \"*Define label\"),\n\t\tpermission: L('ab.object.toolbar.permission', \"*Permission\"),\n\t\taddFields: L('ab.object.toolbar.addFields', \"*Add new column\"),\n\t\t\"export\": L('ab.object.toolbar.export', \"*Export\"),\n\n\t\tconfirmDeleteTitle: L('ab.object.delete.title', \"*Delete data field\"),\n\t\tconfirmDeleteMessage: L('ab.object.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tbuttonAddField: App.unique(idBase + '_buttonAddField'),\n\t\tbuttonExport: App.unique(idBase + '_buttonExport'),\n\t\tbuttonFieldsVisible: App.unique(idBase + '_buttonFieldsVisible'),\n\t\tbuttonFilter: App.unique(idBase + '_buttonFilter'),\n\t\tbuttonFrozen: App.unique(idBase + '_buttonFrozen'),\n\t\tbuttonLabel: App.unique(idBase + '_buttonLabel'),\n\t\tbuttonRowNew: App.unique(idBase + '_buttonRowNew'),\n\t\tbuttonSort: App.unique(idBase + '_buttonSort'),\n\n\t\tdatatable: App.unique(idBase + '_datatable'),\n\n\t\t// Toolbar:\n\t\ttoolbar: App.unique(idBase + '_toolbar'),\n\n\t\tnoSelection: App.unique(idBase + '_noSelection'),\n\t\tselectedObject: App.unique(idBase + '_selectedObject')\n\n\t};\n\n\t// The DataTable that displays our object:\n\tvar DataTable = OP.Component['ab_work_object_workspace_datatable'](App);\n\n\t// Various Popups on our page:\n\tvar PopupDefineLabelComponent = OP.Component['ab_work_object_workspace_popupDefineLabel'](App);\n\tvar PopupDefineLabel = webix.ui(PopupDefineLabelComponent.ui);\n\n\tvar PopupNewDataFieldComponent = OP.Component['ab_work_object_workspace_popupNewDataField'](App);\n\t// var PopupNewDataField = webix.ui(PopupNewDataFieldComponent.ui);\n\twebix.ui(PopupNewDataFieldComponent.ui);\n\n\tvar PopupHideFieldComponent = OP.Component['ab_work_object_workspace_popupHideFields'](App);\n\tvar PopupHideField = webix.ui(PopupHideFieldComponent.ui);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: 'multiview',\n\t\tid: ids.component,\n\t\trows: [{\n\t\t\tid: ids.noSelection,\n\t\t\trows: [{\n\t\t\t\tview: 'label',\n\t\t\t\tlabel: labels.component.selectObject\n\t\t\t}]\n\t\t}, {\n\t\t\tid: ids.selectedObject,\n\t\t\trows: [{\n\t\t\t\tview: 'toolbar',\n\t\t\t\tid: ids.toolbar,\n\t\t\t\thidden: true,\n\t\t\t\tcss: \"ab-data-toolbar\",\n\t\t\t\tcols: [{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tid: ids.buttonFieldsVisible,\n\t\t\t\t\tlabel: labels.component.hideFields,\n\t\t\t\t\t// popup: 'self.webixUiId.visibleFieldsPopup',\n\t\t\t\t\ticon: \"eye-slash\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 120,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tbadge: 0,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarFieldsVisible(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonFilter,\n\t\t\t\t\tlabel: labels.component.filterFields,\n\t\t\t\t\ticon: \"filter\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 120,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tbadge: 0,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarFilter(this);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonSort,\n\t\t\t\t\tlabel: labels.component.sortFields,\n\t\t\t\t\ticon: \"sort\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 120,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tbadge: 0,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarSort(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonFrozen,\n\t\t\t\t\tlabel: labels.component.frozenColumns,\n\t\t\t\t\ticon: \"thumb-tack\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tbadge: 0,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarFrozen(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonLabel,\n\t\t\t\t\tlabel: labels.component.defineLabel,\n\t\t\t\t\ticon: \"crosshairs\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 130,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarDefineLabel(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tlabel: labels.component.permission,\n\t\t\t\t\ticon: \"lock\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarPermission(this.$view);\n\t\t\t\t\t}\n\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonAddField,\n\t\t\t\t\tlabel: labels.component.addFields,\n\t\t\t\t\ticon: \"plus\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 150,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarAddFields(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonExport,\n\t\t\t\t\tlabel: labels.component.export,\n\t\t\t\t\ticon: \"download\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarButtonExport(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}, DataTable.ui, {\n\t\t\t\tcols: [{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tid: ids.buttonRowNew,\n\t\t\t\t\tvalue: labels.component.addNewRow,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t// TODO:\n\t\t\t\t\t\t_logic.rowAdd();\n\t\t\t\t\t\t// self.addNewRow({});\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\n\t\t}]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {\n\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t\tDataTable.init({\n\t\t\tonEditorMenu: _logic.callbackHeaderEditorMenu\n\t\t});\n\n\t\tPopupDefineLabelComponent.init({\n\t\t\tonChange: _logic.callbackDefineLabel // be notified when there is a change in the label\n\t\t});\n\n\t\tPopupNewDataFieldComponent.init({\n\t\t\tonSave: _logic.callbackAddFields // be notified when a new Field is created & saved\n\t\t});\n\n\t\tPopupHideFieldComponent.init({\n\t\t\tonChange: _logic.callbackFieldsVisible // be notified when there is a change in the hidden fields\n\t\t});\n\n\t\t$$(ids.noSelection).show();\n\t};\n\n\tvar CurrentObject = null;\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\t/**\n   * @function callbackDefineLabel\n   *\n   * call back for when the Define Label popup is finished.\n   */\n\t\tcallbackAddFields: function callbackAddFields(field) {\n\t\t\tDataTable.refresh();\n\t\t},\n\n\t\t/**\n   * @function callbackDefineLabel\n   *\n   * call back for when the Define Label popup is finished.\n   */\n\t\tcallbackDefineLabel: function callbackDefineLabel() {},\n\n\t\t/**\n   * @function callbackFieldsVisible\n   *\n   * call back for when the hidden fields have changed.\n   */\n\t\tcallbackFieldsVisible: function callbackFieldsVisible() {\n\n\t\t\tvar hiddenFields = CurrentObject.workspaceHiddenFields;\n\t\t\t$$(ids.buttonFieldsVisible).define('badge', hiddenFields.length);\n\t\t\t$$(ids.buttonFieldsVisible).refresh();\n\n\t\t\tDataTable.refresh();\n\t\t},\n\n\t\t/**\n   * @function callbackFieldsVisible\n   *\n   * call back for when an editor menu action has been selected.\n   * @param {string} action [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n   */\n\t\tcallbackHeaderEditorMenu: function callbackHeaderEditorMenu(action, field, node) {\n\n\t\t\tswitch (action) {\n\n\t\t\t\tcase 'hide':\n\t\t\t\tcase 'filter':\n\t\t\t\tcase 'sort':\n\t\t\t\t\tconsole.error('!! TODO: callbackHeaderEditorMenu():  unimplemented action:' + action);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'edit':\n\t\t\t\t\t// pass control on to our Popup:\n\t\t\t\t\tPopupNewDataFieldComponent.show(node, field);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'delete':\n\n\t\t\t\t\t// verify they mean to do this:\n\t\t\t\t\tOP.Dialog.Confirm({\n\t\t\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t\t\t\tmessage: labels.component.confirmDeleteMessage.replace('{0}', field.label),\n\t\t\t\t\t\tcallback: function callback(isOK) {\n\n\t\t\t\t\t\t\tif (isOK) {\n\n\t\t\t\t\t\t\t\tfield.destroy().then(function () {\n\t\t\t\t\t\t\t\t\tDataTable.refresh();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function clearObjectWorkspace()\n   *\n   * Clear the object workspace. \n   */\n\t\tclearObjectWorkspace: function clearObjectWorkspace() {\n\n\t\t\t// NOTE: to clear a visual glitch when multiple views are updating\n\t\t\t// at one time ... stop the animation on this one:\n\t\t\t$$(ids.noSelection).show(false, false);\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\t\t/**\n   * @function toolbarAddFields\n   *\n   * Show the popup to allow the user to create new fields for \n   * this object.\n   */\n\t\ttoolbarAddFields: function toolbarAddFields($view) {\n\t\t\tPopupNewDataFieldComponent.show($view);\n\t\t},\n\n\t\ttoolbarButtonExport: function toolbarButtonExport($view) {\n\t\t\tconsole.error('TODO: Button Export()');\n\t\t},\n\n\t\t/**\n   * @function toolbarDefineLabel\n   *\n   * Show the popup to allow the user to define the default label for \n   * this object.\n   */\n\t\ttoolbarDefineLabel: function toolbarDefineLabel($view) {\n\t\t\tPopupDefineLabel.show($view);\n\t\t},\n\n\t\t/**\n   * @function toolbarFieldsVisible\n   *\n   * Show the popup to allow the user to hide columns for this view.\n   */\n\t\ttoolbarFieldsVisible: function toolbarFieldsVisible($view) {\n\t\t\tPopupHideField.show($view);\n\t\t},\n\n\t\t/**\n   * @function toolbarFilter\n   *\n   * show the popup to add a filter to the datatable\n   */\n\t\ttoolbarFilter: function toolbarFilter($view) {\n\t\t\t// self.refreshPopupData();\n\t\t\t// $$(self.webixUiId.filterFieldsPopup).show($view);\n\t\t\tconsole.error('TODO: button filterFields()');\n\t\t},\n\n\t\t/**\n   * @function toolbarFrozen\n   *\n   * show the popup to freeze columns for the datatable\n   */\n\t\ttoolbarFrozen: function toolbarFrozen($view) {\n\t\t\tconsole.error('TODO: toolbarFrozen()');\n\t\t},\n\n\t\ttoolbarPermission: function toolbarPermission($view) {\n\t\t\tconsole.error('TODO: toolbarPermission()');\n\t\t},\n\n\t\t/**\n   * @function toolbarSort\n   *\n   * show the popup to sort the datatable\n   */\n\t\ttoolbarSort: function toolbarSort($view) {\n\t\t\t// self.refreshPopupData();\n\t\t\t// $$(self.webixUiId.sortFieldsPopup).show($view);\n\t\t\tconsole.error('TODO: toolbarSort()');\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t/**\n   * @function populateObjectWorkspace()\n   *\n   * Initialize the Object Workspace with the provided ABObject.\n   *\n   * @param {ABObject} object  \tcurrent ABObject instance we are working with.\n   */\n\t\tpopulateObjectWorkspace: function populateObjectWorkspace(object) {\n\n\t\t\t$$(ids.toolbar).show();\n\t\t\t$$(ids.selectedObject).show();\n\n\t\t\tCurrentObject = object;\n\n\t\t\tApp.actions.populateObjectPopupAddDataField(object);\n\n\t\t\t// update hiddenFields \n\t\t\t_logic.callbackFieldsVisible();\n\n\t\t\tPopupDefineLabelComponent.objectLoad(object);\n\t\t\tPopupHideFieldComponent.objectLoad(object);\n\t\t\tDataTable.objectLoad(object);\n\t\t}\n\n\t};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tclearObjectWorkspace: _logic.clearObjectWorkspace,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\n__webpack_require__(31);\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_workspace\n *\n * Manage the Object Workspace area.\n *\n */\n\nvar labels = {\n\n\tcomponent: {}\n};\n\nvar idBase = 'ab_work_object_workspace_datatable';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"datatable\",\n\t\tid: ids.component,\n\t\tresizeColumn: true,\n\t\tresizeRow: true,\n\t\tprerender: false,\n\t\teditable: true,\n\t\tfixedRowHeight: false,\n\t\teditaction: \"custom\",\n\t\tselect: \"cell\",\n\t\tdragColumn: true,\n\t\t//height:800,  // #hack!\n\t\ton: {\n\t\t\tonBeforeSelect: function onBeforeSelect(data, preserve) {\n\t\t\t\tconsole.error('!! ToDo: onBeforeSelect()');\n\t\t\t\t// var itemNode = this.getItemNode({ row: data.row, column: data.column });\n\n\t\t\t\t// var column = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == data.column; });\n\t\t\t\t// if (!column || column.length < 1) {\n\t\t\t\t// \tconsole.log('System could not found this column data');\n\t\t\t\t// \treturn false;\n\t\t\t\t// } else\n\t\t\t\t// \tcolumn = column[0];\n\n\t\t\t\t// return dataFieldsManager.customEdit(AD.classes.AppBuilder.currApp, AD.classes.AppBuilder.currApp.currObj, column, data.row, itemNode);\n\t\t\t},\n\t\t\tonAfterSelect: function onAfterSelect(data, prevent) {\n\t\t\t\tconsole.error('!! todo: onAfterSelect()');\n\t\t\t\t// var columnConfig = $$(self.webixUiId.objectDatatable).getColumnConfig(data.column),\n\t\t\t\t// \tfieldData = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == data.column; });\n\n\t\t\t\t// if (!fieldData || fieldData.length < 1) {\n\t\t\t\t// \tconsole.log('System could not found this column data');\n\t\t\t\t// \treturn false;\n\t\t\t\t// } else\n\t\t\t\t// \tfieldData = fieldData[0];\n\n\t\t\t\t// // Custom update data\n\t\t\t\t// if (dataFieldsManager.hasCustomEdit(columnConfig.fieldName, fieldData))\n\t\t\t\t// \treturn false;\n\n\t\t\t\t// // Normal update data\n\t\t\t\t// this.editCell(data.row, data.column);\n\t\t\t},\n\t\t\tonCheck: function onCheck(row, col, val) {\n\t\t\t\t// Update checkbox data\n\t\t\t\tconsole.error('!! ToDo: onCheck()');\n\t\t\t\t// var item = $$(self.webixUiId.objectDatatable).getItem(row);\n\n\t\t\t\t// self.updateRowData({ value: (val > 0 ? true : false) }, { row: row, column: col }, false)\n\t\t\t\t// \t.fail(function (err) {\n\t\t\t\t// \t\t// Rollback\n\t\t\t\t// \t\titem[col] = !val;\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).updateItem(row, item);\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).refresh(row);\n\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t})\n\t\t\t\t// \t.then(function (result) {\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t});\n\t\t\t},\n\t\t\tonBeforeEditStop: function onBeforeEditStop(state, editor) {\n\t\t\t\tconsole.error('!! ToDo: onCheck()');\n\t\t\t\t// var column = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == editor.column; });\n\n\t\t\t\t// if (!column || column.length < 1) return true;\n\t\t\t\t// column = column[0];\n\n\t\t\t\t// var passValidate = dataFieldsManager.validate(column, state.value);\n\n\t\t\t\t// if (!passValidate) {\n\t\t\t\t// \t$$(self.webixUiId.objectDatatable).editCancel();\n\t\t\t\t// }\n\n\t\t\t\t// return passValidate;\n\t\t\t},\n\t\t\tonAfterEditStop: function onAfterEditStop(state, editor, ignoreUpdate) {\n\t\t\t\tconsole.error('!! ToDo: onAfterEditStop()');\n\t\t\t\t// var item = $$(self.webixUiId.objectDatatable).getItem(editor.row);\n\n\t\t\t\t// self.updateRowData(state, editor, ignoreUpdate)\n\t\t\t\t// \t.fail(function (err) { // Cached\n\t\t\t\t// \t\titem[editor.column] = state.old;\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).updateItem(editor.row, item);\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).refresh(editor.row);\n\n\t\t\t\t// \t\t// TODO : Message\n\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t})\n\t\t\t\t// \t.then(function (result) {\n\t\t\t\t// \t\tif (item) {\n\t\t\t\t// \t\t\titem[editor.column] = state.value;\n\n\t\t\t\t// \t\t\tif (result && result.constructor.name === 'Cached' && result.isUnsync())\n\t\t\t\t// \t\t\t\titem.isUnsync = true;\n\n\t\t\t\t// \t\t\t$$(self.webixUiId.objectDatatable).updateItem(editor.row, item);\n\t\t\t\t// \t\t}\n\n\t\t\t\t// \t\t// TODO : Message\n\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t});\n\t\t\t},\n\t\t\tonColumnResize: function onColumnResize(id, newWidth, oldWidth, user_action) {\n\t\t\t\tconsole.error('!! ToDo: onColumnResize()');\n\t\t\t\t// var columnConfig = $$(self.webixUiId.objectDatatable).getColumnConfig(id);\n\t\t\t\t// var column = self.data.columns.filter(function (col) { return col.id == columnConfig.dataId; });\n\t\t\t\t// if (column && column[0])\n\t\t\t\t// \tcolumn[0].setWidth(newWidth);\n\n\t\t\t\t// // if (typeof columnConfig.template !== 'undefined' && columnConfig.template !== null) {\n\t\t\t\t// // \t// For calculate/refresh row height\n\t\t\t\t// // \t$$(self.webixUiId.objectDatatable).render();\n\t\t\t\t// // }\n\t\t\t},\n\t\t\tonBeforeColumnDrag: function onBeforeColumnDrag(sourceId, event) {\n\t\t\t\tconsole.error('!! ToDo: onBeforeColumnDrag()');\n\t\t\t\t// if (sourceId === 'appbuilder_trash') // Remove column\n\t\t\t\t// \treturn false;\n\t\t\t\t// else\n\t\t\t\t// \treturn true;\n\t\t\t},\n\t\t\tonBeforeColumnDrop: function onBeforeColumnDrop(sourceId, targetId, event) {\n\t\t\t\tconsole.error('!! ToDo: onBeforeColumnDrag()');\n\t\t\t\t// if (targetId === 'appbuilder_trash') // Remove column\n\t\t\t\t// \treturn false;\n\n\t\t\t\t// if ($$(self.webixUiId.visibleButton).config.badge > 0) {\n\t\t\t\t// \twebix.alert({\n\t\t\t\t// \t\ttitle: self.labels.object.couldNotReorderField,\n\t\t\t\t// \t\tok: self.labels.common.ok,\n\t\t\t\t// \t\ttext: self.labels.object.couldNotReorderFieldDetail\n\t\t\t\t// \t});\n\n\t\t\t\t// \treturn false;\n\t\t\t\t// }\n\t\t\t},\n\t\t\tonAfterColumnDrop: function onAfterColumnDrop(sourceId, targetId, event) {\n\t\t\t\tconsole.error('!! ToDo: onAfterColumnDrop()');\n\t\t\t\t// self.reorderColumns();\n\t\t\t},\n\t\t\tonAfterColumnShow: function onAfterColumnShow(id) {\n\t\t\t\tconsole.error('!! ToDo: onAfterColumnShow()');\n\t\t\t\t// $$(self.webixUiId.visibleFieldsPopup).showField(id);\n\t\t\t},\n\t\t\tonAfterColumnHide: function onAfterColumnHide(id) {\n\t\t\t\tconsole.error('!! ToDo: onAfterColumnHide()');\n\t\t\t\t// $$(self.webixUiId.visibleFieldsPopup).hideField(id);\n\t\t\t},\n\n\t\t\tonHeaderClick: function onHeaderClick(id, e, node) {\n\t\t\t\t_logic.onHeaderClick(id, e, node);\n\t\t\t}\n\t\t}\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\t};\n\n\tvar CurrentObject = null; // current ABObject being displayed\n\tvar EditField = null; // which field (column header) is popup editor for\n\tvar EditNode = null; // which html node (column header) is popup editor for\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\tcallbacks: {\n\n\t\t\t/**\n    * @function onEditorMenu\n    * report back which menu action was clicked.\n    * We get the info from our popupHeaderEditor component, but all the \n    * logic to respond to those options are in our parent. So we pass it \n    * on ...\n    * \n    * @param {string} action [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n    * @param {ABField} field  the field to which the action is to be applied\n    * @param {dom} node  the optional html node for this header item.\n    */\n\t\t\tonEditorMenu: function onEditorMenu(action, field) {}\n\t\t},\n\n\t\t/**\n   * @function callbackHeaderEdit\n   *\n   * call back for when an item in the Header Edit Menu has been selected.\n   * @param {string} action the action requested for this field:\n   */\n\t\tcallbackHeaderEdit: function callbackHeaderEdit(action) {\n\n\t\t\tPopupHeaderEdit.hide();\n\t\t\t_logic.callbacks.onEditorMenu(action, EditField, EditNode);\n\t\t},\n\n\t\t/**\n   * @function onHeaderClick\n   * \n   * process the user clicking on the header for one of our columns.\n   */\n\t\tonHeaderClick: function onHeaderClick(id, e, node) {\n\n\t\t\t// Ignore system columns\n\t\t\tif (id.column == 'appbuilder_trash') return false;\n\n\t\t\t// save our EditNode & EditField:\n\t\t\tEditNode = node;\n\n\t\t\tEditField = CurrentObject.fields(function (f) {\n\t\t\t\treturn f.id == id.column;\n\t\t\t})[0];\n\t\t\tif (EditField) {\n\n\t\t\t\t// show the popup\n\t\t\t\tPopupHeaderEdit.show(node);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\tobjectLoad: function objectLoad(object) {\n\n\t\t\tCurrentObject = object;\n\n\t\t\tPopupHeaderEditComponent.objectLoad(object);\n\n\t\t\t_logic.refresh();\n\t\t},\n\n\t\t// rebuild the data table view:\n\t\trefresh: function refresh() {\n\n\t\t\t// wait until we have an Object defined:\n\t\t\tif (CurrentObject) {\n\n\t\t\t\tvar DataTable = $$(ids.component);\n\t\t\t\tDataTable.clearAll();\n\n\t\t\t\t// update DataTable structure:\n\t\t\t\tvar columnHeaders = CurrentObject.columnHeaders(true);\n\t\t\t\tDataTable.refreshColumns(columnHeaders);\n\n\t\t\t\t// update DataTable Content\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\n\t};\n\n\t//// NOTE: declare these after _logic  for the callbacks:\n\n\tvar PopupHeaderEditComponent = OP.Component['ab_work_object_workspace_popupHeaderEditMenu'](App);\n\tvar PopupHeaderEdit = webix.ui(PopupHeaderEditComponent.ui);\n\tPopupHeaderEditComponent.init({\n\t\tonClick: _logic.callbackHeaderEdit // be notified when there is a change in the hidden fields\n\t});\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tobjectLoad: _logic.objectLoad,\n\t\trefresh: _logic.refresh,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\n/*\n * ab_work_object_workspace_popupDefineLabel\n *\n * Manage the Add New Data Field popup.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tlabelFormat: L('ab.define_label.labelFormat', \"*Label format\"),\n\t\tselectFieldToGenerate: L('ab.define_label.selectFieldToGenerate', \"*Select field item to generate format.\"),\n\t\tlabelFields: L('ab.define_label.labelFields', \"*Fields\")\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace_popupDefineLabel';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t\tformat: App.unique(idBase + '_format'),\n\t\tlist: App.unique(idBase + '_list'),\n\n\t\tbuttonSave: App.unique(idBase + '_buttonSave')\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.component,\n\t\tmodal: true,\n\t\tautoheight: true,\n\t\t// maxHeight: 420,\n\n\t\twidth: 500,\n\t\tbody: {\n\t\t\trows: [{\n\t\t\t\tview: \"label\",\n\t\t\t\tlabel: \"<b>{0}</b>\".replace(\"{0}\", labels.component.labelFormat)\n\t\t\t}, {\n\t\t\t\tview: \"textarea\",\n\t\t\t\tid: ids.format,\n\t\t\t\theight: 100\n\t\t\t}, {\n\t\t\t\tview: \"label\",\n\t\t\t\tlabel: labels.component.selectFieldToGenerate\n\t\t\t}, {\n\t\t\t\tview: \"label\",\n\t\t\t\tlabel: \"<b>{0}</b>\".replace(\"{0}\", labels.component.labelFields)\n\t\t\t}, {\n\t\t\t\tview: 'list',\n\t\t\t\tid: ids.list,\n\t\t\t\twidth: 500,\n\t\t\t\tmaxHeight: 180,\n\t\t\t\tselect: false,\n\t\t\t\ttemplate: '#label#',\n\t\t\t\ton: {\n\t\t\t\t\tonItemClick: function onItemClick(id, e, node) {\n\t\t\t\t\t\t_logic.onItemClick(id, e, node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\theight: 10\n\t\t\t}, {\n\t\t\t\tcols: [{\n\t\t\t\t\tview: \"button\", value: labels.common.cancel, width: 100,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.buttonCancel();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"button\", id: ids.buttonSave, label: labels.common.save, type: \"form\", width: 120,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.buttonSave();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\ton: {\n\t\t\tonShow: function onShow() {\n\t\t\t\t_logic.onShow();\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _currentObject = null;\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t};\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\tbuttonCancel: function buttonCancel() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\tbuttonSave: function buttonSave() {\n\n\t\t\t// disable our save button\n\t\t\tvar ButtonSave = $$(ids.buttonSave);\n\t\t\tButtonSave.disable();\n\n\t\t\t// get our current labelFormt\n\t\t\tvar labelFormat = $$(ids.format).getValue();\n\n\t\t\t// start our spinner\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.showProgress({ type: 'icon' });\n\n\t\t\t// convert from our User Friendly {Label} format to our \n\t\t\t// object friendly {Name} format\n\t\t\tList.data.each(function (d) {\n\t\t\t\tlabelFormat = labelFormat.replace(new RegExp('{' + d.label + '}', 'g'), '{' + d.id + '}');\n\t\t\t});\n\n\t\t\t// save the value\n\t\t\t_currentObject.labelFormat = labelFormat;\n\t\t\t_currentObject.save().then(function () {\n\n\t\t\t\t// all good, so\n\t\t\t\tList.hideProgress(); // hide the spinner\n\t\t\t\tButtonSave.enable(); // enable the save button\n\t\t\t\t_logic.hide(); // hide the popup\n\n\t\t\t\t// alert our parent component we are done with our changes:\n\t\t\t\t_logic.callbacks.onSave();\n\t\t\t}).catch(function (err) {\n\t\t\t\tList.hideProgress(); // hide the spinner\n\t\t\t\tButtonSave.enable(); // enable the save button\n\n\t\t\t\t// display some error to the user:\n\t\t\t\tOP.Error.log('Error trying to save our Object', { error: err });\n\t\t\t});\n\t\t},\n\n\t\tcallbacks: {\n\t\t\tonCancel: function onCancel() {\n\t\t\t\tconsole.warn('NO onCancel()!');\n\t\t\t},\n\t\t\tonSave: function onSave(field) {\n\t\t\t\tconsole.warn('NO onSave()!');\n\t\t\t}\n\t\t},\n\n\t\thide: function hide() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\tobjectLoad: function objectLoad(object) {\n\t\t\t_currentObject = object;\n\n\t\t\t// clear our list\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.clearAll();\n\n\t\t\t// refresh list with new set of fields\n\t\t\tvar allFields = _currentObject.fields();\n\t\t\tvar listFields = [];\n\t\t\tallFields.forEach(function (f) {\n\t\t\t\tlistFields.push({\n\t\t\t\t\tid: f.name,\n\t\t\t\t\tlabel: f.label\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tList.parse(allFields);\n\t\t},\n\n\t\tonItemClick: function onItemClick(id, e, node) {\n\n\t\t\tvar selectedItem = $$(ids.list).getItem(id);\n\n\t\t\tvar labelFormat = $$(ids.format).getValue();\n\t\t\tlabelFormat += '{{0}}'.replace('{0}', selectedItem.label);\n\n\t\t\t$$(ids.format).setValue(labelFormat);\n\t\t},\n\n\t\tonShow: function onShow() {\n\n\t\t\tvar labelFormat = _currentObject.labelFormat;\n\n\t\t\tvar Format = $$(ids.format);\n\t\t\tvar List = $$(ids.list);\n\n\t\t\tFormat.setValue('');\n\n\t\t\tFormat.enable();\n\t\t\tList.enable();\n\t\t\t$$(ids.buttonSave).enable();\n\n\t\t\t// our labelFormat should be in a computer friendly {name} format\n\t\t\t// here we want to convert it to a user friendly {label} format\n\t\t\t// to use in our popup:\n\t\t\tif (labelFormat) {\n\t\t\t\tif (List.data && List.data.count() > 0) {\n\t\t\t\t\tList.data.each(function (d) {\n\t\t\t\t\t\tlabelFormat = labelFormat.replace('{' + d.id + '}', '{' + d.label + '}');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// no label format:\n\t\t\t\t// Default to first field\n\t\t\t\tif (List.data && List.data.count() > 0) {\n\t\t\t\t\tvar field = List.getItem(List.getFirstId());\n\t\t\t\t\tlabelFormat = '{' + field.label + '}';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tFormat.setValue(labelFormat || '');\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   * @param {obj} $view  the webix.$view to hover the popup around.\n   */\n\t\tshow: function show($view) {\n\n\t\t\t$$(ids.component).show($view);\n\t\t}\n\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t// interface methods for parent component:\n\t\tobjectLoad: _logic.objectLoad,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\n/*\n * ab_work_object_workspace_popupHeaderEditMenu\n *\n * Manage the Add New Data Field popup.\n *\n */\n\n// import ABApplication from \"../classes/ABApplication\"\n// import ABFieldManager from \"../classes/ABFieldManager\"\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\n\t\thideField: L('ab.object.hideField', \"*Hide field\"),\n\t\tfilterField: L('ab.object.filterField', \"*Filter field\"),\n\t\tsortField: L('ab.object.sortField', \"*Sort field\"),\n\t\teditField: L('ab.object.editField', \"*Edit field\"),\n\t\tdeleteField: L('ab.object.deleteField', \"*Delete field\")\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace_popupHeaderEditMenu';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tlist: App.unique(idBase + '_list')\n\t};\n\n\t// the list of options shown in the popup menu:\n\tvar menuItems = {\n\n\t\t// Normally all items are available\n\t\t'default': [{ command: labels.component.hideField, icon: \"fa-columns\" }, { command: labels.component.filterField, icon: \"fa-filter\" }, { command: labels.component.sortField, icon: \"fa-sort\" }, { command: labels.component.editField, icon: \"fa-pencil-square-o\" }, { command: labels.component.deleteField, icon: \"fa-trash\" }],\n\t\t// But for imported objects, edit & delete are disabled\n\t\t'imported': [{ command: labels.component.hideField, icon: \"fa-columns\" }, { command: labels.component.filterField, icon: \"fa-filter\" }, { command: labels.component.sortField, icon: \"fa-sort\" }]\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.component,\n\t\tmodal: false,\n\t\tautoheight: true,\n\n\t\twidth: 180,\n\t\tbody: {\n\t\t\tid: ids.list,\n\t\t\tview: 'list',\n\t\t\tdatatype: \"json\",\n\t\t\tautoheight: true,\n\t\t\tselect: false,\n\t\t\ttemplate: \"<i class='fa #icon#' aria-hidden='true'></i> #command#\",\n\t\t\tdata: menuItems['default'], // start with the default set:\n\t\t\ton: {\n\t\t\t\t'onItemClick': function onItemClick(timestamp, e, node) {\n\t\t\t\t\t_logic.onItemClick(timestamp, e, node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar CurrentObject = null;\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\t// $$(ids.editDefinitions).cells() // define the edit Definitions here.\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\tcallbacks: {\n\t\t\t/**\n    * @function onClick\n    * report back which menu action was clicked.\n    * possible actions: [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n    */\n\t\t\tonClick: function onClick(action) {}\n\t\t},\n\n\t\thide: function hide() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\t/**\n   * @function objectLoad\n   * Ready the Popup according to the current object\n   * @param {ABObject} object  the currently selected object.\n   */\n\t\tobjectLoad: function objectLoad(object) {\n\t\t\tCurrentObject = object;\n\n\t\t\t// TODO:\n\t\t\t// check if object is imported, if so, then switch the shown fields to the imported menu:\n\n\t\t\tvar listItems = menuItems['default'];\n\t\t\t// if (object.isImported) {\n\t\t\t// \tlistItems = menuItems['imported'];\n\t\t\t// }\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.clearAll();\n\t\t\tList.parse(listItems);\n\t\t},\n\n\t\t/**\n   * @function onItemClick\n   * when an entry in our popup menu is selected, make sure our parent component is\n   * alerted to the action requested.\n   *\n   * possible return action values: [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n   *\n   */\n\t\tonItemClick: function onItemClick(timestamp, e, node) {\n\n\t\t\tvar action = null;\n\t\t\tvar menu = node.textContent.trim();\n\t\t\tswitch (menu) {\n\t\t\t\tcase labels.component.hideField:\n\t\t\t\t\taction = 'hide';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.filterField:\n\t\t\t\t\taction = 'filter';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.sortField:\n\t\t\t\t\taction = 'sort';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.editField:\n\t\t\t\t\taction = 'edit';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.deleteField:\n\t\t\t\t\taction = 'delete';\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t_logic.callbacks.onClick(action);\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   * @param {obj} $view  the webix.$view to hover the popup around.\n   */\n\t\tshow: function show($view) {\n\n\t\t\t$$(ids.component).show($view);\n\t\t}\n\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {}\n\n\t// populateObjectPopupAddDataField: function(object) {\n\t// \t_currentObject = object;\n\t// }\n\n\t// return the current instance of this component:\n\t;return {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\thide: _logic.hide,\n\t\tobjectLoad: _logic.objectLoad,\n\t\tshow: _logic.show, // function($view, field_id) \n\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nvar _ABApplication = __webpack_require__(1);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_workspace_popupHideFields\n *\n * Manage the Hide Fields popup.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tshowAll: L('ab.visible_fields.showAll', \"*Show All\"),\n\t\thideAll: L('ab.visible_fields.hideAll', \"*Hide All\")\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace_popupHideFields';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t\tlist: App.unique(idBase + \"_list\")\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.component,\n\t\t// modal: true,\n\t\tautoheight: true,\n\t\tbody: {\n\t\t\trows: [{\n\t\t\t\tcols: [{\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tvalue: labels.component.showAll,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.clickShowAll();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tvalue: labels.component.hideAll,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.clickHideAll();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}, {\n\t\t\t\tview: 'list',\n\t\t\t\tid: ids.list,\n\t\t\t\tautoheight: true,\n\t\t\t\tselect: false,\n\t\t\t\ttemplate: '<span style=\"min-width: 18px; display: inline-block;\"><i class=\"fa fa-circle ab-visible-field-icon\"></i>&nbsp;</span> #label#',\n\t\t\t\ton: {\n\t\t\t\t\tonItemClick: function onItemClick(id, e, node) {\n\t\t\t\t\t\t_logic.listItemClick(id, e, node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]\n\t\t},\n\t\ton: {\n\t\t\tonShow: function onShow() {\n\t\t\t\t_logic.iconsReset();\n\t\t\t}\n\t\t}\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\t};\n\n\tvar CurrentObject = null;\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\tcallbacks: {\n\n\t\t\t/**\n    * @function onChange\n    * called when we have made changes to the hidden field settings \n    * of our Current Object.\n    *\n    * this is meant to alert our parent component to respond to the \n    * change.\n    */\n\t\t\tonChange: function onChange() {}\n\t\t},\n\n\t\t/**\n   * @function clickHideAll\n   * the user clicked the [hide all] option.  So hide all our fields.\n   */\n\t\tclickHideAll: function clickHideAll() {\n\n\t\t\t// create an array of all our field.id's:\n\t\t\tvar allFields = CurrentObject.fields();\n\t\t\tvar newHidden = [];\n\t\t\tallFields.forEach(function (f) {\n\t\t\t\tnewHidden.push(f.id);\n\t\t\t});\n\n\t\t\t// store that\n\t\t\tCurrentObject.workspaceHiddenFields = newHidden;\n\t\t\tCurrentObject.save().then(function () {\n\t\t\t\t_logic.iconsReset();\n\t\t\t\t_logic.callbacks.onChange();\n\t\t\t}).catch(function (err) {\n\t\t\t\tOP.Error.log('Error trying to save workspaceHiddenFields', { error: err, fields: newHidden });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function clickShowAll\n   * the user clicked the [show all] option.  So show all our fields.\n   */\n\t\tclickShowAll: function clickShowAll() {\n\n\t\t\t// store an empty array of hidden fields\n\t\t\tCurrentObject.workspaceHiddenFields = [];\n\t\t\tCurrentObject.save().then(function () {\n\t\t\t\t_logic.iconsReset();\n\t\t\t\t_logic.callbacks.onChange();\n\t\t\t}).catch(function (err) {\n\t\t\t\tOP.Error.log('Error trying to save workspaceHiddenFields', { error: err, fields: newHidden });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function listItemClick\n   * update the clicked field setting.\n   */\n\t\tlistItemClick: function listItemClick(id, e, node) {\n\t\t\tvar newFields = [];\n\t\t\tvar isHidden = CurrentObject.workspaceHiddenFields.filter(function (fID) {\n\t\t\t\treturn fID == id;\n\t\t\t}).length > 0;\n\t\t\tif (isHidden) {\n\t\t\t\t// unhide this field\n\n\t\t\t\t// get remaining fields \n\t\t\t\tnewFields = CurrentObject.workspaceHiddenFields.filter(function (fID) {\n\t\t\t\t\treturn fID != id;\n\t\t\t\t});\n\n\t\t\t\t// find the icon and display it:\n\t\t\t\t_logic.iconShow(node);\n\t\t\t} else {\n\t\t\t\tnewFields = CurrentObject.workspaceHiddenFields;\n\t\t\t\tnewFields.push(id);\n\n\t\t\t\t_logic.iconHide(node);\n\t\t\t}\n\n\t\t\t// update our Object with current hidden fields\n\t\t\tCurrentObject.workspaceHiddenFields = newFields;\n\t\t\tCurrentObject.save().then(function () {\n\t\t\t\t_logic.callbacks.onChange();\n\t\t\t}).catch(function (err) {\n\t\t\t\tOP.Error.log('Error trying to save workspaceHiddenFields', { error: err, fields: newFields });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function iconHide\n   * Hide the icon for the given node\n   * @param {DOM} node  the html dom node of the element that contains our icon\n   */\n\t\ticonHide: function iconHide(node) {\n\t\t\tif (node) {\n\t\t\t\tnode.querySelector('.ab-visible-field-icon').style.visibility = \"hidden\";\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function iconShow\n   * Show the icon for the given node\n   * @param {DOM} node  the html dom node of the element that contains our icon\n   */\n\t\ticonShow: function iconShow(node) {\n\t\t\tif (node) {\n\t\t\t\tnode.querySelector('.ab-visible-field-icon').style.visibility = \"visible\";\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function iconsReset\n   * Reset the icon displays according to the current values in our Object\n   */\n\t\ticonsReset: function iconsReset() {\n\n\t\t\tvar List = $$(ids.list);\n\n\t\t\t// for each item in the List\n\t\t\tvar id = List.getFirstId();\n\t\t\twhile (id) {\n\n\t\t\t\t// find it's HTML Node\n\t\t\t\tvar node = List.getItemNode(id);\n\n\t\t\t\t// if this item is not hidden, show it.\n\t\t\t\tif (CurrentObject.workspaceHiddenFields.indexOf(id) == -1) {\n\t\t\t\t\t_logic.iconShow(node);\n\t\t\t\t} else {\n\t\t\t\t\t// else hide it\n\t\t\t\t\t_logic.iconHide(node);\n\t\t\t\t}\n\n\t\t\t\t// next item\n\t\t\t\tid = List.getNextId(id);\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function objectLoad\n   * Ready the Popup according to the current object\n   * @param {ABObject} object  the currently selected object.\n   */\n\t\tobjectLoad: function objectLoad(object) {\n\t\t\tCurrentObject = object;\n\n\t\t\t// refresh list\n\t\t\tvar allFields = CurrentObject.fields();\n\t\t\tvar listFields = [];\n\t\t\tallFields.forEach(function (f) {\n\t\t\t\tlistFields.push({\n\t\t\t\t\tid: f.id,\n\t\t\t\t\tlabel: f.label\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$$(ids.list).parse(allFields);\n\t\t}\n\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t// interface methods for parent component:\n\t\tobjectLoad: _logic.objectLoad,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nvar _ABApplication = __webpack_require__(1);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\nvar _ABFieldManager = __webpack_require__(11);\n\nvar _ABFieldManager2 = _interopRequireDefault(_ABFieldManager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * ab_work_object_workspace_popupNewDataField\n *\n * Manage the Add New Data Field popup.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tchooseType: L('ab.add_fields.chooseType', \"*Choose field type...\"),\n\t\tlabel: L('ab.add_fields.label', \"*Label\"),\n\t\taddNewField: L('ab.add_fields.addNewField', \"*Add Column\")\n\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace_popupNewDataField';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t\ttypes: App.unique(idBase + '_types'),\n\t\teditDefinitions: App.unique(idBase + '_editDefinitions'),\n\n\t\tbuttonSave: App.unique(idBase + '_buttonSave'),\n\t\tbuttonCancel: App.unique(idBase + '_buttonCancel')\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.component,\n\t\tmodal: true,\n\t\tautoheight: true,\n\t\t// maxHeight: 420,\n\n\t\t// ready: function () {\n\t\t// \tconsole.error('ready() called!!!')\n\t\t// \t_logic.resetState();\n\t\t// },\n\n\t\tbody: {\n\t\t\tcss: 'ab-add-fields-popup',\n\t\t\tborderless: true,\n\t\t\trows: [{\n\t\t\t\tview: \"menu\",\n\t\t\t\tid: ids.types,\n\t\t\t\tdata: [{\n\t\t\t\t\tvalue: labels.component.chooseType,\n\t\t\t\t\tsubmenu: ['dataFieldsManager', '.getFieldMenuList()']\n\t\t\t\t}],\n\t\t\t\tclick: function click(id, ev, node) {\n\t\t\t\t\t_logic.typeClick();\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t},\n\t\t\t\ton: {\n\t\t\t\t\tonMenuItemClick: function onMenuItemClick(id, ev, node) {\n\t\t\t\t\t\t_logic.onMenuItemClick(id);\n\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tview: 'multiview',\n\t\t\t\tid: ids.editDefinitions,\n\t\t\t\t// NOTE: can't leave this an empty []. We redefine this value later.\n\t\t\t\tcells: [{ id: 'del_me', view: 'label', label: 'edit definition here' }]\n\t\t\t}, { height: 10 }, {\n\t\t\t\tcols: [{ fillspace: true }, {\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tvalue: labels.common.cancel,\n\t\t\t\t\tcss: \"ab-cancel-button\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.buttonCancel();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tid: ids.buttonSave,\n\t\t\t\t\tlabel: labels.component.addNewField,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\ttype: \"form\",\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.buttonSave();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\ton: {\n\t\t\tonBeforeShow: function onBeforeShow() {\n\t\t\t\t_logic.resetState();\n\t\t\t},\n\t\t\tonShow: function onShow() {\n\t\t\t\t_logic.onShow();\n\t\t\t},\n\t\t\tonHide: function onHide() {\n\t\t\t\t_logic.resetState();\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _objectHash = {}; // 'name' => ABFieldXXX object\n\tvar _componentHash = {}; // 'name' => ABFieldXXX ui component\n\tvar _componentsByType = {}; // 'type' => ABFieldXXX ui component\n\tvar _currentEditor = null;\n\tvar _currentObject = null;\n\n\tvar defaultEditorComponent = null; // the default editor.\n\n\tvar _editField = null; // field instance being edited\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\tvar Fields = _ABFieldManager2.default.allFields();\n\n\t\t//// we need to load a submenu entry and an editor definition for each\n\t\t//// of our Fields\n\n\n\t\tvar submenus = []; // Create the submenus for our Data Fields:\n\t\tvar newEditorList = {\n\t\t\tview: 'multiview',\n\t\t\tid: ids.editDefinitions,\n\t\t\trows: []\n\t\t};\n\n\t\tFields.forEach(function (F) {\n\n\t\t\tvar menuName = F.defaults().menuName;\n\t\t\tvar type = F.defaults().type;\n\n\t\t\t// add a submenu for the fields multilingual key\n\t\t\tsubmenus.push(menuName);\n\n\t\t\t// Add the Field's definition editor here:\n\t\t\tvar editorComponent = F.propertiesComponent(App);\n\t\t\tif (!defaultEditorComponent) {\n\t\t\t\tdefaultEditorComponent = editorComponent;\n\t\t\t}\n\t\t\tnewEditorList.rows.push(editorComponent.ui);\n\n\t\t\t_objectHash[menuName] = F;\n\t\t\t_componentHash[menuName] = editorComponent;\n\t\t\t_componentsByType[type] = editorComponent;\n\t\t});\n\n\t\t// the submenu button has a placeholder we need to remove and update\n\t\t// with one that has all our submenus in it.\n\t\tvar firstID = $$(ids.types).getFirstId();\n\t\t$$(ids.types).updateItem(firstID, {\n\t\t\tvalue: labels.component.chooseType,\n\t\t\tsubmenu: submenus\n\t\t});\n\n\t\t// now remove the 'del_me' definition editor placeholder.\n\t\twebix.ui(newEditorList, $$(ids.editDefinitions));\n\n\t\t// hide all the unused editors:\n\t\tfor (var c in _componentHash) {\n\t\t\t_componentHash[c].hide();\n\t\t}\n\n\t\tdefaultEditorComponent.show(); // show the default editor\n\t\t_currentEditor = defaultEditorComponent;\n\n\t\t// $$(ids.editDefinitions).show();\n\n\t\t// $$(ids.editDefinitions).cells() // define the edit Definitions here.\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\tbuttonCancel: function buttonCancel() {\n\n\t\t\t_logic.resetState();\n\n\t\t\t// clear all editors:\n\t\t\tfor (var c in _componentHash) {\n\t\t\t\t_componentHash[c].clear();\n\t\t\t}\n\n\t\t\t// hide this popup.\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\tbuttonSave: function buttonSave() {\n\n\t\t\t$$(ids.buttonSave).disable();\n\n\t\t\tvar editor = _currentEditor;\n\t\t\tif (editor) {\n\n\t\t\t\t// the editor can define some basic form validations.\n\t\t\t\tif (editor.isValid()) {\n\n\t\t\t\t\tvar values = editor.values();\n\n\t\t\t\t\tvar field = null;\n\t\t\t\t\tvar oldData = null;\n\n\t\t\t\t\t// if this is an ADD operation, (_editField will be undefined)\n\t\t\t\t\tif (!_editField) {\n\n\t\t\t\t\t\t// get a new instance of a field:\n\t\t\t\t\t\tfield = _currentObject.fieldNew(values);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// use our _editField, backup our oldData\n\t\t\t\t\t\toldData = _editField.toObj();\n\t\t\t\t\t\t_editField.fromValues(values);\n\n\t\t\t\t\t\tfield = _editField;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar errors = field.isValid();\n\t\t\t\t\tif (errors) {\n\t\t\t\t\t\tOP.Form.isValidationError(errors, $$(editor.ui.id));\n\n\t\t\t\t\t\t// keep our old data\n\t\t\t\t\t\tif (oldData) {\n\t\t\t\t\t\t\tfield.fromValues(oldData);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfield.save().then(function () {\n\n\t\t\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t\t\t\t_logic.hide();\n\t\t\t\t\t\t\t_currentEditor.clear();\n\t\t\t\t\t\t\t_logic.callbacks.onSave(field);\n\t\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\ttitle: '! Could not find the current editor.',\n\t\t\t\t\ttext: 'go tell a developer about this.'\n\t\t\t\t});\n\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t}\n\n\t\t\t// if (!inputValidator.validateFormat(fieldInfo.name)) {\n\t\t\t// \tself.enable();\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\t// // Validate duplicate field name\n\t\t\t// var existsColumn = $.grep(dataTable.config.columns, function (c) { return c.id == fieldInfo.name.replace(/ /g, '_'); });\n\t\t\t// if (existsColumn && existsColumn.length > 0 && !data.editFieldId) {\n\t\t\t// \twebix.alert({\n\t\t\t// \t\ttitle: labels.add_fields.duplicateFieldTitle,\n\t\t\t// \t\ttext: labels.add_fields.duplicateFieldDescription,\n\t\t\t// \t\tok: labels.common.ok\n\t\t\t// \t});\n\t\t\t// \tthis.enable();\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\t// if (fieldInfo.weight == null)\n\t\t\t// \tfieldInfo.weight = dataTable.config.columns.length;\n\n\t\t\t// // Call callback function\n\t\t\t// if (base.saveFieldCallback && base.fieldName) {\n\t\t\t// \tbase.saveFieldCallback(base.fieldName, fieldInfo)\n\t\t\t// \t\t.then(function () {\n\t\t\t// \t\t\tself.enable();\n\t\t\t// \t\t\tbase.resetState();\n\t\t\t// \t\t\tbase.hide();\n\t\t\t// \t\t});\n\t\t\t// }\n\n\t\t},\n\n\t\tcallbacks: {\n\t\t\tonCancel: function onCancel() {\n\t\t\t\tconsole.warn('NO onCancel()!');\n\t\t\t},\n\t\t\tonSave: function onSave(field) {\n\t\t\t\tconsole.warn('NO onSave()!');\n\t\t\t}\n\t\t},\n\n\t\thide: function hide() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\tmodeAdd: function modeAdd() {\n\n\t\t\t// show default editor:\n\t\t\tdefaultEditorComponent.show(false, false);\n\t\t\t_currentEditor = defaultEditorComponent;\n\n\t\t\t// show the ability to switch data types\n\t\t\t$$(ids.types).show();\n\n\t\t\t// change button text to 'add'\n\t\t\t$$(ids.buttonSave).define('label', labels.component.addNewField);\n\t\t\t$$(ids.buttonSave).refresh();\n\t\t},\n\n\t\tmodeEdit: function modeEdit(field) {\n\n\t\t\tif (_currentEditor) _currentEditor.hide();\n\n\t\t\t// switch to this field's editor:\n\t\t\t// hide the rest\n\t\t\tfor (var c in _componentsByType) {\n\t\t\t\tif (c == field.type) {\n\t\t\t\t\t_componentsByType[c].populate(field);\n\t\t\t\t\t_componentsByType[c].show(false, false);\n\t\t\t\t\t_currentEditor = _componentsByType[c];\n\t\t\t\t} else {\n\t\t\t\t\t_componentsByType[c].hide();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// hide the ability to switch data types\n\t\t\t$$(ids.types).hide();\n\n\t\t\t// change button text to 'save'\n\t\t\t$$(ids.buttonSave).define('label', labels.common.save);\n\t\t\t$$(ids.buttonSave).refresh();\n\t\t},\n\n\t\t/**\n   * @function onMenuItemClick\n   * swap the editor view to match the data field selected in the menu.\n   *\n   * @param {string} name  the menuName() of the submenu that was selected.\n   */\n\t\tonMenuItemClick: function onMenuItemClick(name) {\n\n\t\t\t// note, the submenu returns the Field.menuName() values.\n\t\t\t// we use that to lookup the Field here:\n\t\t\tvar editor = _componentHash[name];\n\t\t\tif (editor) {\n\t\t\t\teditor.show();\n\t\t\t\t_currentEditor = editor;\n\t\t\t} else {\n\n\t\t\t\t// most likely they clicked on the menu button itself.\n\t\t\t\t// do nothing.\n\n\t\t\t\t// OP.Error.log(\"App Builder:Workspace:Object:NewDataField: could not find editor for submenu item:\"+name, { name:name });\n\t\t\t}\n\t\t},\n\n\t\tonShow: function onShow() {\n\t\t\t// if (!AD.comm.isServerReady()) {\n\t\t\t// \tthis.getTopParentView().hide();\n\n\t\t\t// \twebix.alert({\n\t\t\t// \t\ttitle: labels.add_fields.cannotUpdateFields,\n\t\t\t// \t\ttext: labels.add_fields.waitRestructureObjects,\n\t\t\t// \t\tok: labels.common.ok\n\t\t\t// \t});\n\t\t\t// }\n\t\t\t// else { // Set default field type\n\t\t\t// \tthis.showFieldData('string');\n\t\t\t// }\n\t\t\tconsole.error('TODO: onShow();');\n\t\t},\n\n\t\tresetState: function resetState() {\n\n\t\t\t// add mode :  change button text to 'Add'\n\t\t\t// show the default editor\n\t\t\tconsole.error('TODO: resetState()');\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   * @param {obj} $view  the webix.$view to hover the popup around.\n   * @param {ABField} field the ABField to edit.  If not provided, then\n   *\t\t\t\t\t\t  this is an ADD operation.\n   */\n\t\tshow: function show($view, field) {\n\n\t\t\t_editField = field;\n\n\t\t\tif (_editField) {\n\n\t\t\t\t_logic.modeEdit(field);\n\t\t\t} else {\n\n\t\t\t\t_logic.modeAdd();\n\t\t\t}\n\n\t\t\t$$(ids.component).show($view);\n\t\t},\n\n\t\ttypeClick: function typeClick() {\n\t\t\t// NOTE: for functional testing we need a way to display the submenu\n\t\t\t// (functional tests don't do .hover very well)\n\t\t\t// so this routine is to enable .click() to show the submenu.\n\n\t\t\tvar subMenuId = $$(ids.types).config.data[0].submenu;\n\n\t\t\t// #HACK Sub-menu popup does not render on initial\n\t\t\t// Force it to render popup by use .getSubMenu()\n\t\t\tif (typeof subMenuId != 'string') {\n\t\t\t\t$$(ids.types).getSubMenu($$(ids.types).config.data[0].id);\n\t\t\t\tsubMenuId = $$(ids.types).config.data[0].submenu;\n\t\t\t}\n\n\t\t\tif ($$(subMenuId)) $$(subMenuId).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\tpopulateObjectPopupAddDataField: function populateObjectPopupAddDataField(object) {\n\t\t\t_currentObject = object;\n\t\t}\n\n\t};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\tshow: _logic.show, // {fn} \tfn(node, ABField)\n\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\n//\n// REFACTORING:\n//\n// Our goal here is to create a Model object that will interact with Sails' blueprints and \n// return native Webix DataCollections.\n//\n// We also want to listen for updates on Sails Sockets and notify the DataCollections.\n//\n// Until we have the refactoring in place, we will reuse the AD.Model.extent() objects,\n// and convert the results to DataCollections.\n//\n\n\n// Namespacing conventions:\n// OP.Model.extend('[application].[Model]', {static}, {instance} );  --> Object\nOP.Model.extend('opstools.BuildApp.ABApplication', {\n\tuseSockets: true,\n\trestURL: '/app_builder/abapplication'\n}, {\n\t// instance Methods\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n/*\n * custom_editlist\n *\n * Create a custom webix component.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t}\n};\n\nvar ComponentKey = 'ab_custom_editlist';\nOP.CustomComponent.extend(ComponentKey, function (App, componentKey) {\n\t// App \t{obj}\tour application instance object.\n\t// componentKey {string}\tthe destination key in App.custom[componentKey] for the instance of this component:\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique('custom_editlist_component')\n\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tname: App.unique(\"custom_editlist\") // keep this unique for this App instance.\n\t};\n\n\t// our internal business logic \n\tvar _logic = {};\n\n\t// Tell Webix to create an INSTANCE of our custom component:\n\twebix.protoUI(_ui, webix.EditAbility, webix.ui.list);\n\n\t// current definition of our Component \n\tvar Component = {\n\t\tview: _ui.name, // {string} the webix.view value for this custom component\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n\n\t// Save our definition into App.custom.[key]\n\tApp.custom = App.custom || {};\n\tApp.custom[componentKey] = Component;\n\n\t// return the current definition of this component:\n\treturn Component;\n});\n\n// After importing this custom component, you get back the .key to use to \n// lookup the OP.Component[] to create an application instance of \nexports.default = { key: ComponentKey };\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(OP) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n/*\n * custom_edittree\n *\n * Create a custom webix component.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t}\n};\n\nvar ComponentKey = 'ab_custom_edittree';\nOP.CustomComponent.extend(ComponentKey, function (App, componentKey) {\n\t// App \t{obj}\tour application instance object.\n\t// componentKey {string}\tthe destination key in App.custom[componentKey] for the instance of this component:\n\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique('custom_edittree_component')\n\n\t};\n\n\t// Our webix Prototype definition:\n\tvar _ui = {\n\t\tname: App.unique(\"custom_edittree\") // keep this unique for this App instance.\n\t};\n\n\t// our internal business logic \n\tvar _logic = {};\n\n\t// Tell Webix to create an INSTANCE of our custom component:\n\twebix.protoUI(_ui, webix.EditAbility, webix.ui.tree);\n\n\t// current definition of our Component \n\tvar Component = {\n\t\tview: _ui.name, // {string} the webix.view value for this custom component\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n\n\t// Save our definition into App.custom.[key]\n\tApp.custom = App.custom || {};\n\tApp.custom[componentKey] = Component;\n\n\t// return the current definition of this component:\n\treturn Component;\n});\n\n// After importing this custom component, you get back the .key to use to \n// lookup the OP.Component[] to create an application instance of \nexports.default = { key: ComponentKey };\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif (item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function (modules, mediaQuery) {\n\t\tif (typeof modules === \"string\") modules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif (typeof id === \"number\") alreadyImportedModules[id] = true;\n\t\t}\n\t\tfor (i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif (typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif (mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if (mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n\t// get current location\n\tvar location = typeof window !== \"undefined\" && window.location;\n\n\tif (!location) {\n\t\tthrow new Error(\"fixUrls requires window.location\");\n\t}\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t\treturn css;\n\t}\n\n\tvar baseUrl = location.protocol + \"//\" + location.host;\n\tvar currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n This regular expression is just a way to recursively match brackets within\n a string.\n \t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n    (  = Start a capturing group\n      (?:  = Start a non-capturing group\n          [^)(]  = Match anything that isn't a parentheses\n          |  = OR\n          \\(  = Match a start parentheses\n              (?:  = Start another non-capturing groups\n                  [^)(]+  = Match anything that isn't a parentheses\n                  |  = OR\n                  \\(  = Match a start parentheses\n                      [^)(]*  = Match anything that isn't a parentheses\n                  \\)  = Match a end parentheses\n              )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n  \\)  = Match a close parens\n \t /gi  = Get all matches, not the first.  Be case insensitive.\n  */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function (fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl.trim().replace(/^\"(.*)\"$/, function (o, $1) {\n\t\t\treturn $1;\n\t\t}).replace(/^'(.*)'$/, function (o, $1) {\n\t\t\treturn $1;\n\t\t});\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t\treturn fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t\t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(37)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".webix_view, .webix_el_colorpicker input, .webix_el_combo input, .webix_el_datepicker input, .webix_el_search input, .webix_el_text input, .webix_control button, .webix_control input, .webix_control textarea, .webix_el_label, .webix_inp_bottom_label, .webix_inp_label, .webix_inp_top_label {\\n\\tfont-family: \\\"Helvetica Neue\\\",Helvetica,Arial,sans-serif !important;\\n}\\n.ab-generated-page {\\n\\toverflow-y: auto;\\n}\\n.ab-main-container {\\n\\tposition: relative;\\n\\tdisplay: block;\\n\\twidth: 100%;\\n\\tbackground: -moz-linear-gradient(top, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0) 100%); /* FF3.6-15 */\\n\\tbackground: -webkit-linear-gradient(top, rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 100%); /* Chrome10-25,Safari5.1-6 */\\n\\tbackground: linear-gradient(to bottom, rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\\n}\\n.ab-main-container .pointer {\\n\\tcursor: pointer;\\n}\\n.ab-main-container .right {\\n\\ttext-align: right;\\n}\\n.ab-main-container .center {\\n\\ttext-align: center;\\n}\\n.ab-main-container .left {\\n\\ttext-align: left;\\n}\\n.ab-text-bold {\\n\\tfont-weight: bold !important;\\n}\\n.ab-scroll-y {\\n\\toverflow-y: auto !important;\\n}\\n.ab-ellipses-text, .ab-ellipses-text > div {\\n\\toverflow: hidden;\\n\\twhite-space: nowrap;\\n\\ttext-overflow: ellipsis;\\n}\\n.float-left {\\n\\tfloat: left;\\n}\\n.float-right {\\n\\tfloat: right;\\n}\\n\\n/* Webix icon */\\n.ab-main-container .webix_icon {\\n\\tline-height: inherit;\\n}\\n\\n/* Fix overflow-x */\\n.ab-generated-page .webix_scroll_cont {\\n\\toverflow: auto !important;\\n}\\n\\n/* == Webix datatable == */\\n/* Checkbox column */\\n.ab-main-container .webix_hcell.center input[type=checkbox] {\\n\\twidth:20px;\\n\\theight:20px;\\n\\tmargin-top:12px;\\n  }\\n.ab-main-container .webix_table_checkbox {\\n\\twidth:20px;\\n\\theight:20px;\\n\\tmargin-top:5px;\\n}\\n/* Last column */\\n.ab-main-container .webix_column.webix_last > div,\\n.ab-main-container .webix_hs_center td.webix_last,\\n.ab-main-container .ab-app-list-descriptionwebix_hs_right td.webix_last {\\n\\tborder-right-width: 1px !important;\\n}\\n/* No padding/margin column */\\n.ab-column-no-padding div {\\n\\tpadding: 0px !important;\\n\\tmargin: 0px !important;\\n}\\n.ab-main-container .ab-cell-warn {\\n\\tbackground-color: #F5AE0F !important;\\n}\\n\\n/* Webix selected item */\\n.webix_list_item.webix_selected,\\n.webix_column>div.webix_cell_select,\\n.webix_column>div.webix_column_select,\\n.webix_column>div.webix_row_select {\\n\\tbackground-color: #3498db !important;\\n}\\n\\n/* Webix message */\\n.webix_success {\\n  background-color: #BFF2BF;\\n}\\n.webix_success div {\\n  background-color: #BFF2BF;\\n  border: 1px solid #007A00;\\n  color: #000;\\n}\\n\\n/* Webix list */\\n.ab-main-container .webix_list_item .webix_selected,\\n.ab-main-container .webix_tree_item.webix_selected {\\n\\tcolor: #fff !important;\\n\\tbackground-color: #3498db !important;\\n}\\n.ab-app-form-permission .webix_selected {\\n\\tcolor: #333 !important;\\n\\tbackground-color: transparent !important;\\n}\\n\\n/* Webix toolbar */\\n.ab-toolbar-submenu, .ab-toolbar-submenu .webix_header>div {\\n\\tbackground: #EEE !important;\\n\\tcolor: #666 !important;\\n\\tfont-size: 15px !important;\\n\\tfont-weight: bold !important;\\n\\tborder-bottom: 0px !important;\\n}\\n\\n/* Webix segmented */\\n.ab-form-component-item .webix_segment_0.webix_selected,\\n.ab-form-component-item .webix_segment_1.webix_selected,\\n.ab-form-component-item .webix_segment_N.webix_selected,\\n.ab-component-view-edit-field .webix_segment_0.webix_selected,\\n.ab-component-view-edit-field .webix_segment_1.webix_selected,\\n.ab-component-view-edit-field .webix_segment_N.webix_selected {\\n\\tcolor: #fff !important;\\n\\tbackground-color: #3498db !important;\\n}\\n\\n.ab-form-component-item .webix_segment_0,\\n.ab-form-component-item .webix_segment_1,\\n.ab-form-component-item .webix_segment_N,\\n.ab-component-view-edit-field .webix_segment_0,\\n.ab-component-view-edit-field .webix_segment_1,\\n.ab-component-view-edit-field .webix_segment_N {\\n\\tcolor: #3498db;\\n\\tbackground: #fff;\\n}\\n\\n/* Add new columns popup */\\n.ab-add-fields-popup {\\n\\toverflow-y: auto;\\n}\\n\\n/* Application list */\\n.ab-app-list {\\n/*\\n\\tmin-height: 300px;\\n\\tpadding: 40px 100px;\\n*/\\n}\\n.ab-app-select-list .webix_selected {\\n\\tbackground-color: #FFF !important;\\n\\tcolor: #333 !important;\\n}\\n.ab-app-select-list .webix_list_item:hover {\\n\\tbackground: #ebebeb;\\n}\\n.ab-app-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n\\tmargin: -2px -10px;\\n\\tpadding: 15px;\\n\\tline-height: 20px;\\n}\\ndiv[view_id='ab-app-list'] div.webix_list_item:hover,\\ndiv[view_id='ab-object-list'] div.webix_list_item:hover,\\ndiv[view_id='ab-object-list-menu'] div.webix_list_item:hover,\\ndiv[view_id='ab-new-connectObject-list-item'] div.webix_list_item:hover,\\ndiv[view_id='ab-edit-header-items'] div.webix_list_item:hover,\\ndiv[view_id='ab-frozen-field-list'] div.webix_list_item:hover {\\n\\tbackground-color: #eee;\\n}\\n.ab-app-list-name {\\n\\tfont-size: large;\\n}\\n.ab-app-list-description {\\n\\tcolor: #999;\\n\\tfont-size: small;\\n}\\n.ab-app-list-info {\\n\\twidth: 95%;\\n\\tdisplay: inline-block;\\n}\\n.ab-app-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tright: 10px;\\n\\topacity: 0.4;\\n\\tline-height: 70px;\\n\\theight: 70px;\\n}\\n.ab-app-list-edit:hover {\\n\\topacity: 1;\\n}\\n\\n/* Application workspace */\\n.ab-app-workspace {\\n\\t/*min-height: 100px;*/\\n}\\n.ab-unsync-data-warning {\\n\\tcursor: pointer;\\n    color: #fff;\\n    background-color: #F5962F;\\n    border: #fff dotted 1px !important;\\n    padding-left: 2px;\\n}\\n.ab-unsync-data-popup .webix_win_head {\\n\\tbackground-color: #F5962F;\\n}\\n.ab-unsync-data-popup .webix_win_head .header {\\n\\tpadding-left: 5px;\\n\\tfont-weight: bold;\\n    color: #fff;\\n}\\n.ab-unsync-data-status {\\n\\tpadding: 3px;\\n}\\n.ab-unsync-data-in-progress {\\n\\tbackground-color: #F5AE0F;\\n}\\n.ab-unsync-data-done {\\n\\tbackground-color: #3AB349;\\n}\\n.ab-unsync-data-error {\\n\\tbackground-color: #EC2F2F;\\n}\\n\\n/* Object list */\\n.ab-object-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n}\\n.ab-object-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0px;\\n\\tright: 5px;\\n\\tdisplay: none;\\n}\\n.ab-object-unsync {\\n\\tbackground-color: #d2e3ef;\\n\\tcolor: #4a4a4a;\\n\\tposition: absolute;\\n\\ttop: 4px;\\n\\tright: 30px;\\n\\tfont-size: 12px;\\n\\tborder-radius: 6px;\\n\\tpadding: 0px 4px;\\n\\theight: 20px;\\n\\tline-height: 20px;\\n\\tdisplay: none;\\n}\\n\\n/* Interface list */\\n.ab-page-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n}\\n.ab-page-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0px;\\n\\tright: 5px;\\n\\tdisplay: none;\\n\\tcursor: pointer;\\n}\\n\\n/* Object datatable */\\n.ab-object-data-header {\\n\\tposition: relative;\\n}\\n.ab-object-data-new-header {\\n\\tbackground-color: #cfd9e0;\\n}\\n\\n.ab-object-data-header-edit {\\n\\tdisplay: none;\\n\\tposition: absolute;\\n\\ttop: 15px;\\n\\tright: 10px;\\n}\\n.ab-object-data-header:hover .ab-object-data-header-edit {\\n\\tdisplay: block;\\n}\\n.ab-object-unsync-data {\\n\\tbackground-color: #dae6fb;\\n}\\n.ab-object-view-column {\\n\\tcolor: #3498db;\\n\\tfont-weight: bold;\\n\\ttext-align: center;\\n\\tcursor: pointer;\\n}\\n\\n/* Connect object data */\\n.ab-connect-data-info {\\n\\tdisplay: inline-block;\\n\\twidth: 90px;\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n}\\n\\n.ab-connect-data-disable {\\n\\tbackground-color: #aaa;\\n}\\n\\n/* Custom selectivity */\\n.ab-main-container .selectivity-multiple-input-container {\\n\\tbackground: none !important;\\n\\tpadding: 0px !important;\\n\\toverflow: hidden !important;\\n\\tmax-height: 100% !important;\\n}\\n.ab-main-container .selectivity-multiple-selected-item {\\n\\tbackground: #3498db !important;\\n\\tpadding-right: 5px;\\n\\t/*max-width: 100px !important;*/\\n}\\n\\n/* Interface tree view */\\n.ab-main-container .webix_tree_item.webix_selected span {\\n\\tpadding: 0px;\\n\\tbackground: #3498db !important;\\n}\\n\\n/* Interface new page popup */\\n.ab-interface-new-quick-page {\\n    overflow: scroll !important;\\n\\toverflow-x: hidden !important;\\n\\toverflow-y: auto !important;\\n}\\n\\n.ab-interface-new-quick-page .webix_inp_checkbox_border label {\\n\\tfont-weight: normal; /* Override bootstrap*/\\n}\\n\\n/* Interface page layout */\\n.ab-component-drop-area {\\n\\tmargin-right: 2px;\\n\\tborder: 1px dashed #000 !important;\\n\\tbackground-color: #D3E9EF;\\n\\tbackground-image:url(\\\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='30px' width='90px'><text x='20' y='20' fill='#95CBEF' font-size='15'>Drop Here</text></svg>\\\");\\n}\\n\\ndiv[view_id='ab-interface-layout-page'] .webix_list_item,\\n.ab-component-in-page {\\n\\twidth: 100%;\\n\\tposition: relative;\\n\\tbackground-color: #fff;\\n\\tclear: both;\\n}\\n\\n.ab-component-item-name {\\n\\tfloat: left;\\n\\tfont-size: 18px;\\n\\tborder-right: 1px solid #ebebeb;\\n\\tvertical-align: top;\\n\\tpadding-top: 10px;\\n\\twidth: 90px;\\n\\tmargin-bottom: -500em; /* CSS hack: equal height of right float */\\n\\tpadding-bottom: 500em;\\n}\\n\\n.ab-component-item-display {\\n\\tfloat: right;\\n\\tvertical-align: top;\\n\\tpadding: 10px;\\n\\twidth: 87%;\\n\\tline-height: 100%;\\n\\toverflow-x: auto;\\n}\\n\\n.ab-component-remove {\\n\\tposition: absolute;\\n\\ttop: 5px;\\n\\tright: 1px;\\n}\\n\\n.ab-component-link {\\n\\tcolor: #003B7E;\\n\\ttext-decoration: underline;\\n\\tcursor: pointer;\\n}\\n\\n/* Interface component list */\\n.ab-component-item-drag {\\n\\tborder: 1px dotted #000 !important;\\n\\tfont-size: 35px;\\n\\tbackground-color: #fff;\\n}\\n\\n/* Header component */\\n.ab-component-header {\\n\\tfont-size: 25px;\\n\\tfont-weight: bold;\\n\\tmargin: 0px;\\n\\tpadding: 0px;\\n}\\n.ab-component-description {\\n\\tfont-size: 14px;\\n\\tpadding: 0px;\\n}\\n\\n/* Menu component */\\n.ab-page-list-item .webix_tree_checkbox {\\n\\tmargin: 0px !important;\\n}\\n\\n/* Object toolbar */\\n.ab-data-toolbar {\\n\\tbackground: #aaa !important;\\n}\\n.ab-data-toolbar button {\\n\\ttext-align: center;\\n\\tfont-size: 14px;\\n}\\n.ab-data-toolbar button:hover, .ab-data-toolbar button:active {\\n\\tbackground: #aaa !important;\\n}\\n.ab-data-toolbar button .webix_icon_btn {\\n\\topacity: 0.6;\\n\\tfont-size: 15px;\\n}\\n.ab-data-toolbar button:hover .webix_icon_btn {\\n\\topacity: 1;\\n}\\n\\n/* Grid component */\\n.ab-page-grid-column-item .column-checkbox {\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\ttop: -5px;\\n\\twidth: 30px;\\n}\\n\\n.ab-page-grid-column-item .column-empty-checkbox {\\n\\tposition: relative;\\n\\twidth: 50px;\\n\\theight: 38px;\\n}\\n\\n.ab-page-grid-column-item .column-name {\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\ttop: -18px;\\n}\\n\\n/* Form component */\\n.ab-standard-button button, .ab-standard-button button:hover, .ab-standard-button button:active, .ab-standard-button .webix_icon_btn {\\n\\tbackground: transparent !important;\\n\\tborder-color: transparent !important;\\n\\tcolor: #666 !important;\\n\\tbox-shadow: none !important;\\n}\\n.ab-cancel-button button {\\n\\tbackground: transparent !important;\\n\\tcolor: #AAA;\\n\\tborder-color: transparent;\\n}\\n.ab-cancel-button button:hover {\\n\\ttext-decoration: underline;\\n}\\n.ab-cancel-button button:active {\\n\\tbox-shadow: none;\\n}\\n.ab-form-connect-data {\\n\\tfloat: left;\\n\\tborder: #CCC solid 1px;\\n\\tpadding: 0px 5px;\\n\\tmin-width: 70%;\\n\\tborder-radius: 6px;\\n}\\n\\n.ab-main-container .webix_layout_form {\\n\\tbackground-color: #fff !important;\\n}\\n\\n/* Loading Screen */\\n.ab-loading-screen {\\n\\tbackground: #000;\\n\\topacity: 0.7;\\n\\tposition: absolute !important;\\n}\\n.ab-loading-body {\\n\\tbackground: #000;\\n\\tborder-width: 0px !important;\\n}\\n.ab-loading-message {\\n\\tcolor: #fff !important;\\n\\tbackground: #000 !important;\\n\\tfont-size: 30px !important;\\n\\ttext-align: center;\\n\\tvertical-align: middle;\\n\\tborder-width: 0px !important;\\n\\tpadding-top: 20% !important;\\n\\theight: 100px !important;\\n}\\n.ab-loading-button {\\n\\ttext-align: center;\\n}\\n.ab-loading-button button {\\n\\tbackground-color: #003B7E;\\n\\twidth: 200px;\\n}\\n.ab-loading-cancel-button {\\n\\ttext-align: center;\\n\\tbackground: transparent;\\n}\\n.ab-loading-cancel-button a {\\n\\tcolor: #fff !important;\\n}\\n.ab-loading-screen .webix_progress_bottom {\\n\\theight: 40px !important;\\n\\topacity: 1;\\n}\\n.ab-loading-screen .webix_progress_bottom .webix_progress_state {\\n\\theight: 40px !important;\\n}\\n\\n/* Dynamic DataTable */\\n.dynamic-datatable-view .webix_badge {\\n\\tmargin: 0 !important;\\n}\\n\\n/* Number data field */\\n.ab-number-format-show {\\n\\twhite-space: nowrap;\\n}\\n\\n/* Icon Picker */\\n.ab-main-container .iconpicker .iconpicker-items {\\n\\tcolor: #000;\\n}\\n\\n/* Webix Tabs */\\ndiv.webix_item_tab {\\n\\tfont-size: 16px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\t// Test for IE <= 9 as proposed by Browserhacks\n\t\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t\t// Tests for existence of standard globals is to allow style-loader \n\t\t// to operate correctly into non-standard environments\n\t\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\t\treturn window && document && document.all && !window.atob;\n\t}),\n\tgetElement = (function(fn) {\n\t\tvar memo = {};\n\t\treturn function(selector) {\n\t\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t\t}\n\t\t\treturn memo[selector]\n\t\t};\n\t})(function (styleTarget) {\n\t\treturn document.querySelector(styleTarget)\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [],\n\tfixUrls = __webpack_require__(38);\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (typeof options.insertInto === \"undefined\") options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar styleTarget = getElement(options.insertInto)\n\tif (!styleTarget) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\tstyleTarget.insertBefore(styleElement, styleTarget.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\tstyleTarget.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\tstyleTarget.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\tstyleTarget.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\toptions.attrs.type = \"text/css\";\n\n\tattachTagAttrs(styleElement, options.attrs);\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\tattachTagAttrs(linkElement, options.attrs);\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction attachTagAttrs(element, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\telement.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement, options);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/* If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls){\n\t\tcss = fixUrls(css);\n\t}\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(39);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(40)(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!./AppBuilder.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!./AppBuilder.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// BuildApp.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c0cef177ab350ee812d6","\n/**\n * @class AD_Client\n * @parent index 4\n *\n * ###Client side global OpsPortal (OP) namespace.\n *\n * This file defines standard functions and calls for OpsPortal\n * objects on the client side.\n */\n\n// Create our OP  Namespace only if it hasn't been created already\n\n//// TODO: how to disable 'use strict'?  or perform this check without an error\n//// in 'use strict' ?\n\n// if (!window.OP) {\nimport Form from \"./form\"\nimport Multilingual from \"./multilingual\"\nimport Model from \"./model\"\nimport Util  from \"./util\"\n\nimport Config from \"./config/config\"\n\n    window.OP = {};\n\n\n    // OP.xxxx      These properties hold the defined Class/Controller/Model definitions\n    //              for our loaded projects.\n    // OP.UI = {};    \t\t// webix UI definitions\n    // OP.Logic = {}; \t\t// logic references for webix application\n    OP.Component = {};  // our defined components\n\n    OP.CustomComponent = {};  // separate holder for Webix Custom Components\n\n\n\n\t// OP.UI.extend = function(key, definition) {\n\t// \tOP.UI[key] = definition;\n\t// }\n\n\tOP.Component.extend = function(key, fn) {\n\t\tOP.Component[key] = function(App){\n\n//// TODO: verify App has proper structure:\n\t\t\tif (!App) {\n\t\t\t\tApp = OP.Component._newApp();\n\t\t\t}\n\n\t\t\t// make an instance of the component.\n\t\t\tvar component = fn(App);\n\n\t\t\t// transfer to App, any actions in the component:\n\t\t\tif (component.actions){\n\t\t\t\tfor(var a in component.actions) {\n\t\t\t\t\tApp.actions[a] = component.actions[a];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn component;\n\t\t};\n\t}\n\n\tOP.Component._newApp = function () {\n\t\treturn {\n\n\t\t\tuuid: webix.uid(),\n\n\t\t\t/*\n\t\t\t * actions:\n\t\t\t * a hash of exposed application methods that are shared among our\n\t\t\t * components, so one component can invoke an action that updates\n\t\t\t * another component.\n\t\t\t */\n\t\t\tactions:{\n\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * config\n\t\t\t * webix configuration settings for our current browser\n\t\t\t */\n\t\t\tconfig:Config.config(),\n\n\t\t\t/*\n\t\t\t * custom\n\t\t\t * a collection of custom components for this App Instance.\n\t\t\t */\n\t\t\tcustom:{\n\n\t\t\t},\n\n\t\t\t/*\n\t\t\t * labels\n\t\t\t * a collection of labels that are common for the Application.\n\t\t\t */\n\t\t\tlabels:{\n\n\t\t\t},\n\n\t\t\t/*\n\t\t\t * unique()\n\t\t\t * A function that returns a globally unique Key.\n\t\t\t * @param {string} key   The key to modify and return.\n\t\t\t * @return {string}\n\t\t\t */\n\t\t\tunique: function(key) { return key+this.uuid; },\n\n\t\t}\n\t}\n\n\n\tOP.CustomComponent.extend = function(key, fn) {\n\t\tOP.CustomComponent[key] = function(App, key){\n\n\t\t\tif (!App) {\n\t\t\t\tApp = OP.Component._newApp();\n\t\t\t}\n\n\t\t\t// make an instance of the component.\n\t\t\treturn fn(App, key);\n\t\t};\n\t}\n\n\n\tOP.Dialog = AD.op.Dialog;\n\n\tOP.Error = AD.error;\n\n\tOP.Form = Form;\n\n\tOP.Multilingual = Multilingual;\n\tOP.Model = Model;\n\n\n\tOP.Util = Util;\n\n\n\n\texport default OP;\n// }\n\n\n// import \"./model.js\"\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/OP.js","\n// import OP from \"OP\"\nimport \"../data/ABApplication\"\n\nimport ABObject from \"./ABObject\"\n\n\nvar _AllApplications = [];\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nfunction toDC( data ) {\n\treturn new webix.DataCollection({\n\t\tdata: data,\n\n\t\t// on: {\n\t\t// \tonAfterDelete: function(id) {\n\n\t\t// \t}\n\t\t// }\n\t});\n}\n\nfunction toArray(DC) {\n\tvar ary = [];\n\n\tvar id = DC.getFirstId();\n\twhile(id) {\n\t\tvar element = DC.getItem(id);\n\t\tary.push(element);\n\t\tid = DC.getNextId(id);\n\t}\n\n\treturn ary;\n}\n\nexport default class ABApplication {\n\n    constructor(attributes) {\n\n    \t// ABApplication Attributes\n    \tthis.id    = attributes.id;\n    \tthis.json  = attributes.json;\n    \tthis.name  = attributes.name || this.json.name || \"\";\n    \tthis.role  = attributes.role;\n\n    \t// multilingual fields: label, description\n    \tOP.Multilingual.translate(this, this.json, ABApplication.fieldsMultilingual());\n\n\n\t  \t// import all our ABObjects\n\t  \tvar newObjects = [];\n\t  \t(attributes.json.objects || []).forEach((obj) => {\n\t  \t\tnewObjects.push( new ABObject(obj, this) );\n\t  \t})\n\t  \tthis._objects = newObjects;\n\n\n\t  \t// import all our ABViews\n\n\n\n\t  \t// instance keeps a link to our Model for .save() and .destroy();\n\t  \tthis.Model = OP.Model.get('opstools.BuildApp.ABApplication');\n\t  \tthis.Model.Models(ABApplication);\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n  \t/**\n  \t * @function allApplications\n  \t *\n  \t * return a DataCollection that contains all the ABApplications this user\n  \t * can see (based upon server side permissions);\n  \t *\n  \t * NOTE: this manages the results in the _AllApplications dataCollection\n  \t * store.  Any future .create(), .destroy(), .updates() modify values in\n  \t * that collection.\n  \t *\n  \t * Any webix ui components synced to that collection will be automatically\n  \t * updated.\n  \t *\n  \t * @return {Promise}\n  \t */\n\tstatic allApplications() {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar ModelApplication = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\t\t\tModelApplication.Models(ABApplication); // set the Models  setting.\n\n\t\t\t\tModelApplication.findAll()\n\t\t\t\t\t.then(function(data){\n\n\t\t\t\t\t\t// NOTE: data is already a DataCollection from .findAll()\n\t\t\t\t\t\t_AllApplications = data;\n\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(reject);\n\n\t\t\t}\n\t\t)\n\t}\n\n\n  \t/**\n  \t * @function create\n  \t *\n  \t * take the initial values and create an instance of ABApplication.\n  \t *\n  \t * @return {Promise}\n  \t */\n\tstatic create(values) {\n\t\treturn new Promise(\n\t\t\tfunction(resolve, reject) {\n\n\t\t\t\tvar newApp = {}\n\t\t\t\tOP.Multilingual.unTranslate(values, newApp, ABApplication.fieldsMultilingual());\n\t\t\t\tvalues.json = newApp;\n\t\t\t\tnewApp.name = values.name;\n\n\t\t\t\tvar ModelApplication = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\t\t\tModelApplication.create(values)\n\t\t\t\t.then(function(app){\n\n\t\t\t\t\t// return an instance of ABApplication\n\t\t\t\t\tvar App = new ABApplication(app);\n\n\t\t\t\t\t_AllApplications.add(App,0);\n\t\t\t\t\tresolve(App);\n\t\t\t\t})\n\t\t\t\t.catch(reject)\n\t\t\t}\n\t\t)\n\t}\n\n\n\t/**\n\t * @method fieldsMultilingual()\n\t *\n\t * return an array of fields that are considered Multilingual labels for\n\t * an ABApplication\n\t *\n\t * @return {array}\n\t */\n\tstatic fieldsMultilingual() {\n\t\treturn ['label', 'description'];\n\t}\n\n\n\n//// TODO: Refactor isValid() to ignore op and not error if duplicateName is own .id\n\n\tstatic isValid(op, values) {\n\n\t\t\tvar errors = null;\n\n\t\t\t// during an ADD operation\n\t\t\tif (op == 'add') {\n\n\t\t\t\t// label/name must be unique:\n\t\t\t\tvar arrayApplications = toArray(_AllApplications);\n\n\t\t\t\tvar nameMatch = values.label.trim().replace(/ /g, '_').toLowerCase();\n\t\t\t\tvar matchingApps = arrayApplications.filter(function (app) {\n\t\t\t\t\treturn app.name.trim().toLowerCase() == nameMatch;\n\t\t\t\t})\n\t\t\t\tif (matchingApps && matchingApps.length > 0) {\n\n\t\t\t\t\terrors = OP.Form.validationError({\n\t\t\t\t\t\tname:'label',\n\t\t\t\t\t\tmessage:L('ab_form_application_duplicate_name', \"*Name (#name#) is already in use\").replace('#name#', nameMatch),\n\t\t\t\t\t}, errors);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// Check the common validations:\n// TODO:\n// if (!inputValidator.validate(values.label)) {\n// \t_logic.buttonSaveEnable();\n// \treturn false;\n// }\n\n\n\t\t\treturn errors;\n\t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\t/// ABApplication data methods\n\n\n\t/**\n\t * @method destroy()\n\t *\n\t * destroy the current instance of ABApplication\n\t *\n\t * also remove it from our _AllApplications\n\t *\n\t * @return {Promise}\n\t */\n\tdestroy () {\n\t\tif (this.id) {\n\t\t\treturn this.Model.destroy(this.id)\n\t\t\t\t.then(()=>{\n\t\t\t\t\t_AllApplications.remove(this.id);\n\t\t\t\t});\n\t\t}\n\t}\n\n\n\t/**\n\t * @method save()\n\t *\n\t * persist the current instance of ABApplication to the DB\n\t *\n\t * Also, keep the values in _AllApplications up to date.\n\t *\n\t * @return {Promise}\n\t */\n\tsave () {\n\n\t\tvar values = this.toObj();\n\n\t\t// we already have an .id, so this must be an UPDATE\n\t\tif (values.id) {\n\n\t\t\treturn this.Model.update(values.id, values)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t_AllApplications.updateItem(values.id, this);\n\t\t\t\t\t});\n\n\t\t} else {\n\n\t\t\t// must be a CREATE:\n\t\t\treturn this.Model.create(values)\n\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\tthis.id = data.id;\n\t\t\t\t\t\t_AllApplications.add(this, 0);\n\t\t\t\t\t});\n\t\t}\n\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\ttoObj () {\n\n\t\tOP.Multilingual.unTranslate(this, this.json, ABApplication.fieldsMultilingual());\n\t\tthis.json.name = this.name;\n\n\t\t// for each Object: compile to json\n\t\tvar currObjects = [];\n\t\tthis._objects.forEach((obj) => {\n\t\t\tcurrObjects.push(obj.toObj())\n\t\t})\n\t\tthis.json.objects = currObjects;\n\n\t\treturn {\n\t\t\tid:this.id,\n\t\t\tname:this.name,\n\t\t\tjson:this.json,\n\t\t\trole:this.role\n\t\t}\n\t}\n\n\n\n\t/// ABApplication Permission methods\n\n\n\t/**\n\t * @method assignPermissions()\n\t *\n\t * Make sure the current ABApplication permissions match the given\n\t * array of permissions.\n\t *\n\t * @param {array} permItems\tan array of role assignments that this\n\t * \t\t\t\t\t\t\tABApplication should match.\n\t * @return {Promise}\n\t */\n\tassignPermissions (permItems) {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\t\t\t\tAD.comm.service.put({\n\t\t\t\t\turl: '/app_builder/' + this.id + '/role/assign',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\troles: permItems\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve);\n\t\t\t}\n\t\t)\n\t}\n\n\n\t/**\n\t * @method getPermissions()\n\t *\n\t * Return an array of role assignments that are currently assigned to this\n\t * ABApplication.\n\t *\n\t * @return {Promise} \tresolve(list) : list {array} Role assignments\n\t */\n\tgetPermissions () {\n\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tAD.comm.service.get({ url: '/app_builder/' + this.id + '/role' })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve)\n\t\t\t}\n\t\t);\n\t}\n\n\n\t/**\n\t * @method createPermission()\n\t *\n\t * Create a Role in the system after the name of the current ABApplication.\n\t *\n\t * @return {Promise}\n\t */\n\tcreatePermission () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n// TODO: need to take created role and store as : .json.applicationRole = role.id\n\n\t\t\t\tAD.comm.service.post({ url: '/app_builder/' + this.id + '/role' })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve)\n\n\t\t\t}\n\t\t);\n\t}\n\n\n\t/**\n\t * @method deletePermission()\n\t *\n\t * Remove the Role in the system of the current ABApplication.\n\t * (the one created by  .createPermission() )\n\t *\n\t * @return {Promise}\n\t */\n\tdeletePermission () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n// TODO: need to remove created role from : .json.applicationRole\n\t\t\t\tAD.comm.service.delete({ url: '/app_builder/' + this.id + '/role' })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve)\n\n\t\t\t}\n\t\t);\n\t}\n\n\n\n\n\t///\n\t/// Objects\n\t///\n\n\n\n\n\t/**\n\t * @method objects()\n\t *\n\t * return an array of all the ABObjects for this ABApplication.\n\t *\n\t * @param {fn} filter  \ta filter fn to return a set of ABObjects that this fn\n\t *\t\t\t\t\t\treturns true for.\n\t * @return {array} \tarray of ABObject\n\t */\n\tobjects (filter) {\n\n\t\tfilter = filter || function() {return true; };\n\n\t\treturn this._objects.filter(filter);\n\n\t}\n\n\n\n\t/**\n\t * @method objectNew()\n\t *\n\t * return an instance of a new (unsaved) ABObject that is tied to this\n\t * ABApplication.\n\t *\n\t * NOTE: this new object is not included in our this.objects until a .save()\n\t * is performed on the object.\n\t *\n\t * @return {ABObject}\n\t */\n\tobjectNew( values ) {\n\t\treturn new ABObject(values, this);\n\t}\n\n\n\n\t/**\n\t * @method objectSave()\n\t *\n\t * persist the current ABObject in our list of ._objects.\n\t *\n\t * @param {ABObject} object\n\t * @return {Promise}\n\t */\n\tobjectSave( object ) {\n\t\tvar isIncluded = (this.objects(function(o){ return o.id == object.id }).length > 0);\n\t\tif (!isIncluded) {\n\t\t\tthis._objects.push(object);\n\t\t}\n\n\t\treturn this.save();\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/ABApplication.js","/*\n * ABField\n *\n * An ABField defines a single unique Field/Column in a ABObject.\n *\n */\n\n// import OP from \"../../OP/OP\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nexport default class ABField {\n\n    constructor(values, object, fieldDefaults) {\n\n    \t// NOTE: setup this first so later we can use .fieldType(), .fieldIcon()\n    \tthis.defaults = fieldDefaults;\n\n\n    \t/*\n  \t\t{\n  \t\t\tid:'uuid',\t\t\t\t\t// uuid value for this obj\n  \t\t\ttype:'fieldType',\t\t\t// unique key for this Field\n  \t\t\ticon:'font',\t\t\t\t// fa-[icon] reference for an icon for this Field Type\n  \t\t\tlabel:'',\t\t\t\t\t// pulled from translation\n\t\t\tcolumnName:'column_name',\t// a valid mysql table.column name \n\t\t\tsettings: {\t\t\t\t\t// unique settings for the type of field\n\t\t\t\tshowIcon:true/false,\t// only useful in Object Workspace DataTable\n\n\t\t\t\t// specific for dataField\n\t\t\t},\n\t\t\ttranslations:[]\n  \t\t}\n  \t\t*/\n  \t\tthis.fromValues(values);\n\n\n\n    \t// label is a multilingual value:\n    \tOP.Multilingual.translate(this, this, ['label']);\n\n\n    \tthis.object = object;\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n  \tstatic clearEditor( ids) {\n\n  \t\tvar defaultValues = {\n  \t\t\tlabel: '',\n  \t\t\tcolumnName:'',\n  \t\t\tshowIcon:1\n  \t\t}\n\n  \t\tfor(var f in defaultValues) {\n\t\t\tvar component = $$(ids[f]);\n\t\t\tcomponent.setValue(defaultValues[f]);\n\t\t}\n  \t}\n\n\n  \tstatic editorPopulate( ids, field ) {\n\n  \t\t$$(ids.label).setValue(field.label);\n  \t\t$$(ids.columnName).setValue(field.columnName);\n  \t\t$$(ids.showIcon).setValue(field.settings.showIcon);\n\n  \t}\n\n\n\t/**\n\t * @function definitionEditor\n\t *\n\t * Many DataFields share some base information for their usage\n\t * in the AppBuilder.  The UI Editors have a common header\n\t * and footer format, and this function allows child DataFields\n\t * to not have to define those over and over.\n\t *\n\t * The common layout header contains:\n\t *\t\t[Menu Label]\n\t *\t\t[textBox: labelName]\n\t *\t\t[text:    description]\n\t *\n\t * The defined DataField UI will be added at the end of this.\n\t *\n\t * This routine actually updated the live DataField definition\n\t * with the common header info.\n\t *\n\t * @param {DataField} field  The DataField object to work with.\n\t */\n  \tstatic definitionEditor( App, ids, _logic, Field ) {\n\n/// TODO: maybe just pass in onChange instead of _logic\n/// if not onChange, then use our default:\n\n  \t\t// setup our default labelOnChange functionality:\n  \t\tvar onChange = function (newVal, oldVal) {\n\n  \t\t\toldVal = oldVal || '';\n\n\t\t\tif (newVal != oldVal &&\n\t\t\t\toldVal == $$(ids.columnName).getValue()) {\n\t\t\t\t$$(ids.columnName).setValue(newVal);\n\t\t\t}\n\t\t}\n\n\t\t// if they provided a labelOnChange() override, use that:\n\t\tif (_logic.labelOnChange) {\n\t\t\tonChange = _logic.labelOnChange;\n\t\t}\n\n\n  \t\tvar _ui = {\n\t\t\t// id: ids.component,\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: \"<span class='webix_icon fa-{0}'></span>{1}\".replace('{0}', Field.icon).replace('{1}', Field.menuName)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tid: ids.label,\n\t\t\t\t\tname:'label',\n\t\t\t\t\tlabel: App.labels.dataFieldHeaderLabel,\n\t\t\t\t\tplaceholder: App.labels.dataFieldHeaderLabelPlaceholder,\n\t\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\t\tcss: 'ab-new-label-name',\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\t\tonChange(newVal, oldVal);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tid: ids.columnName,\n\t\t\t\t\tname:'columnName',\n\t\t\t\t\tlabel: App.labels.dataFieldColumnName, // 'Name',\n\t\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\t\tplaceholder: App.labels.dataFieldColumnNamePlaceholder, // 'Column name',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tid: ids.fieldDescription,\n\t\t\t\t\tlabel: Field.description,\n\t\t\t\t\talign: \"right\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: 'checkbox',\n\t\t\t\t\tid: ids.showIcon,\n\t\t\t\t\tname:'showIcon',\n\t\t\t\t\tlabelRight: App.labels.dataFieldShowIcon, // 'Show icon',\n\t\t\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\t\t\tvalue:true\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\n  \t\treturn _ui;\n  \t}\n\n\n  \tstatic editorValues (settings) {\n\n  \t\tvar obj = {\n  \t\t\tlabel: settings.label,\n  \t\t\tcolumnName: settings.columnName,\n  \t\t\tsettings:settings\n  \t\t}\n\n  \t\tdelete settings.label;\n  \t\tdelete settings.columnName;\n\n  \t\treturn obj;\n  \t}\n\n\n\n\t// unique key to reference this specific DataField\n  \tfieldName() {\n  \t\treturn this.defaults.name;\n  \t}\n\n  \t// http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n  \tfieldType() {\n  \t\treturn this.defaults.type;\n  \t}\n\n  \t// font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n  \tfieldIcon() {\n  \t\treturn this.defaults.icon;\n  \t}\n\n  \t// the multilingual text for the name of this data field.\n  \tfieldMenuName() {\n  \t\treturn this.defaults.menuName;\n  \t} \n\n  \t// the multilingual text for the name of this data field.\n  \tfieldDescription() {\n  \t\treturn this.defaults.description;\n  \t} \n\n\n\n  \t/*\n  \t * @method isValid\n  \t * check the current values to make sure they are valid.\n  \t * Here we check the default values provided by ABField.\n  \t *\n  \t * @return null or [{OP.Form.validationError()}] objects.\n  \t */\n\tisValid() {\n\n\t\tvar errors = null;\n\n\t\t// .columnName must be unique among fileds on the same object\n\t\tvar isNameUnique = (this.object.fields((f)=>{ \n\t\t\tvar isDifferent = (f.id != this.id);\n\t\t\treturn (f.id != this.id) \n\t\t\t\t\t&& (f.columnName.toLowerCase() == this.columnName.toLowerCase() ); \n\t\t}).length == 0);\n\t\tif (!isNameUnique) {\n\t\t\terrors = OP.Form.validationError({\n\t\t\t\tname:'columnName',\n\t\t\t\tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.columnName),\n\t\t\t}, errors);\n\t\t}\n\n\t\treturn errors;\n\t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\t/// ABApplication data methods\n\n\n\t/**\n\t * @method destroy()\n\t *\n\t * destroy the current instance of ABApplication\n\t *\n\t * also remove it from our _AllApplications\n\t *\n\t * @return {Promise}\n\t */\n\tdestroy () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\t// verify we have been .save()d before:\n\t\t\t\tif (this.id) {\n\n\t\t\t\t\tthis.object.fieldRemove(this)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function(err){\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t})\n\n\t\t\t\t} else {\n\n\t\t\t\t\tresolve();  // nothing to do really\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t)\n\n\t}\n\n\n\t/**\n\t * @method save()\n\t *\n\t * persist this instance of ABField with it's parent ABObject\n\t *\n\t *\n\t * @return {Promise}\n\t *\t\t\t\t\t\t.resolve( {this} )\n\t */\n\tsave () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\t// if this is our initial save()\n\t\t\t\tif (!this.id) {\n\t\t\t\t\tthis.id = OP.Util.uuid();\t// setup default .id\n\t\t\t\t}\n\n\t\t\t\tthis.object.fieldSave(this)\n\t\t\t\t.then(() => {\n\t\t\t\t\tresolve(this);\n\t\t\t\t})\n\t\t\t\t.catch(function(err){\n\t\t\t\t\treject(err);\n\t\t\t\t})\n\t\t\t}\n\t\t)\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABField instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * @return {json}\n\t */\n\ttoObj () {\n\n\t\t// store \"label\" in our translations\n\t\tOP.Multilingual.unTranslate(this, this, [\"label\"]);\n\n\t\treturn {\n\t\t\tid : this.id,\n\t\t\ttype : this.type,\n\t\t\ticon : this.icon,\n\t\t\tcolumnName: this.columnName,\n\t\t\tsettings: this.settings,\n\t\t\ttranslations:this.translations\n\t\t}\n\t}\n\n\n\tfromValues (values) {\n\n \t\tthis.id = values.id;\t\t\t// NOTE: only exists after .save()\n    \tthis.type = values.type || this.fieldType();\t\n    \tthis.icon = values.icon || this.fieldIcon();\n\n    \t// if this is being instantiated on a read from the Property UI,\n    \t// .label is coming in under .settings.label\n    \tthis.label = values.label || values.settings.label || '?label?';\n\n    \tthis.columnName = values.columnName || '';\n    \tthis.translations = values.translations || [];\n\n    \tthis.settings = values.settings || {};\n    \tthis.settings.showIcon = values.settings.showIcon+\"\" || \"1\";\n\n\n    \t// convert from \"0\" => 0\n    \tthis.settings.showIcon = parseInt(this.settings.showIcon);\n\t}\n\n\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t/*\n\t * @function columnHeader\n\t * Return the column header for a webix grid component for this specific \n\t * data field.\n\t * @param {bool} isObjectWorkspace is this being used in the Object \n\t *\t\t\t\t\t\t\t\t   workspace.\n\t * @return {obj}  configuration obj\n\t */\n\tcolumnHeader (isObjectWorkspace) {\n\n\t\tvar config = {\n\t\t\tid: this.id,\n\t\t\theader: this.label,\n\t\t}\n\n\t\tif (isObjectWorkspace) {\n\t\t\tif (this.settings.showIcon) {\n\t\t\t\tconfig.header = '<span class=\"webix_icon fa-{icon}\"></span>'.replace('{icon}', this.fieldIcon() ) + config.header;\n\t\t\t}\n\t\t}\n\n\t\treturn config;\n\t}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/dataFields/ABField.js","\n/**\n * @class config\n *\n * Manage our configuration settings.\n */\n\nimport ConfigDesktop from \"./configDesktop\"\nimport ConfigMobile from \"./configMobile\"\n\n\nexport default {\n\tconfig:function(){\n\n\t\t// TODO: decide which config file to return here:\n\t\tif (window.innerWidth < 768) {\n\t\t\treturn ConfigMobile;\n\t\t}\n\t\treturn ConfigDesktop;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/config/config.js","\nexport default {\n\n\t/**\n\t * @function OP.Form.validationError\n\t *\n\t * creates an error object that can be used in OP.Form.isValidationError()\n\t * to update a webix form with error validation messages.\n\t *\n\t * @param {json} error \tan error object\n\t *\t\t\t\terror.name\t{string} the attribute name (Form.element[error.name])\n\t *\t\t\t\terror.message {string} the message to display for the error\n\t *\n\t * @return {obj} an error object.\n\t */\n\tvalidationError: function(error, errorObj) {\n\n\t\terrorObj = errorObj || {\n\t\t\terror:'E_VALIDATION',\n\t\t\tinvalidAttributes:{\n\n\t\t\t}\n\t\t}\n\n\t\tvar attr = errorObj.invalidAttributes;\n\t\tattr[error.name] = attr[error.name] || [];\n\n\t\tattr[error.name].push(error);\n\n\t\treturn errorObj;\n\t},\n\n\n\t/**\n\t * @function OP.Form.isValidationError\n\t *\n\t * scans the given error to see if it is a sails' respone about an invalid\n\t * value from one of the form elements.\n\t *\n\t * @codestart\n\t * var form = $$('formID');\n\t * var values = form.getValues();\n\t * model.attr(values);\n\t * model.save()\n\t * .fail(function(err){\n\t *     if (!OP.Form.isValidationError(err, form)) {\n\t *         OP.error.log('Error saving current model ()', {error:err, values:values});\n\t *     }\n\t * })\n\t * .then(function(newData){\n\t * \n\t * });\n\t * @codeend\n\t *\n\t * @param {obj} error  the error response object\n\t * @param {obj} form   the webix form instance (or reference)\n\t * @return {bool}      true if error was about a form element.  false otherwise.\n\t */\n\tisValidationError: function(error, form) {\n\n\t\t// {bool} have we set focus to form component?\n\t\tvar hasFocused = false;\n\n\n\t\t// if we have an error object:\n\t\tif (error) { \n\n\n\t\t\t//// if the error obj is provided by Sails response, \n\t\t\t//// do some clean up on the error object:\n\n\n\t\t\t// dig down to sails provided error object:\n\t\t\tif ((error.error)\n\t\t\t\t&& (error.error == 'E_UNKNOWN')\n\t\t\t\t&& (error.raw)\n\t\t\t\t&& (error.raw.length > 0)) {\n\n\t\t\t\terror = error.raw[0]\n\t\t\t}\n\n\t\t\t// drill down to the embedded .err object if it exists\n\t\t\tif (error.err) {\n\t\t\t\terror = error.err;\n\t\t\t}\n\n\n\t\t\t//// Now process the error object\n\t\t\t//// \n\t\t\tif (((error.error)\n\t\t\t\t\t&& (error.error == 'E_VALIDATION'))\n\t\t\t\t|| ((error.code) && (error.code == 'E_VALIDATION'))) {\n\n\t\t\t\tvar attrs = error.invalidAttributes;\n\t\t\t\tif (attrs) {\n\n\t\t\t\t\tvar wasForm = false;\n\t\t\t\t\tfor (var attr in attrs) {\n\n\t\t\t\t\t\t// if this is a field in the form:\n\t\t\t\t\t\tif (form.elements[attr]) {\n\n\t\t\t\t\t\t\tvar errors = attrs[attr];\n\t\t\t\t\t\t\tvar msg = [];\n\t\t\t\t\t\t\terrors.forEach(function(err) {\n\t\t\t\t\t\t\t\tmsg.push(err.message);\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t// set the invalid error message\n\t\t\t\t\t\t\tform.markInvalid(attr, msg.join(', '));\n\n\t\t\t\t\t\t\t// set focus to the 1st form element we mark:\n\t\t\t\t\t\t\tif (!hasFocused) {\n\t\t\t\t\t\t\t\tform.elements[attr].focus();\n\t\t\t\t\t\t\t\thasFocused = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\twasForm = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (wasForm) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\t// if we missed updating our form with an error\n\t\t// this was not a validation error so return false\n\t\treturn false\n\n\t}\n\n\n\t\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/form.js","\n\nvar _restURLs = {\n\tfindAll: 'GET #url#',\n\tfindOne: 'GET #url#/{id}',\n\tcreate:  'POST #url#',\n\tupdate:  'PUT #url#/{id}',\n\tdestroy: 'DELETE #url#/{id}',\n}\n\n\nvar _Models = {};\n\n\nclass OPModel {\n\n\tconstructor(key, staticData, instanceData) {\n\n\t\tthis.key = key;\n\t\tthis.staticData = staticData;\n\t\tthis.instanceData = instanceData;\n\t\tthis.Model = staticData.Model;\n\n\t\tthis.url = {};\n\t\tfor(var r in _restURLs) {\n\t\t\tthis.url[r] = staticData[r]\n\t\t}\n\n\t}\n\n\tModels(Model) {\n\t\tthis.Model = Model;\n\t}\n\n\tfindAll(cond ) {\n\t\treturn new Promise( \n\t\t\t(resolve, reject) => {\n\n// NOTE: currently reusing AD.Model\n\n\t\t\t\t// var Model = AD.Model.get(this.key);\n\t\t\t\t// Model.findAll(cond)\n\n\t\t\t\tvar service = this.service('findAll');\n\n\t\t\t\tAD.comm.service[service.verb]({ url:service.url, params: cond })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done((data) => {\n\n\t\t\t\t\tdata = data.data || data;\n\n\t\t\t\t\t// our findAll() should return an array of items.\n\t\t\t\t\tif (!Array.isArray(data)) {\n\t\t\t\t\t\tdata = [data];\n\t\t\t\t\t}\n\n\n\t\t\t\t\t// return instances of this.Model if provided:\n\t\t\t\t\tif (this.Model) {\n\t\t\t\t\t\tvar newList = []; // Model.List();\n\t\t\t\t\t\tdata.forEach((l) => {\n\t\t\t\t\t\t\tif (l) {\n\t\t\t\t\t\t\t\tnewList.push( new this.Model(l) );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tdata = newList;\n\t\t\t\t\t}\n\n\n\t\t\t\t\t// convert to a WebixDataCollection:\n\t\t\t\t\tvar dc = new webix.DataCollection({\n\t\t\t\t\t\tdata: data,\n\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonAfterDelete: function(id) {\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\n\t\t\t\t\t// dc._toArray = function() {\n\t\t\t\t\t// \tvar data = [];\n\t\t\t\t\t// \tvar id = this.getFirstId();\n\t\t\t\t\t// \twhile(id) {\n\t\t\t\t\t// \t\tdata.push(this.getItem(id));\n\t\t\t\t\t// \t\tid = this.getNextId(id);\n\t\t\t\t\t// \t}\n\t\t\t\t\t// \treturn data;\n\t\t\t\t\t// }\n\n\n\n\t\t\t\t\tresolve(dc);\n\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n\n\tfindOne(cond) {\n\t\treturn new Promise( \n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar service = this.service('findOne');\n\n\t\t\t\tvar nURI = service.url;\n                for (var k in cond) {\n                    var oURI = nURI;\n                    nURI = AD.util.string.replaceAll(nURI, \"{\" + k + \"}\", cond[k]);\n\n                    // if there was a change, remove k from cond:\n                    if (oURI != nURI) {\n                        delete cond[k];\n                    }\n                }\n                service.url = nURI;\n\n\t\t\t\tAD.comm.service[service.verb]({ url:service.url, params: cond })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(function(item){\n\t\t\t\t\tif (item.translate) item.translate();\n\n\t\t\t\t\tresolve(item.attr?item.attr():item);\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n\n\tcreate(attr) {\n\t\treturn new Promise( \n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar service = this.service('create');\n\n\t\t\t\tAD.comm.service[service.verb]({ url:service.url, params: attr })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(function(item){\n\t\t\t\t\tif (item.translate) item.translate();\n\n\t\t\t\t\tresolve(item.attr?item.attr():item);\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n\n\tupdate(id, attr) {\n\t\treturn new Promise( \n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar service = this.service('update', id);\n\n\t\t\t\tAD.comm.service[service.verb]({ url:service.url, params: attr })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve);\n\t\t\t}\n\t\t);\n\t}\n\n\tdestroy(id) {\n\t\treturn new Promise( \n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar service = this.service('destroy', id);\n\n\t\t\t\tAD.comm.service[service.verb]({ url:service.url, params: {} })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve);\n\t\t\t}\n\t\t);\n\t}\n\n\n\tservice(key, id) {\n\t\tvar parts = this.url[key].split(' ');\n\t\tvar verb = parts[0].toLowerCase();\n\t\tvar uri = parts.pop(); \n\n\t\tif (id) {\n\t\t\tvar key = '{id}';\n\t        uri = AD.util.string.replaceAll(uri, key, id);\n\t    }\n\n        return {\n        \tverb:verb,\n        \turl:uri\n        }\n\t}\n}\n\n\nexport default {\n\n\textend:function(key, staticData, instance) {\n\n\n\t\t//\n\t\t// Create the AD.Model from this definition\n\t\t//\n\n\t\tif (staticData.restURL) {\n\t\t\tfor (var u in _restURLs) {\n\t\t\t\tstaticData[u] = _restURLs[u].replace('#url#', staticData.restURL);\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t// var alreadyThere = AD.Model.get(key);\n\t\t// if (!alreadyThere) {\n\n\t\t// \tAD.Model.Base.extend(key, staticData, instance);\n\t\t// \tAD.Model.extend(key, staticData, instance);\n\t\t// }\n\t\t\n\t\t//\n\t\t// Now create our OP.Model:\n\t\t//\n\t\tvar curr = nameSpace(_Models, key);\n\t\tvar modelName = objectName(key);\n\n\t\tcurr[modelName] = new OPModel(key, staticData, instance);\n\n\t},\n\n\tget: function(key) {\n\t\treturn findObject(_Models, key);\n\t}\n}\n\n\n\n\n\n\n\n\n            /*\n             * @function findObject\n             *\n             * Return the object specified by the given name space:\n             *\n             * @param {object} baseObj  The base object to search on\n             *                          usually AD.models or AD.models_base\n             *\n             * @param {string} name   The provided namespace to parse and search for\n             *                        The name can be spaced using '.' \n             *                        eg.  'coolTool.Resource1' => AD.models.coolTool.Resource1\n             *                             'coolerApp.tool1.Resource1' => AD.models.coolerApp.tool1.Resource1\n             *\n             * @returns {object}  the object resolved by the namespaced base \n             *                    eg:  findObject(AD.models, 'Resource') => return AD.models.Resource\n             *                         findObject(AD.models, 'coolTool.Resource1') => AD.models.coolTool.Resource1\n             *\n             *                    if an object is not found, null is returned.\n             */\n            var findObject = function (baseObj, name) {\n\n                // first lets figure out our namespacing:\n                var nameList = name.split('.');\n\n                // for each remaining name segments, make sure we have a \n                // namespace container for it:\n                var curr = baseObj;\n                nameList.forEach(function (name) {\n\n                    if (curr == null) {\n                        var whoops = true;\n                        console.error('! current name segment is null.  Check your given name to make sure it is properly given: ', name);\n                    }\n                    if (curr) {\n                        if (typeof curr[name] == 'undefined') {\n                            curr = null;\n                        }\n                        if (curr) curr = curr[name];\n                    }\n                })\n\n                return curr;\n            }\n\n\n\n            /*\n             * @function objectName\n             *\n             * parse the name and return the name of the object we will create.\n             *\n             * @param {string} name   The provided namespace to parse \n             *                        The name can be spaced using '.' \n             *\n             * @returns {string}  the name of the model object \n             *                    eg:  objectName('Resource') => return 'Resource'\n             *                         objectName('coolTool.Resource1') => 'Resource1'\n             */\n            var objectName = function (name) {\n\n                // first lets figure out our namespacing:\n                var nameList = name.split('.');\n                var objName = nameList.pop(); // remove the last one.\n\n                return objName;\n            }\n\n\n\n            /*\n             * @function nameSpace\n             *\n             * Make sure the proper name space is created on the given base.\n             *\n             * @param {object} baseObj  The base object to create the namespace on\n             *                          usually AD.models or AD.models_base\n             *\n             * @param {string} name   The provided namespace to parse and create\n             *                        The name can be spaced using '.' \n             *                        eg.  'coolTool.Resource1' => AD.models.coolTool.Resource1\n             *                             'coolerApp.tool1.Resource1' => AD.models.coolerApp.tool1.Resource1\n             *\n             * @returns {object}  the object that represents the namespaced base \n             *                    that the Model is to be created on.\n             *                    eg:  nameSpace(AD.models, 'Resource') => return AD.models\n             *                         nameSpace(AD.models, 'coolTool.Resource1') => AD.models.coolTool\n             */\n            var nameSpace = function (baseObj, name) {\n\n                // first lets figure out our namespacing:\n                var nameList = name.split('.');\n                var controlName = nameList.pop(); // remove the last one.\n\n                // for each remaining name segments, make sure we have a \n                // namespace container for it:\n                var curr = baseObj;\n                nameList.forEach(function (name) {\n\n                    if (typeof curr[name] == 'undefined') {\n                        curr[name] = {};\n                    }\n                    curr = curr[name];\n                })\n\n                return curr;\n            }\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/model.js","/*\n * OP.Multilingual\n *\n * A set of helpers for Multilingual Data.\n *\n */\n\nexport default {\n\n\t/**\n\t * @function OP.Multilingual.translate\n\t *\n\t * Given a set of json data, pull out any multilingual translations\n\t * and flatten those values to the base object.\n\t *\n\t * @param {obj} obj  The instance of the object being translated\n\t * @param {json} json The json data being used for translation.\n\t *\t\t\t\t\t\tThere should be json.translations = [ {transEntry}, ...]\n\t *\t\t\t\t\t\twhere transEntry = {\n\t *\t\t\t\t\t\t\tlanguage_code:'en',\n\t *\t\t\t\t\t\t\tfield1:'value',\n\t *\t\t\t\t\t\t\t...\n\t *\t\t\t\t\t\t}\n\t * @param {array} fields an Array of multilingual fields to pull to \n\t *\t\t\t\t\t\t the obj[field] value.\n\t *\n\t */\n\ttranslate:function(obj, json, fields) {\n\n\t\tif (!json.translations) {\n\t\t\tjson.translations = [];\n\t\t}\n\n\t\tvar currLanguage = AD.lang.currentLanguage || 'en';\n\n\t\tif (fields && fields.length > 0) {\n\n\t\t\tjson.translations.forEach(function(t){\n\t\t\t\t// find the translation for the current language code\n\t\t\t\tif (t.language_code == currLanguage) {\n\n\t\t\t\t\t// copy each field to the root object\n\t\t\t\t\tfields.forEach(function(f){\n\t\t\t\t\t\tobj[f] = t[f] || '';  // default to '' if not found. \n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\n\t\t}\n\t},\n\n\n\t/**\n\t * @function OP.Multilingual.unTranslate\n\t *\n\t * Take the multilingual information in the base obj, and push that \n\t * down into the json.translations data.\n\t *\n\t * @param {obj} obj  The instance of the object with the translation\n\t * @param {json} json The json data being used for translation.\n\t *\t\t\t\t\t\tThere should be json.translations = [ {transEntry}, ...]\n\t *\t\t\t\t\t\twhere transEntry = {\n\t *\t\t\t\t\t\t\tlanguage_code:'en',\n\t *\t\t\t\t\t\t\tfield1:'value',\n\t *\t\t\t\t\t\t\t...\n\t *\t\t\t\t\t\t}\n\t * @param {array} fields an Array of multilingual fields to pull from \n\t *\t\t\t\t\t\t the obj[field] value.\n\t *\n\t */\n\tunTranslate: function( obj, json, fields) {\n\n\t\tjson = json || {};\n\t\tfields = fields || [];\n\n\t\tif (!json.translations) {\n\t\t\tjson.translations = [];\n\t\t}\n\n\t\tvar currLanguage = AD.lang.currentLanguage || 'en';\n\n\n\t\tif (fields && fields.length > 0) {\n\n\t\t\tvar foundOne = false;\n\n\t\t\tjson.translations.forEach(function(t){\n\t\t\t\t// find the translation for the current language code\n\t\t\t\tif (t.language_code == currLanguage) {\n\n\t\t\t\t\t// copy each field to the root object\n\t\t\t\t\tfields.forEach(function(f){\n\t\t\t\t\t\tt[f] = obj[f];\n\t\t\t\t\t})\n\n\t\t\t\t\tfoundOne = true;\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// if we didn't update an existing translation\n\t\t\tif (!foundOne) {\n\n\t\t\t\t// create a translation entry:\n\t            var trans = {};\n\n\t            // assume current languageCode:\n\t            trans.language_code = currLanguage;\n\n\t            fields.forEach(function (field) {\n\t                if (obj[field] != null) {\n\t                    trans[field] = obj[field];\n\t                }\n\t            })\n\n\t            json.translations.push(trans);\n\t\t\t}\n\n\t\t}\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/multilingual.js","\nexport default {\n\t\n\tuuid: AD.util.uuid\n\t\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/util.js","\n/**\n * @class configDesktop\n *\n * Manage our configuration settings for Desktop styles.\n\n */\n\n\n\nexport default {\n\n\t// Application List\n\tappListRowHeight: 70,\n\n\t// button types\n\tbuttonWidthLarge: 200,\n\tbuttonWidthMedium: 150,\n\tbuttonWidthSmall: 100,\n\tbuttonWidthExtraSmall: 50,\n\n\t// tab types\n\ttabWidthLarge: 200,\n\ttabWidthMedium: 120,\n\ttabWidthSmall: 100,\n\ttabWidthExtraSmall: 50,\n\n\t// column types\n\n\n\t// spacers\n\tsmallSpacer: 10,\n\tmediumSpacer: 25,\n\tlargeSpacer: 50,\n\tappListSpacerRowHeight: 100,\n\tappListSpacerColMinWidth: 100,\n\tappListSpacerColMaxWidth: 200,\n\tobjectWorkspaceColWidth: 20,\n\n\t// labels\n\tlabelWidthSmall: 50,\n\tlabelWidthMedium: 80,\n\tlabelWidthLarge: 150,\n\tlabelWidthCheckbox: 0,\n\n\t// show elements on desktop\n\thideMobile: false,\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/config/configDesktop.js","\n/**\n * @class configMobile\n *\n * Manage our configuration settings for mobile styles.\n\n */\n\n\n\nexport default {\n\n\t// Application List\n\tappListRowHeight: 70,\n\n\t// button types\n\tbuttonWidthLarge: 200,\n\n\t// column types\n\n\n\t// spacers\n\tsmallSpacer: 1,\n\tmediumSpacer: 10,\n\tlargeSpacer: 20,\n\tappListSpacerRowHeight: 10,\n\tappListSpacerColMinWidth: 1,\n\tappListSpacerColMaxWidth: 1,\n\tobjectWorkspaceColWidth: 1,\n\n\t// labels\n\tlabelWidthSmall: 50,\n\tlabelWidthMedium: 80,\n\tlabelWidthLarge: 120,\n\tlabelWidthCheckbox: 0,\n\n\t// hide elements for mobile\n\thideMobile: true,\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/config/configMobile.js","/* \n * ABFieldComponent\n * \n * An ABFieldComponent defines the UI component used by an ABField to display it's properties.\n *\n */\n\nimport ABField from \"./ABField\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nexport default class ABFieldComponent {\n\n\n    constructor(options) {\n\n    \tthis.options = options;\n\n    \tthis.fieldDefaults = options.fieldDefaults || {};\n\n    \tthis.elements = options.elements || function (App) { return []; } ;\n\n    \tthis.defaultValues = options.defaultValues || {};\n\n    \tthis.rules = options.rules || {};\n\n    \tthis.logic = options.logic || {};\n\n    \tthis.init = options.init || function() {};\n\n\n\n    \tthis.idBase = this.fieldDefaults.name || '??fieldName??';\n\n    \t// this.ids = options.ids || {};\n    \tthis.ids = {};\n\n    \t\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\tcomponent (App) {\n\n\t\t// for each provided element: create an this.ids for it:\n    \tvar elements = this.elements(App, this);\n\n\n    \t////\n    \t//// prepare our ids\n    \t////\n\n\t\tvar ids = {\n\n\t\t\tcomponent: App.unique(this.idBase+'_component'),\n\n\t\t\t// the common property fields\n\t\t\tlabel: App.unique(this.idBase+'_label'),\n\t\t\tcolumnName: App.unique(this.idBase+'_columnName'),\n\t\t\tfieldDescription: App.unique(this.idBase+'_fieldDescription'),\n\t\t\tshowIcon: App.unique(this.idBase+'_showIcon'),\n\t\t}\n\n    \tthis.eachDeep(elements, (e) => {\n    \t\tif (e.name) {\n    \t\t\t// if element has an .id, then use it in our list as is\n    \t\t\tif (e.id) {\n    \t\t\t\tids[e.name] = e.id;\n    \t\t\t}\n\n    \t\t\t// otherwise create a new entry in our base list\n    \t\t\tthis.ids[e.name] = e.name;\n    \t\t}\n    \t})\n\n\n\t\t// convert the entries in our base list into a globally acceptable id\n\t\t// and use that in our ids list if it doesn't already exist\n\t\tfor (var i in this.ids) {\n\t\t\tif (!ids[i]) {\n\t\t\t\tids[i] = App.unique(this.idBase+'_'+i);\n\t\t\t}\n\t\t}\n\n\t\t// update our elements to include our ids as we have them now.\n\t\tthis.eachDeep(elements, (e) => {\n    \t\tif (e.name) {\n    \t\t\te.id = ids[e.name];\n    \t\t}\n    \t})\n\n\n\t\t////\n\t\t//// our UI definition:\n\t\t////\n\n\t\t// our base form:\n\t\tvar _ui = {\n\t\t\tview:'form',\n\t\t\tid: ids.component,\n\t\t\tautoheight:true,\n\t\t\tborderless:true,\n\t\t\telements: [\n\t\t\t\t// {\n\t\t\t\t// \tview: \"text\",\n\t\t\t\t// \tid: ids.textDefault,\n\t\t\t\t// \tname:'textDefault',\n\t\t\t\t// \tplaceholder: labels.component.defaultText\n\t\t\t\t// },\n\t\t\t\t// {\n\t\t\t\t// \tview: \"checkbox\",\n\t\t\t\t// \tid: ids.supportMultilingual,\n\t\t\t\t// \tname:'supportMultilingual',\n\t\t\t\t// \tlabelRight: labels.component.supportMultilingual,\n\t\t\t\t// \tlabelWidth: 0,\n\t\t\t\t// \tvalue: true\n\t\t\t\t// }\n\t\t\t],\n\n\t\t\trules:{\n\t\t\t\t'label':webix.rules.isNotEmpty,\n\t\t\t\t'columnName':webix.rules.isNotEmpty\n\t\t\t}\n\t\t}\n\n\n\n\t\tvar _init = function() {\n\n\t\t\t// call our provided .init() routine\n\t\t\tthis.init(ids);\n\t\t}\n\n\n\n\t\tvar _logic = {\n\n\t\t\t/*\n\t\t\t * @function clear\n\t\t\t *\n\t\t\t * clear the form.\n\t\t\t */\n\t\t\tclear: () => {\n\n\t\t\t\tABField.clearEditor( ids );\n\n\t\t\t\tfor(var f in this.defaultValues) { \n\t\t\t\t\tvar component = $$(ids[f]);\n\t\t\t\t\tif(component) {\n\t\t\t\t\t\tcomponent.setValue(this.defaultValues[f]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn('!! could not find component for default value: name:'+f+' id:'+ids[f]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$$(ids.component).clearValidation();\n\n\n\t\t\t\t// perform provided .clear()\n\t\t\t\tif (this.logic.clear) {\n\t\t\t\t\tthis.logic.clear(ids);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function hide\n\t\t\t *\n\t\t\t * hide this component.\n\t\t\t */\n\t\t\thide: () => {\n\t\t\t\t$$(ids.component).clearValidation();\n\t\t\t\t$$(ids.component).hide( false, false);\n\n\t\t\t\t// perform provided .hide()\n\t\t\t\tif (this.logic.hide) {\n\t\t\t\t\tthis.logic.hide(ids)\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function isValid\n\t\t\t *\n\t\t\t * checks the current values on the componet to see if they are Valid\n\t\t\t */\n\t\t\tisValid: () => {\n\n\t\t\t\tvar isValid = $$(ids.component).validate();\n\n\t\t\t\t// perform provided .isValid()\n\t\t\t\tif (this.logic.isValid) {\n\t\t\t\t\tisValid = this.logic.isValid(ids, isValid);\n\t\t\t\t}\n\n\t\t\t\treturn isValid;\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function labelOnChange\n\t\t\t *\n\t\t\t * The ABField.definitionEditor implements a default operation\n\t\t\t * to update the value of the .columnName with the current value of \n\t\t\t * label.\n\t\t\t * \n\t\t\t * if you want to override that functionality, implement this fn()\n\t\t\t *\n\t\t\t * @param {string} newVal\tThe new value of label\n\t\t\t * @param {string} oldVal\tThe previous value\n\t\t\t */\n\t\t\t// labelOnChange: function (newVal, oldVal) {\n\n\t\t\t// \t// When the Label value changes, update our Column Name value \n\t\t\t// \t// to match.\n\n\t\t\t// \toldVal = oldVal || '';\n\t\t\t// \tif (newVal != oldVal &&\n\t\t\t// \t\toldVal == $$(ids.columnName).getValue()) {\n\t\t\t// \t\t$$(ids.columnName).setValue(newVal);\n\t\t\t// \t}\n\t\t\t// },\n\n\n\t\t\t/*\n\t\t\t * @function populate\n\t\t\t *\n\t\t\t * populate the form with the given ABField instance provided.\n\t\t\t *\n\t\t\t * @param {ABField} field\n\t\t\t */\n\t\t\tpopulate: (field) => {\n\nconsole.error('TODO: .populate()');\n\n\t\t\t\t// populate the base ABField values:\n\t\t\t\tABField.editorPopulate(ids, field);\n\n\t\t\t\tthis.eachDeep(elements, function(e){\n\t\t\t\t\t$$(ids[e.name]).setValue(field.settings[e.name]);\n\t\t\t\t})\n\n\t\t\t\t// perform provided .populate()\n\t\t\t\tif (this.logic.populate) {\n\t\t\t\t\tthis.logic.populate(ids, field);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function show\n\t\t\t *\n\t\t\t * show this component.\n\t\t\t */\n\t\t\tshow: (a, b) => {\n\t\t\t\t$$(ids.component).clearValidation();\n\t\t\t\t$$(ids.component).show(a, b);\n\n\t\t\t\t// perform provided .show()\n\t\t\t\tif (this.logic.show) {\n\t\t\t\t\tthis.logic.show(ids)\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function values\n\t\t\t *\n\t\t\t * return the values for this form.\n\t\t\t * @return {obj}  \n\t\t\t */\n\t\t\tvalues: () => {\n\n\t\t\t\tvar settings = $$(ids.component).getValues();\n\t\t\t\tvar values = ABField.editorValues(settings);\n\n\t\t\t\tvalues.type = this.fieldDefaults.type;\n\t\t\n\t\t\t\t// perform provided .values()\n\t\t\t\tif (this.logic.values) {\n\t\t\t\t\tvalues = this.logic.values(ids, values)\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t}\n\n\t\t}\n\n\t\t// apply additional logic functions:\n\t\tfor (var l in this.logic) {\n\t\t\tif (!_logic[l]) _logic[l] = this.logic[l];\n\t\t}\n\n\n\t\t// make sure our given elements, have an id set:\n\n\n\t\t// get the common UI headers entries, and insert them above ours here:\n\t\t// NOTE: put this here so that _logic is defined.\n\t\tvar commonUI = ABField.definitionEditor(App, ids, _logic, this.fieldDefaults);\n\t\t_ui.elements = commonUI.rows.concat(elements);\n\n\t\tfor (var r in this.rules) {\n\t\t\t_ui.rules[r] = this.rules[r];\n\t\t}\n\n\n\t\t// return the current instance of this component:\n\t\treturn this._component = {\n\t\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component  \n\t\t\t// actions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t\t// DataField exposed actions:\n\t\t\tclear: _logic.clear,\n\t\t\thide: _logic.hide,\n\t\t\tisValid:_logic.isValid,\n\t\t\tpopulate: _logic.populate,\n\t\t\tshow: _logic.show,\n\t\t\tvalues: _logic.values,\n\n\n\t\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t\t}\n\t}\n\n\n\n\t/**\n\t * @function eachDeep\n\t * a depth first fn to apply fn() to each element of our list.\n\t * @param {array} list  array of webix elements to scan\n\t * @param {fn} fn function to apply to each element.\n\t */\n\teachDeep(list, fn) {\n\t\tlist.forEach((e) => {\n\n\t\t\t// process sub columns\n\t\t\tif (e.cols) {\n\t\t\t\tthis.eachDeep(e.cols, fn);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// or rows\n\t\t\tif (e.rows) {\n\t\t\t\tthis.eachDeep(e.rows, fn);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// or just process this element:\n\t\t\tfn(e)\n\t\t})\n\t}\n\n\n\tidsUnique(ids, App) {\n\n\t\tfor (var i in ids) {\n\t\t\tif (ids[i] == '') {\n\t\t\t\tids[i] = App.unique(this.idBase+'_'+i)\n\t\t\t} else {\n\t\t\t\tids[i] = App.unique(this.idBase+'_'+ids[i])\n\t\t\t}\n\t\t}\n\t\treturn ids;\n\t}\n\n\t// populate(field) {\n\t// \tthis._component.populate(field);\n\t// }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/dataFields/ABFieldComponent.js","/* \n * ABFieldManager\n * \n * An interface for managing the different ABFields available in our AppBuilder.\n *\n */\n\n\nimport ABFieldString from \"./dataFields/ABFieldString\"\nimport ABFieldNumber from \"./dataFields/ABFieldNumber\"\n\n\nimport ABFieldImage from \"./dataFields/ABFieldImage\"\n\n/* \n * Fields\n * A name => ABField  hash of the different ABFields available.\n */\nvar Fields = {};\nFields[ABFieldString.defaults().name] = ABFieldString;\nFields[ABFieldNumber.defaults().name] = ABFieldNumber;\n\n\nFields[ABFieldImage.defaults().name] = ABFieldImage;\n\n\n\nexport default  {\n\n\n\t/*\n\t * @function allFields\n\t * return all the currently defined ABFields in an array.\n\t * @return [{ABField},...]\n\t */\n\tallFields: function() {\n\t\tvar fields = [];\n\t\tfor (var f in Fields) {\n\t\t\tfields.push(Fields[f]);\n\t\t}\n\t\treturn fields;\n\t},\n\n\n\t/*\n\t * @function newField\n\t * return an instance of an ABField based upon the values.type value.\n\t * @return {ABField}\n\t */\n\tnewField: function (values, object) {\n\n\t\tif (values.type) {\n\t\t\treturn new Fields[values.type](values, object);\n\t\t} else {\n\n//// TODO: what to do here?\n\t\t}\n\n\t}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/ABFieldManager.js","\n/*\n * AB\n *\n * The base AppBuilder component.  It manages these components:\n *   - ab_choose :  choose an application to work with\n *   - ab_work   :  load an application into the work area\n *\n */\n\n// import '../OP/OP'\n\nimport './ab_choose'\nimport './ab_work'\n\n// Import our Custom Components here:\nimport EditTree from '../webix_custom_components/edittree'\nimport EditList from '../webix_custom_components/editlist'\n\nimport style from \"../AppBuilder.css\"\n\n\nOP.Component.extend('ab', function(App) {\n\n\n\tfunction L(key, altText) {\n\t\treturn AD.lang.label.getLabel(key) || altText;\n\t}\n\n\n\t// setup the common labels for our AppBuilder Application.\n\tApp.labels = {\n\t\tadd: L('ab.common.add', \"*Add\"),\n\t\tcreate: L('ab.common.create', \"*Create\"),\n\t\t\"delete\": L('ab.common.delete', \"*Delete\"),\n\t\tedit: \t  L('ab.common.edit', \"*Edit\"),\n\t\t\"export\": L('ab.common.export', \"*Export\"),\n\t\tformName: L('ab.common.form.name', \"*Name\"),\n\t\t\"import\": L('ab.common.import', \"*Import\"),\n\t\tok: \t  L('ab.common.ok', \"*Ok\"),\n\n\t\tcancel:   L('ab.common.cancel', \"*Cancel\"),\n\t\tsave: \t  L('ab.common.save', \"*Save\"),\n\n\t\tyes: \t  L('ab.common.yes', \"*Yes\"),\n\t\tno: \t  L('ab.common.no', \"*No\"),\n\n\t\tcreateErrorMessage:   L('ab.common.create.error', \"*System could not create <b>{0}</b>.\"),\n\t\tcreateSuccessMessage: L('ab.common.create.success', \"*<b>{0}</b> is created.\"),\n\n\t\tupdateErrorMessage:  L('ab.common.update.error', \"*System could not update <b>{0}</b>.\"),\n\t\tupdateSucessMessage: L('ab.common.update.success', \"*<b>{0}</b> is updated.\"),\n\n\t\tdeleteErrorMessage:   L('ab.common.delete.error', \"*System could not delete <b>{0}</b>.\"),\n\t\tdeleteSuccessMessage: L('ab.common.delete.success', \"*<b>{0}</b> is deleted.\"),\n\n\n\t\t// Data Field  common Property labels:\n\t\tdataFieldHeaderLabel: L('ab.dataField.common.headerLabel', '*Label'),\n\t\tdataFieldHeaderLabelPlaceholder: L('ab.dataField.common.headerLabelPlaceholder', '*Header Name'),\n\n\t\tdataFieldColumnName: L('ab.dataField.common.columnName', '*Name'),\n\t\tdataFieldColumnNamePlaceholder: L('ab.dataField.common.columnNamePlaceholder', '*Column Name'),\n\n\t\tdataFieldShowIcon: L('ab.dataField.common.showIcon', '*show icon?')\n\t}\n\n\n\t// make instances of our Custom Components:\n\tOP.CustomComponent[EditTree.key](App, 'edittree'); // ->  App.custom.edittree  now exists\n\tOP.CustomComponent[EditList.key](App, 'editlist'); // ->  App.custom.editlist  now exists\n\n\n\n\n\tvar ids = {\n\t\tcomponent:App.unique('app_builder_root')\n\t}\n\n\n\n\t// Define the external components used in this Component:\n\tvar AppChooser = OP.Component['ab_choose'](App);\n\tvar AppWorkspace = OP.Component['ab_work'](App);\n\n\n\t// This component's UI definition:\n\t// Application multi-views\n\tvar _ui = {\n\t\tid: ids.component,\n\t\tview:\"multiview\",\n\t\tborderless:true,\n\t\tanimate: false,\n\t\trows:[\n\t\t\tAppChooser.ui,\n\t\t\tAppWorkspace.ui\n\t\t]\n\t};\n\n\n\n\t// This component's init() definition:\n\tvar _init = function() {\n\n\t\tAppChooser.init();\n\t\tAppWorkspace.init();\n\n\t\t// start off only showing the App Chooser:\n\t\tApp.actions.transitionApplicationChooser();\n\n\t\t// perform an initial resize adjustment\n\t\t$$(ids.component).adjust();\n\t}\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t}\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component\n\t\tactions:_actions\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\t}\n\n});\n\n\n\n\n\n\n//// REFACTORING TODOs:\n// TODO: AppForm-> Permissions : refresh permission list, remove AppRole permission on Application.delete().\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab.js","\n// import 'OP';\n// import '../../../../../assets/js/webix/webix'\n\n\nimport './components/ab'\n\n\nAD.Control.OpsTool.extend('BuildApp', {\n\n\tinit: function (element, options) {\n\t\tvar self = this;\n\n\t\toptions = AD.defaults({\n\t\t\ttemplateDOM: '/opstools/BuildApp/views/BuildApp/BuildApp.ejs',\n\t\t\tresize_notification: 'BuildApp.resize',\n\t\t\ttool: null   // the parent opsPortal Tool() object\n\t\t}, options);\n\t\tself.options = options;\n\n\t\t// Call parent init\n\t\tself._super(element, options);\n\n\t\tself.data = {};\n\n\t\tself.webixUiId = {\n\t\t\tloadingScreen: 'ab-loading-screen',\n\t\t\tsyncButton: 'ab-sync-button'\n\t\t};\n\n\t\tself.initDOM(function(){\n\t\t\tself.initWebixUI();\n\t\t});\n\n\n\t},\n\n\n\tinitDOM: function (cb) {\n\t\tvar _this = this;\n\n\t\tcan.view(this.options.templateDOM, {}, function(fragment){\n\t\t\t_this.element.html(fragment);\n\n\t\t\t// _this.element.find(\".ab-app-list\").show();\n\t\t\t// _this.element.find(\".ab-app-workspace\").hide();\n\n\t\t\tcb();\n\t\t});\n\t},\n\n\n\tinitWebixUI: function () {\n\n\t\t// get the AppBuilder (AB) Webix Component\n\t\tvar AppBuilder = OP.Component['ab']();\n\t\tvar ui = AppBuilder.ui;\n\n\t\t// tell the AppBuilder where to attach\n\t\tui.container = 'ab-main-container'\n\n\t\t// instantiate the UI first\n\t\tthis.AppBuilder = webix.ui(ui);\n\n\t\t// then perform the init()\n\t\tAppBuilder.init();\n\n\t},\n\n\n\tresize: function (height) {\n\t\tvar self = this;\n\n\t\theight = height.height || height;\n\n\t\tvar appListDom = $(self.element);\n\n\t\tif (appListDom) {\n\t\t\tvar width = appListDom.parent().css('width');\n\t\t\tif (width) {\n\t\t\t\twidth = parseInt(width.replace('px', ''));\n\t\t\t}\n\t\t\tappListDom.width(width);\n\n\t\t\t// Removed this because the 140 pixels was causing the list to not scroll to the bottom of the page\n\t\t\t// var computedHeight = height - 140;\n\n\t\t\tvar computedHeight = height;\n\t\t\tconsole.log(\"computed height: \" + computedHeight);\n\t\t\tvar mh = parseInt(appListDom.css('min-height').replace('px', ''));\n\t\t\tconsole.log(\"min-height: \" + mh);\n\t\t\tif (mh < computedHeight) {\n\t\t\t\tappListDom.height(computedHeight);\n\t\t\t\t$('#ab-main-container').height(computedHeight);\n\t\t\t} else {\n\t\t\t\tappListDom.height(mh);\n\t\t\t\t$('#ab-main-container').height(mh);\n\t\t\t}\n\n\t\t\tif (this.AppBuilder) {\n\t\t\t\t// this.AppBuilder.define('height', height - 140);\n\t\t\t\tthis.AppBuilder.adjust();\n\t\t\t}\n\n\t\t}\n\t}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/AppBuilder.js","\n// import OP from \"OP\"\nimport ABFieldManager from \"./ABFieldManager\"\n\n\nfunction toDC( data ) {\n\treturn new webix.DataCollection({\n\t\tdata: data,\n\n\t\t// on: {\n\t\t// \tonAfterDelete: function(id) {\n\n\t\t// \t}\n\t\t// }\n\t});\n}\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nexport default class ABObject {\n\n    constructor(attributes, application) {\n/*\n{\n\tid: uuid(),\n\tname: 'name',\n\tlabelFormat: 'xxxxx',\n\tisImported: 1/0,\n\turlPath:'string',\n\timportFromObject: 'string', // JSON Schema style reference:  '#[ABApplication.id]/objects/[ABObject.id]'\n\t\t\t\t\t\t\t\t// to get other object:  ABApplication.objectFromRef(obj.importFromObject);\n\ttranslations:[\n\t\t{}\n\t],\n\tfields:[\n\t\t{ABDataField}\n\t]\n}\n*/\n\n    \t// ABApplication Attributes\n    \tthis.id    = attributes.id;\n    \tthis.name  = attributes.name || \"\";\n    \tthis.labelFormat = attributes.labelFormat || \"\";\n    \tthis.isImported  = attributes.isImported  || 0;\n    \tthis.urlPath\t = attributes.urlPath     || \"\";\n    \tthis.importFromObject = attributes.importFromObject || \"\";\n    \tthis.translations = attributes.translations;\n\n    \tthis.objectWorkspace = attributes.objectWorkspace || {\n    \t\thiddenFields:[], \t// array of [ids] to add hidden:true to\n    \t};\n\n\n    \t// multilingual fields: label, description\n    \tOP.Multilingual.translate(this, this, ['label']);\n\n\n\t  \t// import all our ABObjects\n\t  \tvar newFields = [];\n\t  \t(attributes.fields || []).forEach((field) => {\n\t  \t\tnewFields.push( this.fieldNew(field) );\n\t  \t})\n\t  \tthis._fields = newFields;\n\n\n\t  \t// link me to my parent ABApplication\n\t  \tthis.application = application;\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n\n//// TODO: Refactor isValid() to ignore op and not error if duplicateName is own .id\n\n\tisValid() {\n\n\t\tvar errors = null;\n\n\n\t\t// label/name must be unique:\n\t\tvar isNameUnique = (this.application.objects((o) => { return o.name.toLowerCase() == this.name.toLowerCase(); }).length == 0);\n\t\tif (!isNameUnique) {\n\t\t\terrors = OP.Form.validationError({\n\t\t\t\t\tname:'name',\n\t\t\t\t\tmessage:L('ab.validation.object.name.unique', 'Object name must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t\t\t}, errors);\n\t\t}\n\n\n\t\t\t// Check the common validations:\n// TODO:\n// if (!inputValidator.validate(values.label)) {\n// \t_logic.buttonSaveEnable();\n// \treturn false;\n// }\n\n\n\t\treturn errors;\n\t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\t/// ABApplication data methods\n\n\n\t/**\n\t * @method destroy()\n\t *\n\t * destroy the current instance of ABApplication\n\t *\n\t * also remove it from our _AllApplications\n\t *\n\t * @return {Promise}\n\t */\n\tdestroy () {\n\t\tif (this.id) {\nconsole.error('TODO: ABObject.destroy()');\n\t\t\t// return this.Model.destroy(this.id)\n\t\t\t// \t.then(()=>{\n\t\t\t// \t\t_AllApplications.remove(this.id);\n\t\t\t// \t});\n\t\t}\n\t}\n\n\n\t/**\n\t * @method save()\n\t *\n\t * persist this instance of ABObject with it's parent ABApplication\n\t *\n\t *\n\t * @return {Promise}\n\t *\t\t\t\t\t\t.resolve( {this} )\n\t */\n\tsave () {\n\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\t// if this is our initial save()\n\t\t\t\tif (!this.id) {\n\n\t\t\t\t\tthis.id = OP.Util.uuid();\t// setup default .id\n\t\t\t\t\tthis.label = this.label || this.name;\n\t\t\t\t\tthis.urlPath = this.urlPath || this.application.name + '/' + this.name;\n\t\t\t\t}\n\n\t\t\t\tthis.application.objectSave(this)\n\t\t\t\t.then(() => {\n\t\t\t\t\tresolve(this);\n\t\t\t\t})\n\t\t\t\t.catch(function(err){\n\t\t\t\t\treject(err);\n\t\t\t\t})\n\t\t\t}\n\t\t)\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\ttoObj () {\n\n\t\tOP.Multilingual.unTranslate(this, this, [\"label\"]);\n\n\t\t// // for each Object: compile to json\n\t\tvar currFields = [];\n\t\tthis._fields.forEach((obj) => {\n\t\t\tcurrFields.push(obj.toObj())\n\t\t})\n\n\n\t\treturn {\n\t\t\tid: \t\t\tthis.id,\n\t\t\tname: \t\t\tthis.name,\n    \t\tlabelFormat: \tthis.labelFormat,\n    \t\tisImported:  \tthis.isImported,\n    \t\turlPath: \t\tthis.urlPath,\n    \t\timportFromObject: this.importFromObject,\n    \t\tobjectWorkspace:  this.objectWorkspace,\n    \t\ttranslations: \tthis.translations,\n    \t\tfields: \t \tcurrFields\n\t\t}\n\t}\n\n\n\n\n\n\n\t///\n\t/// Fields\n\t///\n\n\n\n\n\t/**\n\t * @method fields()\n\t *\n\t * return an array of all the ABFields for this ABObject.\n\t *\n\t * @return {array}\n\t */\n\tfields (filter) {\n\n\t\tfilter = filter || function() {return true; };\n\n\t\treturn this._fields.filter(filter);\n\t}\n\n\n\n\t/**\n\t * @method fieldNew()\n\t *\n\t * return an instance of a new (unsaved) ABField that is tied to this\n\t * ABObject.\n\t *\n\t * NOTE: this new field is not included in our this.fields until a .save()\n\t * is performed on the field.\n\t *\n\t * @return {ABField}\n\t */\n\tfieldNew ( values ) {\n\t\t// NOTE: ABFieldManager returns the proper ABFieldXXXX instance.\n\t\treturn ABFieldManager.newField( values, this );\n\t}\n\n\n\n\t/**\n\t * @method fieldRemove()\n\t *\n\t * remove the given ABField from our ._fields array and persist the current\n\t * values.\n\t *\n\t * @param {ABField} field The instance of the field to remove.\n\t * @return {Promise}\n\t */\n\tfieldRemove( field ) {\n\t\tthis._fields = this.fields(function(o){ return o.id != field.id });\n\n\t\treturn this.save();\n\t}\n\n\n\n\t/**\n\t * @method fieldSave()\n\t *\n\t * save the given ABField in our ._fields array and persist the current\n\t * values.\n\t *\n\t * @param {ABField} field The instance of the field to save.\n\t * @return {Promise}\n\t */\n\tfieldSave( field ) {\n\t\tvar isIncluded = (this.fields(function(o){ return o.id == field.id }).length > 0);\n\t\tif (!isIncluded) {\n\t\t\tthis._fields.push(field);\n\t\t}\n\n\t\treturn this.save();\n\t}\n\n\n\n\n\n\n\t///\n\t///\tObject Workspace Settings\n\t///\n\n\n\tget workspaceHiddenFields() {\n\t\treturn this.objectWorkspace.hiddenFields;\n\t}\n\n\tset workspaceHiddenFields( fields ) {\n\t\tthis.objectWorkspace.hiddenFields = fields;\n\t}\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t// return the column headers for this object\n\t// @param {bool} isObjectWorkspace  return the settings saved for the object workspace\n\tcolumnHeaders (isObjectWorkspace) {\n\n\t\tvar headers = [];\n\t\tvar idLookup = {};\n\n\t\t// get the header for each of our fields:\n\t\tthis._fields.forEach(function(f){\n\t\t\tvar header = f.columnHeader(isObjectWorkspace);\n\t\t\theaders.push(header);\n\t\t\tidLookup[header.id] = f.id;\t// name => id\n\t\t})\n\n\n\t\t// update our headers with any settings applied in the Object Workspace\n\t\tif (isObjectWorkspace) {\n\n\t\t\t// set column width to adjust:true by default;\n\t\t\theaders.forEach((h) => { h.adjust = true; });\n\n\t\t\t// hide any hiddenfields\n\t\t\tthis.workspaceHiddenFields.forEach((hfID)=>{\n\t\t\t\theaders.forEach((h)=> {\n\t\t\t\t\tif (idLookup[h.id] == hfID){\n\t\t\t\t\t\th.hidden = true;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t});\n\n\t\t}\n\n\t\treturn headers;\n\t}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/ABObject.js","/*\n * ABFieldImage\n *\n * An ABFieldImage defines a Image field type.\n *\n */\n\nimport ABField from \"./ABField\"\nimport ABFieldComponent from \"./ABFieldComponent\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\n\nvar ABFieldImageDefaults = {\n\tname : 'image', // unique key to reference this specific DataField\n\ttype : 'string', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\ticon : 'file-image-o',   // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\t\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName : L('ab.dataField.image.menuName', '*Image Attachment'),\n\t\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.image.description', '*Attach an image to this object.')\n}\n\n\n\nvar defaultValues = {\n\t'useWidth':0,\n\t'imageWidth':'',\n\t'useHeight': 0,\n\t'imageHeight': ''\n}\n\n\n\n/**\n * ABFieldImageComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\nvar ABFieldImageComponent = new ABFieldComponent({\n\n\tfieldDefaults: ABFieldImageDefaults,\n\n\telements:(App, field) => {\n\n\t\tvar ids = {\n\t\t\timageWidth: '',\n\t\t\timageHeight: ''\n\t\t}\n\t\tids = field.idsUnique(ids, App);\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"checkbox\",\n\t\t\t\t\t\tname:\"useWidth\", \n\t\t\t\t\t\tlabelRight:L('ab.dataField.image.width', \"*width\"), \n\t\t\t            width: 80,\n\t\t\t            labelWidth: 0,\n\t\t\t\t\t\tvalue:1,\n\t\t\t            click: function() {\n\t\t\t\t\t\t\tif (this.getValue())\n\t\t\t\t\t\t\t\t$$(ids.imageWidth).enable()\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t$$(ids.imageWidth).disable();\n\t\t\t            }\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: 'text',\n\t\t\t\t\t\tname:'imageWidth',\n\t\t\t\t\t\tid: ids.imageWidth\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"checkbox\",\n\t\t\t\t\t\tname:\"useHeight\",\n// id:componentIds.useHeight, \n\t\t\t\t\t\tlabelRight:L('ab.dataField.image.height', \"*height\"), \n\t\t\t          \twidth: 80,\n\t\t\t            labelWidth: 0,\n\t\t\t\t\t\tvalue:1,\n\t\t\t            click: function() {\n\t\t\t\t\t\t\tif (this.getValue())\n\t\t\t\t\t\t\t\t$$(ids.imageHeight).enable()\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t$$(ids.imageHeight).disable();\n\t\t\t            }\n\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: 'text',\n\t\t\t\t\t\tname: 'imageHeight',\n\t\t\t          \tid: ids.imageHeight\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules:{\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic:{\n\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit:function(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n})\n\n\n\n\n\nclass ABFieldImage extends ABField {\n\n    constructor(values, object) {\n    \tsuper(values, object, ABFieldImageDefaults);\n\n    \t/*\n    \t{\n\t\t\tsettings: {\n\t\t\t\t'useWidth':0,\n\t\t\t\t'imageWidth':'',\n\t\t\t\t'useHeight': 0,\n\t\t\t\t'imageHeight': ''\n\t\t\t}\n    \t}\n    \t*/\n\n    \t// we're responsible for setting up our specific settings:\n    \tfor (var dv in defaultValues) {\n    \t\tthis.settings[dv] = values.settings[dv] || defaultValues[dv];\n    \t}\n\n\n    \t// text to Int:\n    \tthis.settings.useWidth = parseInt(this.settings.useWidth);\n    \tthis.settings.useHeight = parseInt(this.settings.useHeight);\n  \t}\n\n\n  \t// return the default values for this DataField\n  \tstatic defaults() {\n  \t\treturn ABFieldImageDefaults;\n  \t}\n\n\n\n\t/*\n\t * @function propertiesComponent\n\t *\n\t * return a UI Component that contains the property definitions for this Field.\n\t *\n\t * @param {App} App the UI App instance passed around the Components.\n\t * @return {Component}\n\t */\n  \tstatic propertiesComponent(App) {\n  \t\treturn ABFieldImageComponent.component(App);\n  \t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\tisValid() {\n\n\t\tvar errors = super.isValid();\n\n\t\t// errors = OP.Form.validationError({\n\t\t// \tname:'columnName',\n\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t// }, errors);\n\n\t\treturn errors;\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\t// toObj () {\n\n\t// \tvar obj = super.toObj();\n\n\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t// \treturn obj;\n\t// }\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t// return the grid column header definition for this instance of ABFieldImage\n\tcolumnHeader (isObjectWorkspace) {\n\t\tvar config = super.columnHeader(isObjectWorkspace);\n\n\t\tconfig.editor = 'text';  // '[edit_type]'   for your unique situation\n\t\tconfig.sort   = 'string' // '[sort_type]'   for your unique situation\n\n\t\treturn config;\n\t}\n\n}\n\n\n\n//// NOTE: if you need a unique [edit_type] by your returned config.editor above:\n// webix.editors = {\n//   \"[edit_type]\": {\n//     focus: function () {...}\n//     getValue: function () {...},\n//     setValue: function (value) {...},\n//     render: function () {...}\n//   }\n// };\n\n\n//// NOTE: if you need a unique [sort_type] by your returned config.sort above:\n// webix.DataStore.prototype.sorting.as.[sort_type] = function(a,b){ \n//     return a > b ? 1 : -1; \n// }\n\n\nexport default ABFieldImage;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/dataFields/ABFieldImage.js","/*\n * ABFieldNumber\n *\n * An ABFieldNumber defines a Number field type.\n *\n */\n\nimport ABField from \"./ABField\"\nimport ABFieldComponent from \"./ABFieldComponent\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\n\nvar ABFieldNumberDefaults = {\n\tname : 'number', // unique key to reference this specific DataField\n\ttype : 'number', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\t\t// NOTE: the server side implementation will read the instance.settings and return either a:\n\t\t//\t'float', or 'integer'\n\n\ticon : 'slack',   // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\t\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName : L('ab.dataField.number.menuName', '*Number'),\n\t\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.number.description', '*A Float or Integer Value')\n}\n\n\n\nvar formatList = [\n\t{ id: 'none', value: L('ab.dataField.number.none', \"*None\") },\n\t{ id: 'dollar', value: L('ab.dataField.number.format.dollar', \"$\"), sign: \"$\", position: \"prefix\" },\n\t{ id: 'pound', value: L('ab.dataField.number.format.pound', \"£\"), sign: \"£\", position: \"prefix\" },\n\t{ id: 'euroBefore', value: L('ab.dataField.number.format.euroBefore', \"€ (before)\"), sign: \"€\", position: \"prefix\" },\n\t{ id: 'euroAfter', value: L('ab.dataField.number.format.euroAfter', \"€ (after)\"), sign: \"€\", position: \"postfix\" },\n\t{ id: 'percent', value: L('ab.dataField.number.format.percent', \"%\"), sign: \"%\", position: \"postfix\" },\n];\n\nvar defaultValues = {\n\t'allowRequired':0,\n\t'numberDefault':'',\n\t'typeFormat': 'none',\n\t'typeDecimals': 'none',\n\t'typeDecimalPlaces': 'none',\n\t'typeRounding' : 'none',\n\t'typeThousands': 'none',\n\t'validation':0,\n\t'validateMinimum':'',\n\t'validateMaximum':''\n}\n\n/**\n * ABFieldNumberComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\nvar ABFieldNumberComponent = new ABFieldComponent({\n\n\tfieldDefaults: ABFieldNumberDefaults,\n\n\telements:(App, field) => {\n\n\n\n\t\t// var idBase = ABFieldNumberDefaults.type;\n\t\t// var ids = {\n\t\t// \ttypeDecimalPlaces: this.unique(App, '_typeDecimalPlaces'),  // App.unique(idBase +'_typeDecimalPlaces'),\n\t\t// \ttypeRounding: App.unique(idBase +'_typeRounding'),\n\t\t// \tvalidateMinimum: App.unique(idBase + '_validateMinimum'),\n\t\t// \tvalidateMaximum: App.unique(idBase + '_validateMaximum')\n\t\t// }\n\n\t\tvar ids = {\n\t\t\ttypeDecimalPlaces \t: '',  \n\t\t\ttypeRounding \t\t: '',\n\t\t\tvalidateMinimum \t: '',\n\t\t\tvalidateMaximum \t: ''\n\t\t}\n\t\tids = field.idsUnique(ids, App);\n\n\t\treturn [\n\t\t\t// {\n\t\t\t// \tview: \"text\",\n\t\t\t// \tname:'textDefault',\n\t\t\t// \tlabelWidth: App.config.labelWidthLarge,\n\t\t\t// \tplaceholder: L('ab.dataField.string.default', '*Default text')\n\t\t\t// },\n\t\t\t{\n\t\t\t\tview: \"checkbox\",\n// id: componentIds.allowRequired,\n\t\t\t\tname:\"allowRequired\",\n\t\t\t\tlabelRight: L(\"ab.dataField.number.required\", \"*Required\"),\n\t\t\t\tinputWidth: 130,\n\t\t\t\tlabelWidth: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"text\",\n\t\t\t\tlabel: L(\"ab.dataField.number.defaultValue\", \"*Default Value\"),\n\t\t\t\tlabelWidth: \"100\",\n// id: componentIds.numberDefault,\n\t\t\t\tname:\"numberDefault\",\n\t\t\t\tplaceholder: L('ab.dataField.number.defaultNumber', '*Default number'),\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\t// Validate number\n\t\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t\t// $$(componentIds.numberDefault).setValue(oldVal);\n\t\t\t\t\t\t\tthis.setValue(oldVal);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"richselect\",\n// id: componentIds.typeFormat,\n\t\t\t\tname:'typeFormat',\n\t\t\t\tlabel: L('ab.dataField.number.format', \"*Format\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\toptions: formatList\n\t\t\t},\n\t\t\t{\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"richselect\",\n// id: componentIds.typeDecimals,\n\t\t\t\t\t\tname:'typeDecimals',\n\t\t\t\t\t\tlabel: L('ab.dataField.number.decimals', \"*Decimals\"),\n\t\t\t\t\t\tvalue: 'none',\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{ id: 'none', value: L('ab.dataField.number.none', \"*None\") },\n\t\t\t\t\t\t\t{ id: 'period', value: L('ab.dataField.number.period', \"*Period\") },\n\t\t\t\t\t\t\t{ id: 'comma', value: L('ab.dataField.number.comma', \"*Comma\") }\n\t\t\t\t\t\t],\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\tif (newValue == 'none') {\n\t\t\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).disable();\n\t\t\t\t\t\t\t\t\t$$(ids.typeRounding).disable();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).enable();\n\t\t\t\t\t\t\t\t\t$$(ids.typeRounding).enable();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\tid: ids.typeDecimalPlaces,\n\t\t\t\t\t\tname:'typeDecimalPlaces',\n\t\t\t\t\t\tlabel: \"Places\",\n\t\t\t\t\t\tvalue: 'none',\n\t\t\t\t\t\tdisabled: true,\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{ id: 'none', value: \"0\" },\n\t\t\t\t\t\t\t{ id: 1, value: \"1\" },\n\t\t\t\t\t\t\t{ id: 2, value: \"2\" },\n\t\t\t\t\t\t\t{ id: 3, value: \"3\" },\n\t\t\t\t\t\t\t{ id: 4, value: \"4\" },\n\t\t\t\t\t\t\t{ id: 5, value: \"5\" },\n\t\t\t\t\t\t\t{ id: 10, value: \"10\" }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"radio\",\n\t\t\t\tid: ids.typeRounding,\n\t\t\t\tname:'typeRounding',\n\t\t\t\tlabel: L('ab.dataField.number.rounding', \"*Rounding\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\tvertical: true,\n\t\t\t\tdisabled: true,\n\t\t\t\toptions: [\n\t\t\t\t\t{ id: 'none', value: L('ab.dataField.number.default', \"*Default\") },\n\t\t\t\t\t{ id: 'roundUp', value: L('ab.dataField.number.roundUp', \"*Round Up\") },\n\t\t\t\t\t{ id: 'roundDown', value: L('ab.dataField.number.roundDown', \"*Round Down\") }\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"radio\",\n// id: componentIds.typeThousands,\n\t\t\t\tname:'typeThousands',\n\t\t\t\tlabel: L('ab.dataField.number.thousands', \"*Thousands\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\tvertical: true,\n\t\t\t\toptions: [\n\t\t\t\t\t{ id: 'none', value: L('ab.dataField.number.none', \"*None\") },\n\t\t\t\t\t{ id: 'comma', value: L('ab.dataField.number.comma', \"*Comma\") },\n\t\t\t\t\t{ id: 'period', value: L('ab.dataField.number.period', \"*Period\") },\n\t\t\t\t\t{ id: 'space', value: L('ab.dataField.number.space', \"*Space\") }\n\t\t\t\t]\n\t\t\t},\n\n\n\n\t\t\t{\n\t\t\t\tview: 'checkbox',\n// id: componentIds.validate,\n\t\t\t\tname:'validation',\n\t\t\t\tlabelWidth: 0,\n\t\t\t\tlabelRight: L('ab.dataField.number.validation', \"*Validation\"),\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal) {\n\t\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\t\t$$(ids.validateMinimum).enable();\n\t\t\t\t\t\t\t$$(ids.validateMaximum).enable();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$$(ids.validateMinimum).disable();\n\t\t\t\t\t\t\t$$(ids.validateMaximum).disable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: 'text',\n\t\t\t\tid: ids.validateMinimum,\n\t\t\t\tname:'validateMinimum',\n\t\t\t\tlabel: L('ab.dataField.number.minimum', \"*Minimum\"),\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function(newVal, oldVal) {\n\t\t\t\t\t\t// Validate number\n\t\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t\t$$(ids.validateMinimum).setValue(oldVal || '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: 'text',\n\t\t\t\tid: ids.validateMaximum,\n\t\t\t\tname:'validateMaximum',\n\t\t\t\tlabel: L('ab.dataField.number.maximum', \"*Maximum\"),\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\t// Validate number\n\t\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t\t$$(ids.validateMaximum).setValue(oldVal || '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t]\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues:defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules:{\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic:{\n\n\t\tpopulate:function(ids, values) {\n\t\t\tif (values.settings.validation) {\n\t\t\t\t$$(ids.validateMinimum).enable();\n\t\t\t\t$$(ids.validateMaximum).enable();\n\t\t\t} else {\n\t\t\t\t$$(ids.validateMinimum).disable();\n\t\t\t\t$$(ids.validateMaximum).disable();\n\t\t\t}\n\t\t}\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit:function(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n})\n\n\n\n\n\nclass ABFieldNumber extends ABField {\n\n    constructor(values, object) {\n    \tsuper(values, object, ABFieldNumberDefaults);\n\n    \t/*\n    \t{\n\t\t\tsettings: {\n\t\t\t\t'allowRequired':0,\n\t\t\t\t'numberDefault':null,\n\t\t\t\t'typeFormat': 'none',\n\t\t\t\t'typeDecimals': 'none',\n\t\t\t\t'typeDecimalPlaces': 'none',\n\t\t\t\t'typeRounding' : 'none',\n\t\t\t\t'typeThousands': 'none',\n\t\t\t\t'validation':0,\n\t\t\t\t'validateMinimum':null,\n\t\t\t\t'validateMaximum':null\n\t\t\t}\n    \t}\n    \t*/\n\n    \t// we're responsible for setting up our specific settings:\n    \tfor (var dv in defaultValues) {\n    \t\tthis.settings[dv] = values.settings[dv] || defaultValues[dv];\n    \t}\n\n\n    \t// text to Int:\n    \tthis.settings.allowRequired = parseInt(this.settings.allowRequired);\n    \tthis.settings.validation = parseInt(this.settings.validation);\n\n  \t}\n\n\n  \t// return the default values for this DataField\n  \tstatic defaults() {\n  \t\treturn ABFieldNumberDefaults;\n  \t}\n\n\n\n\t/*\n\t * @function propertiesComponent\n\t *\n\t * return a UI Component that contains the property definitions for this Field.\n\t *\n\t * @param {App} App the UI App instance passed around the Components.\n\t * @return {Component}\n\t */\n  \tstatic propertiesComponent(App) {\n  \t\treturn ABFieldNumberComponent.component(App);\n  \t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\tisValid() {\n\n\t\tvar errors = super.isValid();\n\n\t\t// errors = OP.Form.validationError({\n\t\t// \tname:'columnName',\n\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t// }, errors);\n\n\t\treturn errors;\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\t// toObj () {\n\n\t// \tvar obj = super.toObj();\n\n\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t// \treturn obj;\n\t// }\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t// return the grid column header definition for this instance of ABFieldNumber\n\tcolumnHeader (isObjectWorkspace) {\n\t\tvar config = super.columnHeader(isObjectWorkspace);\n\n\t\tconfig.editor = 'number';\t\t// [edit_type] simple inline editing.\n\t\tconfig.sort   = 'int';\t\t\t// [sort_type]\n\n\t\treturn config;\n\t}\n\n}\n\n\n\t// NOTE: if you need a unique [edit_type] by your returned config.editor above:\n    webix.editors.number = webix.extend({\n// TODO : Validate number only\n    }, webix.editors.text);\n\n\n//// NOTE: if you need a unique [sort_type] by your returned config.sort above:\n// webix.DataStore.prototype.sorting.as.[sort_type] = function(a,b){ \n//     return a > b ? 1 : -1; \n// }\n\nexport default ABFieldNumber;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/dataFields/ABFieldNumber.js","/*\n * ABFieldString\n *\n * An ABFieldString defines a string field type.\n *\n */\n\nimport ABField from \"./ABField\"\nimport ABFieldComponent from \"./ABFieldComponent\"\n\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar ABFieldStringDefaults = {\n\tname : 'string', // unique key to reference this specific DataField\n\ttype : 'string', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\ticon : 'font',   // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\t\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName : L('ab.dataField.string.menuName', '*Single line text'),\n\t\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.string.description', '*short string value')\n}\n\n\n\n\n/**\n * ABFieldStringComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\n// var ABFieldStringComponent = function(App) {\n\n// \tlabels.common = App.labels;\n\n// \tvar idBase = 'ab_datafield_string';\n\n\n\n// \tvar componentDefaults = {\n// \t\ttextDefault: '', \n// \t\tsupportMultilingual:1\n// \t};\n\n\n\n// \tvar ids = {\n\n// \t\tcomponent: App.unique(idBase+'_component'),\n\n\n// \t\ttextDefault: App.unique(idBase+'_textdefault'),\n// \t\tsupportMultilingual: App.unique(idBase+'_supportMultilingual'),\n\n\n// \t\t// the common property fields\n// \t\tlabel: App.unique(idBase+'_label'),\n// \t\tcolumnName: App.unique(idBase+'_columnName'),\n// \t\tfieldDescription: App.unique(idBase+'_fieldDescription'),\n// \t\tshowIcon: App.unique(idBase+'_showIcon'),\n// \t}\n\n\n// \t//// NOTE: we merge in the common headers below.\n// \tvar _ui = {\n// \t\tview:'form',\n// \t\tid: ids.component,\n// \t\tautoheight:true,\n// \t\tborderless:true,\n// \t\telements: [\n// \t\t\t{\n// \t\t\t\tview: \"text\",\n// \t\t\t\tid: ids.textDefault,\n// \t\t\t\tname:'textDefault',\n// \t\t\t\tplaceholder: labels.component.defaultText\n// \t\t\t},\n// \t\t\t{\n// \t\t\t\tview: \"checkbox\",\n// \t\t\t\tid: ids.supportMultilingual,\n// \t\t\t\tname:'supportMultilingual',\n// \t\t\t\tlabelRight: labels.component.supportMultilingual,\n// \t\t\t\tlabelWidth: 0,\n// \t\t\t\tvalue: true\n// \t\t\t}\n// \t\t],\n\n// \t\trules:{\n// \t\t\t'label':webix.rules.isNotEmpty,\n// \t\t\t'columnName':webix.rules.isNotEmpty\n// \t\t}\n// \t}\n\n\n\n// \tvar _init = function() {\n\n// \t\t// perform any additional setup actions.\n// \t\t// for example, don't want to show the description, then .hide() it here:\n// \t\t// $$(ids.fieldDescription).hide();\n// \t}\n\n\n// \tvar _logic = {\n\n// \t\t/*\n// \t\t * @function clear\n// \t\t *\n// \t\t * clear the form.\n// \t\t */\n// \t\tclear: function () {\n\n// \t\t\tABField.clearEditor(App, ids);\n\n// \t\t\tfor(var f in componentDefaults) { \n// \t\t\t\tvar component = $$(ids[f]);\n// \t\t\t\tcomponent.setValue(componentDefaults[f]);\n// \t\t\t}\n\n// \t\t\t$$(ids.component).clearValidation();\n// \t\t},\n\n\n// \t\t/*\n// \t\t * @function isValid\n// \t\t *\n// \t\t * checks the current values on the componet to see if they are Valid\n// \t\t */\n// \t\tisValid: function () {\n\n// \t\t\treturn $$(ids.component).validate();\n\n// \t\t},\n\n\n\t\t\n// \t\t * @function labelOnChange\n// \t\t *\n// \t\t * The ABField.definitionEditor implements a default operation\n// \t\t * to update the value of the .columnName with the current value of \n// \t\t * label.\n// \t\t * \n// \t\t * if you want to override that functionality, implement this fn()\n// \t\t *\n// \t\t * @param {string} newVal\tThe new value of label\n// \t\t * @param {string} oldVal\tThe previous value\n\t\t \n// \t\t// labelOnChange: function (newVal, oldVal) {\n\n// \t\t// \t// When the Label value changes, update our Column Name value \n// \t\t// \t// to match.\n\n// \t\t// \toldVal = oldVal || '';\n// \t\t// \tif (newVal != oldVal &&\n// \t\t// \t\toldVal == $$(ids.columnName).getValue()) {\n// \t\t// \t\t$$(ids.columnName).setValue(newVal);\n// \t\t// \t}\n// \t\t// },\n\n\n// \t\t/*\n// \t\t * @function populate\n// \t\t *\n// \t\t * populate the form with the given ABField instance provided.\n// \t\t *\n// \t\t * @param {ABFieldString} field\n// \t\t */\n// \t\tpopulate: function (field) {\n// console.error('TODO: .populate()');\n// \t\t},\n\n\n// \t\t/*\n// \t\t * @function show\n// \t\t *\n// \t\t * show this component.\n// \t\t */\n// \t\tshow: function() {\n// \t\t\t$$(ids.component).clearValidation();\n// \t\t\t$$(ids.component).show();\n// \t\t},\n\n\n// \t\t/*\n// \t\t * @function values\n// \t\t *\n// \t\t * return the values for this form.\n// \t\t * @return {obj}  \n// \t\t */\n// \t\tvalues: function () {\n\n// \t\t\tvar settings = $$(ids.component).getValues();\n// \t\t\tvar values = ABField.editorValues(settings);\n\n// \t\t\tvalues.type = ABFieldStringDefaults.type;\n\t\n// \t\t\treturn values;\n// \t\t}\n\n// \t}\n\n\n// \t// get the common UI headers entries, and insert them above ours here:\n// \t// NOTE: put this here so that _logic is defined.\n// \tvar commonUI = ABField.definitionEditor(App, ids, _logic, ABFieldStringDefaults);\n// \t_ui.elements = commonUI.rows.concat(_ui.elements);\n\n\n// \t// return the current instance of this component:\n// \treturn {\n// \t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n// \t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component  \n// \t\t// actions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n// \t\t// DataField exposed actions:\n// \t\tclear: _logic.clear,\n// \t\tisValid:_logic.isValid,\n// \t\tpopulate: _logic.populate,\n// \t\tshow: _logic.show,\n// \t\tvalues: _logic.values,\n\n\n// \t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n// \t}\n// }\n\n\n\nvar ABFieldStringComponent = new ABFieldComponent({\n\n\tfieldDefaults: ABFieldStringDefaults,\n\n\telements:function(App) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tview: \"text\",\n\t\t\t\tname:'textDefault',\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\tplaceholder: L('ab.dataField.string.default', '*Default text')\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname:'supportMultilingual',\n\t\t\t\tlabelRight: L('ab.dataField.string.supportMultilingual', '*Support multilingual'),\n\t\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\t\tvalue: true\n\t\t\t}\n\t\t]\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues:{\n\t\t'textDefault': '', \n\t\t'supportMultilingual':1\n\t},\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules:{\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic:{\n\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit:function(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n})\n\n\n\n\n\nclass ABFieldString extends ABField {\n\n    constructor(values, object) {\n    \tsuper(values, object, ABFieldStringDefaults);\n\n    \t/*\n    \t{\n\t\t\tsettings: {\n\t\t\t\ttextDefault: 'string',\n\t\t\t\tsupportMultilingual: true/false\n\t\t\t}\n    \t}\n    \t*/\n\n    \t// we're responsible for setting up our specific settings:\n    \tthis.settings.textDefault = values.settings.textDefault || '';\n    \tthis.settings.supportMultilingual = values.settings.supportMultilingual+\"\" || \"1\";\n\n    \t// text to Int:\n    \tthis.settings.supportMultilingual = parseInt(this.settings.supportMultilingual);\n\n  \t}\n\n\n  \t// return the default values for this DataField\n  \tstatic defaults() {\n  \t\treturn ABFieldStringDefaults;\n  \t}\n\n\n\n\t/*\n\t * @function propertiesComponent\n\t *\n\t * return a UI Component that contains the property definitions for this Field.\n\t *\n\t * @param {App} App the UI App instance passed around the Components.\n\t * @return {Component}\n\t */\n  \tstatic propertiesComponent(App) {\n  \t\treturn ABFieldStringComponent.component(App);\n  \t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\tisValid() {\n\n\t\tvar errors = super.isValid();\n\n\t\t// errors = OP.Form.validationError({\n\t\t// \tname:'columnName',\n\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t// }, errors);\n\n\t\treturn errors;\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\t// toObj () {\n\n\t// \tvar obj = super.toObj();\n\n\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t// \treturn obj;\n\t// }\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t// return the grid column header definition for this instance of ABFieldString\n\tcolumnHeader (isObjectWorkspace) {\n\t\tvar config = super.columnHeader(isObjectWorkspace);\n\n\t\tconfig.editor = 'text';\n\t\tconfig.sort   = 'string'\n\n\t\treturn config;\n\t}\n\n}\n\n\n\nexport default ABFieldString;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/dataFields/ABFieldString.js","\n/*\n * AB Choose\n *\n * When choosing an initial application to work with, we can\n *   - select an application from a list  :  ab_choose_list\n *   - create an application from a form  :  ab_choose_form\n *\n */\n\n\nimport './ab_choose_list'\nimport './ab_choose_form'\n\nvar idBase = 'ab_choose';\nOP.Component.extend(idBase, function(App) {\n\n\n\tvar ids = {\n\t\tcomponent:App.unique(idBase + '_component')\n\t}\n\n\n\n\t// Define the external components used in this Component:\n\tvar AppList = OP.Component['ab_choose_list'](App);\n\tvar AppForm = OP.Component['ab_choose_form'](App);\n\n\n\t// This component's UI definition:\n\t// Application multi-views\n\tvar _ui = {\n\t\tview:\"multiview\",\n\t\tanimate:false,\n\t\tid: ids.component,\n\t\tcells: [\n\t\t\tAppList.ui,\n\t\t\tAppForm.ui\n\t\t]\n\t};\n\n\n\n\t// This component's Init definition:\n\tvar _init = function() {\n\n\t\tAppList.init();\n\t\tAppForm.init();\n\n\t}\n\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\n\t\t/**\n\t\t * @function transitionApplicationChooser\n\t\t *\n\t\t * Switch the AppBuilder UI to show the Application Chooser component.\n\t\t */\n\t\ttransitionApplicationChooser:function() {\n\t\t\t$$(ids.component).show();\n\t\t}\n\n\t}\n\n\n\n\tvar _logic = {\n\n\t}\n\n\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\n\t\tinit:_init,\n\t\tactions:_actions,\n\n\t\t_logic:_logic\t\t// Unit Testing\n\t}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_choose.js","\n/*\n * AB Choose Form\n *\n * Display the form for creating a new Application.\n *\n */\n\nimport ABApplication from \"../classes/ABApplication\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tformHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\tplaceholderName: L('ab.application.form.placeholderName', \"*Application name\"),\n\t\tplaceholderDescription: L('ab.application.form.placeholderDescription', \"*Application description\"),\n\t\tformDescription: L('ab.application.form.formDescription', \"*Description\"),\n\n\t\tsectionPermission: L('ab.application.form.sectionPermission', \"*Permission\"),\n\t\tpermissionHeader: L('ab.application.form.headerPermission',  \"*Who can use this app?\"),\n\t\tcreateNewRole: L('ab.application.form.createNewRoleButton', \"*Create new roll\"),\n\n\t\tinvalidName: L('ab.application.invalidName', \"*This application name is invalid\"),\n\t\tduplicateName: L('ab.application.duplicateName', \"*Name must be unique.\"),\n\n\t}\n}\n\n\nvar idBase = 'ab_choose_form';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tform: App.unique(idBase + '_form'),\n\t\tappFormPermissionList: App.unique(idBase + '_permission'),\n\t\tappFormCreateRoleButton: App.unique(idBase + '_createRole'),\n\n\t\tsaveButton: App.unique(idBase + '_buttonSave')\n\t}\n\n\n\n\tvar _ui = {\n\n\t\tid: ids.component,\n\t\tresponsive:\"hide\",\n\t\tcols: [\n\t\t\t{\n\t\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t\t},\n\t\t\t{\n\t\t\t\tresponsiveCell:false,\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\t\t\thidden: App.config.hideMobile\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"toolbar\",\n\t\t\t\t\t\tcols: [{ view: \"label\", label: labels.component.formHeader, fillspace: true }]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"form\",\n\t\t\t\t\t\tid: ids.form,\n\t\t\t\t\t\tautoheight: true,\n\t\t\t\t\t\tmargin: 0,\n\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t//{ type: \"section\", template: '<span class=\"webix_icon fa-edit\" style=\"max-width:32px;\"></span>Information', margin: 0 },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"label\",\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\tlabel: labels.common.formName,\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tplaceholder: labels.component.placeholderName,\n\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonChange: function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t_logic.permissionRenameRole(newValue, oldValue);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ height: App.config.smallSpacer },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"description\",\n\t\t\t\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t\t\t\t// label: labels.common.formDescription,\n\t\t\t\t\t\t\t\tlabel: \"Description\",\n\t\t\t\t\t\t\t\tlabelAlign: \"left\",\n\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\tplaceholder: labels.component.placeholderDescription,\n\t\t\t\t\t\t\t\theight: 100\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ height: App.config.smallSpacer },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"toolbar\",\n\t\t\t\t\t\t\t\tcss: \"ab-toolbar-submenu\",\n\t\t\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttemplate: labels.component.permissionHeader,\n\t\t\t\t\t\t\t\t\t\ttype: 'header',\n\t\t\t\t\t\t\t\t\t\tborderless: true\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tview: \"toggle\",\n\t\t\t\t\t\t\t\t\t\tid: ids.appFormCreateRoleButton,\n\t\t\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\t\t\talign: \"right\",\n\t\t\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\t\t\tcss: \"ab-standard-button\",\n\t\t\t\t\t\t\t\t\t\toffIcon: \"square-o\",\n\t\t\t\t\t\t\t\t\t\tonIcon: \"check-square-o\",\n\t\t\t\t\t\t\t\t\t\tlabel: labels.component.createNewRole,\n\t\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t\tonItemClick: function (id, e) {\n\t\t\t\t\t\t\t\t\t\t\t\t_logic.createRoleButtonClick();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"permissions\",\n\t\t\t\t\t\t\t\tid: ids.appFormPermissionList,\n\t\t\t\t\t\t\t\tview: \"list\",\n\t\t\t\t\t\t\t\t//height: 130,\n\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\tautoheight: true,\n\t\t\t\t\t\t\t\tmargin: 0,\n\t\t\t\t\t\t\t\tcss: \"ab-app-form-permission\",\n\t\t\t\t\t\t\t\ttemplate: \"{common.markCheckbox()} #name#\",\n\t\t\t\t\t\t\t\ttype:{\n\t\t\t\t\t\t\t\t\tmarkCheckbox:function(obj ){\n\t\t\t\t\t\t\t\t\t\treturn \"<span class='check webix_icon fa-\"+(obj.markCheckbox?\"check-\":\"\")+\"square-o'></span>\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonItemClick: function (id, e, node) {\n\t\t\t\t\t\t\t\t\t\t_logic.permissionClick(id, e, node);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ height: App.config.smallSpacer },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmargin: 5,\n\t\t\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t\t\t{ fillspace: true },\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\t\t\t\tvalue: labels.common.cancel,\n\t\t\t\t\t\t\t\t\t\twidth: App.config.buttonWidthSmall,\n\t\t\t\t\t\t\t\t\t\tcss: \"ab-cancel-button\",\n\t\t\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t\t\t_logic.cancel();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid: ids.saveButton,\n\t\t\t\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\t\t\t\tlabel: labels.common.save,\n\t\t\t\t\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\t\t\t\t\twidth: App.config.buttonWidthSmall,\n\t\t\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t\t\t_logic.buttonSaveClick();\n\t\t\t\t\t\t\t\t\t\t} // end click()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\t\t\thidden: App.config.hideMobile\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t\t}\n\t\t]\n\t};\n\n\tconst FormFields = ['label', 'description'];\n\n\n\n\tvar _init = function() {\n\t\twebix.extend($$(ids.form), webix.ProgressBar);\n\t\twebix.extend($$(ids.appFormPermissionList), webix.ProgressBar);\n\t}\n\n\n\n\tvar _logic = {\n\n\n\t\t/**\n\t\t * @function applicationCreate\n\t\t *\n\t\t * Step through the process of creating an ABApplication with the\n\t\t * current state of the Form.\n\t\t *\n\t\t * @param {obj} values \tcurrent value hash of the form values.\n\t\t */\n\t\tapplicationCreate: function(values) {\n\n\t\t\tvar newApp = {\n\t\t\t\tname: values.label,\n\t\t\t\tlabel: values.label,\n\t\t\t\tdescription: values.description\n\t\t\t};\n\n\t\t\tasync.waterfall([\n\t\t\t\tfunction (cb) {\n\t\t\t\t\t// Create application data\n\t\t\t\t\tABApplication.create(newApp)\n\t\t\t\t\t\t.then(function (result) {\n\t\t\t\t\t\t\tcb(null, result);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(cb);\n\t\t\t\t},\n\t\t\t\tfunction (createdApp, cb) {\n\t\t\t\t\t_logic.permissionSave(createdApp)\n\t\t\t\t\t\t.then(function () { cb(); })\n\t\t\t\t\t\t.catch(cb)\n\t\t\t\t}\n\t\t\t], function (err) {\n\t\t\t\t_logic.formReady();\n\n\t\t\t\tif (err) {\n\t\t\t\t\twebix.message({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttext: labels.common.createErrorMessage.replace('{0}', values.label)\n\t\t\t\t\t});\n\n\t\t\t\t\tAD.error.log('App Builder : Error create application data', { error: err });\n\n\t\t\t\t\t_logic.buttonSaveEnable();\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tApp.actions.transitionApplicationList();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\ttext: labels.common.createSuccessMessage.replace('{0}', values.label)\n\t\t\t\t});\n\n\t\t\t\t_logic.buttonSaveEnable();\n\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * @function applicationUpdate\n\t\t *\n\t\t * Step through the process of updating an ABApplication with the\n\t\t * current state of the Form.\n\t\t *\n\t\t * @param {ABApplication} application\n\t\t */\n\t\tapplicationUpdate: function(Application) {\n\t\t\tvar values = _logic.formValues();\n\n\t\t\tasync.waterfall([\n\t\t\t\tfunction (next) {\n\t\t\t\t\t_logic.permissionSave(Application)\n\t\t\t\t\t\t.then(function (result) { next(null, result); })\n\t\t\t\t\t\t.catch(next);\n\t\t\t\t},\n\t\t\t\tfunction (app_role, next) {\n\t\t\t\t\t// Update application data\n\t\t\t\t\tApplication.label = values.label;\n\t\t\t\t\tApplication.description = values.description;\n\n\t\t\t\t\tif (app_role && app_role.id)\n\t\t\t\t\t\tApplication.role = app_role.id;\n\t\t\t\t\telse\n\t\t\t\t\t\tApplication.role = null;\n\n\t\t\t\t\tApplication.save()\n\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\tnext();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(next)\n\n\t\t\t\t}\n\t\t\t], function (err) {\n\n\t\t\t\t_logic.formReady();\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\tif (err) {\n\t\t\t\t\twebix.message({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttext: labels.common.updateErrorMessage.replace('{0}', Application.label)\n\t\t\t\t\t});\n\t\t\t\t\tAD.error.log('App Builder : Error update application data', { error: err });\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tApp.actions.transitionApplicationList();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\ttext: labels.common.updateSucessMessage.replace('{0}', Application.label)\n\t\t\t\t});\n\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * @function buttonSaveClick\n\t\t *\n\t\t * Process the user clicking on the [Save] button.\n\t\t */\n\t\tbuttonSaveClick: function() {\n\n\t\t\t_logic.buttonSaveDisable();\n\t\t\t_logic.formBusy();\n\n\t\t\t// if there is a selected Application, then this is an UPDATE\n\t\t\tvar updateApp = App.actions.getSelectedApplication();\n\t\t\tif (updateApp) { \n\n\t\t\t\tif (_logic.formValidate('update')) {\n\n\t\t\t\t\t_logic.applicationUpdate(updateApp);\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else { \n\n\t\t\t\t// else this is a Create\n\t\t\t\tif (_logic.formValidate('add')) {\n\n\t\t\t\t\t_logic.applicationCreate(_logic.formValues());\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t\n\t\t},\n\n\t\t/**\n\t\t * @function buttonSaveDisable\n\t\t *\n\t\t * Disable the save button.\n\t\t */\n\t\tbuttonSaveDisable:function() {\n\t\t\t$$(ids.saveButton).disable();\n\t\t},\n\n\n\t\t/**\n\t\t * @function buttonSaveEnable\n\t\t *\n\t\t * Re-enable the save button.\n\t\t */\n\t\tbuttonSaveEnable:function() {\n\t\t\t$$(ids.saveButton).enable();\n\t\t},\n\n\n\t\t/**\n\t\t * @function cancel\n\t\t *\n\t\t * Cancel the current Form Operation and return us to the AppList.\n\t\t */\n\t\tcancel: function() {\n\n\t\t\t_logic.formReset();\n\t\t\tApp.actions.transitionApplicationList();\n\t\t},\n\n\n\t\t/**\n\t\t * @function createRoleButtonClick\n\t\t *\n\t\t * The user clicked the [Create Role] button.  Update the UI and add a\n\t\t * unique Application permission to our list.\n\t\t */\n\t\tcreateRoleButtonClick: function() {\n\n\t\t\tif ($$(ids.appFormCreateRoleButton).getValue()) {\n\n// TODO: if not called from anywhere else, then move the name gathering into .permissionAddNew()\n\t\t\t\t// Add new app role\n\t\t\t\tvar appName = $$(ids.form).elements[\"label\"].getValue();\n\t\t\t\t_logic.permissionAddNew(appName);\n\t\t\t}\n\t\t\telse { \n\t\t\t\t// Remove app role\n\t\t\t\t_logic.permissionRemoveNew();\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * @function formBusy\n\t\t *\n\t\t * Show the progress indicator to indicate a Form operation is in\n\t\t * progress.\n\t\t */\n\t\tformBusy: function() {\n\n\t\t\t$$(ids.form).showProgress({ type: 'icon' });\n\t\t},\n\n\n\t\t/**\n\t\t * @function formPopulate()\n\t\t *\n\t\t * populate the form values from the given ABApplication\n\t\t *\n\t\t * @param {ABApplication} application  instance of the ABApplication\n\t\t */\n\t\tformPopulate: function(application) {\n\n\t\t\tvar Form = $$(ids.form);\n\n\t\t\t// Populate data to form\n\t\t\tif (application) {\n\t\t\t\tFormFields.forEach(function(f){\n\t\t\t\t\tif (Form.elements[f]) {\n\t\t\t\t\t\tForm.elements[f].setValue(application[f]);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// _logic.permissionPopulate(application);\n\n\t\t},\n\n\n\t\t/**\n\t\t * @function formReady()\n\t\t *\n\t\t * remove the busy indicator from the form.\n\t\t */\n\t\tformReady: function() {\n\t\t\t$$(ids.form).hideProgress();\n\t\t},\n\n\n\t\t/**\n\t\t * @function formReset()\n\t\t *\n\t\t * return the form to an empty state.\n\t\t */\n\t\tformReset: function() {\n\n\t\t\t$$(ids.form).clear();\n\t\t\t$$(ids.form).clearValidation();\n\t\t\t// $$(self.webixUiids.appFormPermissionList).clearValidation();\n\t\t\t// $$(self.webixUiids.appFormPermissionList).clearAll();\n\t\t\t// $$(self.webixUiids.appFormCreateRoleButton).setValue(0);\n\t\t},\n\n\n\t\t/**\n\t\t * @function formValidate()\n\t\t *\n\t\t * validate the form values.\n\t\t *\n\t\t * @return {bool}  true if all values pass validation.  false otherwise.\n\t\t */\n\t\tformValidate:function(op) {\n\t\t\t// op : ['add', 'update', 'destroy']\n\n\t\t\tvar Form = $$(ids.form);\n\t\t\tif (!Form.validate()) {\n\t\t\t\t// TODO : Error message\n\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\treturn false;\n\t\t\t}\n\n\n\t\t\tvar errors = ABApplication.isValid(op, Form.getValues());\n\t\t\tif (OP.Form.isValidationError(errors, Form)) {\n\t\t\t\t_logic.formReady();\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\treturn false;\n\t\t\t}\n\n\n///// TODO: \n// Implement common Form Input Validations\n// convert this to:  \n// app = ABApplication.newApplication(Form.getValues())\n// errors = app.inValid()\n// if (OP.Form.isValidationError(errors, Form)) { }\n\n\n\t\t\t// var appName = $$(ids.form).elements['label'].getValue(),\n\t\t\t// \tappDescription = $$(ids.form).elements['description'].getValue();\n\n\t\t\t// if (!inputValidator.validate(appName)) {\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\t\t\t// // Prevent duplicate application name\n\t\t\t// if (self.data.filter(function (app) { return app.name.trim().toLowerCase() == appName.trim().replace(/ /g, '_').toLowerCase(); }).length > 0) {\n\t\t\t// \tOP.Dialog.Alert({\n\t\t\t// \t\ttitle: labels.component.invalidName,\n\t\t\t// \t\ttext: labels.component.duplicateName.replace(\"#appName#\", appName),\n\t\t\t// \t\tok: labels.common.ok\n\t\t\t// \t});\n\n\t\t\t// \t$$(ids.form).elements['label'].focus();\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\t\t\treturn true;\n\t\t},\n\n\n\t\t/**\n\t\t * @function formValues()\n\t\t *\n\t\t * return an object hash of name:value pairs of the current Form.\n\t\t *\n\t\t * @return {obj}\n\t\t */\n\t\tformValues: function() {\n\t\t\t// return the current values of the Form elements.\n\t\t\treturn $$(ids.form).getValues();\n\n\t\t},\n\n\n\t\t/**\n\t\t * @function permissionAddNew\n\t\t *\n\t\t * create a new permission entry based upon the current Application.label\n\t\t *\n\t\t * This not only adds it to our Permission List, but also selects it.\n\t\t *\n\t\t * @param {string} appName\tThe Application.label of the current Application\n\t\t */\n\t\tpermissionAddNew: function(appName) {\n\n\t\t\t// add new role entry\n\t\t\t$$(ids.appFormPermissionList).add({\n\t\t\t\tid: 'newRole',\n\t\t\t\tname: _logic.permissionName(appName),\n\t\t\t\tisApplicationRole: true,\n\t\t\t\tmarkCheckbox: 1\n\t\t\t}, 0);\n\n\n\t\t\t// Select new role\n\t\t\tvar selectedIds = $$(ids.appFormPermissionList).getSelectedId(true);\n\t\t\tselectedIds.push('newRole');\n\t\t\t$$(ids.appFormPermissionList).select(selectedIds);\n\n\t\t},\n\n\n\t\t/**\n\t\t * @function permissionClick\n\t\t *\n\t\t * Process when a permission entry in the list is clicked.\n\t\t */\n\t\tpermissionClick: function (id, e, node) {\n\t\t\t\n\n\t\t\tvar List = $$(ids.appFormPermissionList);\n\n\t\t\tvar item = List.getItem(id); \n\n\t\t\tif (List.getItem(id).isApplicationRole) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (List.isSelected(id)) {\n\t\t\t\titem.markCheckbox = 0; \n\t\t\t\tList.unselect(id);\n\t\t\t}\n\t\t\telse {\n\t\t\t\titem.markCheckbox = 1; \n\t\t\t\tvar selectedIds = List.getSelectedId();\n\n\t\t\t\tif (typeof selectedIds === 'string' || !isNaN(selectedIds)) {\n\t\t\t\t\tif (selectedIds)\n\t\t\t\t\t\tselectedIds = [selectedIds];\n\t\t\t\t\telse\n\t\t\t\t\t\tselectedIds = [];\n\t\t\t\t}\n\n\t\t\t\tselectedIds.push(id);\n\n\t\t\t\tList.select(selectedIds);\n\n\t\t\t\tList.updateItem(id, item); \n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * @function permissionName\n\t\t *\n\t\t * returns a formatted name for a Permission Role based upon the provided Application.label\n\t\t *\n\t\t * @param {string} appName\tthe current value of the Application.label\n\t\t * @return {string} \tPermission Role Name.\n\t\t */\n\t\tpermissionName: function(appName) {\n\t\t\treturn appName  + \" Application Role\";\n\t\t},\n\n\n\t\t/**\n\t\t * @function permissionPopulate\n\t\t *\n\t\t * fill out the Permission list\n\t\t *\n\t\t * @param {ABApplication} application\tthe current ABApplication we are editing\n\t\t */\n\t\tpermissionPopulate: function(application) {\n\n\t\t\tvar PermForm = $$(ids.appFormPermissionList);\n\t\t\t// Get user's roles\n\t\t\tPermForm.showProgress({ type: 'icon' });\n\t\t\tasync.waterfall([\n\t\t\t\tfunction (next) {\n\t\t\t\t\tAD.comm.service.get({ url: '/app_builder/user/roles' })\n\t\t\t\t\t\t.fail(function (err) { next(err); })\n\t\t\t\t\t\t.done(function (roles) {\n\n\t\t\t\t\t\t\t// scan the roles and determine if any of them have been created\n\t\t\t\t\t\t\t// after the current Application.name:\n\t\t\t\t\t\t\tvar parsedRoles = roles.map((r) => {\n\t\t\t\t\t\t\t\tif (application) {\n\t\t\t\t\t\t\t\t\tif (r.name == _logic.permissionName(application.name.split('_').join(' '))) {\n\t\t\t\t\t\t\t\t\t\tr.isApplicationRole = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn r;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tnext(null, parsedRoles);\n\t\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tfunction (available_roles, next) {\n\t\t\t\t\tif (application && application.id) {\n\t\t\t\t\t\tapplication.getPermissions()\n\t\t\t\t\t\t\t.then(function (selected_role_ids) {\n\t\t\t\t\t\t\t\tnext(null, available_roles, selected_role_ids);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(function (err) { next(err); });\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnext(null, available_roles, []);\n\t\t\t\t\t}\n\n\t\t\t\t},\n\t\t\t\tfunction (available_roles, selected_role_ids, next) {\n\n\t\t\t\t\t// mark the role(s) in available_roles that is tied\n\t\t\t\t\t// this application:\n\t\t\t\t\tif (application && application.role) {\n\t\t\t\t\t\tavailable_roles.forEach(function (r) {\n\t\t\t\t\t\t\tif (r.id == (application.role.id || application.role)) {\n\t\t\t\t\t\t\t\tr.isApplicationRole = true;\n\t\t\t\t\t\t\t\tr.markCheckbox = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Sort permission list\n\t\t\t\t\tavailable_roles.sort(function (a, b) {\n\t\t\t\t\t\treturn (a.isApplicationRole === b.isApplicationRole) ? 0 : a.isApplicationRole ? -1 : 1;\n\t\t\t\t\t});\n\n\t\t\t\t\t// reload list from our available_roles\n\t\t\t\t\tPermForm.clearAll();\n\t\t\t\t\tPermForm.parse(available_roles);\n\n\t\t\t\t\t// mark which roles have already been selected\n\t\t\t\t\tif (selected_role_ids && selected_role_ids.length > 0) {\n\t\t\t\t\t\t// Select permissions\n\t\t\t\t\t\tPermForm.select(selected_role_ids);\n\t\t\t\t\t\tavailable_roles.forEach(function (r) {\n\t\t\t\t\t\t\tif (selected_role_ids.indexOf(r.id) > -1) {\n\t\t\t\t\t\t\t\tvar item = $$(ids.appFormPermissionList).getItem(r.id);\n\t\t\t\t\t\t\t\titem.markCheckbox = 1;\n\t\t\t\t\t\t\t\t$$(ids.appFormPermissionList).updateItem(r.id, item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Select create role application button\n\t\t\t\t\t\tvar markCreateButton = available_roles.filter(function (r) { return r.isApplicationRole; }).length > 0 ? 1 : 0;\n\t\t\t\t\t\t$$(ids.appFormCreateRoleButton).setValue(markCreateButton);\n\t\t\t\t\t}\n\n\t\t\t\t\tnext();\n\t\t\t\t}\n\t\t\t], function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\twebix.message(err.message);\n\t\t\t\t}\n\n\t\t\t\tPermForm.hideProgress();\n\n\t\t\t});\n\n\t\t\t// return appName  + \" Application Role\";\n\t\t},\n\n\n\t\t/**\n\t\t * @function permissionRemoveNew()\n\t\t *\n\t\t * Intended to be called when the USER unselects the option to create a Permission\n\t\t * for this Application.\n\t\t *\n\t\t * We remove any Permission Role created for this Application.\n\t\t */\n\t\tpermissionRemoveNew: function() {\n\n\t\t\t// find any roles that are put here from our application form:\n\t\t\tvar appRoles = $$(ids.appFormPermissionList).find(function (perm) { return perm.isApplicationRole; });\n\n\t\t\t// remove them:\n\t\t\tappRoles.forEach(function (r) {\n\t\t\t\t$$(ids.appFormPermissionList).remove(r.id);\n\t\t\t});\n\t\t},\n\n\n\t\t/*\n\t\t * permissionRenameRole\n\t\t *\n\t\t * When the name of the Appliction changes, change the Name of the Permission as well.\n\t\t *\n\t\t * @param {string} newValue  the current name of the application\n\t\t * @param {string} oldValue  the previous name of the application\n\t\t */\n\t\tpermissionRenameRole:function( newValue, oldValue) {\n\n\t\t\tvar editRole = $$(ids.appFormPermissionList).find(function (d) { return d.name === _logic.permissionName(oldValue); });\n\n\t\t\teditRole.forEach(function (r) {\n\t\t\t\tvar editItem = $$(ids.appFormPermissionList).getItem(r.id);\n\t\t\t\teditItem.name = _logic.permissionName(newValue);\n\n\t\t\t\t$$(ids.appFormPermissionList).updateItem(editItem.id, editItem);\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * @function permissionSave()\n\t\t *\n\t\t * step through saving the current Permission Settings and associating\n\t\t * them with the current Application.\n\t\t *\n\t\t * @param {ABApplication} App  \tThe current Application we are working with.\n\t\t * @return {Promise}\t\t\t.resolve( {Permission} ) if one is created for this App\n\t\t */\n\t\tpermissionSave: function (app) {\n//// REFACTOR:\n// this step implies that ab_choose_form understands the intracies of how\n// ABApplication and Permissions work.\n\t\t\treturn new Promise(\n\t\t\t\t(resolve, reject) => {\n\n\t\t\t\t\tvar saveRoleTasks = [],\n\t\t\t\t\t\tappRole = null;\n\n\t\t\t\t\t//// Process the option to create a newRole For this Application:\n\n\t\t\t\t\t// if the button is set\n\t\t\t\t\tif ($$(ids.appFormCreateRoleButton).getValue()) {\n\n\t\t\t\t\t\t// check to see if we already have a permission that isApplicationRole\n\t\t\t\t\t\tvar selectedPerms = $$(ids.appFormPermissionList).getSelectedItem(true);\n\t\t\t\t\t\tselectedPerms = selectedPerms.filter((perm) => { return perm.isApplicationRole; })\n\n\t\t\t\t\t\t// if not, then create one:\n\t\t\t\t\t\tif (selectedPerms.length == 0) {\n\n\t\t\t\t\t\t\t// Create new role for application\n\t\t\t\t\t\t\tsaveRoleTasks.push(function (cb) {\n\t\t\t\t\t\t\t\tapp.createPermission()\n\t\t\t\t\t\t\t\t\t.then(function (result) {\n\n\t\t\t\t\t\t\t\t\t\t// remember the Role we just created\n\t\t\t\t\t\t\t\t\t\tappRole = result;\n\t\t\t\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.catch(cb)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Delete any existing application roles\n\t\t\t\t\t\tsaveRoleTasks.push(function (cb) {\n\t\t\t\t\t\t\tapp.deletePermission()\n\t\t\t\t\t\t\t\t.then(function () { cb(); })\n\t\t\t\t\t\t\t\t.catch(cb)\n\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t//// Now process any additional roles:\n\n\t\t\t\t\t// get array of selected permissions that are not our newRole\n\t\t\t\t\tvar permItems = $$(ids.appFormPermissionList).getSelectedItem(true);\n\t\t\t\t\tpermItems = permItems.filter( function (item) { return item.id !== 'newRole'; }); // Remove new role item\n\n\n\t\t\t\t\t// Make sure Application is linked to selected permission items:\n\t\t\t\t\tsaveRoleTasks.push(function (cb) {\n\n\t\t\t\t\t\t// ok, so we removed the 'newRole' entry, but we might\n\t\t\t\t\t\t// have created an entry for it earlier, if so, add in\n\t\t\t\t\t\t// the created one here:\n\t\t\t\t\t\tif ($$(ids.appFormCreateRoleButton).getValue() && appRole) {\n\n\t\t\t\t\t\t\t// make sure it isn't already in there:\n\t\t\t\t\t\t\tvar appRoleItem = permItems.filter( function (item) { return item.id == appRole.id; });\n\t\t\t\t\t\t\tif (!appRoleItem || appRoleItem.length < 1) {\n\n\t\t\t\t\t\t\t\t// if not, add it :\n\t\t\t\t\t\t\t\tpermItems.push({\n\t\t\t\t\t\t\t\t\tid: appRole.id,\n\t\t\t\t\t\t\t\t\tisApplicationRole: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t// Assign Role Permissions\n\t\t\t\t\t\tapp.assignPermissions(permItems)\n\t\t\t\t\t\t\t.then(function () { cb(); })\n\t\t\t\t\t\t\t.catch(cb)\n\t\t\t\t\t});\n\n\n\n\t\t\t\t\tasync.series(saveRoleTasks, function(err, results) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// we return the instance of the newly created Permission.\n\t\t\t\t\t\t\tresolve(appRole);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\n\n//// REFACTOR QUESTION:\n// why are we updating the app.permissions with this data structure?\n// where is this data structure being used?\n// Earlier we are using another structure (permissionAddNew()) ... how is that related to this?\n\n\t\t\t\t\t\t\t// // Final task\n\t\t\t\t\t\t\t// saveRoleTasks.push(function (cb) {\n\t\t\t\t\t\t\t// \t// Update store app data\n\t\t\t\t\t\t\t// \tvar applicationData = self.data.filter(function (d) { return d.id == app.id; });\n\t\t\t\t\t\t\t// \tapplicationData.forEach(function (app) {\n\t\t\t\t\t\t\t// \t\tapp.attr('permissions', $.map(permItems, function (item) {\n\t\t\t\t\t\t\t// \t\t\treturn {\n\t\t\t\t\t\t\t// \t\t\t\tapplication: app.id,\n\t\t\t\t\t\t\t// \t\t\t\tpermission: item.id,\n\t\t\t\t\t\t\t// \t\t\t\tisApplicationRole: item.isApplicationRole\n\t\t\t\t\t\t\t// \t\t\t}\n\t\t\t\t\t\t\t// \t\t}));\n\t\t\t\t\t\t\t// \t});\n\n\t\t\t\t\t\t\t// \tq.resolve(appRole);\n\t\t\t\t\t\t\t// \tcb();\n\t\t\t\t\t\t\t// })\n\n\t\t},\n\n\n\t\t/**\n\t\t * @function show()\n\t\t *\n\t\t * Show the Form Component.\n\t\t */\n\t\tshow:function() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t}\n\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\n\t\t// initiate a request to create a new Application\n\t\ttransitionApplicationForm:function(application){\n\t\t\t\n\t\t\t// if no application is given, then this should be a [create] operation,\n\n\t\t\t// so clear our AppList\n\t\t\tif ('undefined' == typeof application) {\n\t\t\t\tApp.actions.unselectApplication();\n\t\t\t}\n\n\t\t\t// now prepare our form:\n\t\t\t_logic.formReset();\n\t\t\tif (application) {\n\t\t\t\t// populate Form here:\n\t\t\t\t_logic.formPopulate(application);\n\t\t\t}\n\t\t\t_logic.permissionPopulate(application);\n\t\t\t_logic.show();\n\t\t}\n\n\t}\n\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\t\tactions:_actions,\n\n\t\t_logic: _logic\n\t}\n})\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_choose_form.js","\n/*\n * AB Choose List\n *\n * Display a list of Applications for the user to select.\n *\n */\nimport ABApplication from \"../classes/ABApplication\"\nimport \"./ab_choose_list_menu\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\n\nvar labels = {\n\n\tcomponent: {\n\t\ttitle: L('ab.application.application', '*Application'),\n\n\t\tcreateNew: L('ab.application.createNew', '*Add new application'),\n\t\tnoApplication: L('ab.application.noApplication', \"*There is no application data\")\t\t\t\t\t\n\t}\n}\n\n\nvar idBase = 'ab_choose_list';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\tvar ids = {\n\t\tcomponent:App.unique(idBase + '_component'),\n\n\t\tuploader:App.unique(idBase + '_uploader'),\n\t\tlist:App.unique(idBase + '_list'),\n\t\ttoolBar:App.unique(idBase + '_toolbar'),\n\t\tbuttonCreateNewApplication: App.unique(idBase + '_buttonNewApp')\n\t}\n\n\tvar MenuComponent = OP.Component['ab_choose_list_menu'](App);\n\tvar PopupMenu = webix.ui(MenuComponent.ui);\n\tPopupMenu.hide();\n\n\tvar _ui = {\n\n\t\tid: ids.component,\n\t\tresponsive:\"hide\",\n\n\t\tcols: [\n\t\t\t{\n\t\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t\t},\n\t\t\t{\n\t\t\t\tresponsiveCell:false,\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\t\t\thidden: App.config.hideMobile\n\t\t\t\t\t},\n\t\t\t\t\t//\n\t\t\t\t\t// ToolBar\n\t\t\t\t\t//\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"toolbar\",\n\t\t\t\t\t\tid: ids.toolBar,\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{ view: \"label\", label:labels.component.title, fillspace: true },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: ids.buttonCreateNewApplication,\n\t\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\t\tlabel: labels.component.createNew,\n\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\ticon: \"plus\",\n\t\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\t\t// Inform our Chooser we have a request to create an Application:\n\t\t\t\t\t\t\t\t\tApp.actions.transitionApplicationForm( /* leave empty for a create */ );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"uploader\",\n\t\t\t\t\t\t\t\tid: ids.uploader,\n\t\t\t\t\t\t\t\tlabel: labels.common.import,\n\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\tupload: '/app_builder/appJSON',\n\t\t\t\t\t\t\t\tmultiple: false,\n\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\ticon: \"upload\",\n\t\t\t\t\t\t\t\tautosend: true,\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonAfterFileAdd: function () {\n\t\t\t\t\t\t\t\t\t\t_logic.onAfterFileAdd();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonFileUpload: function (item, response) {\n\t\t\t\t\t\t\t\t\t\t_logic.onFileUpload(item, response);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonFileUploadError: function (details, response) {\n\t\t\t\t\t\t\t\t\t\t_logic.onFileUploadError(details, response);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\n\n\t\t\t\t\t//\n\t\t\t\t\t// The List of Applications\n\t\t\t\t\t//\n\t\t\t\t\t{\n\t\t\t\t\t\tid: ids.list,\n\t\t\t\t\t\tview: \"list\",\n\t\t\t\t\t\tcss: 'ab-app-select-list',\n\t\t\t\t\t\ttemplate: function (obj, common) {\n\t\t\t\t\t\t\treturn _logic.templateListItem(obj, common);\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttype: {\n\t\t\t\t\t\t\theight: App.config.appListRowHeight, // Defines item height\n\t\t\t\t\t\t\ticonGear: \"<span class='webix_icon fa-cog'></span>\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselect: false,\n\t\t\t\t\t\tonClick: {\n\t\t\t\t\t\t\t\"ab-app-list-item\": function (ev, id, trg) {\n\t\t\t\t\t\t\t\treturn _logic.onClickListItem(ev, id, trg);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"ab-app-list-edit\": function (ev, id, trg) {\n\t\t\t\t\t\t\t\treturn _logic.onClickListEdit(ev, id, trg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\t\t\thidden: App.config.hideMobile\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\t\twidth: App.config.appListSpacerColMaxWidth\n \t\t\t}\n\t\t]\n\t}\n\n\n\n\tvar _data={};\n\n\n\tvar _logic = {\n\n\n\t\t/**\n\t\t * @function busy\n\t\t *\n\t\t * show a busy indicator on our App List\n\t\t */\n\t\tbusy: function() {\n\t\t\tif ($$(ids.list).showProgress)\n\t\t\t\t$$(ids.list).showProgress({ icon: 'cursor' });\n\t\t},\n\n\n\t\t/**\n\t\t * @function loadData\n\t\t *\n\t\t * Load all the ABApplications and display them in our App List\n\t\t */\n\t\tloadData:function(){\n\n\t\t\t// Get applications data from the server\n\t\t\t_logic.busy();\n\t\t\tABApplication.allApplications()\n\t\t\t\t.then(function (data) {\n\n\t\t\t\t\t_logic.ready();\n\n\t\t\t\t\t// make sure our overlay is updated when items are added/removed\n\t\t\t\t\t// from our data list.\n\t\t\t\t\tdata.attachEvent(\"onAfterAdd\", function(id, index){\n\t\t\t\t\t    _logic.refreshOverlay();\n\t\t\t\t\t});\n\n\t\t\t\t\tdata.attachEvent(\"onAfterDelete\", function(id){\n\t\t\t\t\t\t_logic.refreshOverlay();\n\t\t\t\t\t})\n\n\t\t\t\t\t_data.listApplications = data;\n\n\t\t\t\t\t_logic.refreshList();\n\t\t\t\t})\n\t\t\t\t.catch(function (err) {\n\t\t\t\t\t_logic.ready();\n\t\t\t\t\twebix.message({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttext: err\n\t\t\t\t\t});\n\t\t\t\t\tAD.error.log('App Builder : Error loading application data', { error: err });\n\t\t\t\t})\n\t\t},\n\n\n\t\t/**\n\t\t * @function onAfterFileAdd\n\t\t *\n\t\t * UI updates for when a file upload is initiated\n\t\t */\n\t\tonAfterFileAdd: function () {\n\t\t\t$$(ids.uploader).disable();\n\t\t\t_logic.busy();\n\t\t},\n\n\n\t\t/**\n\t\t * @function onClickListEdit\n\t\t *\n\t\t * UI updates for when the edit gear is clicked\n\t\t */\n\t\tonClickListEdit: function(ev, id, trg) {\n\n\t\t\t// Show menu\n\t\t\tPopupMenu.show(trg);\n\t\t\t$$(ids.list).select(id);\n\n\t\t\treturn false; // block default behavior\n\t\t},\n\n\n\t\t/**\n\t\t * @function onClickListItem\n\t\t *\n\t\t * An item in the list is selected. So update the workspace with that \n\t\t * object.\n\t\t */\n\t\tonClickListItem: function(ev, id, trg) {\n\t\t\t\t\t\t\t\t\n\t\t\t_logic.busy();\n\n\t\t\t$$(ids.list).select(id);\n\n\t\t\tvar selectedApp = $$(ids.list).getItem(id);\n\n\t\t\tif (selectedApp) {\n\n\t\t\t\t_logic.ready();\n\n\t\t\t\t// We've selected an Application to work with\n\t\t\t\tApp.actions.transitionWorkspace( selectedApp );\n\t\t\t}\n\n\t\t\treturn false; // block default behavior\n\t\t},\n\n\n\t\t/**\n\t\t * @function onFileUpload\n\t\t *\n\t\t * The File Upload process finished.\n\t\t */\n\t\tonFileUpload: function (item, response) {\n\t\t\t_logic.loadData(); // refresh app list\n\t\t\t$$(ids.uploader).enable();\n            _logic.ready();\n        },\n\n\n\t\t/**\n\t\t * @function onFileUploadError\n\t\t *\n\t\t * The File Upload process exited with an error.\n\t\t */\n        onFileUploadError: function(details, response) {\n\n\t\t\tvar errorMessage = 'Error: ' + (response && response.message);\n\t\t\tOP.Dialog.Alert({\n\t\t\t\ttext: errorMessage\n\t\t\t});\n\t\t\t// webix.message({\n\t\t\t// \ttype: 'error',\n\t\t\t// \ttext: errorMessage\n\t\t\t// });\n\t\t\t_logic.loadData(); // refresh app list\n\t\t\t$$(ids.uploader).enable();\n            _logic.ready();\n        },\n\n\n\t\t/**\n\t\t * @function refreshOverlay\n\t\t *\n\t\t * If we have no items in our list, display a Message.\n\t\t */\n\t\trefreshOverlay: function() {\n\t\t\tvar appList = $$(ids.list);\n\n\t\t\tif (!appList.count()) //if no data is available\n\t\t\t\tappList.showOverlay(labels.component.noApplication);\n\t\t\telse\n\t\t\t\tappList.hideOverlay();\n\t\t},\n\n\n\t\t/**\n\t\t * @function ready\n\t\t *\n\t\t * remove the busy indicator on our App List\n\t\t */\n\t\tready: function() {\n\t\t\tif ($$(ids.list).hideProgress)\n\t\t\t\t$$(ids.list).hideProgress();\n\t\t},\n\n\n\t\t/**\n\t\t * @function reset\n\t\t *\n\t\t * Return our App List to an unselected state.\n\t\t */\n\t\treset:function() {\n\t\t\t$$(ids.list).unselectAll();\n\t\t},\n\n\n\t\t/**\n\t\t * @function refreshList\n\t\t *\n\t\t * Apply our list of ABApplication data to our AppList\n\t\t */\n\t\trefreshList: function() {\n\n\t\t\tvar appList = $$(ids.list);\n\n\t\t\tappList.clearAll();\n\t\t\tappList.data.unsync();\n\t\t\tappList.data.sync(_data.listApplications);\n\n\t\t\t_logic.refreshOverlay();\n\n\t\t\tappList.refresh();\n\n\t\t\t_logic.ready();\n\t\t},\n\n\n\t\t/**\n\t\t * @function show\n\t\t *\n\t\t * Trigger our List component to show\n\t\t */\n\t\tshow:function() {\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\n\t\t/**\n\t\t * @function templateListItem\n\t\t *\n\t\t * Defines the template for each row of our AppList.\n\t\t *\n\t\t * @param {obj} obj the current instance of ABApplication for the row.\n\t\t * @param {?} common the webix.common icon data structure\n\t\t * @return {string}\n\t\t */\n\t\ttemplateListItem: function(obj, common) {\n\t\t\treturn _templateListItem\n\t\t\t\t.replace('#label#', obj.label || '')\n\t\t\t\t.replace('#description#', obj.description || '')\n\t\t\t\t.replace('{common.iconGear}', common.iconGear);\n\t\t}\n\t}\n\n\n\n\t/*\n\t * _templateListItem\n\t *\n\t * The AppList Row template definition.\n\t */\n\tvar _templateListItem = [\n\t\t\"<div class='ab-app-list-item'>\",\n\t\t\t\"<div class='ab-app-list-info'>\",\n\t\t\t\t\"<div class='ab-app-list-name'>#label#</div>\",\n\t\t\t\t\"<div class='ab-app-list-description'>#description#</div>\",\n\t\t\t\"</div>\",\n\t\t\t\"<div class='ab-app-list-edit'>\",\n\t\t\t\t\"{common.iconGear}\",\n\t\t\t\"</div>\",\n\t\t\"</div>\"\n\t].join('');\n\n\n\n\t/*\n\t * @function _init\n\t *\n\t * The init() that performs the necessary setup for our AppList chooser.\n\t */\n\tvar _init = function() {\n\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t\twebix.extend($$(ids.list), webix.OverlayBox);\n\n\t\tMenuComponent.init();\n\n\t\t// start things off by loading the current list of Applications\n\t\t_logic.loadData();\n\t}\n\n\n\n\t/*\n\t * {json} _actions\n\t *\n\t * The exported methods available to other Components.\n\t */\n\tvar _actions = {\n\n\n\t\t/**\n\t\t * @function unselectApplication\n\t\t *\n\t\t * resets the AppList to an unselected state.\n\t\t */\n\t\tunselectApplication:function() {\n\t\t\t_logic.reset();\n\t\t},\n\n\n\t\t/**\n\t\t * @function getSelectedApplication\n\t\t *\n\t\t * returns which ABApplication is currently selected.\n\t\t * @return {ABApplication}  or {null} if nothing selected.\n\t\t */\n\t\tgetSelectedApplication:function() {\n\t\t\treturn $$(ids.list).getSelectedItem();\n\t\t},\n\n\n\t\t/**\n\t\t * @function deleteApplication\n\t\t *\n\t\t * deletes the given ABAppliction.\n\t\t *\n\t\t * NOTE: this assumes the component using this method has already\n\t\t * provided the delete confirmation.\n\t\t *\n\t\t * @param {ABApplication} app  the ABAppliction to delete.\n\t\t */\n\t\tdeleteApplication: function(app) {\n\n\t\t\tif (!app) return;\n\n\t\t\t// Delete application data\n\t\t\t_logic.busy();\n\n\n\t\t\tapp.destroy()\n\t\t\t\t.then(function (result) {\n\t\t\t\t\t_logic.reset();\n\t\t\t\t\t_logic.ready();\n\n\t\t\t\t\twebix.message({\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\ttext: labels.common.deleteSuccessMessage.replace('{0}', app.label)\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(function (err) {\n\t\t\t\t\t_logic.reset();\n\t\t\t\t\t_logic.ready()\n\n\t\t\t\t\twebix.message({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttext: labels.common.deleteErrorMessage.replace(\"{0}\", app.label)\n\t\t\t\t\t});\n\n\t\t\t\t\tAD.error.log('App Builder : Error delete application data', { error: err });\n\t\t\t\t})\n\t\t},\n\n\n\t\t/**\n\t\t * @function transitionApplicationList\n\t\t *\n\t\t * Trigger our List component to show\n\t\t */\n\t\ttransitionApplicationList:function() {\n\t\t\t$$(ids.component).show();\n\t\t}\n\t}\n\n\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\t\tactions:_actions,\n\n\n\t\t_logic:_logic\t// exposed for Unit Testing\n\t}\n})\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_choose_list.js","\n/*\n * AB Choose List\n *\n * Display a list of Applications for the user to select.\n *\n */\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\n\nvar labels = {\n\n\tcomponent: {\n\t\tmenu : L('ab.application.menu', \"*Application Menu\"),\n\t\tconfirmDeleteTitle : L('ab.application.delete.title', \"*Delete application\"),\n\t\tconfirmDeleteMessage : L('ab.application.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\t}\n}\n\n\nvar idBase = 'ab_choose_list_menu';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\n\tvar ids = {\n\t\tmenu:App.unique(idBase + '_menu')\n\t}\n\n\n\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.menu,\n\t\thead: labels.component.menu,\n\t\twidth: 100,\n\t\tbody: {\n\t\t\tview: \"list\",\n\t\t\tborderless: true,\n\t\t\tdata: [\n\t\t\t\t{ command: labels.common.edit, icon: \"fa-pencil-square-o\" },\n\t\t\t\t{ command: labels.common.export, icon: \"fa-download\" },\n\t\t\t\t{ command: labels.common.delete, icon: \"fa-trash\" }\n\t\t\t],\n\t\t\tdatatype: \"json\",\n\n\t\t\ttemplate: \"<i class='fa #icon#' aria-hidden='true'></i> #command#\",\n\t\t\tautoheight: true,\n\t\t\tselect: false,\n\t\t\ton: {\n\t\t\t\t'onItemClick': function (timestamp, e, trg) {\n\t\t\t\t\treturn _logic.onItemClick(timestamp, e, trg);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\tvar _data={};\n\n\n\tvar _init = function() {\n\t\t\t\n\t}\n\n\n\tvar _logic = {\n\n\n\t\t/**\n\t\t * @function onItemClick\n\t\t * process which item in our popup was selected.\n\t\t */\n\t\tonItemClick: function( timestamp, e, trg) {\n\n\t\t\t// hide our popup before we trigger any other possible UI animation: (like .edit)\n\t\t\t// NOTE: if the UI is animating another component, and we do .hide()\n\t\t\t// while it is in progress, the UI will glitch and give the user whiplash.\n\t\t\t$$(ids.menu).hide();\n\n\t\t\tvar selectedApp = App.actions.getSelectedApplication();\n\n\t\t\tswitch (trg.textContent.trim()) {\n\t\t\t\tcase labels.common.edit:\n\t\t\t\t\tApp.actions.transitionApplicationForm(selectedApp);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase labels.common.delete:\n\t\t\t\t\tOP.Dialog.ConfirmDelete({\n\t\t\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t\t\t\ttext: labels.component.confirmDeleteMessage.replace('{0}', selectedApp.label),\n\t\t\t\t\t\tcallback: function (result) {\n\n\t\t\t\t\t\t\tif (!result) return;\n\n\t\t\t\t\t\t\tApp.actions.deleteApplication(selectedApp);\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase labels.common.export:\n\t\t\t\t\t// Download the JSON file to disk\n\t\t\t\t\twindow.location.assign('/app_builder/appJSON/' + selectedApp.id + '?download=1');\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\n\t\t_logic:_logic\t// exposed for Unit Testing\n\t}\n})\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_choose_list_menu.js","\n/*\n * ab_work\n *\n * Display the component for working with an ABApplication.\n *\n */\n\nimport ABApplication from \"../classes/ABApplication\"\nimport \"./ab_work_object\"\nimport \"./ab_work_interface\"\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tapplication: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\tbackToApplication: L('ab.application.backToApplication', \"*Back to Applications page\"),\n\t\tsynchronize: L('ab.application.synchronize', \"*Synchronize\"),\n\t\tobjectTitle: L('ab.object.title', \"*Objects\"),\n\t\tinterfaceTitle: L('ab.interface.title', \"*Interface\")\n\t}\n}\n\n\n\nOP.Component.extend('ab_work', function(App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique('ab_work_component'),\n\t\ttoolBar: App.unique('ab_work_toolbar'),\n\t\tbuttonSync: App.unique('ab_work_button_sync'),\n\t\tlabelAppName: App.unique('ab_work_label_appname'),\n\t\ttabbar: App.unique('ab_work_tabbar'),\n\t\ttab_object: App.unique('ab_work_tab_object'),\n\t\ttab_interface: App.unique('ab_work_tab_interface'),\n\t\tworkspace: App.unique('ab_work_workspace'),\n\t}\n\n\n\tvar AppObjectWorkspace = OP.Component['ab_work_object'](App);\n\tvar AppInterfaceWorkspace = OP.Component['ab_work_interface'](App);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\trows: [\n\t\t\t{\n\t\t\t\tview: \"toolbar\",\n\t\t\t\tid: ids.toolBar,\n\t\t\t\tautowidth: true,\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\tlabel: labels.application.backToApplication,\n\t\t\t\t\t\twidth: 200,\n\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\ticon: \"arrow-left\",\n\t\t\t\t\t\talign: \"left\",\n\n\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\tApp.actions.transitionApplicationChooser();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"label\",\n\t\t\t\t\t\tid: ids.labelAppName,\n\t\t\t\t\t\talign: \"center\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"spacer\",\n\t\t\t\t\t\twidth: 200,\n\t\t\t\t\t\talrign: \"right\"\n\t\t\t\t\t}\n\t\t\t\t\t// {\n\t\t\t\t\t// \tid: ids.buttonSync,\n\t\t\t\t\t// \tview: \"button\",\n\t\t\t\t\t// \ttype: \"icon\",\n\t\t\t\t\t// \ticon: \"refresh\",\n\t\t\t\t\t// \tlabel: labels.application.synchronize,\n\t\t\t\t\t// \tautowidth: true,\n\t\t\t\t\t// \talign: \"right\",\n\t\t\t\t\t// \tclick: function () {\n\t\t\t\t\t// \t\t_logic.synchronize();\n\t\t\t\t\t// \t}\n\t\t\t\t\t// }\n\t\t\t\t]\n\t\t\t},\n\t\t\t//{ height: App.config.mediumSpacer },\n\t\t\t// {\n\t\t\t// \tview:\"segmented\",\n\t\t\t// \tid: ids.tabbar,\n\t\t\t// \tvalue: ids.tab_object,\n\t\t\t// \tmultiview: true,\n\t\t\t// \talign: \"center\",\n\t\t\t// \toptions:[\n\t\t\t// \t\t{\n\t\t\t// \t\t\tid: ids.tab_object,\n\t\t\t// \t\t\tvalue: labels.application.objectTitle,\n\t\t\t// \t\t\twidth: App.config.tabWidthMedium\n\t\t\t// \t\t},\n\t\t\t// \t\t{\n\t\t\t// \t\t\tid: ids.tab_interface,\n\t\t\t// \t\t\tvalue: labels.application.interfaceTitle,\n\t\t\t// \t\t\twidth: App.config.tabWidthMedium\n\t\t\t// \t\t}\n\t\t\t// \t],\n\t\t\t// \ton: {\n\t\t\t// \t\tonChange: function (idNew, idOld) {\n\t\t\t// \t\t\tif (idNew != idOld) {\n\t\t\t// \t\t\t\t_logic.tabSwitch(idNew, idOld);\n\t\t\t// \t\t\t}\n\t\t\t// \t\t}\n\t\t\t// \t}\n\t\t\t// },\n\t\t\t{ height: App.config.mediumSpacer },\n\t\t\t{\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: App.config.mediumSpacer\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\trows: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"tabbar\",\n\t\t\t\t\t\t\t\tid: ids.tabbar,\n\t\t\t\t\t\t\t\tvalue: ids.tab_object,\n\t\t\t\t\t\t\t\tmultiview: true,\n\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid: ids.tab_object,\n\t\t\t\t\t\t\t\t\t\tvalue: labels.application.objectTitle,\n\t\t\t\t\t\t\t\t\t\twidth: App.config.tabWidthMedium\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid: ids.tab_interface,\n\t\t\t\t\t\t\t\t\t\tvalue: labels.application.interfaceTitle,\n\t\t\t\t\t\t\t\t\t\twidth: App.config.tabWidthMedium\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonChange: function (idNew, idOld) {\n\t\t\t\t\t\t\t\t\t\tif (idNew != idOld) {\n\t\t\t\t\t\t\t\t\t\t\t_logic.tabSwitch(idNew, idOld);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: ids.workspace,\n\t\t\t\t\t\t\t\tcells: [\n\t\t\t\t\t\t\t\t\tAppObjectWorkspace.ui,\n\t\t\t\t\t\t\t\t\tAppInterfaceWorkspace.ui\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: App.config.mediumSpacer\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ height: App.config.mediumSpacer }\n\t\t]\n\t};\n\n\n\n\t// Our init() function for setting up our UI\n\tvar _init = function() {\n\n\t\tAppObjectWorkspace.init();\n\t\tAppInterfaceWorkspace.init();\n\n\t\t// initialize the Object Workspace to show first.\n\t\t_logic.tabSwitch(ids.tab_object);\n\t}\n\n\n\n\t// our internal business logic\n\tvar _logic = {\n\n\n\t\tapplicationInit:function(application) {\n\n\t\t\t// setup Application Label:\n\t\t\t$$(ids.labelAppName).define('label', application.label);\n\t\t\t$$(ids.labelAppName).refresh();\n\n\t\t},\n\n\n\t\t/**\n\t\t * @function show()\n\t\t *\n\t\t * Show this component.\n\t\t */\n\t\tshow:function() {\n\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\n\t\t/**\n\t\t * @function synchronize\n\t\t *\n\t\t * Kick off the Synchronization process.\n\t\t */\n\t\tsynchronize:function() {\n\n// self.element.trigger(self.options.synchronizeEvent, {\n// \tappID: AD.classes.AppBuilder.currApp.id\n// });\n//// Question: where should this logic go?  Here or in ab.js ?\n\nconsole.error('TODO: ab_work.logic.synchronize()!');\n\t\t},\n\n\n\t\t/**\n\t\t * @function tabSwitch\n\t\t *\n\t\t * Every time a tab switch happens, decide which workspace to show.\n\t\t *\n\t\t * @param {string} idTab\tthe id of the tab that was changed to.\n\t\t * @param {string} idOld\tthe previous tab id\n\t\t */\n\t\ttabSwitch:function(idTab, idOld) {\n\n\t\t\tswitch( idTab ) {\n\n\t\t\t\t// Object Workspace Tab\n\t\t\t\tcase ids.tab_object:\n\n\t\t\t\t\t// $$(ids.buttonSync).show();\n\t\t\t\t\tAppObjectWorkspace.show();\n\t\t\t\t\tbreak;\n\n\t\t\t\t// Interface Workspace Tab\n\t\t\t\tcase ids.tab_interface:\n\n\t\t\t\t\t// $$(ids.buttonSync).hide();\n\t\t\t\t\tAppInterfaceWorkspace.show();\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\t}\n\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\n\t\t/**\n\t\t * @function transitionWorkspace\n\t\t *\n\t\t * Switch the UI to view the App Workspace screen.\n\t\t *\n\t\t * @param {ABApplication} application\n\t\t */\n\t\ttransitionWorkspace:function(application){\n\n\t\t\t_logic.applicationInit(application);\n\t\t\tAppObjectWorkspace.applicationLoad(application);\n\t\t\tAppInterfaceWorkspace.applicationLoad(application);\n\n\n\t\t\t_logic.show();\t\n\t\t}\n\n\t}\n\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component\n\t\tactions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n})\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work.js","\n/*\n * ab_work_interface\n *\n * Display the Interface for designing Pages and Views in the App Builder.\n *\n */\n\nimport ABApplication from \"../classes/ABApplication\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\n\t}\n}\n\n\nvar idBase = 'ab_work_interface';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t}\n\n\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\t//scroll: true,\n\t\trows: [\n\t\t\t{\n\t\t\t\tview: \"label\",\n\t\t\t\tlabel:\"interface workspace\",\n\t\t\t},\n\t\t]\n\t};\n\n\n\n\t// Our init() function for setting up our UI\n\tvar _init = function() {\n\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t}\n\n\n\n\t// our internal business logic\n\tvar _logic = {\n\n\n\t\t\n\t\t/**\n\t\t * @function applicationLoad\n\t\t *\n\t\t * Initialize the Object Workspace with the given ABApplication.\n\t\t *\n\t\t * @param {ABApplication} application \n\t\t */\n\t\tapplicationLoad:function(application) {\nconsole.error('TODO: ab_work_interface.applicationLoad()');\n\t\t},\n\n\n\t\t/**\n\t\t * @function show()\n\t\t *\n\t\t * Show this component.\n\t\t */\n\t\tshow:function() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t}\n\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\n\t}\n\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component\n\t\tactions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\t\tapplicationLoad:_logic.applicationLoad,\n\t\tshow: _logic.show,\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n})\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_interface.js","\n/*\n * ab_work_object\n *\n * Display the Object Tab UI:\n *\n */\n\nimport ABApplication from \"../classes/ABApplication\"\nimport \"./ab_work_object_list\"\nimport \"./ab_work_object_workspace\"\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\n\t}\n}\n\n\nvar idBase = 'ab_work_object';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t}\n\n\tvar ObjectList = OP.Component['ab_work_object_list'](App);\n\tvar ObjectWorkspace = OP.Component['ab_work_object_workspace'](App);\n\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\tautoheight: true,\n\t\tmargin: 20,\n\t\tcols: [\n\t\t\tObjectList.ui,\n\t\t\t{ view: \"resizer\"},\n\t\t\tObjectWorkspace.ui\n\t\t]\n\t};\n\n\n\n\t// Our init() function for setting up our UI\n\tvar _init = function() {\n\n\t\tObjectWorkspace.init();\n\t\tObjectList.init();\n\n\t}\n\n\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\t/**\n\t\t * @function applicationLoad\n\t\t *\n\t\t * Initialize the Object Workspace with the given ABApplication.\n\t\t *\n\t\t * @param {ABApplication} application \n\t\t */\n\t\tapplicationLoad: function(application) {\n\t\t\tObjectList.applicationLoad(application);\n\t\t\tObjectWorkspace.clearObjectWorkspace();\n\t\t},\n\n\n\t\t/**\n\t\t * @function show()\n\t\t *\n\t\t * Show this component.\n\t\t */\n\t\tshow:function() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t}\n\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\n\t}\n\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component\n\t\tactions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\tapplicationLoad: _logic.applicationLoad,\n\t\tshow: _logic.show,\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n})\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object.js","\n/*\n * ab_work_object_list\n *\n * Manage the Object List\n *\n */\n\nimport ABApplication from \"../classes/ABApplication\"\nimport \"./ab_work_object_list_newObject\"\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\taddNew: L('ab.object.addNew', '*Add new object'),\n\n\t}\n}\n\n\nvar idBase = 'ab_work_object_list';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase+ '_component'),\n\n\t\tlist: App.unique(idBase+ '_editlist'),\n\t\tbuttonNew: App.unique(idBase+ '_buttonNew'),\n\n\t}\n\n\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid:ids.component,\n\t\trows: [\n\t\t\t{\n\t\t\t\tview: App.custom.editlist.view,  // \"editlist\",\n\t\t\t\tid: ids.list,\n\t\t\t\twidth: 250,\n\nheight:800, // #Hack!\n\n\t\t\t\tselect: true,\n\t\t\t\teditaction: 'custom',\n\t\t\t\teditable: true,\n\t\t\t\teditor: \"text\",\n\t\t\t\teditValue: \"label\",\n\t\t\t\ttemplate: function(obj, common) {\n\t\t\t\t\treturn _logic.templateListItem(obj, common);\n\t\t\t\t},\n\t\t\t\ttype: {\n\t\t\t\t\theight:\"auto\",\n\t\t\t\t\t// unsyncNumber: \"\",  // \"<span class='ab-object-unsync'><span class='ab-object-unsync-number'></span> unsync</span>\",\n\t\t\t\t\ticonGear: \"<div class='ab-object-list-edit'><span class='webix_icon fa-cog'></span></div>\"\n\t\t\t\t},\n\t\t\t\ton: {\n\t\t\t\t\tonAfterRender: function () {\n\t\t\t\t\t\t_logic.onAfterRender();\n\t\t\t\t\t},\n\t\t\t\t\tonAfterSelect: function (id) {\n\t\t\t\t\t\t_logic.selectObject(id);\n\t\t\t\t\t},\n\t\t\t\t\tonAfterDelete: function (id) {\n\t\t\t\t\t\t_logic.onAfterDelete(id);\n\t\t\t\t\t},\n\t\t\t\t\tonBeforeEditStop: function (state, editor) {\n\t\t\t\t\t\t_logic.onBeforeEditStop(state, editor);\n\t\t\t\t\t},\n\t\t\t\t\tonAfterEditStop: function (state, editor, ignoreUpdate) {\n\t\t\t\t\t\t_logic.onAfterEditStop(state, editor, ignoreUpdate);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonClick: {\n\t\t\t\t\t\"ab-object-list-edit\": function (e, id, trg) {\n\t\t\t\t\t\t_logic.clickEditMenu(e, id, trg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: 'button',\n\t\t\t\tid: ids.buttonNew,\n\t\t\t\tvalue: labels.component.addNew,\n\t\t\t\tclick: function () {\n\t\t\t\t\t_logic.clickNewObject();\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t};\n\n\n\n\t// Our init() function for setting up our UI\n\tvar _init = function() {\n\n\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t\t$$(ids.component).adjust();\n\t\t$$(ids.list).adjust();\n\t}\n\n\n\n\t// our internal business logic\n\tvar _logic = {\n\n\n\t\t/**\n\t\t * @function applicationLoad\n\t\t *\n\t\t * Initialize the Object List from the provided ABApplication\n\t\t *\n\t\t * If no ABApplication is provided, then show an empty form. (create operation)\n\t\t *\n\t\t * @param {ABApplication} application  \t[optional] The current ABApplication \n\t\t *\t\t\t\t\t\t\t\t\t\twe are working with.\n\t\t */\n\t\tapplicationLoad : function(application){\n\t\t\t_logic.listBusy();\n\n\t\t\tCurrentApplication = application;\n\n\t\t\t// get a DataCollection of all our objects\n\t\t\tobjectList = new webix.DataCollection({\n\t\t\t\tdata: application.objects(),\n\t\t\t});\n\n\t\t\t// clear our list and display our objects:\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.clearAll();\n\t\t\tList.data.unsync();\n\t\t\tList.data.sync(objectList);\n\t\t\tList.refresh();\n\t\t\tList.unselectAll();\n\n\n\n\t\t\t// \n\t\t\t_logic.syncNumberRefresh();\n\t\t\t_logic.listReady();\n\n\n\t\t\t// prepare our Popup with the current Application\n\t\t\tPopupNewObjectComponent.applicationLoad(application);\n\n\t\t},\n\n\n\t\tclickEditMenu: function(e, id, trg) {\n\nconsole.error('!! TODO: clickEditMenu()');\n\t\t\t// // Show menu\n\t\t\t// $$(self.webixUiId.objectListMenuPopup).show(trg);\n\n\t\t\t// return false;\n\t\t},\n\n\n\t\tlistBusy:function() {\n\t\t\t$$(ids.list).showProgress({ type: \"icon\" });\n\t\t},\n\n\t\tlistReady:function() {\n\t\t\t$$(ids.list).hideProgress();\n\t\t},\n\n\n\t\tonAfterDelete: function (id) {\nconsole.error('!! todo: onAfterDelete()');\t\t\t\n\t\t},\n\n\n\t\tonAfterRender: function() {\nconsole.error('!! todo: onAfterRender() editing');\n\t\t\t// webix.once(function () {\n\t\t\t// \t$$(self.webixUiId.objectList).data.each(function (d) {\n\t\t\t// \t\t$($$(self.webixUiId.objectList).getItemNode(d.id)).find('.ab-object-unsync-number').html(99);\n\t\t\t// \t});\n\t\t\t// });\n\n\t\t\t// // Show gear icon\n\t\t\t// if (this.getSelectedId(true).length > 0) {\n\t\t\t// \t$(this.getItemNode(this.getSelectedId(false))).find('.ab-object-list-edit').show();\n\t\t\t// \tself.refreshUnsyncNumber();\n\t\t\t// }\n\t\t},\n\n\t\tonAfterEditStop: function(state, editor, ignoreUpdate) {\n\nconsole.error('!! todo: onAfterEditStop() editing');\n\t\t\t// if (state.value != state.old) {\n\t\t\t// \tvar _this = this;\n\n\t\t\t// \tthis.showProgress({ type: 'icon' });\n\n\t\t\t// \tvar selectedObject = AD.classes.AppBuilder.currApp.objects.filter(function (item, index, list) { return item.id == editor.id; })[0];\n\t\t\t// \tselectedObject.attr('label', state.value);\n\n\t\t\t// \t// Call server to rename\n\t\t\t// \tselectedObject.save()\n\t\t\t// \t\t.fail(function () {\n\t\t\t// \t\t\t_this.hideProgress();\n\n\t\t\t// \t\t\twebix.message({\n\t\t\t// \t\t\t\ttype: \"error\",\n\t\t\t// \t\t\t\ttext: self.labels.common.renameErrorMessage.replace(\"{0}\", state.old)\n\t\t\t// \t\t\t});\n\n\t\t\t// \t\t\tAD.error.log('Object List : Error rename object data', { error: err });\n\t\t\t// \t\t})\n\t\t\t// \t\t.then(function () {\n\t\t\t// \t\t\t_this.hideProgress();\n\n\t\t\t// \t\t\tif (selectedObject.translate) selectedObject.translate();\n\n\t\t\t// \t\t\t// Show success message\n\t\t\t// \t\t\twebix.message({\n\t\t\t// \t\t\t\ttype: \"success\",\n\t\t\t// \t\t\t\ttext: self.labels.common.renameSuccessMessage.replace('{0}', state.value)\n\t\t\t// \t\t\t});\n\n\t\t\t// \t\t\t// Show gear icon\n\t\t\t// \t\t\t$(_this.getItemNode(editor.id)).find('.ab-object-list-edit').show();\n\t\t\t// \t\t});\n\t\t\t// }\n\t\t},\n\n\t\tonBeforeEditStop: function(state, editor) {\nconsole.error('!! todo: onBeforeEditStop() editing');\n\t\t\t// if (!inputValidator.validateFormat(state.value)) {\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\t\t\t// // Validation - check duplicate\n\t\t\t// if (!inputValidator.rules.preventDuplicateObjectName(state.value, editor.id) && state.value != state.old) {\n\t\t\t// \twebix.alert({\n\t\t\t// \t\ttitle: self.labels.object.invalidName,\n\t\t\t// \t\tok: self.labels.common.ok,\n\t\t\t// \t\ttext: self.labels.object.duplicateName.replace(\"{0}\", state.value)\n\t\t\t// \t});\n\n\t\t\t// \treturn false;\n\t\t\t// }\n\t\t},\n\n\n\t\t/**\n\t\t * @function selectObject()\n\t\t *\n\t\t * Perform these actions when an Object is selected in the List.\n\t\t */\n\t\tselectObject: function (id) {\n\n\t\t\tvar object = $$(ids.list).getItem(id);\n\t\t\tApp.actions.populateObjectWorkspace(object);\n\n//// TODO: do we need these?\n\n\t\t\t// // Refresh unsync number\n\t\t\t// self.refreshUnsyncNumber();\n\n\t\t\t// // Show gear icon\n\t\t\t// $(this.getItemNode(id)).find('.ab-object-list-edit').show();\n\t\t},\n\n\n\t\t/**\n\t\t * @function show()\n\t\t *\n\t\t * Show this component.\n\t\t */\n\t\tshow:function() {\n\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\n\t\tsyncNumberRefresh:function() {\n\n//// NOTE: I think we are removing Sync Numbers with the refactor.\n//// probably wont need this.\nconsole.error('TODO: syncNumRefresh()');\n\t\t\t// var self = this,\n\t\t\t// \tobjects = [];\n\n\t\t\t// objects = $$(self.webixUiId.objectList).data.find(function (d) {\n\t\t\t// \treturn objectName ? d.name == objectName : true;\n\t\t\t// }, false, true);\n\n\t\t\t// objects.forEach(function (obj) {\n\t\t\t// \tvar objectModel = modelCreator.getModel(AD.classes.AppBuilder.currApp, obj.name),\n\t\t\t// \t\tunsyncNumber = (objectModel && objectModel.Cached ? objectModel.Cached.count() : 0),\n\t\t\t// \t\thtmlItem = $($$(self.webixUiId.objectList).getItemNode(obj.id));\n\n\t\t\t// \tif (unsyncNumber > 0) {\n\t\t\t// \t\thtmlItem.find('.ab-object-unsync-number').html(unsyncNumber);\n\t\t\t// \t\thtmlItem.find('.ab-object-unsync').show();\n\t\t\t// \t}\n\t\t\t// \telse {\n\t\t\t// \t\thtmlItem.find('.ab-object-unsync').hide();\n\t\t\t// \t}\n\t\t\t// });\n\t\t},\n\n\n\t\t/**\n\t\t * @function templateListItem\n\t\t *\n\t\t * Defines the template for each row of our ObjectList.\n\t\t *\n\t\t * @param {obj} obj the current instance of ABObject for the row.\n\t\t * @param {?} common the webix.common icon data structure\n\t\t * @return {string}\n\t\t */\n\t\ttemplateListItem: function(obj, common) {\n\t\t\treturn _templateListItem\n\t\t\t\t.replace('#label#', obj.label || '??label??')\n\t\t\t\t.replace('{common.iconGear}', common.iconGear);\n\t\t},\n\n\n\t\t/**\n\t\t * @function callbackNewObject\n\t\t *\n\t\t * Once a New Object was created in the Popup, follow up with it here.\n\t\t */\n\t\tcallbackNewObject:function(err, object){\n\n\t\t\tif (err) {\n\t\t\t\tOP.Error.log('Error creating New Object', {error: err});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tobjectList.add(object,0);\n\t\t\t$$(ids.list).select(newObject.id);\n\t\t},\n\n\n\t\t/**\n\t\t * @function clickNewObject\n\t\t *\n\t\t * Manages initiating the transition to the new Object Popup window\n\t\t */\n\t\tclickNewObject:function() {\n\n\t\t\t// show the new popup\n\t\t\tPopupNewObject.show();\n\t\t}\n\t}\n\n\n\t/*\n\t * _templateListItem\n\t *\n\t * The Object Row template definition.\n\t */\n\tvar _templateListItem = [\n\t\t\"<div class='ab-object-list-item'>\",\n\t\t\t\"#label#\",\n\t\t\t// \"{common.unsyncNumber}\",\n\t\t\t\"{common.iconGear}\",\n\t\t\"</div>\",\n\t].join('');\n\n\n\t// Note: put these here so _logic is defined:\n\t// There is a Popup for adding a new Object:\n\tvar PopupNewObjectComponent = OP.Component['ab_work_object_list_newObject'](App);\n\tvar PopupNewObject = webix.ui(PopupNewObjectComponent.ui);\n\tPopupNewObjectComponent.init({\n\t\tonDone:_logic.callbackNewObject\n\t});\n\n\n\n\tvar CurrentApplication = null;\n\tvar objectList = null;\n\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\n\t\t/**\n\t\t * @function getSelectedObject\n\t\t *\n\t\t * returns which ABObject is currently selected.\n\t\t * @return {ABObject}  or {null} if nothing selected.\n\t\t */\n\t\tgetSelectedObject:function() {\n\t\t\treturn $$(ids.list).getSelectedItem();\n\t\t},\n\n\t}\n\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component\n\t\tactions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tapplicationLoad:_logic.applicationLoad,\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n})\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_list.js","\n/*\n * ab_work_object_list_newObject\n *\n * Display the form for creating a new Object.  This Popup will manage several \n * different sub components for gathering Object data for saving.\n *\n * The sub components will gather the data for the object and do basic form \n * validations on their interface.  \n *\n * when ready, the sub component will call onSave(values, cb)  to allow this \n * component to manage the actual final object validation, and saving to this\n * application.  On success, cb(null) will be called.  on error cb(err) will\n * be called.\n *\n */\n\nimport \"./ab_work_object_list_newObject_blank\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\taddNew: L('ab.object.addNew', '*Add new object'),\n\t\t\t\t\t\t\t\n\t}\n}\n\n\nvar idBase = 'ab_work_object_list_newObject';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t}\n\n\n\tvar BlankTab = OP.Component['ab_work_object_list_newObject_blank'](App);\n\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"window\",\n\t\tid: ids.component,\n\t\twidth: 400,\n\t\tposition: \"center\",\n\t\tmodal: true,\n\t\thead: labels.component.addNew,\n\t\tselectNewObject: true,\n\t\tbody: {\n\t\t\tview: \"tabview\",\n\t\t\tcells: [\n\t\t\t\tBlankTab.ui,\n\t\t\t\t// importObjectCreator.getCreateView(),\n\t\t\t\t// importCsvCreator.getCreateView()\n\t\t\t]\n\t\t}\n\t};\n\n\n\n\t// Our init() function for setting up our UI\n\tvar _init = function(options) {\n\n\t\t// register our callbacks:\n\t\tfor(var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\n\t\tvar ourCBs = {\n\t\t\tonCancel: _logic.hide,\n\t\t\tonSave: _logic.save\n\t\t}\n\n\t\tBlankTab.init(ourCBs);\n\n\t}\n\n\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\t\n\n\n\t\t/**\n\t\t * @function applicationLoad()\n\t\t *\n\t\t * prepare ourself with the current application\n\t\t */\n\t\tapplicationLoad:function(application) {\n\t\t\t// _logic.show();\n\t\t\tcurrentApplication = application;\t// remember our current Application.\n\t\t},\n\n\n\t\tcallbacks:{\n\t\t\tonDone:function(){}\n\t\t},\n\n\n\t\t/**\n\t\t * @function hide()\n\t\t *\n\t\t * remove the busy indicator from the form.\n\t\t */\n\t\thide: function() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\n\t\t/**\n\t\t * @function save\n\t\t *\n\t\t * take the data gathered by our child creation tabs, and \n\t\t * add it to our current application.\n\t\t *\n\t\t * @param {obj} values  key=>value hash of model values.\n\t\t * @param {fn}  cb \t\tnode style callback to indicate success/failure\n\t\t */\n\t\tsave:function (values, cb) {\n\n\t\t\t// must have an application set.\n\t\t\tif (!currentApplication) {\n\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\ttitle:'Shoot!',\n\t\t\t\t\ttest:'No Application Set!  Why?'\n\t\t\t\t});\n\t\t\t\tcb(true);\t// there was an error.\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// create a new (unsaved) instance of our object:\n\t\t\tvar newObject = currentApplication.objectNew(values);\n\n\n\t\t\t// have newObject validate it's values.\n\t\t\tvar validationErrors = newObject.isValid();\n\t\t\tif (validationErrors) {\n\t\t\t\tcb(validationErrors);\t\t\t\t\t\t// tell current Tab component the errors\n\t\t\t\treturn false;\t\t\t\t\t\t\t\t// stop here.\n\t\t\t}\n\n\n\t\t\t// if we get here, save the new Object\n\t\t\tnewObject.save()\n\t\t\t\t.then(function(obj){\n\n\t\t\t\t\t// successfully done:\n\t\t\t\t\tcb();\t\t\t\t\t\t\t\t\t// tell current tab component save successful\n\t\t\t\t\t_logic.hide();\t\t\t\t\t\t\t// hide our popup\n\t\t\t\t\t_logic.callbacks.onDone(null, obj);\t\t// tell parent component we're done\n\t\t\t\t})\n\t\t\t\t.catch(function(err){\n\t\t\t\t\tcb(err);\t\t\t\t\t\t\t\t// tell current Tab component there was an error\n\t\t\t\t})\n\t\t},\n\n\n\t\t/**\n\t\t * @function show()\n\t\t *\n\t\t * Show this component.\n\t\t */\n\t\tshow:function() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t}\n\n\n\tvar currentApplication = null;\n\t// var currentCallBack = null;\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t}\n\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component  \n\t\tactions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tapplicationLoad:_logic.applicationLoad,\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n})\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_list_newObject.js","\n/*\n * ab_work_object_list_newObject_blank\n *\n * Display the form for creating a new Application.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\t\tplaceholderName: L('ab.object.form.placeholderName', \"*Object name\"),\n\t}\n}\n\n\nvar idBase = 'ab_work_object_list_newObject_blank';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tform: App.unique(idBase + '_blank'),\n\t\tbuttonSave: App.unique(idBase + '_save'),\n\t\tbuttonCancel: App.unique(idBase + '_cancel')\n\t}\n\n\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\theader: labels.common.create,\n\t\tbody: {\n\t\t\tview: \"form\",\n\t\t\tid: ids.form,\n\t\t\twidth: 400,\n\t\t\trules: {\n\n// TODO:\n// name: inputValidator.rules.validateObjectName\n\t\t\t},\n\t\t\telements: [\n\t\t\t\t{ view: \"text\", label: labels.common.formName, name: \"name\", required: true, placeholder: labels.component.placeholderName, labelWidth: 70 },\n\t\t\t\t{\n\t\t\t\t\tmargin: 5,\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"button\", id: ids.buttonCancel, value: labels.common.cancel, \n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t_logic.cancel();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"button\", id: ids.buttonSave, value: labels.common.add, type: \"form\", \n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\treturn _logic.save();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t};\n\n\n\n\t// Our init() function for setting up our UI\n\tvar _init = function( options ) {\n\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t\t// load up our callbacks.\n\t\tfor(var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t}\n\n\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\tcallbacks:{\n\t\t\tonCancel: function() { console.warn('NO onCancel()!') },\n\t\t\tonSave  : function(values, cb) { console.warn('NO onSave()!') },\n\t\t},\n\n\t\t\n\t\tcancel:function() {\n\n\t\t\t_logic.formClear();\n\t\t\t_logic.callbacks.onCancel();\n\t\t},\n\n\n\t\tformClear:function() {\n\t\t\t$$(ids.form).clearValidation();\n\t\t\t$$(ids.form).clear();\n\t\t},\n\n\n\t\t/**\n\t\t * @function hide()\n\t\t *\n\t\t * hide this component.\n\t\t */\n\t\thide:function() {\n\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\n\t\t/**\n\t\t * @function save\n\t\t *\n\t\t * verify the current info is ok, package it, and return it to be \n\t\t * added to the application.createModel() method.\n\t\t */\n\t\tsave:function() {\n\t\t\tvar saveButton = $$(ids.buttonSave);\n\t\t\tsaveButton.disable();\n\n\t\t\tvar Form = $$(ids.form);\n\n\t\t\tForm.clearValidation();\n\n\t\t\t// if it doesn't pass the basic form validation, return:\n\t\t\tif (!Form.validate()) {\n\t\t\t\tsaveButton.enable();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar values = Form.getValues();\n\n\n\t\t\t// now send data back to be added:\n\t\t\t_logic.callbacks.onSave(values, function(err) {\n\n\t\t\t\tif (err) {\n\t\t\t\t\tif (OP.Form.isValidationError(err, Form)) {\n\t\t\t\t\t\t// do I do anything else here?\n\t\t\t\t\t\t// this auto updates the form\n\t\t\t\t\t}\n\n\t\t\t\t\t// get notified if there was an error saving.\n\t\t\t\t\tsaveButton.enable();\n\t\t\t\t\treturn false;\n\t\t\t\t} \n\n\t\t\t\t// if there was no error, clear the form for the next\n\t\t\t\t// entry:\n\t\t\t\t_logic.formClear();\n\t\t\t});\n\n\t\t},\n\n\n\t\t/**\n\t\t * @function show()\n\t\t *\n\t\t * Show this component.\n\t\t */\n\t\tshow:function() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t}\n\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\n\t\t/**\n\t\t * @function populateApplicationForm()\n\t\t *\n\t\t * Initialze the Form with the values from the provided ABApplication.\n\t\t *\n\t\t * If no ABApplication is provided, then show an empty form. (create operation)\n\t\t *\n\t\t * @param {ABApplication} Application  \t[optional] The current ABApplication \n\t\t *\t\t\t\t\t\t\t\t\t\twe are working with.\n\t\t */\n\t\t// populateApplicationForm:function(Application){\n\t\t\t\n\t\t// \t_logic.formReset();\n\t\t// \tif (Application) {\n\t\t// \t\t// populate Form here:\n\t\t// \t\t_logic.formPopulate(Application);\n\t\t// \t}\n\t\t// \t_logic.permissionPopulate(Application);\n\t\t// \t_logic.show();\n\t\t// }\n\n\t}\n\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component  \n\t\tactions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n})\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_list_newObject_blank.js","\n/*\n * ab_work_object_workspace\n *\n * Manage the Object Workspace area.\n *\n */\n\nimport ABApplication from \"../classes/ABApplication\"\nimport \"./ab_work_object_workspace_datatable\"\nimport \"./ab_work_object_workspace_popupDefineLabel\"\nimport \"./ab_work_object_workspace_popupHideFields\"\nimport \"./ab_work_object_workspace_popupNewDataField\"\n\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\n\t\taddNewRow: L('ab.object.addNewRow', \"*Add new row\"),\n\n\t\tselectObject: L('ab.object.selectObject', \"*Select an object to work with.\"),\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\n\t\t// Toolbar:\n\t\thideFields: L('ab.object.toolbar.hideFields', \"*Hide fields\"),\n\t\tfilterFields: L('ab.object.toolbar.filterFields', \"*Add filters\"),\n\t\tsortFields: L('ab.object.toolbar.sortFields', \"*Apply sort\"),\n\t\tfrozenColumns: L('ab.object.toolbar.frozenColumns', \"*Frozen columns\"),\n\t\tdefineLabel: L('ab.object.toolbar.defineLabel', \"*Define label\"),\n\t\tpermission: L('ab.object.toolbar.permission', \"*Permission\"),\n\t\taddFields: L('ab.object.toolbar.addFields', \"*Add new column\"),\n\t\t\"export\": L('ab.object.toolbar.export', \"*Export\"),\n\n\t\tconfirmDeleteTitle : L('ab.object.delete.title', \"*Delete data field\"),\n\t\tconfirmDeleteMessage : L('ab.object.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\t}\n}\n\n\nvar idBase = 'ab_work_object_workspace';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tbuttonAddField: App.unique(idBase + '_buttonAddField'),\n\t\tbuttonExport: App.unique(idBase + '_buttonExport'),\n\t\tbuttonFieldsVisible: App.unique(idBase + '_buttonFieldsVisible'),\n\t\tbuttonFilter: App.unique(idBase + '_buttonFilter'),\n\t\tbuttonFrozen: App.unique(idBase + '_buttonFrozen'),\n\t\tbuttonLabel: App.unique(idBase + '_buttonLabel'),\n\t\tbuttonRowNew: App.unique(idBase + '_buttonRowNew'),\n\t\tbuttonSort: App.unique(idBase + '_buttonSort'),\n\n\n\t\tdatatable: App.unique(idBase + '_datatable'),\n\n\n\t\t// Toolbar:\n\t\ttoolbar: App.unique(idBase + '_toolbar'),\n\n\n\n\t\tnoSelection: App.unique(idBase + '_noSelection'),\n\t\tselectedObject: App.unique(idBase + '_selectedObject'),\n\n\t}\n\n\n\n\t// The DataTable that displays our object:\n\tvar DataTable = OP.Component['ab_work_object_workspace_datatable'](App);\n\n\n\t// Various Popups on our page:\n\tvar PopupDefineLabelComponent = OP.Component['ab_work_object_workspace_popupDefineLabel'](App);\n\tvar PopupDefineLabel = webix.ui(PopupDefineLabelComponent.ui);\n\n\n\tvar PopupNewDataFieldComponent = OP.Component['ab_work_object_workspace_popupNewDataField'](App);\n\t// var PopupNewDataField = webix.ui(PopupNewDataFieldComponent.ui);\n\twebix.ui(PopupNewDataFieldComponent.ui);\n\n\n\tvar PopupHideFieldComponent = OP.Component['ab_work_object_workspace_popupHideFields'](App);\n\tvar PopupHideField = webix.ui(PopupHideFieldComponent.ui);\n\n\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview:'multiview',\n\t\tid: ids.component,\n\t\trows:[\n\t\t\t{\n\t\t\t\tid: ids.noSelection,\n\t\t\t\trows:[\n\t\t\t\t\t{ \n\t\t\t\t\t\tview:'label', \n\t\t\t\t\t\tlabel:labels.component.selectObject \n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: ids.selectedObject,\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview: 'toolbar',\n\t\t\t\t\t\tid: ids.toolbar,\n\t\t\t\t\t\thidden: true,\n\t\t\t\t\t\tcss: \"ab-data-toolbar\",\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\t\tid: ids.buttonFieldsVisible,\n\t\t\t\t\t\t\t\tlabel: labels.component.hideFields,\n// popup: 'self.webixUiId.visibleFieldsPopup',\n\t\t\t\t\t\t\t\ticon: \"eye-slash\",\n\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\t// width: 120,\n\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\tbadge: 0,\n\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t_logic.toolbarFieldsVisible(this.$view);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: 'button',\n\t\t\t\t\t\t\t\tid: ids.buttonFilter,\n\t\t\t\t\t\t\t\tlabel: labels.component.filterFields,\n\t\t\t\t\t\t\t\ticon: \"filter\",\n\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\t// width: 120,\n\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\tbadge: 0,\n\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t_logic.toolbarFilter(this);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: 'button',\n\t\t\t\t\t\t\t\tid: ids.buttonSort,\n\t\t\t\t\t\t\t\tlabel: labels.component.sortFields,\n\t\t\t\t\t\t\t\ticon: \"sort\",\n\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\t// width: 120,\n\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\tbadge: 0,\n\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t_logic.toolbarSort(this.$view);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: 'button',\n\t\t\t\t\t\t\t\tid: ids.buttonFrozen,\n\t\t\t\t\t\t\t\tlabel: labels.component.frozenColumns,\n\t\t\t\t\t\t\t\ticon: \"thumb-tack\",\n\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\tbadge: 0,\n\t\t\t\t\t\t\t\tclick: function(){\n\t\t\t\t\t\t\t\t\t_logic.toolbarFrozen(this.$view);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: 'button',\n\t\t\t\t\t\t\t\tid: ids.buttonLabel,\n\t\t\t\t\t\t\t\tlabel: labels.component.defineLabel,\n\t\t\t\t\t\t\t\ticon: \"crosshairs\",\n\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\t// width: 130,\n\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t_logic.toolbarDefineLabel(this.$view);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: 'button',\n\t\t\t\t\t\t\t\tlabel: labels.component.permission,\n\t\t\t\t\t\t\t\ticon: \"lock\",\n\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\t\t_logic.toolbarPermission(this.$view);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: 'button',\n\t\t\t\t\t\t\t\tid: ids.buttonAddField,\n\t\t\t\t\t\t\t\tlabel: labels.component.addFields,\n\t\t\t\t\t\t\t\ticon: \"plus\",\n\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\t// width: 150,\n\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\tclick:function() {\n\t\t\t\t\t\t\t\t\t_logic.toolbarAddFields(this.$view);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: 'button',\n\t\t\t\t\t\t\t\tid: ids.buttonExport,\n\t\t\t\t\t\t\t\tlabel: labels.component.export,\n\t\t\t\t\t\t\t\ticon: \"download\",\n\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\t\t_logic.toolbarButtonExport(this.$view);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\tDataTable.ui,\n\t\t\t\t\t{\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\t\tid: ids.buttonRowNew,\n\t\t\t\t\t\t\t\tvalue: labels.component.addNewRow,\n\t\t\t\t\t\t\t\tclick: function () {\n// TODO:\n\t\t\t\t\t\t\t\t\t_logic.rowAdd();\n\t\t\t\t\t\t\t\t\t// self.addNewRow({});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\n\t\t\t}\n\t\t]\n\t}\n\n\n\n\n\t// Our init() function for setting up our UI\n\tvar _init = function() {\n\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t\tDataTable.init({\n\t\t\tonEditorMenu:_logic.callbackHeaderEditorMenu\n\t\t});\n\n\t\tPopupDefineLabelComponent.init({\n\t\t\tonChange:_logic.callbackDefineLabel\t\t// be notified when there is a change in the label\n\t\t});\n\n\t\tPopupNewDataFieldComponent.init({\n\t\t\tonSave:_logic.callbackAddFields\t\t\t// be notified when a new Field is created & saved\n\t\t});\n\n\t\tPopupHideFieldComponent.init({\n\t\t\tonChange:_logic.callbackFieldsVisible\t\t// be notified when there is a change in the hidden fields\n\t\t});\n\n\n\t\t$$(ids.noSelection).show();\n\t}\n\n\n\tvar CurrentObject = null;\n\n\t// our internal business logic\n\tvar _logic = {\n\n\n\t\t/**\n\t\t * @function callbackDefineLabel\n\t\t *\n\t\t * call back for when the Define Label popup is finished.\n\t\t */\n\t\tcallbackAddFields:function(field) {\n\t\t\tDataTable.refresh();\n\t\t},\n\n\n\t\t/**\n\t\t * @function callbackDefineLabel\n\t\t *\n\t\t * call back for when the Define Label popup is finished.\n\t\t */\n\t\tcallbackDefineLabel: function() {\n\n\t\t},\n\n\n\t\t/**\n\t\t * @function callbackFieldsVisible\n\t\t *\n\t\t * call back for when the hidden fields have changed.\n\t\t */\n\t\tcallbackFieldsVisible: function() {\n\n\t\t\tvar hiddenFields = CurrentObject.workspaceHiddenFields;\n\t\t\t$$(ids.buttonFieldsVisible).define('badge', hiddenFields.length);\n\t\t\t$$(ids.buttonFieldsVisible).refresh();\n\n\t\t\tDataTable.refresh();\n\t\t},\n\n\n\t\t/**\n\t\t * @function callbackFieldsVisible\n\t\t *\n\t\t * call back for when an editor menu action has been selected.\n\t\t * @param {string} action [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n\t\t */\n\t\tcallbackHeaderEditorMenu: function(action, field, node) {\n\n\t\t\tswitch(action) {\n\n\t\t\t\tcase 'hide':\n\t\t\t\tcase 'filter':\n\t\t\t\tcase 'sort':\nconsole.error('!! TODO: callbackHeaderEditorMenu():  unimplemented action:'+action);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'edit':\n\t\t\t\t\t// pass control on to our Popup:\n\t\t\t\t\tPopupNewDataFieldComponent.show(node, field);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'delete':\n\n\t\t\t\t\t// verify they mean to do this:\n\t\t\t\t\tOP.Dialog.Confirm({\n\t\t\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t\t\t\tmessage: labels.component.confirmDeleteMessage.replace('{0}', field.label),\n\t\t\t\t\t\tcallback:function( isOK ) {\n\n\t\t\t\t\t\t\tif (isOK) {\n\n\t\t\t\t\t\t\t\tfield.destroy()\n\t\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\t\tDataTable.refresh();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t},\n\n\n\t\t/**\n\t\t * @function clearObjectWorkspace()\n\t\t *\n\t\t * Clear the object workspace. \n\t\t */\n\t\tclearObjectWorkspace:function(){\n\t\t\t\n\t\t\t// NOTE: to clear a visual glitch when multiple views are updating\n\t\t\t// at one time ... stop the animation on this one:\n\t\t\t$$(ids.noSelection).show(false, false);\n\t\t},\n\n\n\t\t/**\n\t\t * @function show()\n\t\t *\n\t\t * Show this component.\n\t\t */\n\t\tshow:function() {\n\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\n\t\t/**\n\t\t * @function toolbarAddFields\n\t\t *\n\t\t * Show the popup to allow the user to create new fields for \n\t\t * this object.\n\t\t */\n\t\ttoolbarAddFields: function($view) {\n\t\t\tPopupNewDataFieldComponent.show($view);\n\t\t},\n\n\n\t\ttoolbarButtonExport: function($view) {\nconsole.error('TODO: Button Export()');\n\t\t},\n\n\n\t\t/**\n\t\t * @function toolbarDefineLabel\n\t\t *\n\t\t * Show the popup to allow the user to define the default label for \n\t\t * this object.\n\t\t */\n\t\ttoolbarDefineLabel: function($view) {\n\t\t\tPopupDefineLabel.show($view);\n\t\t},\n\n\n\t\t/**\n\t\t * @function toolbarFieldsVisible\n\t\t *\n\t\t * Show the popup to allow the user to hide columns for this view.\n\t\t */\n\t\ttoolbarFieldsVisible: function($view) {\n\t\t\tPopupHideField.show($view);\n\t\t},\n\n\n\t\t/**\n\t\t * @function toolbarFilter\n\t\t *\n\t\t * show the popup to add a filter to the datatable\n\t\t */\n\t\ttoolbarFilter: function($view) {\n// self.refreshPopupData();\n// $$(self.webixUiId.filterFieldsPopup).show($view);\nconsole.error('TODO: button filterFields()');\n\t\t},\n\n\n\t\t/**\n\t\t * @function toolbarFrozen\n\t\t *\n\t\t * show the popup to freeze columns for the datatable\n\t\t */\n\t\ttoolbarFrozen: function ($view) {\nconsole.error('TODO: toolbarFrozen()');\n\t\t},\n\n\n\t\ttoolbarPermission: function ($view) {\nconsole.error('TODO: toolbarPermission()');\n\t\t},\n\n\n\t\t/**\n\t\t * @function toolbarSort\n\t\t *\n\t\t * show the popup to sort the datatable\n\t\t */\n\t\ttoolbarSort:function($view) {\n// self.refreshPopupData();\n// $$(self.webixUiId.sortFieldsPopup).show($view);\nconsole.error('TODO: toolbarSort()');\n\t\t}\n\t}\n\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\n\t\t/**\n\t\t * @function populateObjectWorkspace()\n\t\t *\n\t\t * Initialize the Object Workspace with the provided ABObject.\n\t\t *\n\t\t * @param {ABObject} object  \tcurrent ABObject instance we are working with.\n\t\t */\n\t\tpopulateObjectWorkspace: function(object) {\n\n\t\t\t$$(ids.toolbar).show();\n\t\t\t$$(ids.selectedObject).show();\n\n\t\t\tCurrentObject = object;\n\n\t\t\tApp.actions.populateObjectPopupAddDataField(object);\n\n\t\t\t// update hiddenFields \n\t\t\t_logic.callbackFieldsVisible();\n\n\n\t\t\tPopupDefineLabelComponent.objectLoad(object);\n\t\t\tPopupHideFieldComponent.objectLoad(object);\n\t\t\tDataTable.objectLoad(object);\n\t\t}\n\n\t}\n\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component\n\t\tactions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tclearObjectWorkspace:_logic.clearObjectWorkspace,\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n})\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace.js","\n/*\n * ab_work_object_workspace\n *\n * Manage the Object Workspace area.\n *\n */\n\nimport \"./ab_work_object_workspace_popupHeaderEditMenu\"\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\n\t}\n}\n\n\nvar idBase = 'ab_work_object_workspace_datatable';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\n\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase+'_component'),\n\n\t}\n\n\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"datatable\",\n\t\tid: ids.component,\n\t\tresizeColumn: true,\n\t\tresizeRow: true,\n\t\tprerender: false,\n\t\teditable: true,\n\t\tfixedRowHeight: false,\n\t\teditaction: \"custom\",\n\t\tselect: \"cell\",\n\t\tdragColumn: true,\n//height:800,  // #hack!\n\t\ton: {\n\t\t\tonBeforeSelect: function (data, preserve) {\nconsole.error('!! ToDo: onBeforeSelect()');\n\t\t\t\t// var itemNode = this.getItemNode({ row: data.row, column: data.column });\n\n\t\t\t\t// var column = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == data.column; });\n\t\t\t\t// if (!column || column.length < 1) {\n\t\t\t\t// \tconsole.log('System could not found this column data');\n\t\t\t\t// \treturn false;\n\t\t\t\t// } else\n\t\t\t\t// \tcolumn = column[0];\n\n\t\t\t\t// return dataFieldsManager.customEdit(AD.classes.AppBuilder.currApp, AD.classes.AppBuilder.currApp.currObj, column, data.row, itemNode);\n\t\t\t},\n\t\t\tonAfterSelect: function (data, prevent) {\nconsole.error('!! todo: onAfterSelect()');\n\t\t\t\t// var columnConfig = $$(self.webixUiId.objectDatatable).getColumnConfig(data.column),\n\t\t\t\t// \tfieldData = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == data.column; });\n\n\t\t\t\t// if (!fieldData || fieldData.length < 1) {\n\t\t\t\t// \tconsole.log('System could not found this column data');\n\t\t\t\t// \treturn false;\n\t\t\t\t// } else\n\t\t\t\t// \tfieldData = fieldData[0];\n\n\t\t\t\t// // Custom update data\n\t\t\t\t// if (dataFieldsManager.hasCustomEdit(columnConfig.fieldName, fieldData))\n\t\t\t\t// \treturn false;\n\n\t\t\t\t// // Normal update data\n\t\t\t\t// this.editCell(data.row, data.column);\n\t\t\t},\n\t\t\tonCheck: function (row, col, val) { // Update checkbox data\nconsole.error('!! ToDo: onCheck()');\n\t\t\t\t// var item = $$(self.webixUiId.objectDatatable).getItem(row);\n\n\t\t\t\t// self.updateRowData({ value: (val > 0 ? true : false) }, { row: row, column: col }, false)\n\t\t\t\t// \t.fail(function (err) {\n\t\t\t\t// \t\t// Rollback\n\t\t\t\t// \t\titem[col] = !val;\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).updateItem(row, item);\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).refresh(row);\n\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t})\n\t\t\t\t// \t.then(function (result) {\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t});\n\t\t\t},\n\t\t\tonBeforeEditStop: function (state, editor) {\nconsole.error('!! ToDo: onCheck()');\n\t\t\t\t// var column = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == editor.column; });\n\n\t\t\t\t// if (!column || column.length < 1) return true;\n\t\t\t\t// column = column[0];\n\n\t\t\t\t// var passValidate = dataFieldsManager.validate(column, state.value);\n\n\t\t\t\t// if (!passValidate) {\n\t\t\t\t// \t$$(self.webixUiId.objectDatatable).editCancel();\n\t\t\t\t// }\n\n\t\t\t\t// return passValidate;\n\t\t\t},\n\t\t\tonAfterEditStop: function (state, editor, ignoreUpdate) {\nconsole.error('!! ToDo: onAfterEditStop()');\n\t\t\t\t// var item = $$(self.webixUiId.objectDatatable).getItem(editor.row);\n\n\t\t\t\t// self.updateRowData(state, editor, ignoreUpdate)\n\t\t\t\t// \t.fail(function (err) { // Cached\n\t\t\t\t// \t\titem[editor.column] = state.old;\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).updateItem(editor.row, item);\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).refresh(editor.row);\n\n\t\t\t\t// \t\t// TODO : Message\n\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t})\n\t\t\t\t// \t.then(function (result) {\n\t\t\t\t// \t\tif (item) {\n\t\t\t\t// \t\t\titem[editor.column] = state.value;\n\n\t\t\t\t// \t\t\tif (result && result.constructor.name === 'Cached' && result.isUnsync())\n\t\t\t\t// \t\t\t\titem.isUnsync = true;\n\n\t\t\t\t// \t\t\t$$(self.webixUiId.objectDatatable).updateItem(editor.row, item);\n\t\t\t\t// \t\t}\n\n\t\t\t\t// \t\t// TODO : Message\n\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t});\n\t\t\t},\n\t\t\tonColumnResize: function (id, newWidth, oldWidth, user_action) {\nconsole.error('!! ToDo: onColumnResize()');\n\t\t\t\t// var columnConfig = $$(self.webixUiId.objectDatatable).getColumnConfig(id);\n\t\t\t\t// var column = self.data.columns.filter(function (col) { return col.id == columnConfig.dataId; });\n\t\t\t\t// if (column && column[0])\n\t\t\t\t// \tcolumn[0].setWidth(newWidth);\n\n\t\t\t\t// // if (typeof columnConfig.template !== 'undefined' && columnConfig.template !== null) {\n\t\t\t\t// // \t// For calculate/refresh row height\n\t\t\t\t// // \t$$(self.webixUiId.objectDatatable).render();\n\t\t\t\t// // }\n\t\t\t},\n\t\t\tonBeforeColumnDrag: function (sourceId, event) {\nconsole.error('!! ToDo: onBeforeColumnDrag()');\n\t\t\t\t// if (sourceId === 'appbuilder_trash') // Remove column\n\t\t\t\t// \treturn false;\n\t\t\t\t// else\n\t\t\t\t// \treturn true;\n\t\t\t},\n\t\t\tonBeforeColumnDrop: function (sourceId, targetId, event) {\nconsole.error('!! ToDo: onBeforeColumnDrag()');\n\t\t\t\t// if (targetId === 'appbuilder_trash') // Remove column\n\t\t\t\t// \treturn false;\n\n\t\t\t\t// if ($$(self.webixUiId.visibleButton).config.badge > 0) {\n\t\t\t\t// \twebix.alert({\n\t\t\t\t// \t\ttitle: self.labels.object.couldNotReorderField,\n\t\t\t\t// \t\tok: self.labels.common.ok,\n\t\t\t\t// \t\ttext: self.labels.object.couldNotReorderFieldDetail\n\t\t\t\t// \t});\n\n\t\t\t\t// \treturn false;\n\t\t\t\t// }\n\t\t\t},\n\t\t\tonAfterColumnDrop: function (sourceId, targetId, event) {\nconsole.error('!! ToDo: onAfterColumnDrop()');\n\t\t\t\t// self.reorderColumns();\n\t\t\t},\n\t\t\tonAfterColumnShow: function (id) {\nconsole.error('!! ToDo: onAfterColumnShow()');\n\t\t\t\t// $$(self.webixUiId.visibleFieldsPopup).showField(id);\n\t\t\t},\n\t\t\tonAfterColumnHide: function (id) {\nconsole.error('!! ToDo: onAfterColumnHide()');\n\t\t\t\t// $$(self.webixUiId.visibleFieldsPopup).hideField(id);\n\t\t\t},\n\n\t\t\tonHeaderClick: function (id, e, node) {\n\t\t\t\t_logic.onHeaderClick(id, e, node);\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\n\n\t// Our init() function for setting up our UI\n\tvar _init = function(options) {\n\n\t\t// register our callbacks:\n\t\tfor(var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\t}\n\n\n\tvar CurrentObject = null;\t\t// current ABObject being displayed\n\tvar EditField\t= null;\t\t\t// which field (column header) is popup editor for\n\tvar EditNode\t= null;\t\t\t// which html node (column header) is popup editor for\n\n\t// our internal business logic\n\tvar _logic = {\n\n\n\t\tcallbacks:{\n\n\t\t\t/**\n\t\t\t * @function onEditorMenu\n\t\t\t * report back which menu action was clicked.\n\t\t\t * We get the info from our popupHeaderEditor component, but all the \n\t\t\t * logic to respond to those options are in our parent. So we pass it \n\t\t\t * on ...\n\t\t\t * \n\t\t\t * @param {string} action [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n\t\t\t * @param {ABField} field  the field to which the action is to be applied\n\t\t\t * @param {dom} node  the optional html node for this header item.\n\t\t\t */\n\t\t\tonEditorMenu: function(action, field) {  }\n\t\t},\n\n\n\t\t/**\n\t\t * @function callbackHeaderEdit\n\t\t *\n\t\t * call back for when an item in the Header Edit Menu has been selected.\n\t\t * @param {string} action the action requested for this field:\n\t\t */\n\t\tcallbackHeaderEdit: function(action) {\n\n\t\t\tPopupHeaderEdit.hide();\n\t\t\t_logic.callbacks.onEditorMenu(action, EditField, EditNode);\n\t\t},\n\n\n\t\t/**\n\t\t * @function onHeaderClick\n\t\t * \n\t\t * process the user clicking on the header for one of our columns.\n\t\t */\n\t\tonHeaderClick: function (id, e, node) {\n\n\t\t\t// Ignore system columns\n\t\t\tif (id.column == 'appbuilder_trash')\n\t\t\t\treturn false;\n\n\t\t\t// save our EditNode & EditField:\n\t\t\tEditNode = node;\n\n\t\t\tEditField = CurrentObject.fields(function(f){ return f.id == id.column; })[0];\n\t\t\tif (EditField) {\n\n\t\t\t\t// show the popup\n\t\t\t\tPopupHeaderEdit.show(node);\n\t\t\t}\n\t\t\n\t\t\treturn false;\n\t\t},\n\n\n\t\tobjectLoad:function(object) {\n\n\t\t\tCurrentObject = object;\n\n\t\t\tPopupHeaderEditComponent.objectLoad(object);\n\n\t\t\t_logic.refresh();\n\t\t},\n\n\n\n\t\t// rebuild the data table view:\n\t\trefresh: function() {\n\n\t\t\t// wait until we have an Object defined:\n\t\t\tif (CurrentObject) {\n\n\t\t\t\tvar DataTable = $$(ids.component);\n\t\t\t\tDataTable.clearAll();\n\n\n\t\t\t\t// update DataTable structure:\n\t\t\t\tvar columnHeaders = CurrentObject.columnHeaders(true);\n\t\t\t\tDataTable.refreshColumns(columnHeaders)\n\n\n\t\t\t\t// update DataTable Content\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * @function show()\n\t\t *\n\t\t * Show this component.\n\t\t */\n\t\tshow:function() {\n\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\n\t}\n\n\n\n\t//// NOTE: declare these after _logic  for the callbacks:\n\n\tvar PopupHeaderEditComponent = OP.Component['ab_work_object_workspace_popupHeaderEditMenu'](App);\n\tvar PopupHeaderEdit = webix.ui(PopupHeaderEditComponent.ui);\n\tPopupHeaderEditComponent.init({\n\t\tonClick:_logic.callbackHeaderEdit\t\t// be notified when there is a change in the hidden fields\n\t})\n\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\n\t}\n\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component\n\t\tactions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tobjectLoad: _logic.objectLoad,\n\t\trefresh: _logic.refresh,\n\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n})\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace_datatable.js","\n/*\n * ab_work_object_workspace_popupDefineLabel\n *\n * Manage the Add New Data Field popup.\n *\n */\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tlabelFormat: L('ab.define_label.labelFormat', \"*Label format\"),\n\t\tselectFieldToGenerate: L('ab.define_label.selectFieldToGenerate', \"*Select field item to generate format.\"),\n\t\tlabelFields: L('ab.define_label.labelFields', \"*Fields\"),\n\t}\n}\n\n\nvar idBase = 'ab_work_object_workspace_popupDefineLabel';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\n\t// internal list of Webix IDs to reference our UI components.\n\t\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t\tformat: App.unique(idBase + '_format'),\n\t\tlist: App.unique(idBase + '_list'),\n\n\t\tbuttonSave: App.unique(idBase + '_buttonSave'),\n\t}\n\n\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview:\"popup\",\n\t\tid: ids.component,\n\t\tmodal: true,\n\t\tautoheight:true,\n\t\t// maxHeight: 420,\n\n\t\twidth: 500,\n\t\tbody: {\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: \"<b>{0}</b>\".replace(\"{0}\", labels.component.labelFormat)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\tid: ids.format,\n\t\t\t\t\theight: 100\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: labels.component.selectFieldToGenerate\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: \"<b>{0}</b>\".replace(\"{0}\", labels.component.labelFields)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: 'list',\n\t\t\t\t\tid: ids.list,\n\t\t\t\t\twidth: 500,\n\t\t\t\t\tmaxHeight: 180,\n\t\t\t\t\tselect: false,\n\t\t\t\t\ttemplate: '#label#',\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonItemClick: function (id, e, node) {\n\t\t\t\t\t\t\t_logic.onItemClick(id, e, node);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"button\", value: labels.common.cancel, width: 100, \n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t_logic.buttonCancel(); \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"button\", id: ids.buttonSave, label: labels.common.save, type: \"form\", width: 120, \n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t_logic.buttonSave();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\ton: {\n\t\t\tonShow: function () {\n\t\t\t\t_logic.onShow();\n\t\t\t}\n\t\t}\n\t}\n\n\n\tvar _currentObject = null;\n\n\t// Our init() function for setting up our UI\n\tvar _init = function(options) {\n\n\t\t// register our callbacks:\n\t\tfor(var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\n\t}\n\n\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\t\n\t\tbuttonCancel:function() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\n\t\tbuttonSave:function() {\n\n\t\t\t// disable our save button\n\t\t\tvar ButtonSave = $$(ids.buttonSave);\n\t\t\tButtonSave.disable();\n\n\t\t\t// get our current labelFormt\n\t\t\tvar labelFormat = $$(ids.format).getValue();\n\n\t\t\t// start our spinner\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.showProgress({ type: 'icon' });\n\n\t\t\t// convert from our User Friendly {Label} format to our \n\t\t\t// object friendly {Name} format\n\t\t\tList.data.each(function (d) {\n\t\t\t\tlabelFormat = labelFormat.replace(new RegExp('{' + d.label + '}', 'g'), '{' + d.id + '}');\n\t\t\t});\n\n\t\t\t// save the value\n\t\t\t_currentObject.labelFormat = labelFormat;\n\t\t\t_currentObject.save()\n\t\t\t.then(function(){\n\n\t\t\t\t// all good, so\n\t\t\t\tList.hideProgress();\t// hide the spinner\n\t\t\t\tButtonSave.enable();\t// enable the save button\n\t\t\t\t_logic.hide();\t\t\t// hide the popup\n\n\t\t\t\t// alert our parent component we are done with our changes:\n\t\t\t\t_logic.callbacks.onSave();\n\t\t\t})\n\t\t\t.catch(function(err){\n\t\t\t\tList.hideProgress();\t// hide the spinner\n\t\t\t\tButtonSave.enable();\t// enable the save button\n\n\t\t\t\t// display some error to the user:\n\t\t\t\tOP.Error.log('Error trying to save our Object', {error:err});\n\t\t\t})\n\t\t},\n\n\n\t\tcallbacks:{\n\t\t\tonCancel: function() { console.warn('NO onCancel()!') },\n\t\t\tonSave  : function(field) { console.warn('NO onSave()!') },\n\t\t},\n\n\n\t\thide:function() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\n\t\tobjectLoad: function(object) {\n\t\t\t_currentObject = object;\n\n\t\t\t// clear our list\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.clearAll();\n\n\n\t\t\t// refresh list with new set of fields\n\t\t\tvar allFields = _currentObject.fields();\n\t\t\tvar listFields = [];\n\t\t\tallFields.forEach((f) => {\n\t\t\t\tlistFields.push({\n\t\t\t\t\tid: f.name,\n\t\t\t\t\tlabel: f.label\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tList.parse(allFields);\n\t\t},\n\n\n\t\tonItemClick: function(id, e, node) {\n\n\t\t\tvar selectedItem = $$(ids.list).getItem(id);\n\n\t\t\tvar labelFormat = $$(ids.format).getValue();\n\t\t\tlabelFormat += '{{0}}'.replace('{0}', selectedItem.label);\n\n\t\t\t$$(ids.format).setValue(labelFormat);\n\t\t},\n\n\n\t\tonShow: function() {\n\n\t\t\t\tvar labelFormat = _currentObject.labelFormat;\n\n\t\t\t\tvar Format = $$(ids.format);\n\t\t\t\tvar List = $$(ids.list);\n\n\t\t\t\tFormat.setValue('');\n\n\t\t\t\tFormat.enable();\n\t\t\t\tList.enable();\n\t\t\t\t$$(ids.buttonSave).enable();\n\n\n\t\t\t\t// our labelFormat should be in a computer friendly {name} format\n\t\t\t\t// here we want to convert it to a user friendly {label} format\n\t\t\t\t// to use in our popup:\n\t\t\t\tif (labelFormat) {\n\t\t\t\t\tif (List.data && List.data.count() > 0) {\n\t\t\t\t\t\tList.data.each(function (d) {\n\t\t\t\t\t\t\tlabelFormat = labelFormat.replace('{' + d.id + '}', '{' + d.label + '}');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse { \n\t\t\t\t\t// no label format:\n\t\t\t\t\t// Default to first field\n\t\t\t\t\tif (List.data && List.data.count() > 0) {\n\t\t\t\t\t\tvar field = List.getItem(List.getFirstId());\n\t\t\t\t\t\tlabelFormat = '{' + field.label + '}';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tFormat.setValue(labelFormat || '');\n\t\t},\n\n\n\t\t/**\n\t\t * @function show()\n\t\t *\n\t\t * Show this component.\n\t\t * @param {obj} $view  the webix.$view to hover the popup around.\n\t\t */\n\t\tshow:function($view) {\n\n\t\t\t$$(ids.component).show($view);\n\t\t}\n\n\t}\n\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\n\t}\n\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component  \n\t\tactions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t// interface methods for parent component:\n\t\tobjectLoad: _logic.objectLoad,\n\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n})\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupDefineLabel.js","\n/*\n * ab_work_object_workspace_popupHeaderEditMenu\n *\n * Manage the Add New Data Field popup.\n *\n */\n\n// import ABApplication from \"../classes/ABApplication\"\n// import ABFieldManager from \"../classes/ABFieldManager\"\n\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\n\t\thideField: L('ab.object.hideField', \"*Hide field\"),\n\t\tfilterField: L('ab.object.filterField', \"*Filter field\"),\n\t\tsortField: L('ab.object.sortField', \"*Sort field\"),\n\t\teditField: L('ab.object.editField', \"*Edit field\"),\n\t\tdeleteField: L('ab.object.deleteField', \"*Delete field\")\n\t}\n}\n\n\nvar idBase = 'ab_work_object_workspace_popupHeaderEditMenu';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\n\t// internal list of Webix IDs to reference our UI components.\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t\t\n\t\tlist: App.unique(idBase + '_list')\n\t}\n\n\n\t// the list of options shown in the popup menu:\n\tvar menuItems = {\n\n\t\t// Normally all items are available\n\t\t'default': [\n\t\t\t{ command: labels.component.hideField, icon: \"fa-columns\" },\n\t\t\t{ command: labels.component.filterField, icon: \"fa-filter\" },\n\t\t\t{ command: labels.component.sortField, icon: \"fa-sort\" },\n\t\t\t{ command: labels.component.editField, icon: \"fa-pencil-square-o\" },\n\t\t\t{ command: labels.component.deleteField, icon: \"fa-trash\" }\n\t\t],\n\t\t// But for imported objects, edit & delete are disabled\n\t\t'imported': [\n\t\t\t{ command: labels.component.hideField, icon: \"fa-columns\" },\n\t\t\t{ command: labels.component.filterField, icon: \"fa-filter\" },\n\t\t\t{ command: labels.component.sortField, icon: \"fa-sort\" },\n\t\t\t//{ command: labels.editField, icon: \"fa-pencil-square-o\" },\n\t\t]\n\t};\n\n\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview:\"popup\",\n\t\tid: ids.component,\n\t\tmodal: false,\n\t\tautoheight:true,\n\n\n\t\twidth: 180,\n\t\tbody: {\n\t\t\tid: ids.list,\n\t\t\tview: 'list',\n\t\t\tdatatype: \"json\",\n\t\t\tautoheight: true,\n\t\t\tselect: false,\n\t\t\ttemplate: \"<i class='fa #icon#' aria-hidden='true'></i> #command#\",\n\t\t\tdata: menuItems['default'],\t// start with the default set:\n\t\t\ton: {\n\t\t\t\t'onItemClick': function (timestamp, e, node) {\n\t\t\t\t\t_logic.onItemClick(timestamp, e, node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\tvar CurrentObject = null;\n\n\n\t// Our init() function for setting up our UI\n\tvar _init = function(options) {\n\n\t\t// register our callbacks:\n\t\tfor(var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n// $$(ids.editDefinitions).cells() // define the edit Definitions here.\n\t}\n\n\n\n\t// our internal business logic\n\tvar _logic = {\n\n\n\n\t\tcallbacks:{\n\t\t\t/**\n\t\t\t * @function onClick\n\t\t\t * report back which menu action was clicked.\n\t\t\t * possible actions: [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n\t\t\t */\n\t\t\tonClick: function(action) {  }\n\t\t},\n\n\n\n\t\thide:function() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\n\t\t/**\n\t\t * @function objectLoad\n\t\t * Ready the Popup according to the current object\n\t\t * @param {ABObject} object  the currently selected object.\n\t\t */\n\t\tobjectLoad: function(object) {\n\t\t\tCurrentObject = object;\n\n// TODO:\n// check if object is imported, if so, then switch the shown fields to the imported menu:\n\n\t\t\tvar listItems = menuItems['default'];\n// if (object.isImported) {\n// \tlistItems = menuItems['imported'];\n// }\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.clearAll();\n\t\t\tList.parse(listItems);\n\t\t},\n\n\n\t\t/**\n\t\t * @function onItemClick\n\t\t * when an entry in our popup menu is selected, make sure our parent component is\n\t\t * alerted to the action requested.\n\t\t *\n\t\t * possible return action values: [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n\t\t *\n\t\t */\n\t\tonItemClick: function(timestamp, e, node) {\n\n\t\t\tvar action = null;\n\t\t\tvar menu = node.textContent.trim();\n\t\t\tswitch(menu) {\n\t\t\t\tcase labels.component.hideField:\n\t\t\t\t\taction = 'hide';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.filterField:\n\t\t\t\t\taction = 'filter';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.sortField:\n\t\t\t\t\taction = 'sort';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.editField:\n\t\t\t\t\taction = 'edit';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.deleteField:\n\t\t\t\t\taction = 'delete';\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t_logic.callbacks.onClick(action);\n\t\t},\n\n\n\t\t/**\n\t\t * @function show()\n\t\t *\n\t\t * Show this component.\n\t\t * @param {obj} $view  the webix.$view to hover the popup around.\n\t\t */\n\t\tshow:function($view) {\n\n\t\t\t$$(ids.component).show($view);\n\t\t}\n\n\t}\n\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t// populateObjectPopupAddDataField: function(object) {\n\t\t// \t_currentObject = object;\n\t\t// }\n\n\t}\n\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component\n\t\tactions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\thide: _logic.hide,\n\t\tobjectLoad: _logic.objectLoad, \n\t\tshow:_logic.show,\t\t// function($view, field_id) \n\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n})\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupHeaderEditMenu.js","\n/*\n * ab_work_object_workspace_popupHideFields\n *\n * Manage the Hide Fields popup.\n *\n */\n\nimport ABApplication from \"../classes/ABApplication\"\n\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tshowAll: L('ab.visible_fields.showAll', \"*Show All\"),\n\t\thideAll: L('ab.visible_fields.hideAll', \"*Hide All\"),\n\t}\n}\n\n\nvar idBase = 'ab_work_object_workspace_popupHideFields';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\n\t// internal list of Webix IDs to reference our UI components\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t\tlist: App.unique(idBase + \"_list\"),\n\t}\n\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview:\"popup\",\n\t\tid: ids.component,\n\t\t// modal: true,\n\t\tautoheight:true,\n        body: {\n            rows: [\n                {\n                    cols: [\n                        {\n                            view: 'button',\n                            value: labels.component.showAll,\n                            click: function () {\n\t\t\t\t\t\t\t\t_logic.clickShowAll();\n                            }\n                        },\n                        {\n                            view: 'button',\n                            value: labels.component.hideAll,\n                            click: function () {\n\t\t\t\t\t\t\t\t_logic.clickHideAll()\n                            }\n                        }\n                    ]\n                },\n                {\n                    view: 'list',\n                    id: ids.list,\n                    autoheight: true,\n                    select: false,\n                    template: '<span style=\"min-width: 18px; display: inline-block;\"><i class=\"fa fa-circle ab-visible-field-icon\"></i>&nbsp;</span> #label#',\n                    on: {\n                        onItemClick: function (id, e, node) {\n\t\t\t\t\t\t\t_logic.listItemClick(id, e, node);\n                        }\n                    }\n                }\n            ]\n        },\n        on: {\n            onShow: function () {\n                _logic.iconsReset();\n            }\n        }\n    }\n\t\t\n\n\n\t// Our init() function for setting up our UI\n\tvar _init = function(options) {\n\n\t\t// register our callbacks:\n\t\tfor(var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t}\n\n\n\tvar CurrentObject = null;\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\tcallbacks:{\n\n\t\t\t/**\n\t\t\t * @function onChange\n\t\t\t * called when we have made changes to the hidden field settings \n\t\t\t * of our Current Object.\n\t\t\t *\n\t\t\t * this is meant to alert our parent component to respond to the \n\t\t\t * change.\n\t\t\t */\n\t\t\tonChange:function(){}\n\t\t},\n\n\n\t\t/**\n\t\t * @function clickHideAll\n\t\t * the user clicked the [hide all] option.  So hide all our fields.\n\t\t */\n\t\tclickHideAll: function () {\n\n\t\t\t// create an array of all our field.id's:\n\t\t\tvar allFields = CurrentObject.fields();\n\t\t\tvar newHidden = [];\n\t\t\tallFields.forEach(function(f){\n\t\t\t\tnewHidden.push(f.id);\n\t\t\t})\n\n\t\t\t// store that\n\t\t\tCurrentObject.workspaceHiddenFields = newHidden;\n\t\t\tCurrentObject.save()\n\t\t\t.then(function(){\n\t\t\t\t_logic.iconsReset()\n\t\t\t\t_logic.callbacks.onChange()\n\t\t\t})\n\t\t\t.catch(function(err){\n\t\t\t\tOP.Error.log('Error trying to save workspaceHiddenFields', {error:err, fields:newHidden });\n\t\t\t})\n\t\t},\n\n\n\t\t/**\n\t\t * @function clickShowAll\n\t\t * the user clicked the [show all] option.  So show all our fields.\n\t\t */\n\t\tclickShowAll: function () {\n\n\t\t\t// store an empty array of hidden fields\n\t\t\tCurrentObject.workspaceHiddenFields = [];\n\t\t\tCurrentObject.save()\n\t\t\t.then(function(){\n\t\t\t\t_logic.iconsReset();\n\t\t\t\t_logic.callbacks.onChange()\n\t\t\t})\n\t\t\t.catch(function(err){\n\t\t\t\tOP.Error.log('Error trying to save workspaceHiddenFields', {error:err, fields:newHidden });\n\t\t\t})\n\t\t},\n\n\n\t\t/**\n\t\t * @function listItemClick\n\t\t * update the clicked field setting.\n\t\t */\n\t\tlistItemClick: function(id, e, node) {\n\t\t\tvar newFields = [];\n\t\t\tvar isHidden = CurrentObject.workspaceHiddenFields.filter((fID) => { return fID == id;}).length>0;\n\t\t\tif (isHidden) {\n\t\t\t\t// unhide this field\n\n\t\t\t\t// get remaining fields \n\t\t\t\tnewFields = CurrentObject.workspaceHiddenFields.filter((fID)=>{ return fID != id;});\n\n\t\t\t\t// find the icon and display it:\n\t\t\t\t_logic.iconShow(node);\n\n\t\t\t} else {\n\t\t\t\tnewFields = CurrentObject.workspaceHiddenFields;\n\t\t\t\tnewFields.push(id);\n\n\t\t\t\t_logic.iconHide(node);\n\t\t\t}\n\n\t\t\t// update our Object with current hidden fields\n\t\t\tCurrentObject.workspaceHiddenFields = newFields;\n\t\t\tCurrentObject.save()\n\t\t\t.then(function(){\n\t\t\t\t_logic.callbacks.onChange()\n\t\t\t})\n\t\t\t.catch(function(err){\n\t\t\t\tOP.Error.log('Error trying to save workspaceHiddenFields', {error:err, fields:newFields });\n\t\t\t})\n\t\t},\n\n\n\t\t/**\n\t\t * @function iconHide\n\t\t * Hide the icon for the given node\n\t\t * @param {DOM} node  the html dom node of the element that contains our icon\n\t\t */\n\t\ticonHide: function(node) {\n\t\t\tif (node) {\n\t\t\t\tnode.querySelector('.ab-visible-field-icon').style.visibility = \"hidden\";\n\t\t\t}\n\t\t}, \n\n\n\t\t/**\n\t\t * @function iconShow\n\t\t * Show the icon for the given node\n\t\t * @param {DOM} node  the html dom node of the element that contains our icon\n\t\t */\n\t\ticonShow: function(node) {\n\t\t\tif (node) {\n\t\t\t\tnode.querySelector('.ab-visible-field-icon').style.visibility = \"visible\";\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * @function iconsReset\n\t\t * Reset the icon displays according to the current values in our Object\n\t\t */\n\t\ticonsReset: function() {\n\n\t\t\tvar List = $$(ids.list);\n\n\t\t\t// for each item in the List\n\t\t\tvar id = List.getFirstId();\n\t\t\twhile(id) {\n\n\t\t\t\t// find it's HTML Node\n\t\t\t\tvar node = List.getItemNode(id);\n\n\t\t\t\t// if this item is not hidden, show it.\n\t\t\t\tif (CurrentObject.workspaceHiddenFields.indexOf(id) == -1) {\n\t\t\t\t\t_logic.iconShow(node);\n\t\t\t\t} else {\n\t\t\t\t\t// else hide it\n\t\t\t\t\t_logic.iconHide(node);\n\t\t\t\t}\n\n\t\t\t\t// next item\n\t\t\t\tid = List.getNextId(id);\n\t\t\t}\t\t\t\n\n\t\t},\n\n\n\t\t/**\n\t\t * @function objectLoad\n\t\t * Ready the Popup according to the current object\n\t\t * @param {ABObject} object  the currently selected object.\n\t\t */\n\t\tobjectLoad: function(object) {\n\t\t\tCurrentObject = object;\n\n\t\t\t// refresh list\n\t\t\tvar allFields = CurrentObject.fields();\n\t\t\tvar listFields = [];\n\t\t\tallFields.forEach((f) => {\n\t\t\t\tlistFields.push({\n\t\t\t\t\tid: f.id,\n\t\t\t\t\tlabel: f.label\n\t\t\t\t})\n\t\t\t})\n\n\t\t\t$$(ids.list).parse(allFields);\n\t\t}\n\t\t\n\t}\n\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\n\t}\n\n\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component  \n\t\tactions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t// interface methods for parent component:\n\t\tobjectLoad: _logic.objectLoad,\n\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n})\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupHideFields.js","\n/*\n * ab_work_object_workspace_popupNewDataField\n *\n * Manage the Add New Data Field popup.\n *\n */\n\nimport ABApplication from \"../classes/ABApplication\"\nimport ABFieldManager from \"../classes/ABFieldManager\"\n\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tchooseType: L('ab.add_fields.chooseType', \"*Choose field type...\"),\n\t\tlabel: L('ab.add_fields.label', \"*Label\"),\n\t\taddNewField: L('ab.add_fields.addNewField', \"*Add Column\"),\n\n\n\t}\n}\n\n\nvar idBase = 'ab_work_object_workspace_popupNewDataField';\nOP.Component.extend(idBase, function(App) {\n\n\tlabels.common = App.labels;\n\n\n\t// internal list of Webix IDs to reference our UI components.\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t\ttypes: App.unique(idBase + '_types'),\n\t\teditDefinitions: App.unique(idBase+'_editDefinitions'),\n\n\t\tbuttonSave: App.unique(idBase+'_buttonSave'),\n\t\tbuttonCancel: App.unique(idBase+'_buttonCancel')\n\t}\n\n\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview:\"popup\",\n\t\tid: ids.component,\n\t\tmodal: true,\n\t\tautoheight:true,\n\t\t// maxHeight: 420,\n\n// ready: function () {\n// \tconsole.error('ready() called!!!')\n// \t_logic.resetState();\n// },\n\n\t\tbody: {\n\t\t\tcss: 'ab-add-fields-popup',\n\t\t\tborderless: true,\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tview: \"menu\",\n\t\t\t\t\tid: ids.types,\n\t\t\t\t\tdata: [{\n\t\t\t\t\t\tvalue: labels.component.chooseType,\n\t\t\t\t\t\tsubmenu: ['dataFieldsManager', '.getFieldMenuList()']\n\t\t\t\t\t}],\n\t\t\t\t\tclick: function (id, ev, node) {\n\t\t\t\t\t\t_logic.typeClick();\n\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonMenuItemClick: function (id, ev, node) {\n\t\t\t\t\t\t\t_logic.onMenuItemClick(id);\n\t\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview:'multiview',\n\t\t\t\t\tid: ids.editDefinitions,\n\t\t\t\t\t// NOTE: can't leave this an empty []. We redefine this value later.\n\t\t\t\t\tcells: [ { id:'del_me', view:'label', label:'edit definition here' } ]\n\t\t\t\t},\n\t\t\t\t{ height: 10 },\n\t\t\t\t{\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{ fillspace: true },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\tvalue: labels.common.cancel,\n\t\t\t\t\t\t\tcss: \"ab-cancel-button\",\n\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t_logic.buttonCancel();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\tid: ids.buttonSave,\n\t\t\t\t\t\t\tlabel: labels.component.addNewField,\n\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t_logic.buttonSave();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\ton: {\n\t\t\tonBeforeShow: function () {\n\t\t\t\t_logic.resetState();\n\t\t\t},\n\t\t\tonShow: function () {\n\t\t\t\t_logic.onShow();\n\t\t\t},\n\t\t\tonHide: function () {\n\t\t\t\t_logic.resetState();\n\t\t\t}\n\t\t}\n\t}\n\n\n\tvar _objectHash = {};\t\t// 'name' => ABFieldXXX object\n\tvar _componentHash = {};\t// 'name' => ABFieldXXX ui component\n\tvar _componentsByType = {}; // 'type' => ABFieldXXX ui component\n\tvar _currentEditor = null;\n\tvar _currentObject = null;\n\n\tvar defaultEditorComponent = null;\t// the default editor.\n\n\tvar _editField = null;\t\t// field instance being edited\n\n\t// Our init() function for setting up our UI\n\tvar _init = function(options) {\n\n\t\t// register our callbacks:\n\t\tfor(var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\n\t\tvar Fields = ABFieldManager.allFields();\n\n\n\t\t//// we need to load a submenu entry and an editor definition for each\n\t\t//// of our Fields\n\n\n\n\t\tvar submenus = [];\t// Create the submenus for our Data Fields:\n\t\tvar newEditorList = {\n\t\t\tview:'multiview',\n\t\t\tid:ids.editDefinitions,\n\t\t\trows:[]\n\t\t}\n\n\t\tFields.forEach(function(F){\n\n\t\t\tvar menuName = F.defaults().menuName ;\n\t\t\tvar type = F.defaults().type;\n\n\t\t\t// add a submenu for the fields multilingual key\n\t\t\tsubmenus.push( menuName );\n\n\n\t\t\t// Add the Field's definition editor here:\n\t\t\tvar editorComponent = F.propertiesComponent(App);\n\t\t\tif (!defaultEditorComponent) {\n\t\t\t\tdefaultEditorComponent = editorComponent;\n\t\t\t}\n\t\t\tnewEditorList.rows.push(editorComponent.ui);\n\n\n\t\t\t_objectHash[ menuName ] = F;\n\t\t\t_componentHash[ menuName ] = editorComponent;\n\t\t\t_componentsByType[ type ]  = editorComponent;\n\n\t\t})\n\n\n\t\t// the submenu button has a placeholder we need to remove and update\n\t\t// with one that has all our submenus in it.\n\t\tvar firstID = $$(ids.types).getFirstId();\n\t\t$$(ids.types).updateItem(firstID, {\n\t\t\tvalue: labels.component.chooseType,\n\t\t\tsubmenu: submenus\n\t\t})\n\n\t\t// now remove the 'del_me' definition editor placeholder.\n\t\twebix.ui(newEditorList, $$(ids.editDefinitions));\n\n\t\t// hide all the unused editors:\n\t\tfor (var c in _componentHash){\n\t\t\t_componentHash[c].hide();\n\t\t}\n\n\t\tdefaultEditorComponent.show(); // show the default editor\n\t\t_currentEditor = defaultEditorComponent;\n\n\n\t\t// $$(ids.editDefinitions).show();\n\n// $$(ids.editDefinitions).cells() // define the edit Definitions here.\n\t}\n\n\n\n\t// our internal business logic\n\tvar _logic = {\n\n\n\t\tbuttonCancel:function() {\n\n\t\t\t_logic.resetState();\n\n\t\t\t// clear all editors:\n\t\t\tfor (var c in _componentHash) {\n\t\t\t\t_componentHash[c].clear();\n\t\t\t}\n\n\t\t\t// hide this popup.\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\n\t\tbuttonSave:function() {\n\n\t\t\t$$(ids.buttonSave).disable();\n\n\n\t\t\tvar editor = _currentEditor;\n\t\t\tif (editor) {\n\n\t\t\t\t// the editor can define some basic form validations.\n\t\t\t\tif (editor.isValid()) {\n\n\t\t\t\t\tvar values = editor.values();\n\n\t\t\t\t\tvar field = null;\n\t\t\t\t\tvar oldData = null;\n\n\t\t\t\t\t// if this is an ADD operation, (_editField will be undefined)\n\t\t\t\t\tif (!_editField) {\n\n\t\t\t\t\t\t// get a new instance of a field:\n\t\t\t\t\t\tfield = _currentObject.fieldNew(values);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// use our _editField, backup our oldData\n\t\t\t\t\t\toldData = _editField.toObj();\n\t\t\t\t\t\t_editField.fromValues(values);\n\n\t\t\t\t\t\tfield = _editField;\n\t\t\t\t\t}\n\n\n\t\t\t\t\tvar errors = field.isValid();\n\t\t\t\t\tif (errors) {\n\t\t\t\t\t\tOP.Form.isValidationError(errors, $$(editor.ui.id));\n\n\t\t\t\t\t\t// keep our old data\n\t\t\t\t\t\tif (oldData) {\n\t\t\t\t\t\t\tfield.fromValues(oldData);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfield.save()\n\t\t\t\t\t\t.then(()=>{\n\n\t\t\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t\t\t\t_logic.hide();\n\t\t\t\t\t\t\t_currentEditor.clear();\n\t\t\t\t\t\t\t_logic.callbacks.onSave(field)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\n\t\t\t\t} else {\n\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t}\n\n\t\t\t}  else {\n\n\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\ttitle: '! Could not find the current editor.',\n\t\t\t\t\ttext: 'go tell a developer about this.'\n\t\t\t\t})\n\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t}\n\n// if (!inputValidator.validateFormat(fieldInfo.name)) {\n// \tself.enable();\n// \treturn;\n// }\n\n// // Validate duplicate field name\n// var existsColumn = $.grep(dataTable.config.columns, function (c) { return c.id == fieldInfo.name.replace(/ /g, '_'); });\n// if (existsColumn && existsColumn.length > 0 && !data.editFieldId) {\n// \twebix.alert({\n// \t\ttitle: labels.add_fields.duplicateFieldTitle,\n// \t\ttext: labels.add_fields.duplicateFieldDescription,\n// \t\tok: labels.common.ok\n// \t});\n// \tthis.enable();\n// \treturn;\n// }\n\n// if (fieldInfo.weight == null)\n// \tfieldInfo.weight = dataTable.config.columns.length;\n\n// // Call callback function\n// if (base.saveFieldCallback && base.fieldName) {\n// \tbase.saveFieldCallback(base.fieldName, fieldInfo)\n// \t\t.then(function () {\n// \t\t\tself.enable();\n// \t\t\tbase.resetState();\n// \t\t\tbase.hide();\n// \t\t});\n// }\n\n\n\t\t},\n\n\n\t\tcallbacks:{\n\t\t\tonCancel: function() { console.warn('NO onCancel()!') },\n\t\t\tonSave  : function(field) { console.warn('NO onSave()!') },\n\t\t},\n\n\n\n\t\thide:function() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\n\n\t\tmodeAdd:function() {\n\n\t\t\t// show default editor:\n\t\t\tdefaultEditorComponent.show(false, false);\n\t\t\t_currentEditor = defaultEditorComponent;\n\n\t\t\t// show the ability to switch data types\n\t\t\t$$(ids.types).show();\n\n\t\t\t// change button text to 'add'\n\t\t\t$$(ids.buttonSave).define('label', labels.component.addNewField);\n\t\t\t$$(ids.buttonSave).refresh();\n\t\t},\n\n\n\t\tmodeEdit: function(field) {\n\n\t\t\tif (_currentEditor) _currentEditor.hide();\n\n\t\t\t// switch to this field's editor:\n\t\t\t// hide the rest\n\t\t\tfor(var c in _componentsByType) {\n\t\t\t\tif (c == field.type) {\n\t\t\t\t\t_componentsByType[c].populate(field);\n\t\t\t\t\t_componentsByType[c].show(false, false);\n\t\t\t\t\t_currentEditor = _componentsByType[c];\n\t\t\t\t} else {\n\t\t\t\t\t_componentsByType[c].hide();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// hide the ability to switch data types\n\t\t\t$$(ids.types).hide();\n\n\t\t\t// change button text to 'save'\n\t\t\t$$(ids.buttonSave).define('label', labels.common.save);\n\t\t\t$$(ids.buttonSave).refresh();\n\t\t},\n\n\n\t\t/**\n\t\t * @function onMenuItemClick\n\t\t * swap the editor view to match the data field selected in the menu.\n\t\t *\n\t\t * @param {string} name  the menuName() of the submenu that was selected.\n\t\t */\n\t\tonMenuItemClick: function (name) {\n\n\t\t\t// note, the submenu returns the Field.menuName() values.\n\t\t\t// we use that to lookup the Field here:\n\t\t\tvar editor = _componentHash[name];\n\t\t\tif (editor) {\n\t\t\t\teditor.show();\n\t\t\t\t_currentEditor = editor;\n\t\t\t} else {\n\n\t\t\t\t// most likely they clicked on the menu button itself.\n\t\t\t\t// do nothing.\n\n\t\t\t\t// OP.Error.log(\"App Builder:Workspace:Object:NewDataField: could not find editor for submenu item:\"+name, { name:name });\n\t\t\t}\n\n\t\t},\n\n\n\n\t\tonShow: function() {\n\t\t\t// if (!AD.comm.isServerReady()) {\n\t\t\t// \tthis.getTopParentView().hide();\n\n\t\t\t// \twebix.alert({\n\t\t\t// \t\ttitle: labels.add_fields.cannotUpdateFields,\n\t\t\t// \t\ttext: labels.add_fields.waitRestructureObjects,\n\t\t\t// \t\tok: labels.common.ok\n\t\t\t// \t});\n\t\t\t// }\n\t\t\t// else { // Set default field type\n\t\t\t// \tthis.showFieldData('string');\n\t\t\t// }\nconsole.error('TODO: onShow();')\n\t\t},\n\n\n\n\t\tresetState: function() {\n\n\t\t\t// add mode :  change button text to 'Add'\n\t\t\t// show the default editor\nconsole.error('TODO: resetState()');\n\t\t},\n\n\n\n\t\t/**\n\t\t * @function show()\n\t\t *\n\t\t * Show this component.\n\t\t * @param {obj} $view  the webix.$view to hover the popup around.\n\t\t * @param {ABField} field the ABField to edit.  If not provided, then\n\t\t *\t\t\t\t\t\t  this is an ADD operation.\n\t\t */\n\t\tshow:function($view, field) {\n\n\t\t\t_editField = field;\n\t\t\t\n\t\t\tif (_editField) {\n\n\t\t\t\t_logic.modeEdit(field);\n\n\t\t\t} else {\n\n\t\t\t\t_logic.modeAdd();\n\n\t\t\t}\n\n\t\t\t$$(ids.component).show($view);\n\t\t},\n\n\n\n\t\ttypeClick:function() {\n\t\t\t// NOTE: for functional testing we need a way to display the submenu\n\t\t\t// (functional tests don't do .hover very well)\n\t\t\t// so this routine is to enable .click() to show the submenu.\n\n\t\t\tvar subMenuId = $$(ids.types).config.data[0].submenu;\n\n\t\t\t// #HACK Sub-menu popup does not render on initial\n\t\t\t// Force it to render popup by use .getSubMenu()\n\t\t\tif (typeof subMenuId != 'string') {\n\t\t\t\t$$(ids.types).getSubMenu($$(ids.types).config.data[0].id);\n\t\t\t\tsubMenuId = $$(ids.types).config.data[0].submenu;\n\t\t\t}\n\n\t\t\tif ($$(subMenuId))\n\t\t\t\t$$(subMenuId).show();\n\t\t}\n\t}\n\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\tpopulateObjectPopupAddDataField: function(object) {\n\t\t\t_currentObject = object;\n\t\t}\n\n\t}\n\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component\n\t\tactions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\tshow:_logic.show,\t\t// {fn} \tfn(node, ABField)\n\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n})\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupNewDataField.js","//\n// REFACTORING:\n//\n// Our goal here is to create a Model object that will interact with Sails' blueprints and \n// return native Webix DataCollections.\n//\n// We also want to listen for updates on Sails Sockets and notify the DataCollections.\n//\n// Until we have the refactoring in place, we will reuse the AD.Model.extent() objects,\n// and convert the results to DataCollections.\n//\n\n\n\n// Namespacing conventions:\n// OP.Model.extend('[application].[Model]', {static}, {instance} );  --> Object\nOP.Model.extend('opstools.BuildApp.ABApplication',\n\t{\n\t\tuseSockets: true,\n\t\trestURL: '/app_builder/abapplication'\n\t},\n\t{\n\t\t// instance Methods\n\t}\n);\n\t\t\n\t\t\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/data/ABApplication.js","\n/*\n * custom_editlist\n *\n * Create a custom webix component.\n *\n */\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t}\n}\n\n\nvar ComponentKey = 'ab_custom_editlist';\nOP.CustomComponent.extend(ComponentKey, function(App, componentKey ) {\n\t// App \t{obj}\tour application instance object.\n\t// componentKey {string}\tthe destination key in App.custom[componentKey] for the instance of this component:\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique('custom_editlist_component'),\n\n\t}\n\n\n\n\t// Our webix UI definition:\n\tvar _ui = {\n        name: App.unique(\"custom_editlist\")\t// keep this unique for this App instance.\n    };\n\n\n\n\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t}\n\n\n\n\t// Tell Webix to create an INSTANCE of our custom component:\n    webix.protoUI(_ui, webix.EditAbility, webix.ui.list);\n\n\n    // current definition of our Component \n    var Component = {\n\t\tview: _ui.name,\t\t\t// {string} the webix.view value for this custom component\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n\n\t// Save our definition into App.custom.[key]\n    App.custom = App.custom || {};\n    App.custom[componentKey] = Component;\n\n\n\t// return the current definition of this component:\n\treturn Component;\n\n})\n\n\n// After importing this custom component, you get back the .key to use to \n// lookup the OP.Component[] to create an application instance of \nexport default { key: ComponentKey };\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/webix_custom_components/editlist.js","\n/*\n * custom_edittree\n *\n * Create a custom webix component.\n *\n */\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar labels = {\n\n\tcomponent: {\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t}\n}\n\n\nvar ComponentKey = 'ab_custom_edittree';\nOP.CustomComponent.extend(ComponentKey, function(App, componentKey ) {\n\t// App \t{obj}\tour application instance object.\n\t// componentKey {string}\tthe destination key in App.custom[componentKey] for the instance of this component:\n\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique('custom_edittree_component'),\n\n\t}\n\n\n\n\t// Our webix Prototype definition:\n\tvar _ui = {\n        name: App.unique(\"custom_edittree\")\t// keep this unique for this App instance.\n    };\n\n\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t}\n\n\n\n\t// Tell Webix to create an INSTANCE of our custom component:\n    webix.protoUI(_ui, webix.EditAbility, webix.ui.tree);\n\n\n    // current definition of our Component \n    var Component = {\n\t\tview: _ui.name,\t\t\t// {string} the webix.view value for this custom component\n\n\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t}\n\n\n\t// Save our definition into App.custom.[key]\n    App.custom = App.custom || {};\n    App.custom[componentKey] = Component;\n\n\n\t// return the current definition of this component:\n\treturn Component;\n\n})\n\n\n// After importing this custom component, you get back the .key to use to \n// lookup the OP.Component[] to create an application instance of \nexport default { key: ComponentKey };\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/webix_custom_components/edittree.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/css-loader/lib/css-base.js","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/style-loader/fixUrls.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".webix_view, .webix_el_colorpicker input, .webix_el_combo input, .webix_el_datepicker input, .webix_el_search input, .webix_el_text input, .webix_control button, .webix_control input, .webix_control textarea, .webix_el_label, .webix_inp_bottom_label, .webix_inp_label, .webix_inp_top_label {\\n\\tfont-family: \\\"Helvetica Neue\\\",Helvetica,Arial,sans-serif !important;\\n}\\n.ab-generated-page {\\n\\toverflow-y: auto;\\n}\\n.ab-main-container {\\n\\tposition: relative;\\n\\tdisplay: block;\\n\\twidth: 100%;\\n\\tbackground: -moz-linear-gradient(top, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0) 100%); /* FF3.6-15 */\\n\\tbackground: -webkit-linear-gradient(top, rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 100%); /* Chrome10-25,Safari5.1-6 */\\n\\tbackground: linear-gradient(to bottom, rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\\n}\\n.ab-main-container .pointer {\\n\\tcursor: pointer;\\n}\\n.ab-main-container .right {\\n\\ttext-align: right;\\n}\\n.ab-main-container .center {\\n\\ttext-align: center;\\n}\\n.ab-main-container .left {\\n\\ttext-align: left;\\n}\\n.ab-text-bold {\\n\\tfont-weight: bold !important;\\n}\\n.ab-scroll-y {\\n\\toverflow-y: auto !important;\\n}\\n.ab-ellipses-text, .ab-ellipses-text > div {\\n\\toverflow: hidden;\\n\\twhite-space: nowrap;\\n\\ttext-overflow: ellipsis;\\n}\\n.float-left {\\n\\tfloat: left;\\n}\\n.float-right {\\n\\tfloat: right;\\n}\\n\\n/* Webix icon */\\n.ab-main-container .webix_icon {\\n\\tline-height: inherit;\\n}\\n\\n/* Fix overflow-x */\\n.ab-generated-page .webix_scroll_cont {\\n\\toverflow: auto !important;\\n}\\n\\n/* == Webix datatable == */\\n/* Checkbox column */\\n.ab-main-container .webix_hcell.center input[type=checkbox] {\\n\\twidth:20px;\\n\\theight:20px;\\n\\tmargin-top:12px;\\n  }\\n.ab-main-container .webix_table_checkbox {\\n\\twidth:20px;\\n\\theight:20px;\\n\\tmargin-top:5px;\\n}\\n/* Last column */\\n.ab-main-container .webix_column.webix_last > div,\\n.ab-main-container .webix_hs_center td.webix_last,\\n.ab-main-container .ab-app-list-descriptionwebix_hs_right td.webix_last {\\n\\tborder-right-width: 1px !important;\\n}\\n/* No padding/margin column */\\n.ab-column-no-padding div {\\n\\tpadding: 0px !important;\\n\\tmargin: 0px !important;\\n}\\n.ab-main-container .ab-cell-warn {\\n\\tbackground-color: #F5AE0F !important;\\n}\\n\\n/* Webix selected item */\\n.webix_list_item.webix_selected,\\n.webix_column>div.webix_cell_select,\\n.webix_column>div.webix_column_select,\\n.webix_column>div.webix_row_select {\\n\\tbackground-color: #3498db !important;\\n}\\n\\n/* Webix message */\\n.webix_success {\\n  background-color: #BFF2BF;\\n}\\n.webix_success div {\\n  background-color: #BFF2BF;\\n  border: 1px solid #007A00;\\n  color: #000;\\n}\\n\\n/* Webix list */\\n.ab-main-container .webix_list_item .webix_selected,\\n.ab-main-container .webix_tree_item.webix_selected {\\n\\tcolor: #fff !important;\\n\\tbackground-color: #3498db !important;\\n}\\n.ab-app-form-permission .webix_selected {\\n\\tcolor: #333 !important;\\n\\tbackground-color: transparent !important;\\n}\\n\\n/* Webix toolbar */\\n.ab-toolbar-submenu, .ab-toolbar-submenu .webix_header>div {\\n\\tbackground: #EEE !important;\\n\\tcolor: #666 !important;\\n\\tfont-size: 15px !important;\\n\\tfont-weight: bold !important;\\n\\tborder-bottom: 0px !important;\\n}\\n\\n/* Webix segmented */\\n.ab-form-component-item .webix_segment_0.webix_selected,\\n.ab-form-component-item .webix_segment_1.webix_selected,\\n.ab-form-component-item .webix_segment_N.webix_selected,\\n.ab-component-view-edit-field .webix_segment_0.webix_selected,\\n.ab-component-view-edit-field .webix_segment_1.webix_selected,\\n.ab-component-view-edit-field .webix_segment_N.webix_selected {\\n\\tcolor: #fff !important;\\n\\tbackground-color: #3498db !important;\\n}\\n\\n.ab-form-component-item .webix_segment_0,\\n.ab-form-component-item .webix_segment_1,\\n.ab-form-component-item .webix_segment_N,\\n.ab-component-view-edit-field .webix_segment_0,\\n.ab-component-view-edit-field .webix_segment_1,\\n.ab-component-view-edit-field .webix_segment_N {\\n\\tcolor: #3498db;\\n\\tbackground: #fff;\\n}\\n\\n/* Add new columns popup */\\n.ab-add-fields-popup {\\n\\toverflow-y: auto;\\n}\\n\\n/* Application list */\\n.ab-app-list {\\n/*\\n\\tmin-height: 300px;\\n\\tpadding: 40px 100px;\\n*/\\n}\\n.ab-app-select-list .webix_selected {\\n\\tbackground-color: #FFF !important;\\n\\tcolor: #333 !important;\\n}\\n.ab-app-select-list .webix_list_item:hover {\\n\\tbackground: #ebebeb;\\n}\\n.ab-app-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n\\tmargin: -2px -10px;\\n\\tpadding: 15px;\\n\\tline-height: 20px;\\n}\\ndiv[view_id='ab-app-list'] div.webix_list_item:hover,\\ndiv[view_id='ab-object-list'] div.webix_list_item:hover,\\ndiv[view_id='ab-object-list-menu'] div.webix_list_item:hover,\\ndiv[view_id='ab-new-connectObject-list-item'] div.webix_list_item:hover,\\ndiv[view_id='ab-edit-header-items'] div.webix_list_item:hover,\\ndiv[view_id='ab-frozen-field-list'] div.webix_list_item:hover {\\n\\tbackground-color: #eee;\\n}\\n.ab-app-list-name {\\n\\tfont-size: large;\\n}\\n.ab-app-list-description {\\n\\tcolor: #999;\\n\\tfont-size: small;\\n}\\n.ab-app-list-info {\\n\\twidth: 95%;\\n\\tdisplay: inline-block;\\n}\\n.ab-app-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tright: 10px;\\n\\topacity: 0.4;\\n\\tline-height: 70px;\\n\\theight: 70px;\\n}\\n.ab-app-list-edit:hover {\\n\\topacity: 1;\\n}\\n\\n/* Application workspace */\\n.ab-app-workspace {\\n\\t/*min-height: 100px;*/\\n}\\n.ab-unsync-data-warning {\\n\\tcursor: pointer;\\n    color: #fff;\\n    background-color: #F5962F;\\n    border: #fff dotted 1px !important;\\n    padding-left: 2px;\\n}\\n.ab-unsync-data-popup .webix_win_head {\\n\\tbackground-color: #F5962F;\\n}\\n.ab-unsync-data-popup .webix_win_head .header {\\n\\tpadding-left: 5px;\\n\\tfont-weight: bold;\\n    color: #fff;\\n}\\n.ab-unsync-data-status {\\n\\tpadding: 3px;\\n}\\n.ab-unsync-data-in-progress {\\n\\tbackground-color: #F5AE0F;\\n}\\n.ab-unsync-data-done {\\n\\tbackground-color: #3AB349;\\n}\\n.ab-unsync-data-error {\\n\\tbackground-color: #EC2F2F;\\n}\\n\\n/* Object list */\\n.ab-object-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n}\\n.ab-object-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0px;\\n\\tright: 5px;\\n\\tdisplay: none;\\n}\\n.ab-object-unsync {\\n\\tbackground-color: #d2e3ef;\\n\\tcolor: #4a4a4a;\\n\\tposition: absolute;\\n\\ttop: 4px;\\n\\tright: 30px;\\n\\tfont-size: 12px;\\n\\tborder-radius: 6px;\\n\\tpadding: 0px 4px;\\n\\theight: 20px;\\n\\tline-height: 20px;\\n\\tdisplay: none;\\n}\\n\\n/* Interface list */\\n.ab-page-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n}\\n.ab-page-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0px;\\n\\tright: 5px;\\n\\tdisplay: none;\\n\\tcursor: pointer;\\n}\\n\\n/* Object datatable */\\n.ab-object-data-header {\\n\\tposition: relative;\\n}\\n.ab-object-data-new-header {\\n\\tbackground-color: #cfd9e0;\\n}\\n\\n.ab-object-data-header-edit {\\n\\tdisplay: none;\\n\\tposition: absolute;\\n\\ttop: 15px;\\n\\tright: 10px;\\n}\\n.ab-object-data-header:hover .ab-object-data-header-edit {\\n\\tdisplay: block;\\n}\\n.ab-object-unsync-data {\\n\\tbackground-color: #dae6fb;\\n}\\n.ab-object-view-column {\\n\\tcolor: #3498db;\\n\\tfont-weight: bold;\\n\\ttext-align: center;\\n\\tcursor: pointer;\\n}\\n\\n/* Connect object data */\\n.ab-connect-data-info {\\n\\tdisplay: inline-block;\\n\\twidth: 90px;\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n}\\n\\n.ab-connect-data-disable {\\n\\tbackground-color: #aaa;\\n}\\n\\n/* Custom selectivity */\\n.ab-main-container .selectivity-multiple-input-container {\\n\\tbackground: none !important;\\n\\tpadding: 0px !important;\\n\\toverflow: hidden !important;\\n\\tmax-height: 100% !important;\\n}\\n.ab-main-container .selectivity-multiple-selected-item {\\n\\tbackground: #3498db !important;\\n\\tpadding-right: 5px;\\n\\t/*max-width: 100px !important;*/\\n}\\n\\n/* Interface tree view */\\n.ab-main-container .webix_tree_item.webix_selected span {\\n\\tpadding: 0px;\\n\\tbackground: #3498db !important;\\n}\\n\\n/* Interface new page popup */\\n.ab-interface-new-quick-page {\\n    overflow: scroll !important;\\n\\toverflow-x: hidden !important;\\n\\toverflow-y: auto !important;\\n}\\n\\n.ab-interface-new-quick-page .webix_inp_checkbox_border label {\\n\\tfont-weight: normal; /* Override bootstrap*/\\n}\\n\\n/* Interface page layout */\\n.ab-component-drop-area {\\n\\tmargin-right: 2px;\\n\\tborder: 1px dashed #000 !important;\\n\\tbackground-color: #D3E9EF;\\n\\tbackground-image:url(\\\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='30px' width='90px'><text x='20' y='20' fill='#95CBEF' font-size='15'>Drop Here</text></svg>\\\");\\n}\\n\\ndiv[view_id='ab-interface-layout-page'] .webix_list_item,\\n.ab-component-in-page {\\n\\twidth: 100%;\\n\\tposition: relative;\\n\\tbackground-color: #fff;\\n\\tclear: both;\\n}\\n\\n.ab-component-item-name {\\n\\tfloat: left;\\n\\tfont-size: 18px;\\n\\tborder-right: 1px solid #ebebeb;\\n\\tvertical-align: top;\\n\\tpadding-top: 10px;\\n\\twidth: 90px;\\n\\tmargin-bottom: -500em; /* CSS hack: equal height of right float */\\n\\tpadding-bottom: 500em;\\n}\\n\\n.ab-component-item-display {\\n\\tfloat: right;\\n\\tvertical-align: top;\\n\\tpadding: 10px;\\n\\twidth: 87%;\\n\\tline-height: 100%;\\n\\toverflow-x: auto;\\n}\\n\\n.ab-component-remove {\\n\\tposition: absolute;\\n\\ttop: 5px;\\n\\tright: 1px;\\n}\\n\\n.ab-component-link {\\n\\tcolor: #003B7E;\\n\\ttext-decoration: underline;\\n\\tcursor: pointer;\\n}\\n\\n/* Interface component list */\\n.ab-component-item-drag {\\n\\tborder: 1px dotted #000 !important;\\n\\tfont-size: 35px;\\n\\tbackground-color: #fff;\\n}\\n\\n/* Header component */\\n.ab-component-header {\\n\\tfont-size: 25px;\\n\\tfont-weight: bold;\\n\\tmargin: 0px;\\n\\tpadding: 0px;\\n}\\n.ab-component-description {\\n\\tfont-size: 14px;\\n\\tpadding: 0px;\\n}\\n\\n/* Menu component */\\n.ab-page-list-item .webix_tree_checkbox {\\n\\tmargin: 0px !important;\\n}\\n\\n/* Object toolbar */\\n.ab-data-toolbar {\\n\\tbackground: #aaa !important;\\n}\\n.ab-data-toolbar button {\\n\\ttext-align: center;\\n\\tfont-size: 14px;\\n}\\n.ab-data-toolbar button:hover, .ab-data-toolbar button:active {\\n\\tbackground: #aaa !important;\\n}\\n.ab-data-toolbar button .webix_icon_btn {\\n\\topacity: 0.6;\\n\\tfont-size: 15px;\\n}\\n.ab-data-toolbar button:hover .webix_icon_btn {\\n\\topacity: 1;\\n}\\n\\n/* Grid component */\\n.ab-page-grid-column-item .column-checkbox {\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\ttop: -5px;\\n\\twidth: 30px;\\n}\\n\\n.ab-page-grid-column-item .column-empty-checkbox {\\n\\tposition: relative;\\n\\twidth: 50px;\\n\\theight: 38px;\\n}\\n\\n.ab-page-grid-column-item .column-name {\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\ttop: -18px;\\n}\\n\\n/* Form component */\\n.ab-standard-button button, .ab-standard-button button:hover, .ab-standard-button button:active, .ab-standard-button .webix_icon_btn {\\n\\tbackground: transparent !important;\\n\\tborder-color: transparent !important;\\n\\tcolor: #666 !important;\\n\\tbox-shadow: none !important;\\n}\\n.ab-cancel-button button {\\n\\tbackground: transparent !important;\\n\\tcolor: #AAA;\\n\\tborder-color: transparent;\\n}\\n.ab-cancel-button button:hover {\\n\\ttext-decoration: underline;\\n}\\n.ab-cancel-button button:active {\\n\\tbox-shadow: none;\\n}\\n.ab-form-connect-data {\\n\\tfloat: left;\\n\\tborder: #CCC solid 1px;\\n\\tpadding: 0px 5px;\\n\\tmin-width: 70%;\\n\\tborder-radius: 6px;\\n}\\n\\n.ab-main-container .webix_layout_form {\\n\\tbackground-color: #fff !important;\\n}\\n\\n/* Loading Screen */\\n.ab-loading-screen {\\n\\tbackground: #000;\\n\\topacity: 0.7;\\n\\tposition: absolute !important;\\n}\\n.ab-loading-body {\\n\\tbackground: #000;\\n\\tborder-width: 0px !important;\\n}\\n.ab-loading-message {\\n\\tcolor: #fff !important;\\n\\tbackground: #000 !important;\\n\\tfont-size: 30px !important;\\n\\ttext-align: center;\\n\\tvertical-align: middle;\\n\\tborder-width: 0px !important;\\n\\tpadding-top: 20% !important;\\n\\theight: 100px !important;\\n}\\n.ab-loading-button {\\n\\ttext-align: center;\\n}\\n.ab-loading-button button {\\n\\tbackground-color: #003B7E;\\n\\twidth: 200px;\\n}\\n.ab-loading-cancel-button {\\n\\ttext-align: center;\\n\\tbackground: transparent;\\n}\\n.ab-loading-cancel-button a {\\n\\tcolor: #fff !important;\\n}\\n.ab-loading-screen .webix_progress_bottom {\\n\\theight: 40px !important;\\n\\topacity: 1;\\n}\\n.ab-loading-screen .webix_progress_bottom .webix_progress_state {\\n\\theight: 40px !important;\\n}\\n\\n/* Dynamic DataTable */\\n.dynamic-datatable-view .webix_badge {\\n\\tmargin: 0 !important;\\n}\\n\\n/* Number data field */\\n.ab-number-format-show {\\n\\twhite-space: nowrap;\\n}\\n\\n/* Icon Picker */\\n.ab-main-container .iconpicker .iconpicker-items {\\n\\tcolor: #000;\\n}\\n\\n/* Webix Tabs */\\ndiv.webix_item_tab {\\n\\tfont-size: 16px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./assets/opstools/AppBuilder/AppBuilder.css\n// module id = 39\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\t// Test for IE <= 9 as proposed by Browserhacks\n\t\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t\t// Tests for existence of standard globals is to allow style-loader \n\t\t// to operate correctly into non-standard environments\n\t\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\t\treturn window && document && document.all && !window.atob;\n\t}),\n\tgetElement = (function(fn) {\n\t\tvar memo = {};\n\t\treturn function(selector) {\n\t\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t\t}\n\t\t\treturn memo[selector]\n\t\t};\n\t})(function (styleTarget) {\n\t\treturn document.querySelector(styleTarget)\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [],\n\tfixUrls = require(\"./fixUrls\");\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (typeof options.insertInto === \"undefined\") options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar styleTarget = getElement(options.insertInto)\n\tif (!styleTarget) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\tstyleTarget.insertBefore(styleElement, styleTarget.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\tstyleTarget.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\tstyleTarget.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\tstyleTarget.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\toptions.attrs.type = \"text/css\";\n\n\tattachTagAttrs(styleElement, options.attrs);\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\tattachTagAttrs(linkElement, options.attrs);\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction attachTagAttrs(element, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\telement.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement, options);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/* If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls){\n\t\tcss = fixUrls(css);\n\t}\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 40\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!./AppBuilder.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!./AppBuilder.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!./AppBuilder.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/opstools/AppBuilder/AppBuilder.css\n// module id = 41\n// module chunks = 0"],"sourceRoot":""}