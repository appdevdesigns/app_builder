{"version":3,"sources":["webpack:///webpack/bootstrap aee96b1a4fcfd9182aac","webpack:///./assets/opstools/AppBuilder/OP/OP.js","webpack:///./assets/opstools/AppBuilder/classes/dataFields/ABField.js","webpack:///./assets/opstools/AppBuilder/OP/component.js","webpack:///./assets/opstools/AppBuilder/classes/dataFields/ABFieldComponent.js","webpack:///./assets/opstools/AppBuilder/classes/ABApplication.js","webpack:///./assets/opstools/AppBuilder/OP/comm/comm.js","webpack:///./assets/opstools/AppBuilder/OP/config/config.js","webpack:///./assets/opstools/AppBuilder/OP/customComponent.js","webpack:///./assets/opstools/AppBuilder/OP/model.js","webpack:///./assets/opstools/AppBuilder/OP/multilingual.js","webpack:///./assets/opstools/AppBuilder/OP/util.js","webpack:///./assets/opstools/AppBuilder/OP/validation.js","webpack:///./assets/opstools/AppBuilder/OP/comm/comm_service.js","webpack:///./assets/opstools/AppBuilder/OP/config/configDesktop.js","webpack:///./assets/opstools/AppBuilder/OP/config/configMobile.js","webpack:///./assets/opstools/AppBuilder/classes/views/ABViewPage.js","webpack:///./assets/opstools/AppBuilder/components/ab_common_popupEditMenu.js","webpack:///./assets/opstools/AppBuilder/classes/ABFieldManager.js","webpack:///./assets/opstools/AppBuilder/components/ab.js","webpack:///./assets/opstools/AppBuilder/AppBuilder.js","webpack:///./assets/opstools/AppBuilder/classes/ABApplicationBase.js","webpack:///./assets/opstools/AppBuilder/classes/ABModel.js","webpack:///./assets/opstools/AppBuilder/classes/ABObject.js","webpack:///./assets/opstools/AppBuilder/classes/ABObjectBase.js","webpack:///./assets/opstools/AppBuilder/classes/ABViewManager.js","webpack:///./assets/opstools/AppBuilder/classes/dataFields/ABFieldBase.js","webpack:///./assets/opstools/AppBuilder/classes/dataFields/ABFieldBoolean.js","webpack:///./assets/opstools/AppBuilder/classes/dataFields/ABFieldDate.js","webpack:///./assets/opstools/AppBuilder/classes/dataFields/ABFieldImage.js","webpack:///./assets/opstools/AppBuilder/classes/dataFields/ABFieldNumber.js","webpack:///./assets/opstools/AppBuilder/classes/dataFields/ABFieldString.js","webpack:///./assets/opstools/AppBuilder/classes/views/ABView.js","webpack:///./assets/opstools/AppBuilder/components/ab_choose.js","webpack:///./assets/opstools/AppBuilder/components/ab_choose_form.js","webpack:///./assets/opstools/AppBuilder/components/ab_choose_list.js","webpack:///./assets/opstools/AppBuilder/components/ab_work.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_interface.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_interface_list.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_interface_list_newPage.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_interface_list_newPage_blankPage.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_list.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_list_newObject.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_list_newObject_blank.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace_datatable.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupDefineLabel.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupFrozenColumns.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupHeaderEditMenu.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupHideFields.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupNewDataField.js","webpack:///./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupSortFields.js","webpack:///./assets/opstools/AppBuilder/data/ABApplication.js","webpack:///./assets/opstools/AppBuilder/webix_custom_components/datetimepicker.js","webpack:///./assets/opstools/AppBuilder/webix_custom_components/editlist.js","webpack:///./assets/opstools/AppBuilder/webix_custom_components/edittree.js","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/fixUrls.js","webpack:///./assets/opstools/AppBuilder/AppBuilder.css","webpack:///./~/style-loader/addStyles.js","webpack:///./assets/opstools/AppBuilder/AppBuilder.css?8d71"],"names":["window","OP","Comm","Component","Config","CustomComponent","Dialog","AD","op","Error","error","Model","Multilingual","Util","Validation","L","key","altText","lang","label","getLabel","ABField","values","object","fieldDefaults","translate","validator","isNameUnique","fields","f","isDifferent","id","columnName","toLowerCase","length","addError","replace","Promise","resolve","reject","migrateDrop","then","fieldRemove","catch","isAdd","uuid","fieldSave","migrateCreate","err","unTranslate","url","application","Service","post","isObjectWorkspace","config","header","settings","showIcon","fieldIcon","row","App","node","data","console","fieldKey","ids","defaultValues","component","$$","setValue","field","_logic","Field","onChange","newVal","oldVal","getValue","labelOnChange","_ui","rows","view","name","labels","dataFieldHeaderLabel","placeholder","dataFieldHeaderLabelPlaceholder","labelWidth","labelWidthMedium","css","on","dataFieldColumnName","dataFieldColumnNamePlaceholder","fieldDescription","description","align","labelRight","dataFieldShowIcon","labelWidthCheckbox","value","obj","UIComponent","idBase","webix","uid","actions","custom","unique","_actions","a","ABFieldComponent","options","elements","rules","logic","init","eachDeep","e","i","autoheight","borderless","isNotEmpty","_init","clear","clearEditor","warn","clearValidation","hide","isValid","validate","populate","editorPopulate","show","b","getValues","editorValues","l","commonUI","definitionEditor","concat","r","_component","ui","list","fn","forEach","cols","_AllApplications","toArray","DC","ary","getFirstId","element","getItem","push","getNextId","ABApplication","attributes","json","fieldsMultilingual","newViews","views","viewNew","_views","get","Models","destroy","remove","toObj","update","updateItem","create","add","currViews","permItems","comm","service","put","roles","fail","done","delete","filter","newView","remainingViews","v","save","isIncluded","ModelApplication","findAll","newApp","app","arrayApplications","nameMatch","trim","matchingApps","innerWidth","UICustomComponent","componentKey","_restURLs","findOne","_Models","OPModel","staticData","instanceData","cond","verb","params","Array","isArray","newList","dc","DataCollection","onAfterDelete","nURI","k","oURI","util","string","replaceAll","item","attr","parts","split","uri","pop","extend","instance","restURL","u","curr","nameSpace","modelName","objectName","findObject","baseObj","nameList","whoops","objName","controlName","translations","currLanguage","currentLanguage","t","language_code","foundOne","trans","OPValidator","errors","message","invalidAttributes","form","vObj","toValidationObject","isFormValidationError","rowID","grid","isGridValidationError","hasFocused","raw","code","attrs","wasForm","msg","markInvalid","join","focus","Grid","wasGrid","addCellCss","Alert","text","refresh","services","cb","appListRowHeight","buttonWidthLarge","buttonWidthMedium","buttonWidthSmall","buttonWidthExtraSmall","tabWidthLarge","tabWidthMedium","tabWidthSmall","tabWidthExtraSmall","smallSpacer","mediumSpacer","largeSpacer","xLargeSpacer","xxLargeSpacer","xxxLargeSpacer","appListSpacerRowHeight","appListSpacerColMinWidth","appListSpacerColMaxWidth","objectWorkspaceColWidth","labelWidthSmall","labelWidthLarge","labelWidthXLarge","hideMobile","ABViewDefaults","icon","ABViewPage","parent","ABCommonPopupEditMenu","Label","common","menu","confirmDeleteTitle","confirmDeleteMessage","head","width","body","rename","datatype","template","select","timestamp","trg","onItemClick","Popup","_menuOptions","command","menuOptions","c","callbacks","onClick","action","clearAll","mo","parse","itemNode","textContent","option","Fields","defaults","allFields","newField","AB","edit","formName","ok","cancel","yes","no","createErrorMessage","createSuccessMessage","updateErrorMessage","updateSucessMessage","deleteErrorMessage","deleteSuccessMessage","renameErrorMessage","renameSuccessMessage","AppChooser","AppWorkspace","animate","transitionApplicationChooser","adjust","Control","OpsTool","self","templateDOM","resize_notification","tool","_super","webixUiId","loadingScreen","syncButton","initDOM","initWebixUI","_this","can","fragment","html","AppBuilder","container","resize","height","appListDom","$","parseInt","computedHeight","log","mh","module","exports","role","newObjects","objects","objectNew","_objects","currObjects","remaininObjects","o","toDC","ABModel","_where","_skip","_limit","mlFields","multilingualFields","modelURL","modelURLItem","newCond","where","d","DT","define","___AD","onDataRequestEvent","detachEvent","attachEvent","start","count","limit","skip","ABObject","fieldDrops","all","objectDestroy","urlPath","objectSave","headers","columnNameLookup","_fields","columnHeader","h","workspaceHiddenFields","hfID","hidden","DataTable","objectWorkspace","hiddenFields","indexOf","getItemNode","column","customDisplay","labelFormat","isImported","importFromObject","sortFields","frozenColumnID","newFields","fieldNew","currFields","found","isMultilingual","defaultValue","p","isValidData","Views","allViews","fromValues","menuName","ABFieldBooleanDefaults","default","ABFieldBooleanComponent","labelPosition","ABFieldBoolean","dv","editor","ABFieldDateDefaults","includeTime","defaultCurrentDate","defaultDate","dayFormat","dayOrder","dayDelimiter","monthFormat","monthOrder","monthDelimiter","yearFormat","yearOrder","yearDelimiter","hourFormat","periodFormat","timeDelimiter","validateCondition","validateRangeUnit","validateRangeBefore","validateRangeAfter","validateStartDate","validateEndDate","currentToDefault","dateDisplay","timeFormat","validateRange","validateRangeBeforeLabel","validateRangeAfterLabel","validateLeft","validateRight","delimiterList","sign","getDelimiterSign","delimiterItem","getDateFormat","setting","dateFormat","refreshDateDisplay","Date","dateToStr","ABFieldDateComponent","idsUnique","timepicker","disabled","disable","enable","multi","collapsed","newValue","oldValue","vertical","beforeLabel","afterLabel","ABFieldDate","sort","format","editFormat","Object","prototype","toString","call","isFinite","toISOString","ABFieldImageDefaults","ABFieldImageComponent","imageWidth","imageHeight","click","ABFieldImage","useWidth","useHeight","removeExistingData","Confirm","title","callback","result","imgDiv","imageTemplate","idCustomContainer","uploader","image","parentContainer","querySelector","innerHTML","imgHeight","imgWidth","webixContainer","ProgressBar","actionKey","apiOnly","upload","inputName","multiple","onBeforeFileAdd","classList","acceptableTypes","type","showProgress","delay","onFileUpload","response","hideProgress","showImage","model","onFileUploadError","addDropZone","$view","iconDisplay","imageDisplay","imageURL","document","getElementById","style","display","backgroundImage","ABFieldNumberDefaults","formatList","position","ABFieldNumberComponent","typeDecimalPlaces","typeRounding","validateMinimum","validateMaximum","RegExp","test","validation","ABFieldNumber","allowRequired","numberDefault","isNumeric","n","Number","isNaN","parseFloat","typeDecimals","places","toFixed","editors","number","ABFieldStringDefaults","ABFieldStringComponent","ABFieldString","textDefault","supportMultilingual","ABView","viewDestroy","viewSave","currChildren","_children","child","children","viewKey","viewIcon","ABChoose","AppList","AppForm","cells","formHeader","placeholderName","placeholderDescription","formDescription","sectionPermission","permissionHeader","createNewRole","invalidName","duplicateName","appFormPermissionList","appFormCreateRoleButton","saveButton","responsive","maxWidth","minWidth","responsiveCell","maxHeight","fillspace","margin","required","permissionRenameRole","labelAlign","autowidth","offIcon","onIcon","createRoleButtonClick","markCheckbox","permissionClick","buttonSaveClick","FormFields","applicationCreate","async","waterfall","createdApp","permissionSave","formReady","buttonSaveEnable","transitionApplicationList","applicationUpdate","Application","formValues","next","app_role","buttonSaveDisable","formBusy","updateApp","getSelectedApplication","formValidate","formReset","appName","permissionAddNew","permissionRemoveNew","formPopulate","Form","updateForm","permissionName","isApplicationRole","selectedIds","getSelectedId","List","isSelected","unselect","permissionPopulate","PermForm","parsedRoles","map","available_roles","getPermissions","selected_role_ids","markCreateButton","appRoles","find","perm","editRole","editItem","saveRoleTasks","appRole","selectedPerms","getSelectedItem","createPermission","deletePermission","appRoleItem","assignPermissions","series","results","transitionApplicationForm","unselectApplication","ABChooseList","createNew","noApplication","toolBar","buttonCreateNewApplication","MenuComponent","import","autosend","onAfterFileAdd","details","templateListItem","iconGear","ev","onClickListItem","onClickListEdit","_data","busy","callbackApplicationEditorMenu","selectedApp","ConfirmDelete","deleteApplication","location","assign","loadData","allApplications","ready","index","refreshOverlay","listApplications","refreshList","export","transitionWorkspace","errorMessage","appList","showOverlay","hideOverlay","reset","unselectAll","unsync","sync","_templateListItem","OverlayBox","AB_Work","backToApplication","synchronize","objectTitle","interfaceTitle","buttonSync","labelAppName","tabbar","tab_object","tab_interface","workspace","AppObjectWorkspace","AppInterfaceWorkspace","alrign","multiview","idNew","idOld","tabSwitch","applicationInit","idTab","applicationLoad","AB_Work_Interface","ViewList","AB_Work_Interface_List","addNew","buttonNew","PopupNewPageComponent","PopupEditPageComponent","edittree","editaction","editable","editValue","onAfterRender","onAfterSelect","onAfterOpen","onAfterClose","showGear","onBeforeEditStop","state","onAfterEditStop","ignoreUpdate","clickEditMenu","clickNewView","onSave","callbackNewPage","callbackPageEditMenu","listBusy","CurrentApplication","viewList","listReady","page","old","selectedPage","pageID","isOK","gearIcon","visibility","AB_Work_Interface_List_NewPage","addNewPage","quickPage","blankPage","selectTab","tabBlank","tabQuick","buttonSave","BlankPage","modal","newTab","oldTab","buttonCancel","CurrentEditor","newChild","QuickPage","AB_Work_Interface_List_NewPage_BlankPage","parentPage","placeholderPageName","rootPage","parentList","isRoot","AB_Work_Object","ObjectList","ObjectWorkspace","clearObjectWorkspace","AB_Work_Object_List","PopupNewObjectComponent","PopupEditObjectComponent","editlist","selectObject","clickNewObject","objectList","onDone","callbackNewObject","callbackObjectEditorMenu","selectedObject","populateObjectWorkspace","objectId","getSelectedObject","AB_Work_Object_List_NewObject","BlankTab","selectNewObject","ourCBs","onCancel","currentApplication","newObject","AB_Work_Object_List_NewObject_Blank","addNewObject","formClear","ABWorkObjectWorkspace","addNewRow","hideFields","filterFields","frozenColumns","defineLabel","permission","addFields","buttonAddField","buttonExport","buttonFieldsVisible","buttonFilter","buttonFrozen","buttonLabel","buttonRowNew","buttonSort","datatable","toolbar","noSelection","PopupDefineLabelComponent","PopupFrozenColumnsComponent","PopupHideFieldComponent","PopupNewDataFieldComponent","PopupSortFieldComponent","badge","toolbarFieldsVisible","toolbarFilter","toolbarSort","toolbarFrozen","toolbarDefineLabel","toolbarPermission","toolbarAddFields","toolbarButtonExport","rowAdd","onEditorMenu","callbackHeaderEditorMenu","callbackDefineLabel","callbackFrozenColumns","callbackFieldsVisible","callbackAddFields","fieldList","getFieldList","callbackSortFields","CurrentObject","frozenID","workspaceFrozenColumnID","badgeNumber","getColumnIndex","workspaceSortFields","sortTable","addRow","populateObjectPopupAddDataField","objectLoad","ABWorkObjectDatatable","confirmDeleteRowTitle","confirmDeleteRowMessage","PopupHeaderEditComponent","resizeColumn","resizeRow","prerender","fixedRowHeight","dragColumn","onBeforeSelect","preserve","prevent","onCheck","col","val","onAfterLoad","onColumnResize","newWidth","oldWidth","user_action","onBeforeColumnDrag","sourceId","event","onBeforeColumnDrop","targetId","onAfterColumnDrop","onAfterColumnShow","onAfterColumnHide","onHeaderClick","callbackHeaderEdit","throttleOnAfterRender","clearTimeout","setTimeout","customDisplays","target","className","numRows","clearSelection","EditField","EditNode","removeCellCss","pass","patch","updateGrid","editCell","columnHeaders","refreshColumns","loadInto","emptyObj","dir","aValue","bValue","sortNext","sorts","by","columnOrders","ABWorkObjectPopupDefineLabel","selectFieldToGenerate","labelFields","onShow","_currentObject","ButtonSave","each","listFields","selectedItem","Format","AB_Work_Object_Workspace_PopupFrozenColumns","clickClearAll","clickListItem","iconsReset","recordClicked","iconDefault","iconFreeze","isFrozen","record","$css","ABWorkObjectPopupHeaderEditMenu","hideField","filterField","sortField","editField","deleteField","menuItems","listItems","AB_Work_Object_Workspace_PopupHideFields","showAll","hideAll","errorFrozen","clickShowAll","clickHideAll","newHidden","isHidden","fID","iconShow","iconHide","iconFreezeOff","iconFreezeOn","AB_Work_Object_Workspace_PopupNewDataField","fieldType","addNewField","types","editDefinitions","onBeforeShow","resetState","onHide","_objectHash","_componentHash","_componentsByType","_currentEditor","defaultEditorComponent","defaultEditorID","submenus","_editField","newEditorList","F","editorComponent","propertiesComponent","oldData","modeAdd","modeEdit","blur","typeClick","subMenuId","submenu","getSubMenu","AB_Work_Object_Workspace_PopupSortFields","addNewSort","selectField","textAsc","textDesc","dateAsc","dateDesc","numberAsc","numberDesc","booleanAsc","booleanDesc","clickAddNewSort","as","sort_popup","sort_form","viewIndex","getChildViews","addView","columnId","columnConfig","sortDir","getParentView","sortAs","defaultAs","refreshFieldList","saveSorts","newv","oldv","removeView","fieldsCombo","segmentButton","asField","excludeSelected","childViews","cView","selectedValue","removeIndex","removeItem","grep","splice","s","ignoreRemoveViews","selectedFields","removeChildViews","fieldId","fieldObj","selectedFieldsExcludeCurField","not","enableFields","useSockets","ComponentKey","ABCustomDateTimePicker","$popup","datetime","padding","icons","popupType","date","ABCustomEditList","protoUI","EditAbility","ABCustomEditTree","tree","useSourceMap","content","cssWithMappingToString","modules","mediaQuery","alreadyImportedModules","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","baseUrl","protocol","host","currentDir","pathname","fixedCss","fullMatch","origUrl","unquotedOrigUrl","$1","newUrl"],"mappings":"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CA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA,kBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;;;;;ACjSA;;AAEA;AACA;AACA;AACA;AACA,gDAAoF;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C,C","file":"BuildApp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap aee96b1a4fcfd9182aac","\n/**\n * @class OP\n * @parent index 4\n *\n * ###Client side global OpsPortal (OP) namespace.\n *\n * This file defines standard functions and calls for OpsPortal\n * objects on the client side.\n */\n\n// Create our OP  Namespace only if it hasn't been created already\n\n//// TODO: how to disable 'use strict'?  or perform this check without an error\n//// in 'use strict' ?\n\n// if (!window.OP) {\n\nimport Comm from \"./comm/comm\"\nimport Component from \"./component\"\nimport Config from \"./config/config\"\nimport CustomComponent from \"./customComponent\"\nimport Model from \"./model\"\nimport Multilingual from \"./multilingual\"\nimport Util  from \"./util\"\nimport Validation from \"./validation\"\n\n\n    window.OP = OP;\n\n\n    // OP.xxxx      These properties hold the defined Class/Controller/Model definitions\n    //              for our loaded projects.\n\n    OP.Comm = Comm;\t// communication routines (AJAX calls)\n\n    OP.Component = Component;  // our defined components\n\n    OP.Config = Config;\t\t// configuration Settings for our current environment.\n\n    OP.CustomComponent = CustomComponent;  // Webix Custom Components\n\n\tOP.Dialog = AD.op.Dialog;\n\n\tOP.Error = AD.error;\n\n\tOP.Model = Model;\n\n\tOP.Multilingual = Multilingual;\n\n\tOP.Util = Util;\n\n\tOP.Validation = Validation;\n\t\n\n\texport default OP;\n// }\n\n\n// import \"./model.js\"\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/OP.js","/*\n * ABField\n *\n * An ABField defines a single unique Field/Column in a ABObject.\n *\n */\n\nimport ABFieldBase from \"./ABFieldBase\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nexport default class ABField extends ABFieldBase {\n\n    constructor(values, object, fieldDefaults) {\n\n    \tsuper(values, object, fieldDefaults);\n\n   //  \t// NOTE: setup this first so later we can use .fieldType(), .fieldIcon()\n   //  \tthis.defaults = fieldDefaults;\n\n\n    \t\n  \t// \t{\n  \t// \t\tid:'uuid',\t\t\t\t\t// uuid value for this obj\n  \t// \t\tkey:'fieldKey',\t\t\t\t// unique key for this Field\n  \t// \t\ticon:'font',\t\t\t\t// fa-[icon] reference for an icon for this Field Type\n  \t// \t\tlabel:'',\t\t\t\t\t// pulled from translation\n\t\t\t// columnName:'column_name',\t// a valid mysql table.column name\n\t\t\t// settings: {\t\t\t\t\t// unique settings for the type of field\n\t\t\t// \tshowIcon:true/false,\t// only useful in Object Workspace DataTable\n\n\t\t\t// \t// specific for dataField\n\t\t\t// },\n\t\t\t// translations:[]\n  \t// \t}\n  \t\t\n  \t// \tthis.fromValues(values);\n\n\n\n    \t// label is a multilingual value:\n    \tOP.Multilingual.translate(this, this, ['label']);\n\n\n    \t// this.object = object;\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n  \tstatic clearEditor( ids) {\n\n  \t\tvar defaultValues = {\n  \t\t\tlabel: '',\n  \t\t\tcolumnName:'',\n  \t\t\tshowIcon:1\n  \t\t}\n\n  \t\tfor(var f in defaultValues) {\n\t\t\tvar component = $$(ids[f]);\n\t\t\tcomponent.setValue(defaultValues[f]);\n\t\t}\n  \t}\n\n\n  \tstatic editorPopulate( ids, field ) {\n\n  \t\t$$(ids.label).setValue(field.label);\n  \t\t$$(ids.columnName).setValue(field.columnName);\n  \t\t$$(ids.showIcon).setValue(field.settings.showIcon);\n\n  \t}\n\n\n\t/**\n\t * @function definitionEditor\n\t *\n\t * Many DataFields share some base information for their usage\n\t * in the AppBuilder.  The UI Editors have a common header\n\t * and footer format, and this function allows child DataFields\n\t * to not have to define those over and over.\n\t *\n\t * The common layout header contains:\n\t *\t\t[Menu Label]\n\t *\t\t[textBox: labelName]\n\t *\t\t[text:    description]\n\t *\n\t * The defined DataField UI will be added at the end of this.\n\t *\n\t * This routine actually updated the live DataField definition\n\t * with the common header info.\n\t *\n\t * @param {DataField} field  The DataField object to work with.\n\t */\n  \tstatic definitionEditor( App, ids, _logic, Field ) {\n\n/// TODO: maybe just pass in onChange instead of _logic\n/// if not onChange, then use our default:\n\n  \t\t// setup our default labelOnChange functionality:\n  \t\tvar onChange = function (newVal, oldVal) {\n\n  \t\t\toldVal = oldVal || '';\n\n\t\t\tif (newVal != oldVal &&\n\t\t\t\toldVal == $$(ids.columnName).getValue()) {\n\t\t\t\t$$(ids.columnName).setValue(newVal);\n\t\t\t}\n\t\t}\n\n\t\t// if they provided a labelOnChange() override, use that:\n\t\tif (_logic.labelOnChange) {\n\t\t\tonChange = _logic.labelOnChange;\n\t\t}\n\n\n  \t\tvar _ui = {\n\t\t\t// id: ids.component,\n\t\t\trows: [\n\t\t\t\t// {\n\t\t\t\t// \tview: \"label\",\n\t\t\t\t// \tlabel: \"<span class='webix_icon fa-{0}'></span>{1}\".replace('{0}', Field.icon).replace('{1}', Field.menuName)\n\t\t\t\t// },\n\t\t\t\t{\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tid: ids.label,\n\t\t\t\t\tname:'label',\n\t\t\t\t\tlabel: App.labels.dataFieldHeaderLabel,\n\t\t\t\t\tplaceholder: App.labels.dataFieldHeaderLabelPlaceholder,\n\t\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\t\tcss: 'ab-new-label-name',\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\t\tonChange(newVal, oldVal);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tid: ids.columnName,\n\t\t\t\t\tname:'columnName',\n\t\t\t\t\tlabel: App.labels.dataFieldColumnName, // 'Name',\n\t\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\t\tplaceholder: App.labels.dataFieldColumnNamePlaceholder, // 'Column name',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tid: ids.fieldDescription,\n\t\t\t\t\tlabel: Field.description,\n\t\t\t\t\talign: \"right\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: 'checkbox',\n\t\t\t\t\tid: ids.showIcon,\n\t\t\t\t\tname:'showIcon',\n\t\t\t\t\tlabelRight: App.labels.dataFieldShowIcon, // 'Show icon',\n\t\t\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\t\t\tvalue:true\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\n  \t\treturn _ui;\n  \t}\n\n\n  \tstatic editorValues (settings) {\n\n  \t\tvar obj = {\n  \t\t\tlabel: settings.label,\n  \t\t\tcolumnName: settings.columnName,\n  \t\t\tsettings:settings\n  \t\t}\n\n  \t\tdelete settings.label;\n  \t\tdelete settings.columnName;\n\n  \t\treturn obj;\n  \t}\n\n\n  \t/*\n  \t * @method isValid\n  \t * check the current values to make sure they are valid.\n  \t * Here we check the default values provided by ABField.\n  \t *\n  \t * @return null or [{OP.Validation.validator()}] objects.\n  \t */\n\tisValid() {\n\n\t\tvar validator = OP.Validation.validator();\n\n\t\t// .columnName must be unique among fileds on the same object\n\t\tvar isNameUnique = (this.object.fields((f)=>{\n\t\t\tvar isDifferent = (f.id != this.id);\n\t\t\treturn (f.id != this.id)\n\t\t\t\t\t&& (f.columnName.toLowerCase() == this.columnName.toLowerCase() );\n\t\t}).length == 0);\n\t\tif (!isNameUnique) {\n\t\t\tvalidator.addError('columnName', L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.columnName) );\n\t\t}\n\n\t\treturn validator;\n\t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\t/// ABApplication data methods\n\n\n\t/**\n\t * @method destroy()\n\t *\n\t * destroy the current instance of ABApplication\n\t *\n\t * also remove it from our _AllApplications\n\t *\n\t * @return {Promise}\n\t */\n\tdestroy () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\t// verify we have been .save()d before:\n\t\t\t\tif (this.id) {\n\n\t\t\t\t\t// NOTE: our .migrateXXX() routines expect the object to currently exist\n\t\t\t\t\t// in the DB before we perform the DB operations.  So we need to\n\t\t\t\t\t// .migrateDrop()  before we actually .objectDestroy() this.\n\t\t\t\t\tthis.migrateDrop()\n\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\treturn this.object.fieldRemove(this);\n\t\t\t\t\t})\n\t\t\t\t\t.then(resolve)\n\t\t\t\t\t.catch(reject)\n\n\t\t\t\t} else {\n\n\t\t\t\t\tresolve();  // nothing to do really\n\t\t\t\t}\n\n\t\t\t}\n\t\t)\n\n\t}\n\n\n\t/**\n\t * @method save()\n\t *\n\t * persist this instance of ABField with it's parent ABObject\n\t *\n\t *\n\t * @return {Promise}\n\t *\t\t\t\t\t\t.resolve( {this} )\n\t */\n\tsave () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar isAdd = false;\n\t\t\t\t// if this is our initial save()\n\t\t\t\tif (!this.id) {\n\t\t\t\t\tisAdd = true;\n\t\t\t\t\tthis.id = OP.Util.uuid();\t// setup default .id\n\t\t\t\t}\n\n\n\t\t\t\tthis.object.fieldSave(this)\n\t\t\t\t.then(() => {\n\n\t\t\t\t\tif (isAdd) {\n\n\t\t\t\t\t\tthis.migrateCreate()\n\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\tresolve(this);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(reject);\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(this);\n\t\t\t\t\t}\n\n\t\t\t\t})\n\t\t\t\t.catch(function(err){\n\t\t\t\t\treject(err);\n\t\t\t\t})\n\t\t\t}\n\t\t)\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABField instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * @return {json}\n\t */\n\ttoObj () {\n\n\t\t// store \"label\" in our translations\n\t\tOP.Multilingual.unTranslate(this, this, [\"label\"]);\n\n\t\treturn super.toObj();\n\t}\n\n\n\n\n\n\t///\n\t/// DB Migrations\n\t///\n\n\tmigrateCreate() {\n\t\tvar url = '/app_builder/migrate/application/#appID#/object/#objID#/field/#fieldID#'\n\t\t\t.replace('#appID#', this.object.application.id)\n\t\t\t.replace('#objID#', this.object.id)\n\t\t\t.replace('#fieldID#', this.id)\n\n\t\treturn OP.Comm.Service.post({\n\t\t\turl: url\n\t\t})\n\t}\n\n\n\tmigrateDrop() {\n\t\tvar url = '/app_builder/migrate/application/#appID#/object/#objID#/field/#fieldID#'\n\t\t\t.replace('#appID#', this.object.application.id)\n\t\t\t.replace('#objID#', this.object.id)\n\t\t\t.replace('#fieldID#', this.id)\n\n\t\treturn OP.Comm.Service['delete']({\n\t\t\turl: url\n\t\t})\n\t}\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t/*\n\t * @function columnHeader\n\t * Return the column header for a webix grid component for this specific\n\t * data field.\n\t * @param {bool} isObjectWorkspace is this being used in the Object\n\t *\t\t\t\t\t\t\t\t   workspace.\n\t * @return {obj}  configuration obj\n\t */\n\tcolumnHeader (isObjectWorkspace) {\n\n\t\tvar config = {\n\t\t\tid: this.columnName, // this.id,\n\t\t\theader: this.label,\n\t\t}\n\n\t\tif (isObjectWorkspace) {\n\t\t\tif (this.settings.showIcon) {\n\t\t\t\tconfig.header = '<span class=\"webix_icon fa-{icon}\"></span>'.replace('{icon}', this.fieldIcon() ) + config.header;\n\t\t\t}\n\t\t}\n\n\t\treturn config;\n\t}\n\n\n\t/*\n\t * @function customDisplay\n\t * perform any custom display modifications for this field.  If this isn't \n\t * a standard value display (think image, Map, graph, etc...) then use this\n\t * method to create the display in the table/grid cell.\n\t * @param {object} row is the {name=>value} hash of the current row of data.\n\t * @param {App} App the shared ui App object useful more making globally\n\t *\t\t\t\t\tunique id references.\n\t * @param {HtmlDOM} node  the HTML Dom object for this field's display.\n\t */\n\tcustomDisplay(row, App, node) {\n\t\t\n\t}\n\n\n\n\t/**\n\t * @method isValidData\n\t * Parse through the given data and return an error if this field's\n\t * data seems invalid.\n\t * @param {obj} data  a key=>value hash of the inputs to parse.\n\t */\n\tisValidData(data, validator) {\n\n\t\tconsole.error('!!! Field ['+this.fieldKey()+'] has not implemented .isValidData()!!!');\n\n\t}\n\n\n\n\t/*\n\t * @function isMultilingual\n\t * does this field represent multilingual data?\n\t * @return {bool}\n\t */\n\tisMultilingual() {\n\t\treturn false;\n\t}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/dataFields/ABField.js","\nexport default class UIComponent {\n    \n    /**\n     * @param {object} App \n     *      ?what is this?\n     * @param {string} idBase\n     *      Identifier for this component\n     */\n\tconstructor(App, idBase) {\n\n\t\tif (!App) {\n\t\t\tApp = {\n\n\t\t\t\tuuid: webix.uid(),\n\n\t\t\t\t/*\n\t\t\t\t * actions:\n\t\t\t\t * a hash of exposed application methods that are shared among our\n\t\t\t\t * components, so one component can invoke an action that updates\n\t\t\t\t * another component.\n\t\t\t\t */\n\t\t\t\tactions:{\n\n\t\t\t\t},\n\n\n\t\t\t\t/*\n\t\t\t\t * config\n\t\t\t\t * webix configuration settings for our current browser\n\t\t\t\t */\n\t\t\t\tconfig:OP.Config.config(),\n\n\t\t\t\t/*\n\t\t\t\t * custom\n\t\t\t\t * a collection of custom components for this App Instance.\n\t\t\t\t */\n\t\t\t\tcustom:{\n\n\t\t\t\t},\n\n\t\t\t\t/*\n\t\t\t\t * labels\n\t\t\t\t * a collection of labels that are common for the Application.\n\t\t\t\t */\n\t\t\t\tlabels:{\n\n\t\t\t\t},\n\n\t\t\t\t/*\n\t\t\t\t * unique()\n\t\t\t\t * A function that returns a globally unique Key.\n\t\t\t\t * @param {string} key   The key to modify and return.\n\t\t\t\t * @return {string}\n\t\t\t\t */\n\t\t\t\tunique: function(key) { return key+this.uuid; },\n\n\t\t\t}\n\t\t}\n\n\t\tthis.App = App;\n\n\t\tthis.idBase = idBase || '?idbase?';\n\t}\n\n\n\tactions(_actions) {\n\t\tif (_actions){\n\t\t\tfor(var a in _actions) {\n\t\t\t\tthis.App.actions[a] = _actions[a];\n\t\t\t}\n\t\t}\n\t}\n\n\n\tLabel(key, altText) {\n\t\treturn AD.lang.label.getLabel(key) || altText;\n\t}\n\n\n\tunique(key) {\n\t\treturn this.App.unique(this.idBase + '_' + key);\n\t}\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/component.js","/* \n * ABFieldComponent\n * \n * An ABFieldComponent defines the UI component used by an ABField to display it's properties.\n *\n */\n\nimport ABField from \"./ABField\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nexport default class ABFieldComponent {\n\n\n    constructor(options) {\n\n    \tthis.options = options;\n\n    \tthis.fieldDefaults = options.fieldDefaults || {};\n\n    \tthis.elements = options.elements || function (App) { return []; } ;\n\n    \tthis.defaultValues = options.defaultValues || {};\n\n    \tthis.rules = options.rules || {};\n\n    \tthis.logic = options.logic || {};\n\n    \tthis.init = options.init || function() {};\n\n\n\n    \tthis.idBase = this.fieldDefaults.key || '??fieldKey??';\n\n    \t// this.ids = options.ids || {};\n    \tthis.ids = {};\n\n    \t\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\tcomponent (App) {\n\n\t\t// for each provided element: create an this.ids for it:\n    \tvar elements = this.elements(App, this);\n\n\n    \t////\n    \t//// prepare our ids\n    \t////\n\n\t\tvar ids = {\n\n\t\t\tcomponent: App.unique(this.idBase+'_component'),\n\n\t\t\t// the common property fields\n\t\t\tlabel: App.unique(this.idBase+'_label'),\n\t\t\tcolumnName: App.unique(this.idBase+'_columnName'),\n\t\t\tfieldDescription: App.unique(this.idBase+'_fieldDescription'),\n\t\t\tshowIcon: App.unique(this.idBase+'_showIcon'),\n\t\t}\n\n    \tthis.eachDeep(elements, (e) => {\n    \t\tif (e.name) {\n    \t\t\t// if element has an .id, then use it in our list as is\n    \t\t\tif (e.id) {\n    \t\t\t\tids[e.name] = e.id;\n    \t\t\t}\n\n    \t\t\t// otherwise create a new entry in our base list\n    \t\t\tthis.ids[e.name] = e.name;\n    \t\t}\n    \t})\n\n\n\t\t// convert the entries in our base list into a globally acceptable id\n\t\t// and use that in our ids list if it doesn't already exist\n\t\tfor (var i in this.ids) {\n\t\t\tif (!ids[i]) {\n\t\t\t\tids[i] = App.unique(this.idBase+'_'+i);\n\t\t\t}\n\t\t}\n\n\t\t// update our elements to include our ids as we have them now.\n\t\tthis.eachDeep(elements, (e) => {\n    \t\tif (e.name) {\n    \t\t\te.id = ids[e.name];\n    \t\t}\n    \t})\n\n\n\t\t////\n\t\t//// our UI definition:\n\t\t////\n\n\t\t// our base form:\n\t\tvar _ui = {\n\t\t\tview:'form',\n\t\t\tid: ids.component,\n\t\t\tautoheight:true,\n\t\t\tborderless:true,\n\t\t\telements: [\n\t\t\t\t// {\n\t\t\t\t// \tview: \"text\",\n\t\t\t\t// \tid: ids.textDefault,\n\t\t\t\t// \tname:'textDefault',\n\t\t\t\t// \tplaceholder: labels.component.defaultText\n\t\t\t\t// },\n\t\t\t\t// {\n\t\t\t\t// \tview: \"checkbox\",\n\t\t\t\t// \tid: ids.supportMultilingual,\n\t\t\t\t// \tname:'supportMultilingual',\n\t\t\t\t// \tlabelRight: labels.component.supportMultilingual,\n\t\t\t\t// \tlabelWidth: 0,\n\t\t\t\t// \tvalue: true\n\t\t\t\t// }\n\t\t\t],\n\n\t\t\trules:{\n\t\t\t\t'label':webix.rules.isNotEmpty,\n\t\t\t\t'columnName':webix.rules.isNotEmpty\n\t\t\t}\n\t\t}\n\n\n\n\t\tvar _init = function() {\n\n\t\t\t// call our provided .init() routine\n\t\t\tthis.init(ids);\n\t\t}\n\n\n\n\t\tvar _logic = {\n\n\t\t\t/*\n\t\t\t * @function clear\n\t\t\t *\n\t\t\t * clear the form.\n\t\t\t */\n\t\t\tclear: () => {\n\n\t\t\t\tABField.clearEditor( ids );\n\n\t\t\t\tfor(var f in this.defaultValues) { \n\t\t\t\t\tvar component = $$(ids[f]);\n\t\t\t\t\tif(component) {\n\t\t\t\t\t\tcomponent.setValue(this.defaultValues[f]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn('!! could not find component for default value: name:'+f+' id:'+ids[f]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$$(ids.component).clearValidation();\n\n\n\t\t\t\t// perform provided .clear()\n\t\t\t\tif (this.logic.clear) {\n\t\t\t\t\tthis.logic.clear(ids);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function hide\n\t\t\t *\n\t\t\t * hide this component.\n\t\t\t */\n\t\t\thide: () => {\n\t\t\t\t$$(ids.component).clearValidation();\n\t\t\t\t$$(ids.component).hide( false, false);\n\n\t\t\t\t// perform provided .hide()\n\t\t\t\tif (this.logic.hide) {\n\t\t\t\t\tthis.logic.hide(ids)\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function isValid\n\t\t\t *\n\t\t\t * checks the current values on the componet to see if they are Valid\n\t\t\t */\n\t\t\tisValid: () => {\n\n\t\t\t\tvar isValid = $$(ids.component).validate();\n\n\t\t\t\t// perform provided .isValid()\n\t\t\t\tif (this.logic.isValid) {\n\t\t\t\t\tisValid = this.logic.isValid(ids, isValid);\n\t\t\t\t}\n\n\t\t\t\treturn isValid;\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function labelOnChange\n\t\t\t *\n\t\t\t * The ABField.definitionEditor implements a default operation\n\t\t\t * to update the value of the .columnName with the current value of \n\t\t\t * label.\n\t\t\t * \n\t\t\t * if you want to override that functionality, implement this fn()\n\t\t\t *\n\t\t\t * @param {string} newVal\tThe new value of label\n\t\t\t * @param {string} oldVal\tThe previous value\n\t\t\t */\n\t\t\t// labelOnChange: function (newVal, oldVal) {\n\n\t\t\t// \t// When the Label value changes, update our Column Name value \n\t\t\t// \t// to match.\n\n\t\t\t// \toldVal = oldVal || '';\n\t\t\t// \tif (newVal != oldVal &&\n\t\t\t// \t\toldVal == $$(ids.columnName).getValue()) {\n\t\t\t// \t\t$$(ids.columnName).setValue(newVal);\n\t\t\t// \t}\n\t\t\t// },\n\n\n\t\t\t/*\n\t\t\t * @function populate\n\t\t\t *\n\t\t\t * populate the form with the given ABField instance provided.\n\t\t\t *\n\t\t\t * @param {ABField} field\n\t\t\t */\n\t\t\tpopulate: (field) => {\n\n\t\t\t\t// populate the base ABField values:\n\t\t\t\tABField.editorPopulate(ids, field);\n\n\t\t\t\tthis.eachDeep(elements, function(e){\n\t\t\t\t\tif (e.name != null) {\n\t\t\t\t\t\t$$(ids[e.name]).setValue(field.settings[e.name]);\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\t// perform provided .populate()\n\t\t\t\tif (this.logic.populate) {\n\t\t\t\t\tthis.logic.populate(ids, field);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function show\n\t\t\t *\n\t\t\t * show this component.\n\t\t\t */\n\t\t\tshow: (a, b) => {\n\t\t\t\t$$(ids.component).clearValidation();\n\t\t\t\t$$(ids.component).show(a, b);\n\n\t\t\t\t// perform provided .show()\n\t\t\t\tif (this.logic.show) {\n\t\t\t\t\tthis.logic.show(ids)\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function values\n\t\t\t *\n\t\t\t * return the values for this form.\n\t\t\t * @return {obj}  \n\t\t\t */\n\t\t\tvalues: () => {\n\n\t\t\t\tvar settings = $$(ids.component).getValues();\n\t\t\t\tvar values = ABField.editorValues(settings);\n\n\t\t\t\tvalues.key = this.fieldDefaults.key;\n\t\t\n\t\t\t\t// perform provided .values()\n\t\t\t\tif (this.logic.values) {\n\t\t\t\t\tvalues = this.logic.values(ids, values)\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t}\n\n\t\t}\n\n\t\t// apply additional logic functions:\n\t\tfor (var l in this.logic) {\n\t\t\tif (!_logic[l]) _logic[l] = this.logic[l];\n\t\t}\n\n\n\t\t// make sure our given elements, have an id set:\n\n\n\t\t// get the common UI headers entries, and insert them above ours here:\n\t\t// NOTE: put this here so that _logic is defined.\n\t\tvar commonUI = ABField.definitionEditor(App, ids, _logic, this.fieldDefaults);\n\t\t_ui.elements = commonUI.rows.concat(elements);\n\n\t\tfor (var r in this.rules) {\n\t\t\t_ui.rules[r] = this.rules[r];\n\t\t}\n\n\n\t\t// return the current instance of this component:\n\t\treturn this._component = {\n\t\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component  \n\t\t\t// actions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t\t// DataField exposed actions:\n\t\t\tclear: _logic.clear,\n\t\t\thide: _logic.hide,\n\t\t\tisValid:_logic.isValid,\n\t\t\tpopulate: _logic.populate,\n\t\t\tshow: _logic.show,\n\t\t\tvalues: _logic.values,\n\n\n\t\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t\t}\n\t}\n\n\n\n\t/**\n\t * @function eachDeep\n\t * a depth first fn to apply fn() to each element of our list.\n\t * @param {array} list  array of webix elements to scan\n\t * @param {fn} fn function to apply to each element.\n\t */\n\teachDeep(list, fn) {\n\t\tlist.forEach((e) => {\n\n\t\t\t// process sub columns\n\t\t\tif (e.cols) {\n\t\t\t\tthis.eachDeep(e.cols, fn);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// or rows\n\t\t\tif (e.rows) {\n\t\t\t\tthis.eachDeep(e.rows, fn);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// or just process this element:\n\t\t\tfn(e)\n\t\t})\n\t}\n\n\n\tidsUnique(ids, App) {\n\n\t\tfor (var i in ids) {\n\t\t\tif (ids[i] == '') {\n\t\t\t\tids[i] = App.unique(this.idBase+'_'+i)\n\t\t\t} else {\n\t\t\t\tids[i] = App.unique(this.idBase+'_'+ids[i])\n\t\t\t}\n\t\t}\n\t\treturn ids;\n\t}\n\n\t// populate(field) {\n\t// \tthis._component.populate(field);\n\t// }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/dataFields/ABFieldComponent.js","\n// import OP from \"OP\"\nimport ABApplicationBase from \"./ABApplicationBase\"\nimport \"../data/ABApplication\"\nimport ABObject from \"./ABObject\"\nimport ABViewManager from \"./ABViewManager\"\n\n\nvar _AllApplications = [];\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nfunction toArray(DC) {\n\tvar ary = [];\n\n\tvar id = DC.getFirstId();\n\twhile(id) {\n\t\tvar element = DC.getItem(id);\n\t\tary.push(element);\n\t\tid = DC.getNextId(id);\n\t}\n\n\treturn ary;\n}\n\nexport default class ABApplication extends ABApplicationBase {\n\n    constructor(attributes) {\n    \tsuper(attributes);\n\n\n    \t// multilingual fields: label, description\n    \tOP.Multilingual.translate(this, this.json, ABApplication.fieldsMultilingual());\n\n\n\t  \t// import all our ABViews\n\t  \t// We only work with ABViews on the client side.\n\t  \tvar newViews = [];\n\t  \t(attributes.json.views || []).forEach((view) => {\n\t  \t\tnewViews.push( this.viewNew(view, null) );  \n\t  \t})\n\t  \tthis._views = newViews;\n\n\n\t  \t// instance keeps a link to our Model for .save() and .destroy();\n\t  \tthis.Model = OP.Model.get('opstools.BuildApp.ABApplication');\n\t  \tthis.Model.Models(ABApplication);\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n  \t/**\n  \t * @function allApplications\n  \t *\n  \t * return a DataCollection that contains all the ABApplications this user\n  \t * can see (based upon server side permissions);\n  \t *\n  \t * NOTE: this manages the results in the _AllApplications dataCollection\n  \t * store.  Any future .create(), .destroy(), .updates() modify values in\n  \t * that collection.\n  \t *\n  \t * Any webix ui components synced to that collection will be automatically\n  \t * updated.\n  \t *\n  \t * @return {Promise}\n  \t */\n\tstatic allApplications() {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar ModelApplication = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\t\t\tModelApplication.Models(ABApplication); // set the Models  setting.\n\n\t\t\t\tModelApplication.findAll()\n\t\t\t\t\t.then(function(data){\n\n\t\t\t\t\t\t// NOTE: data is already a DataCollection from .findAll()\n\t\t\t\t\t\t_AllApplications = data;\n\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(reject);\n\n\t\t\t}\n\t\t)\n\t}\n\n\n  \t/**\n  \t * @function create\n  \t *\n  \t * take the initial values and create an instance of ABApplication.\n  \t *\n  \t * @return {Promise}\n  \t */\n\tstatic create(values) {\n\t\treturn new Promise(\n\t\t\tfunction(resolve, reject) {\n\n\t\t\t\tvar newApp = {}\n\t\t\t\tOP.Multilingual.unTranslate(values, newApp, ABApplication.fieldsMultilingual());\n\t\t\t\tvalues.json = newApp;\n\t\t\t\tnewApp.name = values.name;\n\n\t\t\t\tvar ModelApplication = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\t\t\tModelApplication.create(values)\n\t\t\t\t.then(function(app){\n\n\t\t\t\t\t// return an instance of ABApplication\n\t\t\t\t\tvar App = new ABApplication(app);\n\n\t\t\t\t\t_AllApplications.add(App,0);\n\t\t\t\t\tresolve(App);\n\t\t\t\t})\n\t\t\t\t.catch(reject)\n\t\t\t}\n\t\t)\n\t}\n\n\n\n\n//// TODO: Refactor isValid() to ignore op and not error if duplicateName is own .id\n\n\tstatic isValid(op, values) {\n\n\t\t\tvar validator = OP.Validation.validator();\n\n\t\t\t// during an ADD operation\n\t\t\tif (op == 'add') {\n\n\t\t\t\t// label/name must be unique:\n\t\t\t\tvar arrayApplications = toArray(_AllApplications);\n\n\t\t\t\tvar nameMatch = values.label.trim().replace(/ /g, '_').toLowerCase();\n\t\t\t\tvar matchingApps = arrayApplications.filter(function (app) {\n\t\t\t\t\treturn app.name.trim().toLowerCase() == nameMatch;\n\t\t\t\t})\n\t\t\t\tif (matchingApps && matchingApps.length > 0) {\n\n\t\t\t\t\tvalidator.addError('label', L('ab_form_application_duplicate_name', \"*Name (#name#) is already in use\").replace('#name#', nameMatch) )\n\t\t\t\t\t// var errors = OP.Form.validationError({\n\t\t\t\t\t// \tname:'label',\n\t\t\t\t\t// \tmessage:L('ab_form_application_duplicate_name', \"*Name (#name#) is already in use\").replace('#name#', nameMatch),\n\t\t\t\t\t// }, errors);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// Check the common validations:\n// TODO:\n// if (!inputValidator.validate(values.label)) {\n// \t_logic.buttonSaveEnable();\n// \treturn false;\n// }\n\n\n\t\t\treturn validator;\n\t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\t/// ABApplication data methods\n\n\n\t/**\n\t * @method destroy()\n\t *\n\t * destroy the current instance of ABApplication\n\t *\n\t * also remove it from our _AllApplications\n\t *\n\t * @return {Promise}\n\t */\n\tdestroy () {\n\t\tif (this.id) {\n\t\t\treturn this.Model.destroy(this.id)\n\t\t\t\t.then(()=>{\n\t\t\t\t\t_AllApplications.remove(this.id);\n\t\t\t\t});\n\t\t}\n\t}\n\n\n\t/**\n\t * @method save()\n\t *\n\t * persist the current instance of ABApplication to the DB\n\t *\n\t * Also, keep the values in _AllApplications up to date.\n\t *\n\t * @return {Promise}\n\t */\n\tsave () {\n\n\t\tvar values = this.toObj();\n\n\t\t// we already have an .id, so this must be an UPDATE\n\t\tif (values.id) {\n\n\t\t\treturn this.Model.update(values.id, values)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t_AllApplications.updateItem(values.id, this);\n\t\t\t\t\t});\n\n\t\t} else {\n\n\t\t\t// must be a CREATE:\n\t\t\treturn this.Model.create(values)\n\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\tthis.id = data.id;\n\t\t\t\t\t\t_AllApplications.add(this, 0);\n\t\t\t\t\t});\n\t\t}\n\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\ttoObj () {\n\n\t\tOP.Multilingual.unTranslate(this, this.json, ABApplication.fieldsMultilingual());\n\n\n\t\t// for each View: compile to json\n\t\tvar currViews = [];\n\t\tthis._views.forEach((view) => {\n\t\t\tcurrViews.push(view.toObj())\n\t\t})\n\t\tthis.json.views = currViews;\n\n\n\t\treturn super.toObj();\n\t}\n\n\n\n\t/// ABApplication Permission methods\n\n\n\t/**\n\t * @method assignPermissions()\n\t *\n\t * Make sure the current ABApplication permissions match the given\n\t * array of permissions.\n\t *\n\t * @param {array} permItems\tan array of role assignments that this\n\t * \t\t\t\t\t\t\tABApplication should match.\n\t * @return {Promise}\n\t */\n\tassignPermissions (permItems) {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\t\t\t\tAD.comm.service.put({\n\t\t\t\t\turl: '/app_builder/' + this.id + '/role/assign',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\troles: permItems\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve);\n\t\t\t}\n\t\t)\n\t}\n\n\n\t/**\n\t * @method getPermissions()\n\t *\n\t * Return an array of role assignments that are currently assigned to this\n\t * ABApplication.\n\t *\n\t * @return {Promise} \tresolve(list) : list {array} Role assignments\n\t */\n\tgetPermissions () {\n\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tAD.comm.service.get({ url: '/app_builder/' + this.id + '/role' })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve)\n\t\t\t}\n\t\t);\n\t}\n\n\n\t/**\n\t * @method createPermission()\n\t *\n\t * Create a Role in the system after the name of the current ABApplication.\n\t *\n\t * @return {Promise}\n\t */\n\tcreatePermission () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n// TODO: need to take created role and store as : .json.applicationRole = role.id\n\n\t\t\t\tAD.comm.service.post({ url: '/app_builder/' + this.id + '/role' })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve)\n\n\t\t\t}\n\t\t);\n\t}\n\n\n\t/**\n\t * @method deletePermission()\n\t *\n\t * Remove the Role in the system of the current ABApplication.\n\t * (the one created by  .createPermission() )\n\t *\n\t * @return {Promise}\n\t */\n\tdeletePermission () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n// TODO: need to remove created role from : .json.applicationRole\n\t\t\t\tAD.comm.service.delete({ url: '/app_builder/' + this.id + '/role' })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve)\n\n\t\t\t}\n\t\t);\n\t}\n\n\n\n\t///\n\t/// Objects\n\t///\n\n\n\t/**\n\t * @method objectNew()\n\t *\n\t * return an instance of a new (unsaved) ABObject that is tied to this\n\t * ABApplication.\n\t *\n\t * NOTE: this new object is not included in our this.objects until a .save()\n\t * is performed on the object.\n\t *\n\t * @return {ABObject}\n\t */\n\tobjectNew( values ) {\n\t\treturn new ABObject(values, this);\n\t}\n\n\n\n\t///\n\t/// Views\n\t///\n\n\n\t/**\n\t * @method views()\n\t *\n\t * return an array of all the ABViews for this ABApplication.\n\t *\n\t * @param {fn} filter  \ta filter fn to return a set of ABViews that this fn\n\t *\t\t\t\t\t\treturns true for.\n\t * @return {array} \tarray of ABViews\n\t */\n\tviews (filter) {\n\n\t\tfilter = filter || function() {return true; };\n\n\t\treturn this._views.filter(filter);\n\n\t}\n\n\n\n\t/**\n\t * @method viewNew()\n\t *\n\t * return an instance of a new (unsaved) ABView that is tied to this\n\t * ABApplication.\n\t *\n\t * NOTE: this new view is not included in our this.views until a .save()\n\t * is performed on the view.\n\t *\n\t * @return {ABViews}\n\t */\n\tviewNew( values ) {\n\t\treturn new ABViewManager.newView(values, this, null);\n\t}\n\n\n\n\t/**\n\t * @method viewDestroy()\n\t *\n\t * remove the current ABView from our list of ._views.\n\t *\n\t * @param {ABView} view\n\t * @return {Promise}\n\t */\n\tviewDestroy( view ) {\n\n\t\tvar remainingViews = this.views(function(v) { return v.id != view.id;})\n\t\tthis._views = remainingViews;\n\t\treturn this.save();\n\t}\n\n\n\n\t/**\n\t * @method viewSave()\n\t *\n\t * persist the current ABView in our list of ._views.\n\t *\n\t * @param {ABView} object\n\t * @return {Promise}\n\t */\n\tviewSave( view ) {\n\t\tvar isIncluded = (this.views(function(v){ return v.id == view.id }).length > 0);\n\t\tif (!isIncluded) {\n\t\t\tthis._views.push(view);\n\t\t}\n\n\t\treturn this.save();\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/ABApplication.js","import Service from \"./comm_service\"\n\nexport default {\n\n\t// OP.Comm.Service.*\n\tService: Service\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/comm/comm.js","\n/**\n * @class config\n *\n * Manage our configuration settings.\n */\n\nimport ConfigDesktop from \"./configDesktop\"\nimport ConfigMobile from \"./configMobile\"\n\n\nexport default {\n\tconfig:function(){\n\n\t\t// TODO: decide which config file to return here:\n\t\tif (window.innerWidth < 768) {\n\t\t\treturn ConfigMobile;\n\t\t}\n\t\treturn ConfigDesktop;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/config/config.js","import Component from \"./component\"\n\n\nexport default class UICustomComponent extends Component {\n\n\tconstructor(App, componentKey) {\n\n\t\tsuper(App, componentKey);\n\n\n\t\t// Save our definition into App.custom.[key]\n\t    App.custom = App.custom || {};\n\t    App.custom[componentKey] = this;\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/customComponent.js","\n\nvar _restURLs = {\n\tfindAll: 'GET #url#',\n\tfindOne: 'GET #url#/{id}',\n\tcreate:  'POST #url#',\n\tupdate:  'PUT #url#/{id}',\n\tdestroy: 'DELETE #url#/{id}',\n}\n\n\nvar _Models = {};\n\n\nclass OPModel {\n\n\tconstructor(key, staticData, instanceData) {\n\n\t\tthis.key = key;\n\t\tthis.staticData = staticData;\n\t\tthis.instanceData = instanceData;\n\t\tthis.Model = staticData.Model;\n\n\t\tthis.url = {};\n\t\tfor(var r in _restURLs) {\n\t\t\tthis.url[r] = staticData[r]\n\t\t}\n\n\t}\n\n\tModels(Model) {\n\t\tthis.Model = Model;\n\t}\n\n\tfindAll(cond ) {\n\t\treturn new Promise( \n\t\t\t(resolve, reject) => {\n\n// NOTE: currently reusing AD.Model\n\n\t\t\t\t// var Model = AD.Model.get(this.key);\n\t\t\t\t// Model.findAll(cond)\n\n\t\t\t\tvar service = this.service('findAll');\n\n\t\t\t\tAD.comm.service[service.verb]({ url:service.url, params: cond })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done((data) => {\n\n\t\t\t\t\tdata = data.data || data;\n\n\t\t\t\t\t// our findAll() should return an array of items.\n\t\t\t\t\tif (!Array.isArray(data)) {\n\t\t\t\t\t\tdata = [data];\n\t\t\t\t\t}\n\n\n\t\t\t\t\t// return instances of this.Model if provided:\n\t\t\t\t\tif (this.Model) {\n\t\t\t\t\t\tvar newList = []; // Model.List();\n\t\t\t\t\t\tdata.forEach((l) => {\n\t\t\t\t\t\t\tif (l) {\n\t\t\t\t\t\t\t\tnewList.push( new this.Model(l) );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tdata = newList;\n\t\t\t\t\t}\n\n\n\t\t\t\t\t// convert to a WebixDataCollection:\n\t\t\t\t\tvar dc = new webix.DataCollection({\n\t\t\t\t\t\tdata: data,\n\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonAfterDelete: function(id) {\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\n\t\t\t\t\t// dc._toArray = function() {\n\t\t\t\t\t// \tvar data = [];\n\t\t\t\t\t// \tvar id = this.getFirstId();\n\t\t\t\t\t// \twhile(id) {\n\t\t\t\t\t// \t\tdata.push(this.getItem(id));\n\t\t\t\t\t// \t\tid = this.getNextId(id);\n\t\t\t\t\t// \t}\n\t\t\t\t\t// \treturn data;\n\t\t\t\t\t// }\n\n\n\n\t\t\t\t\tresolve(dc);\n\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n\n\tfindOne(cond) {\n\t\treturn new Promise( \n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar service = this.service('findOne');\n\n\t\t\t\tvar nURI = service.url;\n                for (var k in cond) {\n                    var oURI = nURI;\n                    nURI = AD.util.string.replaceAll(nURI, \"{\" + k + \"}\", cond[k]);\n\n                    // if there was a change, remove k from cond:\n                    if (oURI != nURI) {\n                        delete cond[k];\n                    }\n                }\n                service.url = nURI;\n\n\t\t\t\tAD.comm.service[service.verb]({ url:service.url, params: cond })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(function(item){\n\t\t\t\t\tif (item.translate) item.translate();\n\n\t\t\t\t\tresolve(item.attr?item.attr():item);\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n\n\tcreate(attr) {\n\t\treturn new Promise( \n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar service = this.service('create');\n\n\t\t\t\tAD.comm.service[service.verb]({ url:service.url, params: attr })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(function(item){\n\t\t\t\t\tif (item.translate) item.translate();\n\n\t\t\t\t\tresolve(item.attr?item.attr():item);\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n\n\tupdate(id, attr) {\n\t\treturn new Promise( \n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar service = this.service('update', id);\n\n\t\t\t\tAD.comm.service[service.verb]({ url:service.url, params: attr })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve);\n\t\t\t}\n\t\t);\n\t}\n\n\tdestroy(id) {\n\t\treturn new Promise( \n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar service = this.service('destroy', id);\n\n\t\t\t\tAD.comm.service[service.verb]({ url:service.url, params: {} })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve);\n\t\t\t}\n\t\t);\n\t}\n\n\n\tservice(key, id) {\n\t\tvar parts = this.url[key].split(' ');\n\t\tvar verb = parts[0].toLowerCase();\n\t\tvar uri = parts.pop(); \n\n\t\tif (id) {\n\t\t\tvar key = '{id}';\n\t        uri = AD.util.string.replaceAll(uri, key, id);\n\t    }\n\n        return {\n        \tverb:verb,\n        \turl:uri\n        }\n\t}\n}\n\n\nexport default {\n\n\textend:function(key, staticData, instance) {\n\n\n\t\t//\n\t\t// Create the AD.Model from this definition\n\t\t//\n\n\t\tif (staticData.restURL) {\n\t\t\tfor (var u in _restURLs) {\n\t\t\t\tstaticData[u] = _restURLs[u].replace('#url#', staticData.restURL);\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t// var alreadyThere = AD.Model.get(key);\n\t\t// if (!alreadyThere) {\n\n\t\t// \tAD.Model.Base.extend(key, staticData, instance);\n\t\t// \tAD.Model.extend(key, staticData, instance);\n\t\t// }\n\t\t\n\t\t//\n\t\t// Now create our OP.Model:\n\t\t//\n\t\tvar curr = nameSpace(_Models, key);\n\t\tvar modelName = objectName(key);\n\n\t\tcurr[modelName] = new OPModel(key, staticData, instance);\n\n\t},\n\n\tget: function(key) {\n\t\treturn findObject(_Models, key);\n\t}\n}\n\n\n\n\n\n\n\n\n            /*\n             * @function findObject\n             *\n             * Return the object specified by the given name space:\n             *\n             * @param {object} baseObj  The base object to search on\n             *                          usually AD.models or AD.models_base\n             *\n             * @param {string} name   The provided namespace to parse and search for\n             *                        The name can be spaced using '.' \n             *                        eg.  'coolTool.Resource1' => AD.models.coolTool.Resource1\n             *                             'coolerApp.tool1.Resource1' => AD.models.coolerApp.tool1.Resource1\n             *\n             * @returns {object}  the object resolved by the namespaced base \n             *                    eg:  findObject(AD.models, 'Resource') => return AD.models.Resource\n             *                         findObject(AD.models, 'coolTool.Resource1') => AD.models.coolTool.Resource1\n             *\n             *                    if an object is not found, null is returned.\n             */\n            var findObject = function (baseObj, name) {\n\n                // first lets figure out our namespacing:\n                var nameList = name.split('.');\n\n                // for each remaining name segments, make sure we have a \n                // namespace container for it:\n                var curr = baseObj;\n                nameList.forEach(function (name) {\n\n                    if (curr == null) {\n                        var whoops = true;\n                        console.error('! current name segment is null.  Check your given name to make sure it is properly given: ', name);\n                    }\n                    if (curr) {\n                        if (typeof curr[name] == 'undefined') {\n                            curr = null;\n                        }\n                        if (curr) curr = curr[name];\n                    }\n                })\n\n                return curr;\n            }\n\n\n\n            /*\n             * @function objectName\n             *\n             * parse the name and return the name of the object we will create.\n             *\n             * @param {string} name   The provided namespace to parse \n             *                        The name can be spaced using '.' \n             *\n             * @returns {string}  the name of the model object \n             *                    eg:  objectName('Resource') => return 'Resource'\n             *                         objectName('coolTool.Resource1') => 'Resource1'\n             */\n            var objectName = function (name) {\n\n                // first lets figure out our namespacing:\n                var nameList = name.split('.');\n                var objName = nameList.pop(); // remove the last one.\n\n                return objName;\n            }\n\n\n\n            /*\n             * @function nameSpace\n             *\n             * Make sure the proper name space is created on the given base.\n             *\n             * @param {object} baseObj  The base object to create the namespace on\n             *                          usually AD.models or AD.models_base\n             *\n             * @param {string} name   The provided namespace to parse and create\n             *                        The name can be spaced using '.' \n             *                        eg.  'coolTool.Resource1' => AD.models.coolTool.Resource1\n             *                             'coolerApp.tool1.Resource1' => AD.models.coolerApp.tool1.Resource1\n             *\n             * @returns {object}  the object that represents the namespaced base \n             *                    that the Model is to be created on.\n             *                    eg:  nameSpace(AD.models, 'Resource') => return AD.models\n             *                         nameSpace(AD.models, 'coolTool.Resource1') => AD.models.coolTool\n             */\n            var nameSpace = function (baseObj, name) {\n\n                // first lets figure out our namespacing:\n                var nameList = name.split('.');\n                var controlName = nameList.pop(); // remove the last one.\n\n                // for each remaining name segments, make sure we have a \n                // namespace container for it:\n                var curr = baseObj;\n                nameList.forEach(function (name) {\n\n                    if (typeof curr[name] == 'undefined') {\n                        curr[name] = {};\n                    }\n                    curr = curr[name];\n                })\n\n                return curr;\n            }\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/model.js","/*\n * OP.Multilingual\n *\n * A set of helpers for Multilingual Data.\n *\n */\n\nexport default {\n\n\t/**\n\t * @function OP.Multilingual.translate\n\t *\n\t * Given a set of json data, pull out any multilingual translations\n\t * and flatten those values to the base object.\n\t *\n\t * @param {obj} obj  The instance of the object being translated\n\t * @param {json} json The json data being used for translation.\n\t *\t\t\t\t\t\tThere should be json.translations = [ {transEntry}, ...]\n\t *\t\t\t\t\t\twhere transEntry = {\n\t *\t\t\t\t\t\t\tlanguage_code:'en',\n\t *\t\t\t\t\t\t\tfield1:'value',\n\t *\t\t\t\t\t\t\t...\n\t *\t\t\t\t\t\t}\n\t * @param {array} fields an Array of multilingual fields to pull to \n\t *\t\t\t\t\t\t the obj[field] value.\n\t *\n\t */\n\ttranslate:function(obj, json, fields) {\n\n\t\tif (!json.translations) {\n\t\t\tjson.translations = [];\n\t\t}\n\n\t\tvar currLanguage = AD.lang.currentLanguage || 'en';\n\n\t\tif (fields && fields.length > 0) {\n\n\t\t\tjson.translations.forEach(function(t){\n\t\t\t\t// find the translation for the current language code\n\t\t\t\tif (t.language_code == currLanguage) {\n\n\t\t\t\t\t// copy each field to the root object\n\t\t\t\t\tfields.forEach(function(f){\n\t\t\t\t\t\tobj[f] = t[f] || '';  // default to '' if not found. \n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\n\t\t}\n\t},\n\n\n\t/**\n\t * @function OP.Multilingual.unTranslate\n\t *\n\t * Take the multilingual information in the base obj, and push that \n\t * down into the json.translations data.\n\t *\n\t * @param {obj} obj  The instance of the object with the translation\n\t * @param {json} json The json data being used for translation.\n\t *\t\t\t\t\t\tThere should be json.translations = [ {transEntry}, ...]\n\t *\t\t\t\t\t\twhere transEntry = {\n\t *\t\t\t\t\t\t\tlanguage_code:'en',\n\t *\t\t\t\t\t\t\tfield1:'value',\n\t *\t\t\t\t\t\t\t...\n\t *\t\t\t\t\t\t}\n\t * @param {array} fields an Array of multilingual fields to pull from \n\t *\t\t\t\t\t\t the obj[field] value.\n\t *\n\t */\n\tunTranslate: function( obj, json, fields) {\n\n\t\tjson = json || {};\n\t\tfields = fields || [];\n\n\t\tif (!json.translations) {\n\t\t\tjson.translations = [];\n\t\t}\n\n\t\tvar currLanguage = AD.lang.currentLanguage || 'en';\n\n\n\t\tif (fields && fields.length > 0) {\n\n\t\t\tvar foundOne = false;\n\n\t\t\tjson.translations.forEach(function(t){\n\t\t\t\t// find the translation for the current language code\n\t\t\t\tif (t.language_code == currLanguage) {\n\n\t\t\t\t\t// copy each field to the root object\n\t\t\t\t\tfields.forEach(function(f){\n\t\t\t\t\t\t\n\t\t\t\t\t\t// verify obj[f] is defined \n\t\t\t\t\t\t// --> DONT erase the existing translation\n\t\t\t\t\t\tif (typeof obj[f] != 'undefined'){\n\t\t\t\t\t\t\tt[f] = obj[f];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t})\n\n\t\t\t\t\tfoundOne = true;\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// if we didn't update an existing translation\n\t\t\tif (!foundOne) {\n\n\t\t\t\t// create a translation entry:\n\t            var trans = {};\n\n\t            // assume current languageCode:\n\t            trans.language_code = currLanguage;\n\n\t            fields.forEach(function (field) {\n\t                if (obj[field] != null) {\n\t                    trans[field] = obj[field];\n\t                }\n\t            })\n\n\t            json.translations.push(trans);\n\t\t\t}\n\n\t\t}\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/multilingual.js","\nexport default {\n\t\n\tuuid: AD.util.uuid\n\t\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/util.js","\nclass OPValidator {\n\n\tconstructor() {\n\n\t\tthis.errors = [];\n\t}\n\n\taddError(name, message) {\n\t\tthis.errors.push({name:name, message:message });\n\t}\n\n\tpass() {\n\t\treturn this.errors.length == 0;\n\t}\n\n\tfail() {\n\t\treturn this.errors.length > 0;\n\t}\n\n\ttoValidationObject() {\n\t\tvar obj = {\n\t\t\terror:'E_VALIDATION',\n\t\t\tinvalidAttributes:{\n\n\t\t\t}\n\t\t}\n\n\t\tvar attr = obj.invalidAttributes;\n\t\t\n\t\tthis.errors.forEach((e)=>{\n\n\t\t\tattr[e.name] = attr[e.name] || [];\n\t\t\tattr[e.name].push(e);\n\t\t})\n\n\t\treturn obj;\n\t}\n\n\n\tupdateForm(form) {\n\t\tvar vObj = this.toValidationObject();\n\t\tOP.Validation.isFormValidationError(vObj, form);\n\t}\n\n\tupdateGrid(rowID, grid) {\n\t\tvar vObj = this.toValidationObject();\n\t\tOP.Validation.isGridValidationError(vObj, rowID, grid);\n\t}\n}\n\n\n//// LEFT OFF HERE:\n// add an OP.Validation  and remove OP.Form  OP.Grid\n// update existing Applicaiton, Object, Field forms to use this.\n\n\nexport default {\n\n\t/**\n\t * @function OP.Validation.validator\n\t * return a new instance of OPValidator.\n\t * @return {OPValidator}\n\t */\n\tvalidator:function() {\n\t\treturn new OPValidator();\n\t},\n\n// var validator = OP.Validation.validator()\n// validator.addError('name', 'message')\n// validator.pass() \n// validator.updateForm(Form);\n// validator.updateGrid(editor, Grid);\n\n\t/**\n\t * @function OP.Validation.isFormValidationError\n\t *\n\t * scans the given error to see if it is a sails' response about an invalid\n\t * value from one of the form elements.\n\t *\n\t * @codestart\n\t * var form = $$('formID');\n\t * var values = form.getValues();\n\t * model.attr(values);\n\t * model.save()\n\t * .fail(function(err){\n\t *     if (!OP.Form.isFormValidationError(err, form)) {\n\t *         OP.error.log('Error saving current model ()', {error:err, values:values});\n\t *     }\n\t * })\n\t * .then(function(newData){\n\t * \n\t * });\n\t * @codeend\n\t *\n\t * @param {obj} error  the error response object\n\t * @param {obj} form   the webix form instance (or reference)\n\t * @return {bool}      true if error was about a form element.  false otherwise.\n\t */\n\tisFormValidationError: function(error, form) {\n\n\t\t// {bool} have we set focus to form component?\n\t\tvar hasFocused = false;\n\n\n\t\t// if we have an error object:\n\t\tif (error) { \n\n\n\t\t\t//// if the error obj is provided by Sails response, \n\t\t\t//// do some clean up on the error object:\n\n\n\t\t\t// dig down to sails provided error object:\n\t\t\tif ((error.error)\n\t\t\t\t&& (error.error == 'E_UNKNOWN')\n\t\t\t\t&& (error.raw)\n\t\t\t\t&& (error.raw.length > 0)) {\n\n\t\t\t\terror = error.raw[0]\n\t\t\t}\n\n\t\t\t// drill down to the embedded .err object if it exists\n\t\t\tif (error.err) {\n\t\t\t\terror = error.err;\n\t\t\t}\n\n\n\t\t\t//// Now process the error object\n\t\t\t//// \n\t\t\tif (((error.error)\n\t\t\t\t\t&& (error.error == 'E_VALIDATION'))\n\t\t\t\t|| ((error.code) && (error.code == 'E_VALIDATION'))) {\n\n\t\t\t\tvar attrs = error.invalidAttributes;\n\t\t\t\tif (attrs) {\n\n\t\t\t\t\tvar wasForm = false;\n\t\t\t\t\tfor (var attr in attrs) {\n\n\t\t\t\t\t\t// if this is a field in the form:\n\t\t\t\t\t\tif (form.elements[attr]) {\n\n\t\t\t\t\t\t\tvar errors = attrs[attr];\n\t\t\t\t\t\t\tvar msg = [];\n\t\t\t\t\t\t\terrors.forEach(function(err) {\n\t\t\t\t\t\t\t\tmsg.push(err.message);\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t// set the invalid error message\n\t\t\t\t\t\t\tform.markInvalid(attr, msg.join(', '));\n\n\t\t\t\t\t\t\t// set focus to the 1st form element we mark:\n\t\t\t\t\t\t\tif (!hasFocused) {\n\t\t\t\t\t\t\t\tform.elements[attr].focus();\n\t\t\t\t\t\t\t\thasFocused = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\twasForm = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (wasForm) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\t// if we missed updating our form with an error\n\t\t// this was not a validation error so return false\n\t\treturn false\n\n\t},\n\n\n\n\t/**\n\t * @function OP.Validation.isGridValidationError\n\t *\n\t * scans the given error to see if it is a sails' response about an invalid\n\t * value from one of our grid columns.\n\t *\n\t * @codestart\n\t * var grid = $$('myGrid');\n\t * model.attr(values);\n\t * model.save()\n\t * .fail(function(err){\n\t *     if (!OP.Validation.isGridValidationError(err, editor, grid)) {\n\t *         OP.error.log('Error saving current model ()', {error:err, values:values});\n\t *     }\n\t * })\n\t * .then(function(newData){\n\t * \n\t * });\n\t * @codeend\n\t *\n\t * @param {obj} error  the error response object\n\t * @param {integer} row the row id of the Grid to update.\n\t * @param {obj} Grid   the webix grid instance (or reference)\n\t * @return {bool}      true if error was about a grid column.  false otherwise.\n\t */\n\tisGridValidationError: function(error, row, Grid) {\n\n\n\t\t// if we have an error object:\n\t\tif (error) { \n\n\n\t\t\t//// if the error obj is provided by Sails response, \n\t\t\t//// do some clean up on the error object:\n\n\n\t\t\t// dig down to sails provided error object:\n\t\t\tif ((error.error)\n\t\t\t\t&& (error.error == 'E_UNKNOWN')\n\t\t\t\t&& (error.raw)\n\t\t\t\t&& (error.raw.length > 0)) {\n\n\t\t\t\terror = error.raw[0]\n\t\t\t}\n\n\t\t\t// drill down to the embedded .err object if it exists\n\t\t\tif (error.err) {\n\t\t\t\terror = error.err;\n\t\t\t}\n\n\t\t\t// if this is from our server response:\n\t\t\tif (error.data && error.data.error && error.data.error == 'E_VALIDATION') {\n\t\t\t\terror = error.data;\n\t\t\t}\n\n\n\n\t\t\t//// Now process the error object\n\t\t\t//// \n\t\t\tif (((error.error)\n\t\t\t\t\t&& (error.error == 'E_VALIDATION'))\n\t\t\t\t|| ((error.code) && (error.code == 'E_VALIDATION'))) {\n\n\t\t\t\tvar attrs = error.invalidAttributes;\n\t\t\t\tif (attrs) {\n\n\t\t\t\t\tvar wasGrid = false;\n\t\t\t\t\tfor (var attr in attrs) {\n\n\t\t\t\t\t\t// if this is a field in the form:\n\t\t\t\t\t\t// if (form.elements[attr]) {\n\n\t\t\t\t\t\t// \tvar errors = attrs[attr];\n\t\t\t\t\t\t// \tvar msg = [];\n\t\t\t\t\t\t// \terrors.forEach(function(err) {\n\t\t\t\t\t\t// \t\tmsg.push(err.message);\n\t\t\t\t\t\t// \t})\n\n\t\t\t\t\t\t// \t// set the invalid error message\n\t\t\t\t\t\t// \tform.markInvalid(attr, msg.join(', '));\n\n\t\t\t\t\t\t// \t// set focus to the 1st form element we mark:\n\t\t\t\t\t\t// \tif (!hasFocused) {\n\t\t\t\t\t\t// \t\tform.elements[attr].focus();\n\t\t\t\t\t\t// \t\thasFocused = true;\n\t\t\t\t\t\t// \t}\n\n\t\t\t\t\t\t// \twasForm = true;\n\t\t\t\t\t\t// }\n\n\n\t\t\t\t\t\t\tGrid.addCellCss(row, attr, \"webix_invalid\");\n\t\t\t\t\t\t\tGrid.addCellCss(row, attr, \"webix_invalid_cell\");\n\n\t\t\t\t\t\t\tvar msg = [];\n\t\t\t\t\t\t\tattrs[attr].forEach((e)=>{\n\t\t\t\t\t\t\t\tmsg.push(e.message);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\t\t\t\ttext: attr + ': ' + msg.join(', ')\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\twasGrid = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tGrid.refresh(row);\n\n\t\t\t\t\tif (wasGrid) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\t// if we missed updating our Grid with an error\n\t\t// this was not a validation error so return false\n\t\treturn false\n\n\t}\n\n\n\t\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/validation.js","//\n// OP.Comm.Service.*\n// \n// Map our old jQuery deferred comm utilities with ES6 promises.\n//\n\n\nvar services = {\n\n\n\t// OP.Comm.Service.get(options, cb) => {promise}\n\tget: function(options, cb) {\n\t\treturn new Promise( \n\t\t\t(resolve, reject) => {\n\t\t\t\tAD.comm.service.get(options,cb)\n\t\t\t\t.then(resolve, reject);\n\t\t\t}\n\t\t);\n\t},\n\n\n\t// OP.Comm.Service.post(options, cb) => {promise}\n\tpost: function(options, cb) {\n\t\treturn new Promise( \n\t\t\t(resolve, reject) => {\n\t\t\t\tAD.comm.service.post(options,cb)\n\t\t\t\t.then(resolve, reject);\n\t\t\t}\n\t\t);\n\t},\n\n\n\t// OP.Comm.Service.put(options, cb) => {promise}\n\tput: function(options, cb) {\n\t\treturn new Promise( \n\t\t\t(resolve, reject) => {\n\t\t\t\tAD.comm.service.put(options,cb)\n\t\t\t\t.then(resolve, reject);\n\t\t\t}\n\t\t);\n\t}\n\n}\n\n\n// OP.Comm.Service.delete(options, cb) => {promise}\nservices['delete'] = function(options, cb) {\n\treturn new Promise( \n\t\t(resolve, reject) => {\n\t\t\tAD.comm.service['delete'](options,cb)\n\t\t\t.then(resolve, reject);\n\t\t}\n\t);\n}\n\n\nexport default services;\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/comm/comm_service.js","\n/**\n * @class configDesktop\n *\n * Manage our configuration settings for Desktop styles.\n\n */\n\n\n\nexport default {\n\n\t// Application List\n\tappListRowHeight: 70,\n\n\t// button types\n\tbuttonWidthLarge: 200,\n\tbuttonWidthMedium: 150,\n\tbuttonWidthSmall: 100,\n\tbuttonWidthExtraSmall: 50,\n\n\t// tab types\n\ttabWidthLarge: 200,\n\ttabWidthMedium: 120,\n\ttabWidthSmall: 100,\n\ttabWidthExtraSmall: 50,\n\n\t// column types\n\n\n\t// spacers\n\tsmallSpacer: 10,\n\tmediumSpacer: 25,\n\tlargeSpacer: 50,\n\txLargeSpacer: 100,\n\txxLargeSpacer: 200,\n\txxxLargeSpacer: 400,\n\tappListSpacerRowHeight: 100,\n\tappListSpacerColMinWidth: 100,\n\tappListSpacerColMaxWidth: 200,\n\tobjectWorkspaceColWidth: 20,\n\n\t// labels\n\tlabelWidthSmall: 50,\n\tlabelWidthMedium: 80,\n\tlabelWidthLarge: 120,\n\tlabelWidthXLarge: 150,\n\tlabelWidthCheckbox: 0,\n\n\t// show elements on desktop\n\thideMobile: false,\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/config/configDesktop.js","\n/**\n * @class configMobile\n *\n * Manage our configuration settings for mobile styles.\n\n */\n\n\n\nexport default {\n\n\t// Application List\n\tappListRowHeight: 70,\n\n\t// button types\n\tbuttonWidthLarge: 200,\n\tbuttonWidthMedium: 150,\n\tbuttonWidthSmall: 100,\n\tbuttonWidthExtraSmall: 50,\n\n\t// tab types\n\ttabWidthLarge: 200,\n\ttabWidthMedium: 120,\n\ttabWidthSmall: 100,\n\ttabWidthExtraSmall: 50,\n\n\t// column types\n\n\n\t// spacers\n\tsmallSpacer: 1,\n\tmediumSpacer: 10,\n\tlargeSpacer: 20,\n\txLargeSpacer: 50,\n\txxLargeSpacer: 100,\n\txxxLargeSpacer: 120,\n\tappListSpacerRowHeight: 10,\n\tappListSpacerColMinWidth: 1,\n\tappListSpacerColMaxWidth: 1,\n\tobjectWorkspaceColWidth: 1,\n\n\t// labels\n\tlabelWidthSmall: 50,\n\tlabelWidthMedium: 80,\n\tlabelWidthLarge: 120,\n\tlabelWidthCheckbox: 0,\n\n\t// hide elements for mobile\n\thideMobile: true,\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/OP/config/configMobile.js","/*\n * ABViewPage\n *\n * An ABView that represents a \"Page\" in the system.\n *\n * Pages are \n *\t- allowed to be displayed in the interface list\n *\t- return a full list of components that can be added to the view editor\n * \n *\n */\n\nimport ABView from \"./ABView\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar ABViewDefaults = {\n\tkey: 'page',\t\t// unique key identifier for this ABView\n\ticon: 'cube',\t\t// icon reference: (without 'fa-' )\n\n}\n\nexport default class ABViewPage extends ABView  {\n\n    constructor(values, application, parent) {\n\n    \tsuper( values, application, parent, ABViewDefaults );\n\n    \t\n  \t// \t{\n  \t// \t\tid:'uuid',\t\t\t\t\t// uuid value for this obj\n  \t// \t\tkey:'viewKey',\t\t\t\t// unique key for this View Type\n  \t// \t\ticon:'font',\t\t\t\t// fa-[icon] reference for an icon for this View Type\n  \t// \t\tlabel:'',\t\t\t\t\t// pulled from translation\n\n\t//\t\tsettings: {\t\t\t\t\t// unique settings for the type of field\n\t//\t\t},\n\n\t//\t\ttranslations:[]\n  \t// \t}\n  \t\t\n\n  \t}\n\n\n  \tstatic defaults() {\n  \t\treturn ABViewDefaults;\n  \t}\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/views/ABViewPage.js","\n/*\n * ab_common_popupEditMenu\n *\n * Many of our Lists offer a gear icon that allows a popup menu to select\n * a set of options for this entry.  This is a common Popup Editor for those\n * options.\n *\n */\n\n\nexport default class ABCommonPopupEditMenu extends OP.Component { \n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_common_popupEditMenu');\n\n\t\tvar L = this.Label;\n\n\t\tvar labels = {\n\n\t\t\tcommon: App.labels,\n\n\t\t\tcomponent: {\n\t\t\t\tmenu: L('ab.application.menu', \"*Application Menu\"),\n\t\t\t\tconfirmDeleteTitle: L('ab.application.delete.title', \"*Delete application\"),\n\t\t\t\tconfirmDeleteMessage: L('ab.application.delete.message', \"*Do you want to delete <b>{0}</b>?\")\t\t\t\t\n\t\t\t}\n\t\t}\n\n\n\t\t// since multiple instances of this component can exists, we need to \n\t\t// make each instance have unique ids => so add webix.uid() to them:\n\t\tvar uid = webix.uid();\n\t\tvar ids = {\n\t\t\tmenu: this.unique('menu')+uid,\n\t\t\tlist: this.unique('list')+uid\n\t\t}\n\n\n\n\t\tthis.ui = {\n\t\t\tview: \"popup\",\n\t\t\tid: ids.menu,\n\t\t\thead: labels.component.menu,\n\t\t\twidth: 120,\n\t\t\tbody: {\n\t\t\t\tview: \"list\",\n\t\t\t\tid: ids.list,\n\t\t\t\tborderless: true,\n\t\t\t\tdata: [\n\t\t\t\t\t{ label: labels.common.rename, icon: \"fa-pencil-square-o\" },\n\t\t\t\t\t{ label: labels.common.delete, icon: \"fa-trash\" }\n\t\t\t\t],\n\t\t\t\tdatatype: \"json\",\n\t\t\t\ttemplate: \"<i class='fa #icon#' aria-hidden='true'></i> #label#\",\n\t\t\t\tautoheight: true,\n\t\t\t\tselect: false,\n\t\t\t\ton: {\n\t\t\t\t\t'onItemClick': function (timestamp, e, trg) {\n\t\t\t\t\t\treturn _logic.onItemClick(trg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\n\t\tvar Popup = null;\n\t\tvar _menuOptions = [\n\t\t\t{ label: labels.common.rename, icon: \"fa-pencil-square-o\", command:'rename' },\n\t\t\t{ label: labels.common.delete, icon: \"fa-trash\", command:'delete' }\n\t\t];\n\n\t\tthis.init =  (options) => {\n\n\t\t\tPopup = webix.ui(this.ui);\t// the current instance of this editor.\n\n\t\t\t_logic.hide();\n\t\t\t_logic.menuOptions(_menuOptions);\n\n\t\t\t// register our callbacks:\n\t\t\tfor (var c in _logic.callbacks) {\n\t\t\t\tif (options && options[c]) {\n\t\t\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar _logic = this._logic = {\n\n\t\t\tcallbacks: {\n\t\t\t\tonClick: function (action) {\n\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function menuOptions\n\t\t\t * override the set of menu options.\n\t\t\t * @param {array} menuOptions an array of option entries:\n\t\t\t *\t\t\t\t  .label {string} multilingual label of the option\n\t\t\t *\t\t\t\t  .icon  {string} the font awesome icon reference\n\t\t\t *\t\t\t\t  .command {string} the command passed back when selected.\n\t\t\t */\n\t\t\tmenuOptions:function(menuOptions) {\n\n\t\t\t\t$$(ids.list).clearAll();\n\t\t\t\t\n\t\t\t\t_menuOptions = menuOptions;\n\t\t\t\tvar data = [];\n\t\t\t\tmenuOptions.forEach((mo)=>{\n\t\t\t\t\tdata.push({ label:mo.label, icon:mo.icon })\n\t\t\t\t})\n\t\t\t\t$$(ids.list).parse(data);\n\t\t\t\t$$(ids.list).refresh();\n\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function onItemClick\n\t\t\t * process which item in our popup was selected.\n\t\t\t */\n\t\t\tonItemClick: function (itemNode) {\n\n\t\t\t\t// hide our popup before we trigger any other possible UI animation: (like .edit)\n\t\t\t\t// NOTE: if the UI is animating another component, and we do .hide()\n\t\t\t\t// while it is in progress, the UI will glitch and give the user whiplash.\n\n\t\t\t\t// switch (itemNode.textContent.trim()) {\n\t\t\t\t// \tcase labels.common.rename:\n\t\t\t\t// \t\tthis.callbacks.onClick('rename');\n\t\t\t\t// \t\tbreak;\n\t\t\t\t// \tcase labels.common['delete']:\n\t\t\t\t// \t\tthis.callbacks.onClick('delete');\n\t\t\t\t// \t\tbreak;\n\t\t\t\t// }\n\t\t\t\tvar label = itemNode.textContent.trim();\n\t\t\t\tvar option = _menuOptions.filter((mo)=>{ return mo.label == label;})[0];\n\t\t\t\tif (option) {\n\t\t\t\t\tthis.callbacks.onClick(option.command);\n\t\t\t\t}\n\n\t\t\t\tthis.hide();\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tshow: function (itemNode) {\n\t\t\t\tif (Popup && itemNode)\n\t\t\t\t\tPopup.show(itemNode);\n\t\t\t},\n\n\t\t\thide: function () {\n\t\t\t\tif (Popup)\n\t\t\t\t\tPopup.hide();\n\t\t\t}\n\n\t\t}\n\n\n\t\t// external interface:\n\t\tthis.menuOptions = _logic.menuOptions;\n\t\tthis.show = _logic.show;\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_common_popupEditMenu.js","/* \n * ABFieldManager\n * \n * An interface for managing the different ABFields available in our AppBuilder.\n *\n */\n\n\nimport ABFieldString from \"./dataFields/ABFieldString\"\nimport ABFieldNumber from \"./dataFields/ABFieldNumber\"\nimport ABFieldDate from \"./dataFields/ABFieldDate\"\nimport ABFieldBoolean from \"./dataFields/ABFieldBoolean\"\n\n\nimport ABFieldImage from \"./dataFields/ABFieldImage\"\n\n/* \n * Fields\n * A name => ABField  hash of the different ABFields available.\n */\nvar Fields = {};\nFields[ABFieldString.defaults().key] = ABFieldString;\nFields[ABFieldNumber.defaults().key] = ABFieldNumber;\nFields[ABFieldDate.defaults().key] = ABFieldDate;\nFields[ABFieldBoolean.defaults().key] = ABFieldBoolean;\n\n\nFields[ABFieldImage.defaults().key] = ABFieldImage;\n\n\n\nexport default  {\n\n\n\t/*\n\t * @function allFields\n\t * return all the currently defined ABFields in an array.\n\t * @return [{ABField},...]\n\t */\n\tallFields: function() {\n\t\tvar fields = [];\n\t\tfor (var f in Fields) {\n\t\t\tfields.push(Fields[f]);\n\t\t}\n\t\treturn fields;\n\t},\n\n\n\t/*\n\t * @function newField\n\t * return an instance of an ABField based upon the values.type value.\n\t * @return {ABField}\n\t */\n\tnewField: function (values, object) {\n\n\t\tif (values.key) {\n\t\t\treturn new Fields[values.key](values, object);\n\t\t} else {\n\n//// TODO: what to do here?\n\t\t}\n\n\t}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/ABFieldManager.js","\n/*\n * AB\n *\n * The base AppBuilder component.  It manages these components:\n *   - ab_choose :  choose an application to work with\n *   - ab_work   :  load an application into the work area\n *\n */\n\n// import '../OP/OP'\n\nimport AB_Choose from './ab_choose'\nimport AB_Work from './ab_work'\n\n// Import our Custom Components here:\nimport EditTree from '../webix_custom_components/edittree'\nimport EditList from '../webix_custom_components/editlist'\nimport DateTimePicker from '../webix_custom_components/datetimepicker'\n\nimport style from \"../AppBuilder.css\"\n\nexport default class AB extends OP.Component {    //('ab', function(App) {\n\n\n\tconstructor(App) {\n\t\tsuper(App, 'ab');\n\n\t\tApp = this.App;\n\t\tvar L = this.Label;\n\n\n\t\t// setup the common labels for our AppBuilder Application.\n\t\tApp.labels = {\n\t\t\tadd: L('ab.common.add', \"*Add\"),\n\t\t\tcreate: L('ab.common.create', \"*Create\"),\n\t\t\t\"delete\": L('ab.common.delete', \"*Delete\"),\n\t\t\tedit: \t  L('ab.common.edit', \"*Edit\"),\n\t\t\t\"export\": L('ab.common.export', \"*Export\"),\n\t\t\tformName: L('ab.common.form.name', \"*Name\"),\n\t\t\t\"import\": L('ab.common.import', \"*Import\"),\n\t\t\trename: L('ab.common.rename', \"*Rename\"),\n\t\t\tok: \t  L('ab.common.ok', \"*Ok\"),\n\n\t\t\tcancel:   L('ab.common.cancel', \"*Cancel\"),\n\t\t\tsave: \t  L('ab.common.save', \"*Save\"),\n\n\t\t\tyes: \t  L('ab.common.yes', \"*Yes\"),\n\t\t\tno: \t  L('ab.common.no', \"*No\"),\n\n\t\t\tcreateErrorMessage:   L('ab.common.create.error', \"*System could not create <b>{0}</b>.\"),\n\t\t\tcreateSuccessMessage: L('ab.common.create.success', \"*<b>{0}</b> is created.\"),\n\n\t\t\tupdateErrorMessage:  L('ab.common.update.error', \"*System could not update <b>{0}</b>.\"),\n\t\t\tupdateSucessMessage: L('ab.common.update.success', \"*<b>{0}</b> is updated.\"),\n\n\t\t\tdeleteErrorMessage:   L('ab.common.delete.error', \"*System could not delete <b>{0}</b>.\"),\n\t\t\tdeleteSuccessMessage: L('ab.common.delete.success', \"*<b>{0}</b> is deleted.\"),\n\n\t\t\trenameErrorMessage: L('ab.common.rename.error', \"*System could not rename <b>{0}</b>.\"),\n\t\t\trenameSuccessMessage: L('ab.common.rename.success', \"*<b>{0}</b> is renamed.\"),\n\n\n\t\t\t// Data Field  common Property labels:\n\t\t\tdataFieldHeaderLabel: L('ab.dataField.common.headerLabel', '*Label'),\n\t\t\tdataFieldHeaderLabelPlaceholder: L('ab.dataField.common.headerLabelPlaceholder', '*Header Name'),\n\n\t\t\tdataFieldColumnName: L('ab.dataField.common.columnName', '*Name'),\n\t\t\tdataFieldColumnNamePlaceholder: L('ab.dataField.common.columnNamePlaceholder', '*Column Name'),\n\n\t\t\tdataFieldShowIcon: L('ab.dataField.common.showIcon', '*show icon?')\n\t\t}\n\n\n\t\t// make instances of our Custom Components:\n\t\tnew EditList(App, 'editlist');\t// ->  App.custom.editlist  now exists\n\t\tnew EditTree(App, 'edittree');\t// ->  App.custom.edittree  now exists\n\t\tnew DateTimePicker(App, 'datetimepicker'); // ->  App.custom.datetimepicker  now exists\n\n\n\t\tvar ids = {\n\t\t\tcomponent:this.unique('root')\n\t\t}\n\n\n\t\t// Define the external components used in this Component:\n\t\tvar AppChooser = new AB_Choose(App);\n\t\tvar AppWorkspace = new AB_Work(App);\n\n\n\t\t// This component's UI definition:\n\t\t// Application multi-views\n\t\tthis.ui = {\n\t\t\tid: ids.component,\n\t\t\tview:\"multiview\",\n\t\t\tborderless:true,\n\t\t\tanimate: false,\n// height : 800,\n\t\t\trows:[\n\t\t\t\tAppChooser.ui,\n\t\t\t\tAppWorkspace.ui\n\t\t\t]\n\t\t};\n\n\n\t\tthis.init = function() {\n\n\t\t\tAppChooser.init();\n\t\t\tAppWorkspace.init();\n\n\t\t\t// start off only showing the App Chooser:\n\t\t\tApp.actions.transitionApplicationChooser();\n\n\t\t\t// perform an initial resize adjustment\n\t\t\t$$(ids.component).adjust();\n\t\t}\n\n\n\n\t\tthis.actions({\n\n\t\t})\n\n\t}\n\n};\n\n\n\n\n\n\n//// REFACTORING TODOs:\n// TODO: AppForm-> Permissions : refresh permission list, remove AppRole permission on Application.delete().\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab.js","\n// import 'OP';\n// import '../../../../../assets/js/webix/webix'\n\n\nimport AB from './components/ab'\n\n\nAD.Control.OpsTool.extend('BuildApp', {\n\n\tinit: function (element, options) {\n\t\tvar self = this;\n\n\t\toptions = AD.defaults({\n\t\t\ttemplateDOM: '/opstools/BuildApp/views/BuildApp/BuildApp.ejs',\n\t\t\tresize_notification: 'BuildApp.resize',\n\t\t\ttool: null   // the parent opsPortal Tool() object\n\t\t}, options);\n\t\tself.options = options;\n\n\t\t// Call parent init\n\t\tself._super(element, options);\n\n\t\tself.data = {};\n\n\t\tself.webixUiId = {\n\t\t\tloadingScreen: 'ab-loading-screen',\n\t\t\tsyncButton: 'ab-sync-button'\n\t\t};\n\n\t\tself.initDOM(function(){\n\t\t\tself.initWebixUI();\n\t\t});\n\n\n\t},\n\n\n\tinitDOM: function (cb) {\n\t\tvar _this = this;\n\n\t\tcan.view(this.options.templateDOM, {}, function(fragment){\n\t\t\t_this.element.html(fragment);\n\n\t\t\t// _this.element.find(\".ab-app-list\").show();\n\t\t\t// _this.element.find(\".ab-app-workspace\").hide();\n\n\t\t\tcb();\n\t\t});\n\t},\n\n\n\tinitWebixUI: function () {\n\n\t\t// get the AppBuilder (AB) Webix Component\n\t\t// var AppBuilder = OP.Component['ab']();\n\t\tvar AppBuilder = new AB();\n\t\tvar ui = AppBuilder.ui;\n\n\t\t// tell the AppBuilder where to attach\n\t\tui.container = 'ab-main-container'\n\n\t\t// instantiate the UI first\n\t\tthis.AppBuilder = webix.ui(ui);\n\n\t\t// then perform the init()\n\t\tAppBuilder.init();\n\n\t},\n\n\n\tresize: function (height) {\n\t\tvar self = this;\n\n\t\theight = height.height || height;\n\n\t\tvar appListDom = $(self.element);\n\n\t\tif (appListDom) {\n\t\t\tvar width = appListDom.parent().css('width');\n\t\t\tif (width) {\n\t\t\t\twidth = parseInt(width.replace('px', ''));\n\t\t\t}\n\t\t\tappListDom.width(width);\n\n\t\t\t// Removed this because the 140 pixels was causing the list to not scroll to the bottom of the page\n\t\t\t// var computedHeight = height - 140;\n\n\t\t\tvar computedHeight = height;\n\t\t\tconsole.log(\"computed height: \" + computedHeight);\n\t\t\tvar mh = parseInt(appListDom.css('min-height').replace('px', ''));\n\t\t\tconsole.log(\"min-height: \" + mh);\n\t\t\tif (mh < computedHeight) {\n\t\t\t\tappListDom.height(computedHeight);\n\t\t\t\t$('#ab-main-container').height(computedHeight);\n\t\t\t} else {\n\t\t\t\tappListDom.height(mh);\n\t\t\t\t$('#ab-main-container').height(mh);\n\t\t\t}\n\n\t\t\tif (this.AppBuilder) {\n\t\t\t\t// this.AppBuilder.define('height', height - 140);\n\t\t\t\tthis.AppBuilder.adjust();\n\t\t\t}\n\n\t\t}\n\t}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/AppBuilder.js","\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\n\nfunction toArray(DC) {\n\tvar ary = [];\n\n\tvar id = DC.getFirstId();\n\twhile(id) {\n\t\tvar element = DC.getItem(id);\n\t\tary.push(element);\n\t\tid = DC.getNextId(id);\n\t}\n\n\treturn ary;\n}\n\nmodule.exports = class ABApplicationBase {\n\n    constructor(attributes) {\n\n    \t// ABApplication Attributes\n    \tthis.id    = attributes.id;\n    \tthis.json  = attributes.json;\n    \tthis.name  = attributes.name || this.json.name || \"\";\n    \tthis.role  = attributes.role;\n\n\n\t  \t// import all our ABObjects\n\t  \t// NOTE: we work with ABObjects on both the client and server sides.\n\t  \t// So we provide object methods in the base class.  However, each\n\t  \t// ABObject sub class (client and server) needs to implement it's own\n\t  \t// .objectNew() method.\n\t  \tvar newObjects = [];\n\t  \t(attributes.json.objects || []).forEach((obj) => {\n\t  \t\tnewObjects.push( this.objectNew(obj) );  \n\t  \t})\n\t  \tthis._objects = newObjects;\n\n\n\n\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n\n\t/**\n\t * @method fieldsMultilingual()\n\t *\n\t * return an array of fields that are considered Multilingual labels for\n\t * an ABApplication\n\t *\n\t * @return {array}\n\t */\n\tstatic fieldsMultilingual() {\n\t\treturn ['label', 'description'];\n\t}\n\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\t/// ABApplication data methods\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\ttoObj () {\n\n\t\tthis.json.name = this.name;\n\n\t\t// for each Object: compile to json\n\t\tvar currObjects = [];\n\t\tthis._objects.forEach((obj) => {\n\t\t\tcurrObjects.push(obj.toObj())\n\t\t})\n\t\tthis.json.objects = currObjects;\n\n\t\treturn {\n\t\t\tid:this.id,\n\t\t\tname:this.name,\n\t\t\tjson:this.json,\n\t\t\trole:this.role\n\t\t}\n\t}\n\n\n\n\t///\n\t/// Objects\n\t///\n\n\n\n\n\t/**\n\t * @method objects()\n\t *\n\t * return an array of all the ABObjects for this ABApplication.\n\t *\n\t * @param {fn} filter  \ta filter fn to return a set of ABObjects that this fn\n\t *\t\t\t\t\t\treturns true for.\n\t * @return {array} \tarray of ABObject\n\t */\n\tobjects (filter) {\n\n\t\tfilter = filter || function() {return true; };\n\n\t\treturn this._objects.filter(filter);\n\n\t}\n\n\n\n\t/**\n\t * @method objectNew()\n\t *\n\t * return an instance of a new (unsaved) ABObject that is tied to this\n\t * ABApplication.\n\t *\n\t * NOTE: this new object is not included in our this.objects until a .save()\n\t * is performed on the object.\n\t *\n\t * @return {ABObject}\n\t */\n\t// objectNew( values ) {\n\t// \treturn new ABObject(values, this);\n\t// }\n\n\n\n\t/**\n\t * @method objectDestroy()\n\t *\n\t * remove the current ABObject from our list of ._objects.\n\t *\n\t * @param {ABObject} object\n\t * @return {Promise}\n\t */\n\tobjectDestroy( object ) {\n\n\t\tvar remaininObjects = this.objects(function(o) { return o.id != object.id;})\n\t\tthis._objects = remaininObjects;\n\t\treturn this.save();\n\t}\n\n\n\n\t/**\n\t * @method objectSave()\n\t *\n\t * persist the current ABObject in our list of ._objects.\n\t *\n\t * @param {ABObject} object\n\t * @return {Promise}\n\t */\n\tobjectSave( object ) {\n\t\tvar isIncluded = (this.objects(function(o){ return o.id == object.id }).length > 0);\n\t\tif (!isIncluded) {\n\t\t\tthis._objects.push(object);\n\t\t}\n\n\t\treturn this.save();\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/ABApplicationBase.js","//\n// ABModel\n//\n// Represents the Data interface for an ABObject data.\n//\n// 2 ways to use an ABModel to load a DataTable:\n// \tMethod 1:  \n// \tgather all the data externally and send to the DataTable\n//\t\tModel.findAll()\n//\t\t.then((data)=>{\n//\t\t\tDataTable.parse(data);\n//\t\t})\n//\n// \tMethod 2: \n// \tSet the Model object with a condition / skip / limit, then \n// \tuse it to load the DataTable:\n//\t\tModel.where({})\n//\t\t.skip(XX)\n//\t\t.limit(XX)\n//\t\t.loadInto(DataTable);\n\n\n\nfunction toDC( data ) {\n\treturn new webix.DataCollection({\n\t\tdata: data,\n\n\t\t// on: {\n\t\t// \tonAfterDelete: function(id) {\n\n\t\t// \t}\n\t\t// }\n\t});\n}\n\n\nexport default class ABModel {\n\n    constructor(object) {\n\n\t  \t// link me to my parent ABApplication\n\t  \tthis.object = object;\n\n\t  \tthis._where = null;\n\t  \tthis._skip = null;\n\t  \tthis._limit = null;\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\tmodelURL () {\n\t\treturn '/app_builder/model/application/#appID#/object/#objID#'\n\t\t.replace('#appID#', this.object.application.id)\n\t\t.replace('#objID#', this.object.id)\n\t}\n\n\tmodelURLItem ( id ) {\n\t\treturn '/app_builder/model/application/#appID#/object/#objID#/#id#'\n\t\t.replace('#appID#', this.object.application.id)\n\t\t.replace('#objID#', this.object.id)\n\t\t.replace('#id#', id);\n\t}\n\n\n\n\n\n\n\n\n\n\t/**\n\t * @method create\n\t * update model values on the server.\n\t */\n\tcreate(values) {\n\n\t\t// if this object has some multilingual fields, translate the data:\n\t\tvar mlFields = this.object.multilingualFields();\n\t\tif (mlFields.length) {\n\t\t\tif (values.translations) {\n\t\t\t\tOP.Multilingual.unTranslate(values, values, mlFields);\n\t\t\t}\n\t\t}\n\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tOP.Comm.Service.post({\n\t\t\t\t\turl:this.modelURL(),\n\t\t\t\t\tparams:values\n\t\t\t\t})\n\t\t\t\t.then((data)=>{\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t})\n\t\t\t\t.catch(reject);\n\n\t\t\t}\n\t\t)\n\n\t}\n\n\n\t/**\n\t * @method delete\n\t * remove this model instance from the server\n\t * @param {integer} id  the .id of the instance to remove.\n\t * @return {Promise}\n\t */\n\tdelete(id) {\n\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tOP.Comm.Service['delete']({\n\t\t\t\t\turl:this.modelURLItem(id)\n\t\t\t\t})\n\t\t\t\t.then((data)=>{\n\t\t\t\t\tresolve(data);\n\t\t\t\t})\n\t\t\t\t.catch(reject);\n\n\t\t\t}\n\t\t)\n\n\t}\n\n\n\t/**\n\t * @method findAll\n\t * performs a data find with the provided condition.\n\t */\n\tfindAll(cond) {\n\n\t\tcond = cond || {};\n\n\n\t\t// prepare our condition:\n\t\tvar newCond = {};\n\n\t\t// if the provided cond looks like our { where:{}, skip:xx, limit:xx } format,\n\t\t// just use this one.\n\t\tif (cond.where) {\n\t\t\tnewCond = cond;\n\t\t} else {\n\n\t\t\t// else, assume the provided condition is the .where clause.\n\t\t\tnewCond.where = cond;\n\t\t}\n\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tOP.Comm.Service.get({\n\t\t\t\t\turl:this.modelURL(),\n\t\t\t\t\tparams:newCond\n\t\t\t\t})\n\t\t\t\t.then((data)=>{\n\n\t\t\t\t\t// if this object has some multilingual fields, translate the data:\n\t\t\t\t\tvar mlFields = this.object.multilingualFields();\n\t\t\t\t\tif (mlFields.length) {\n\n\t\t\t\t\t\tdata.data.forEach((d)=>{\n\t\t\t\t\t\t\tOP.Multilingual.translate(d,d, mlFields);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t})\n\t\t\t\t.catch(reject);\n\n\t\t\t}\n\t\t)\n\n\t}\n\n\n\t/**\n\t * @method loadInto\n\t * loads the current values into the provided Webix DataTable\n\t * @param {DataTable} DT  A Webix component that can dynamically load data.\n\t */\n\tloadInto( DT ) {\n\t\t\n\t\t// if a limit was applied, then this component should be loading dynamically\n\t\tif (this._limit) {\n\n\t\t\tDT.define('datafetch', this._limit);\n\t\t\tDT.define('datathrottle',  250 );  // 250ms???\n\t\t\n\n\t\t\t// catch the event where data is requested:\n\t\t\t// here we will do our own findAll() so we can persist\n\t\t\t// the provided .where condition.\n\n\t\t\t// oh yeah, and make sure to remove any existing event handler when we \n\t\t\t// perform a new .loadInto()\n\t\t\tDT.___AD = DT.___AD || {};\n\t\t\tif( DT.___AD.onDataRequestEvent) {\n\t\t\t\tDT.detachEvent(DT.___AD.onDataRequestEvent);\n\t\t\t}\n\t\t\tDT.___AD.onDataRequestEvent = DT.attachEvent(\"onDataRequest\", (start, count) => {\n\t\t\t\t\n\t\t\t\tvar cond = {\n\t\t\t\t\twhere:this._where,\n\t\t\t\t\tlimit:count,\n\t\t\t\t\tskip:start\n\t\t\t\t}\n\n\t\t\t\tthis.findAll(cond)\n\t\t\t\t.then((data) => {\n\t\t\t\t\tDT.parse(data);\n\t\t\t\t})\n\t\t\t  \n\t\t\t\treturn false;\t// <-- prevent the default \"onDataRequest\"\n\t\t\t});\n\n\n\t\t\tDT.refresh();\n\t\t}\n\n\n\t\t// else just load it all at once:\n\t\tvar cond = {};\n\t\tif (this._where) cond.where = this._where;\n\t\tif (this._limit != null) cond.limit = this._limit;\n\t\tif (this._skip  != null) cond.skip  = this._skip;\n\n\t\tthis.findAll(cond)\n\t\t.then((data)=>{\n\t\t\tDT.parse(data);\n\t\t})\n\t\t.catch((err)=>{\nconsole.error('!!!!!', err);\n\t\t})\n\n\n\t}\n\n\n\t/**\n\t * @method limit\n\t * set the limit value for this set of data\n\t * @param {integer} limit  the number or elements to return in this call\n\t * @return {ABModel} this object that is chainable.\n\t */\n\tlimit(limit) {\n\t\tthis._limit = limit;\n\t\treturn this;\n\t}\n\n\n\t/**\n\t * @method skip\n\t * set the skip value for this set of data\n\t * @param {integer} skip  the number or elements to skip\n\t * @return {ABModel} this object that is chainable.\n\t */\n\tskip(skip) {\n\t\tthis._skip = skip;\n\t\treturn this;\n\t}\n\n\n\n\n\t/**\n\t * @method update\n\t * update model values on the server.\n\t */\n\tupdate(id, values) {\n\n\t\t// if this object has some multilingual fields, translate the data:\n\t\tvar mlFields = this.object.multilingualFields();\n\t\tif (mlFields.length) {\n\t\t\tif (values.translations) {\n\t\t\t\tOP.Multilingual.unTranslate(values, values, mlFields);\n\t\t\t}\n\t\t}\n\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tOP.Comm.Service.put({\n\t\t\t\t\turl:this.modelURLItem( id ),\n\t\t\t\t\tparams:values\n\t\t\t\t})\n\t\t\t\t.then((data)=>{\n\t\t\t\t\tresolve(data);\n\t\t\t\t})\n\t\t\t\t.catch(reject);\n\n\t\t\t}\n\t\t)\n\n\t}\n\n\n\t/**\n\t * @method where\n\t * set the where condition for the data being loaded.\n\t * @param {json} cond  the json condition statement.\n\t * @return {ABModel} this object that is chainable.\n\t */\n\twhere(cond) {\n\t\tthis._where = cond;\n\t\treturn this;\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/ABModel.js","\n\nimport ABObjectBase from \"./ABObjectBase\"\n\n// import OP from \"OP\"\nimport ABFieldManager from \"./ABFieldManager\"\nimport ABModel from \"./ABModel\"\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nexport default class ABObject extends ABObjectBase {\n\n    constructor(attributes, application) {\n    \tsuper(attributes, application);\n/*\n{\n\tid: uuid(),\n\tname: 'name',\n\tlabelFormat: 'xxxxx',\n\tisImported: 1/0,\n\turlPath:'string',\n\timportFromObject: 'string', // JSON Schema style reference:  '#[ABApplication.id]/objects/[ABObject.id]'\n\t\t\t\t\t\t\t\t// to get other object:  ABApplication.objectFromRef(obj.importFromObject);\n\ttranslations:[\n\t\t{}\n\t],\n\tfields:[\n\t\t{ABDataField}\n\t]\n}\n*/\n\n    \t// multilingual fields: label, description\n    \tOP.Multilingual.translate(this, this, ['label']);\n\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n\n//// TODO: Refactor isValid() to ignore op and not error if duplicateName is own .id\n\n\tisValid() {\n\n\t\tvar validator = OP.Validation.validator();\n\n\n\t\t// label/name must be unique:\n\t\tvar isNameUnique = (this.application.objects((o) => { return o.name.toLowerCase() == this.name.toLowerCase(); }).length == 0);\n\t\tif (!isNameUnique) {\n\t\t\tvalidator.addError('name', L('ab.validation.object.name.unique', 'Object name must be unique (#name# already used in this Application)').replace('#name#', this.name) );\n// errors = OP.Form.validationError({\n// \t\tname:'name',\n// \t\tmessage:L('ab.validation.object.name.unique', 'Object name must be unique (#name# already used in this Application)').replace('#name#', this.name),\n// \t}, errors);\n\t\t}\n\n\n\t\t\t// Check the common validations:\n// TODO:\n// if (!inputValidator.validate(values.label)) {\n// \t_logic.buttonSaveEnable();\n// \treturn false;\n// }\n\n\t\treturn validator;\n\t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\t/// ABApplication data methods\n\n\n\t/**\n\t * @method destroy()\n\t *\n\t * destroy the current instance of ABApplication\n\t *\n\t * also remove it from our _AllApplications\n\t *\n\t * @return {Promise}\n\t */\n\tdestroy () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\t// OK, some of our Fields have special follow up actions that need to be\n\t\t\t\t// considered when they no longer exist, so before we simply drop this\n\t\t\t\t// object/table, drop each of our fields and give them a chance to clean up\n\t\t\t\t// what needs cleaning up.\n\n\t\t\t\t// ==> More work, but safer.\n\t\t\t\tvar fieldDrops = [];\n\t\t\t\tthis.fields().forEach((f)=>{\n\t\t\t\t\tfieldDrops.push(f.destroy());\n\t\t\t\t})\n\n\t\t\t\tPromise.all(fieldDrops)\n\t\t\t\t.then(()=>{\n\n\t\t\t\t\t// now drop our table\n\t\t\t\t\t// NOTE: our .migrateXXX() routines expect the object to currently exist\n\t\t\t\t\t// in the DB before we perform the DB operations.  So we need to\n\t\t\t\t\t// .migrateDrop()  before we actually .objectDestroy() this.\n\t\t\t\t\tthis.migrateDrop()\n\t\t\t\t\t.then(()=>{\n\n\t\t\t\t\t\t// finally remove us from the application storage\n\t\t\t\t\t\treturn this.application.objectDestroy(this);\n\n\t\t\t\t\t})\n\t\t\t\t\t.then(resolve)\n\t\t\t\t\t.catch(reject);\n\n\t\t\t\t})\n\t\t\t\t.catch(reject);\n\n\t\t\t}\n\t\t);\n\t}\n\n\n\t/**\n\t * @method save()\n\t *\n\t * persist this instance of ABObject with it's parent ABApplication\n\t *\n\t *\n\t * @return {Promise}\n\t *\t\t\t\t\t\t.resolve( {this} )\n\t */\n\tsave () {\n\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar isAdd = false;\n\n\t\t\t\t// if this is our initial save()\n\t\t\t\tif (!this.id) {\n\n\t\t\t\t\tthis.id = OP.Util.uuid();\t// setup default .id\n\t\t\t\t\tthis.label = this.label || this.name;\n\t\t\t\t\tthis.urlPath = this.urlPath || this.application.name + '/' + this.name;\n\t\t\t\t\tisAdd = true;\n\t\t\t\t}\n\n\t\t\t\tthis.application.objectSave(this)\n\t\t\t\t.then(() => {\n\n\t\t\t\t\tif (isAdd) {\n\n\t\t\t\t\t\t// on a Create: trigger a migrateCreate object\n\t\t\t\t\t\tthis.migrateCreate()\n\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\tresolve(this);\n\t\t\t\t\t\t}, reject);\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(this);\n\t\t\t\t\t}\n\n\t\t\t\t})\n\t\t\t\t.catch(function(err){\n\t\t\t\t\treject(err);\n\t\t\t\t})\n\t\t\t}\n\t\t)\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\ttoObj () {\n\n\t\tOP.Multilingual.unTranslate(this, this, [\"label\"]);\n\n\t\treturn super.toObj();\n\t}\n\n\n\n\n\t///\n\t/// DB Migrations\n\t///\n\n\tmigrateCreate() {\n\t\tvar url = '/app_builder/migrate/application/#appID#/object/#objID#'\n\t\t\t.replace('#appID#', this.application.id)\n\t\t\t.replace('#objID#', this.id);\n\n\t\treturn OP.Comm.Service.post({\n\t\t\turl: url\n\t\t})\n\t}\n\n\n\tmigrateDrop() {\n\t\tvar url = '/app_builder/migrate/application/#appID#/object/#objID#'\n\t\t\t.replace('#appID#', this.application.id)\n\t\t\t.replace('#objID#', this.id);\n\n\t\treturn OP.Comm.Service['delete']({\n\t\t\turl: url\n\t\t})\n\t}\n\n\n\t///\n\t/// Fields\n\t///\n\n\n\t/**\n\t * @method fieldNew()\n\t *\n\t * return an instance of a new (unsaved) ABField that is tied to this\n\t * ABObject.\n\t *\n\t * NOTE: this new field is not included in our this.fields until a .save()\n\t * is performed on the field.\n\t *\n\t * @return {ABField}\n\t */\n\tfieldNew ( values ) {\n\t\t// NOTE: ABFieldManager returns the proper ABFieldXXXX instance.\n\t\treturn ABFieldManager.newField( values, this );\n\t}\n\n\n\n\t///\n\t/// Working with Client Components:\n\t///\n\n\n\t// return the column headers for this object\n\t// @param {bool} isObjectWorkspace  return the settings saved for the object workspace\n\tcolumnHeaders (isObjectWorkspace) {\n\n\t\tvar headers = [];\n\t\tvar columnNameLookup = {};\n\n\t\t// get the header for each of our fields:\n\t\tthis._fields.forEach(function(f){\n\t\t\tvar header = f.columnHeader(isObjectWorkspace);\n\t\t\theaders.push(header);\n\t\t\tcolumnNameLookup[header.id] = f.columnName;\t// name => id\n\t\t})\n\n\n\t\t// update our headers with any settings applied in the Object Workspace\n\t\tif (isObjectWorkspace) {\n\n\t\t\t// set column width to adjust:true by default;\n\t\t\theaders.forEach((h) => { h.adjust = true; });\n\n\t\t\t// hide any hiddenfields\n\t\t\tif (this.workspaceHiddenFields.length > 0) {\n\t\t\t\tthis.workspaceHiddenFields.forEach((hfID)=>{\n\t\t\t\t\theaders.forEach((h)=> {\n\t\t\t\t\t\tif (columnNameLookup[h.id] == hfID){\n\t\t\t\t\t\t\th.hidden = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn headers;\n\t}\n\n\n\n\t// after a component has rendered, tell each of our fields to perform\n\t// any custom display operations\n\t// @param {Webix.DataStore} data a webix datastore of all the rows effected\n\t//        by the render.\n\tcustomDisplays(data, App, DataTable) {\n\t\tvar fields = this.fields();\n\n\t\tvar id = data.getFirstId();\n\t\twhile(id) {\n\t\t\tvar row = data.getItem(id);\n\t\t\tfields.forEach((f)=>{\n\t\t\t\tif (this.objectWorkspace.hiddenFields.indexOf(f.columnName) == -1) {\n\t\t\t\t\tvar node = DataTable.getItemNode({ row: row.id, column: f.columnName });\n\t\t\t\t\tf.customDisplay(row, App, node);\n\t\t\t\t}\n\t\t\t})\n\t\t\tid = data.getNextId(id);\n\t\t}\n\t}\n\n\n\n\n\t///\n\t/// Working with data from server\n\t///\n\n\t/**\n\t * @method model\n\t * return a Model object that will allow you to interact with the data for\n\t * this ABObject.\n\t */\n\tmodel() {\n\t\treturn new ABModel(this);\n\t}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/ABObject.js","\n// import OP from \"OP\"\n// var ABFieldManager = require( \"./ABFieldManager.js\")\n\n// import ABModel from \"./ABModel\"\n\n\n\nmodule.exports =  class ABObjectBase {\n\n    constructor(attributes, application) {\n/*\n{\n\tid: uuid(),\n\tname: 'name',\n\tlabelFormat: 'xxxxx',\n\tisImported: 1/0,\n\turlPath:'string',\n\timportFromObject: 'string', // JSON Schema style reference:  '#[ABApplication.id]/objects/[ABObject.id]'\n\t\t\t\t\t\t\t\t// to get other object:  ABApplication.objectFromRef(obj.importFromObject);\n\ttranslations:[\n\t\t{}\n\t],\n\tfields:[\n\t\t{ABDataField}\n\t]\n}\n*/\n\n    \t// ABApplication Attributes\n    \tthis.id    = attributes.id;\n    \tthis.name  = attributes.name || \"\";\n    \tthis.labelFormat = attributes.labelFormat || \"\";\n    \tthis.isImported  = attributes.isImported  || 0;\n    \tthis.urlPath\t = attributes.urlPath     || \"\";\n    \tthis.importFromObject = attributes.importFromObject || \"\";\n    \tthis.translations = attributes.translations;\n\n\t\tif (typeof(attributes.objectWorkspace) != \"undefined\") {\n\t\t\tif (typeof(attributes.objectWorkspace.sortFields) == \"undefined\") attributes.objectWorkspace.sortFields = [];\n\t\t\tif (typeof(attributes.objectWorkspace.frozenColumnID) == \"undefined\") attributes.objectWorkspace.frozenColumnID = \"\";\n\t\t\tif (typeof(attributes.objectWorkspace.hiddenFields) == \"undefined\") attributes.objectWorkspace.hiddenFields = [];\n\t\t}\n\n    \tthis.objectWorkspace = attributes.objectWorkspace || {\n\t\t\tsortFields:[], // array of columns with their sort configurations\n\t\t\tfrozenColumnID:\"\", // id of column you want to stop freezing\n    \t\thiddenFields:[], // array of [ids] to add hidden:true to\n    \t};\n\n\n\t  \t// import all our ABObjects\n\t  \tvar newFields = [];\n\t  \t(attributes.fields || []).forEach((field) => {\n\t  \t\tnewFields.push( this.fieldNew(field) );\n\t  \t})\n\t  \tthis._fields = newFields;\n\n\n\t  \t// link me to my parent ABApplication\n\t  \tthis.application = application;\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\ttoObj () {\n\n\t\tOP.Multilingual.unTranslate(this, this, [\"label\"]);\n\n\t\t// // for each Object: compile to json\n\t\tvar currFields = [];\n\t\tthis._fields.forEach((obj) => {\n\t\t\tcurrFields.push(obj.toObj())\n\t\t})\n\n\n\t\treturn {\n\t\t\tid: \t\t\tthis.id,\n\t\t\tname: \t\t\tthis.name,\n    \t\tlabelFormat: \tthis.labelFormat,\n    \t\tisImported:  \tthis.isImported,\n    \t\turlPath: \t\tthis.urlPath,\n    \t\timportFromObject: this.importFromObject,\n    \t\tobjectWorkspace:  this.objectWorkspace,\n    \t\ttranslations: \tthis.translations,\n    \t\tfields: \t \tcurrFields\n\t\t}\n\t}\n\n\n\n\n\n\n\t///\n\t/// Fields\n\t///\n\n\n\n\n\t/**\n\t * @method fields()\n\t *\n\t * return an array of all the ABFields for this ABObject.\n\t *\n\t * @return {array}\n\t */\n\tfields (filter) {\n\n\t\tfilter = filter || function() {return true; };\n\n\t\treturn this._fields.filter(filter);\n\t}\n\n\n\n\t/**\n\t * @method fieldNew()\n\t *\n\t * return an instance of a new (unsaved) ABField that is tied to this\n\t * ABObject.\n\t *\n\t * NOTE: this new field is not included in our this.fields until a .save()\n\t * is performed on the field.\n\t *\n\t * @return {ABField}\n\t */\n\t// fieldNew ( values ) {\n\t// \t// NOTE: ABFieldManager returns the proper ABFieldXXXX instance.\n\t// \treturn ABFieldManager.newField( values, this );\n\t// }\n\n\n\n\t/**\n\t * @method fieldRemove()\n\t *\n\t * remove the given ABField from our ._fields array and persist the current\n\t * values.\n\t *\n\t * @param {ABField} field The instance of the field to remove.\n\t * @return {Promise}\n\t */\n\tfieldRemove( field ) {\n\t\tthis._fields = this.fields(function(o){ return o.id != field.id });\n\n\t\treturn this.save();\n\t}\n\n\n\n\t/**\n\t * @method fieldSave()\n\t *\n\t * save the given ABField in our ._fields array and persist the current\n\t * values.\n\t *\n\t * @param {ABField} field The instance of the field to save.\n\t * @return {Promise}\n\t */\n\tfieldSave( field ) {\n\t\tvar isIncluded = (this.fields(function(o){ return o.id == field.id }).length > 0);\n\t\tif (!isIncluded) {\n\t\t\tthis._fields.push(field);\n\t\t}\n\n\t\treturn this.save();\n\t}\n\n\n\tmultilingualFields() {\n\t\tvar fields = [];\n\n\t\tvar found = this.fields(function(f){ return f.isMultilingual(); });\n\t\tfound.forEach((f)=>{\n\t\t\tfields.push(f.columnName);\n\t\t})\n\n\t\treturn fields;\n\t}\n\n\n\t///\n\t///\tObject Workspace Settings\n\t///\n\tget workspaceSortFields() {\n\t\treturn this.objectWorkspace.sortFields;\n\t}\n\n\tset workspaceSortFields( fields ) {\n\t\tthis.objectWorkspace.sortFields = fields;\n\t}\n\n\tget workspaceFrozenColumnID() {\n\t\treturn this.objectWorkspace.frozenColumnID;\n\t}\n\n\tset workspaceFrozenColumnID( id ) {\n\t\tthis.objectWorkspace.frozenColumnID = id;\n\t}\n\n\tget workspaceHiddenFields() {\n\t\treturn this.objectWorkspace.hiddenFields;\n\t}\n\n\tset workspaceHiddenFields( fields ) {\n\t\tthis.objectWorkspace.hiddenFields = fields;\n\t}\n\n\n\n\n\t/**\n\t * @method defaultValues\n\t * Collect a hash of key=>value pairs that represent the default values \n\t * from each of our fields.\n\t * @param {obj} data a key=>value hash of the inputs to parse.\n\t * @return {array} \n\t */\n\tdefaultValues() {\n\t\tvar values = {};\n\t\tthis.fields().forEach((f) => {\n\t\t\tf.defaultValue(values);\n\t\t})\n\n\t\treturn values;\n\t}\n\n\n\n\t/**\n\t * @method isValidData\n\t * Parse through the given data and return an array of any invalid\n\t * value errors.\n\t * @param {obj} data a key=>value hash of the inputs to parse.\n\t * @return {array}\n\t */\n\tisValidData(data) {\n\t\tvar validator = OP.Validation.validator();\n\t\tthis.fields().forEach((f) => {\n\t\t\tvar p = f.isValidData(data, validator);\n\t\t})\n\n\t\treturn validator;\n\t}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/ABObjectBase.js","/* \n * ABViewManager\n * \n * An interface for managing the different ABViews available in our AppBuilder.\n *\n */\n\n\nimport ABViewPage from \"./views/ABViewPage\"\n\n/* \n * Views\n * A name => ABView  hash of the different ABViews available.\n */\nvar Views = {};\nViews[ABViewPage.defaults().key] = ABViewPage;\n\n\n\nexport default  {\n\n\n\t/*\n\t * @function allViews\n\t * return all the currently defined ABViews in an array.\n\t * @return [{ABView},...]\n\t */\n\tallViews: function() {\n\t\tvar views = [];\n\t\tfor (var v in Views) {\n\t\t\tviews.push(Views[v]);\n\t\t}\n\t\treturn views;\n\t},\n\n\n\t/*\n\t * @function newView\n\t * return an instance of an ABView based upon the values.key value.\n\t * @return {ABView}\n\t */\n\tnewView: function (values, application, parent) {\n\n\t\tparent = parent || null;\n\t\t\n\t\tif (values.key) {\n\t\t\treturn new Views[values.key](values, application, parent);\n\t\t} else {\n\t\t\tvar err = new Error('unknown view key');\n\t\t\tOP.Error.log('Unknown view key ['+values.key+']:', {error:err, values:value, application: application });\n\t\t\treturn null;\n\t\t}\n\n\t}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/ABViewManager.js","/*\n * ABFieldBase\n *\n * ABFieldBase defines the common ABField structure that is shared between \n * the client and the server.  Mostly how it manages it's internal data, and\n * how it is related to the ABObject classes.\n *\n */\n\n// import OP from \"../../OP/OP\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nmodule.exports = class ABField {\n\n    constructor(values, object, fieldDefaults) {\n\n    \t// NOTE: setup this first so later we can use .fieldType(), .fieldIcon()\n    \tthis.defaults = fieldDefaults;\n\n\n    \t/*\n  \t\t{\n  \t\t\tid:'uuid',\t\t\t\t\t// uuid value for this obj\n  \t\t\tkey:'fieldKey',\t\t\t\t// unique key for this Field\n  \t\t\ticon:'font',\t\t\t\t// fa-[icon] reference for an icon for this Field Type\n  \t\t\tlabel:'',\t\t\t\t\t// pulled from translation\n\t\t\tcolumnName:'column_name',\t// a valid mysql table.column name\n\t\t\tsettings: {\t\t\t\t\t// unique settings for the type of field\n\t\t\t\tshowIcon:true/false,\t// only useful in Object Workspace DataTable\n\n\t\t\t\t// specific for dataField\n\t\t\t},\n\t\t\ttranslations:[]\n  \t\t}\n  \t\t*/\n  \t\tthis.fromValues(values);\n\n\n    \tthis.object = object;\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n\n  \t// unique key to reference this specific DataField\n  \tfieldKey() {\n  \t\treturn this.defaults.key;\n  \t}\n\n  \t// font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\n  \tfieldIcon() {\n  \t\treturn this.defaults.icon;\n  \t}\n\n  \t// the multilingual text for the name of this data field.\n  \tfieldMenuName() {\n  \t\treturn this.defaults.menuName;\n  \t}\n\n  \t// the multilingual text for the name of this data field.\n  \tfieldDescription() {\n  \t\treturn this.defaults.description;\n  \t}\n\n\n\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\t/// ABApplication data methods\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABField instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * @return {json}\n\t */\n\ttoObj () {\n\n\t\treturn {\n\t\t\tid : this.id,\n\t\t\tkey : this.key,\n\t\t\ticon : this.icon,\n\t\t\tcolumnName: this.columnName,\n\t\t\tsettings: this.settings,\n\t\t\ttranslations:this.translations\n\t\t}\n\t}\n\n\n\t/**\n\t * @method fromValues()\n\t *\n\t * initialze this object with the given set of values.\n\t * @param {obj} values\n\t */\n\tfromValues (values) {\n\n \t\tthis.id = values.id;\t\t\t// NOTE: only exists after .save()\n    \tthis.key = values.key || this.fieldKey();\n    \tthis.icon = values.icon || this.fieldIcon();\n\n    \t// if this is being instantiated on a read from the Property UI,\n    \t// .label is coming in under .settings.label\n    \tthis.label = values.label || values.settings.label || '?label?';\n\n    \tthis.columnName = values.columnName || '';\n    \tthis.translations = values.translations || [];\n\n    \tthis.settings = values.settings || {};\n    \tthis.settings.showIcon = values.settings.showIcon+\"\" || \"1\";\n\n\n    \t// convert from \"0\" => 0\n    \tthis.settings.showIcon = parseInt(this.settings.showIcon);\n\t}\n\n\n\n\t/**\n\t * @method defaultValue\n\t * insert a key=>value pair that represent the default value\n\t * for this field.\n\t * @param {obj} values a key=>value hash of the current values.\n\t */\n\tdefaultValue(values) {\n\t\tvalues[this.columnName] = '';\n\t}\n\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/dataFields/ABFieldBase.js","/*\n * ABFieldBoolean\n *\n * An ABFieldBoolean defines a boolean field type.\n *\n */\n\nimport ABField from \"./ABField\"\nimport ABFieldComponent from \"./ABFieldComponent\"\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar ABFieldBooleanDefaults = {\n\tkey: 'boolean', // unique key to reference this specific DataField\n\n\ticon: 'check-square-o',   // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName: L('ab.dataField.boolean.menuName', '*Checkbox'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.boolean.description', '*A single checkbox that can be checked or unchecked.')\n}\n\n\nvar defaultValues = {\n\tdefault: 0\n}\n\n/**\n * ABFieldBooleanComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n */\nvar ABFieldBooleanComponent = new ABFieldComponent({\n\tfieldDefaults: ABFieldBooleanDefaults,\n\n\telements: (App, field) => {\n\t\t// ids = field.idsUnique(ids, App);\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tname: \"default\",\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tlabel: \"Default\",\n\t\t\t\tlabelPosition: \"left\",\n\t\t\t\tlabelWidth: 70,\n\t\t\t\tlabelRight: 'Uncheck',\n\t\t\t\tcss: \"webix_table_checkbox\",\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\tthis.define('labelRight', newVal ? 'Check' : 'Uncheck');\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules: {},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these:\n\tlogic: {\n\n\t\t// isValid: function (ids, isValid) {\n\n\t\t// }\n\n\t\t// populate: function (ids, values) {\n\t\t// \tif (values.settings.validation) {\n\t\t// \t\t$$(ids.validateMinimum).enable();\n\t\t// \t\t$$(ids.validateMaximum).enable();\n\t\t// \t} else {\n\t\t// \t\t$$(ids.validateMinimum).disable();\n\t\t// \t\t$$(ids.validateMaximum).disable();\n\t\t// \t}\n\t\t// }\n\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit: function (ids) {\n\t}\n\n\n});\n\n\nclass ABFieldBoolean extends ABField {\n\tconstructor(values, object) {\n\t\tsuper(values, object, ABFieldBooleanDefaults);\n\n\t\t// we're responsible for setting up our specific settings:\n\t\tfor (var dv in defaultValues) {\n\t\t\tthis.settings[dv] = values.settings[dv] || defaultValues[dv];\n\t\t}\n\n\t\tif (this.settings.default != null)\n\t\t\tthis.settings.default = parseInt(this.settings.default);\n\t}\n\n\t// return the default values for this DataField\n\tstatic defaults() {\n\t\treturn ABFieldBooleanDefaults;\n\t}\n\n\t/*\n\t* @function propertiesComponent\n\t*\n\t* return a UI Component that contains the property definitions for this Field.\n\t*\n\t* @param {App} App the UI App instance passed around the Components.\n\t* @return {Component}\n\t*/\n\tstatic propertiesComponent(App) {\n\t\treturn ABFieldBooleanComponent.component(App);\n\t}\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\tisValid() {\n\n\t\tvar validator = super.isValid();\n\n\t\t// validator.addError('columnName', L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name) );\n\n\t\treturn validator;\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\t// toObj () {\n\n\t// \tvar obj = super.toObj();\n\n\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t// \treturn obj;\n\t// }\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t// return the grid column header definition for this instance of ABFieldBoolean\n\tcolumnHeader(isObjectWorkspace) {\n\t\tvar config = super.columnHeader(isObjectWorkspace);\n\n\t\tconfig.editor = 'template';\n\t\tconfig.template = '<div class=\"ab-boolean-display\">{common.checkbox()}</div>';\n\t\tconfig.css = 'center';\n\t\t// config.sort = 'string';\n\n\t\treturn config;\n\t}\n\n\n\n\t/**\n\t * @method isValidData\n\t * Parse through the given data and return an error if this field's\n\t * data seems invalid.\n\t * @param {obj} data  a key=>value hash of the inputs to parse.\n\t * @param {OPValidator} validator  provided Validator fn\n\t * @return {array} \n\t */\n\tisValidData(data, validator) {\n\t}\n\n}\n\n\nexport default ABFieldBoolean;\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/dataFields/ABFieldBoolean.js","/*\n * ABFieldDate\n *\n * An ABFieldDate defines a date/datetime field type.\n *\n */\n\nimport ABField from \"./ABField\"\nimport ABFieldComponent from \"./ABFieldComponent\"\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\n\nvar ABFieldDateDefaults = {\n\tkey: 'date', // unique key to reference this specific DataField\n\n\ticon: 'calendar',   // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName: L('ab.dataField.date.menuName', '*Date'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.date.description', '*Pick one from a calendar.')\n}\n\nvar defaultValues = {\n\tincludeTime: 0,\n\tdefaultCurrentDate: 0,\n\tdefaultDate: \"\",\n\tdayFormat: \"%d\",\n\tdayOrder: 1,\n\tdayDelimiter: \"slash\",\n\tmonthFormat: \"%m\",\n\tmonthOrder: 2,\n\tmonthDelimiter: \"slash\",\n\tyearFormat: \"%Y\",\n\tyearOrder: 3,\n\tyearDelimiter: \"slash\",\n\n\thourFormat: '%h',\n\tperiodFormat: 'none',\n\ttimeDelimiter: 'colon',\n\n\tvalidateCondition: \"none\",\n\tvalidateRangeUnit: \"days\",\n\tvalidateRangeBefore: 0,\n\tvalidateRangeAfter: 0,\n\tvalidateStartDate: null,\n\tvalidateEndDate: null\n}\n\nvar ids = {\n\tdefault: 'ab-date-default',\n\tcurrentToDefault: 'ab-date-current-to-default',\n\n\tdateDisplay: 'ab-date-display',\n\n\t// Date\n\tdayOrder: 'ab-date-day-order',\n\tmonthOrder: 'ab-date-month-order',\n\tyearOrder: 'ab-date-year-order',\n\tdayFormat: 'ab-date-day-format',\n\tmonthFormat: 'ab-date-month-format',\n\tyearFormat: 'ab-date-year-format',\n\tdayDelimiter: 'ab-date-day-delimiter',\n\tmonthDelimiter: 'ab-date-month-delimiter',\n\tyearDelimiter: 'ab-date-year-delimiter',\n\n\t// Time\n\tincludeTime: 'ab-date-include-time',\n\ttimeFormat: 'ab-date-time-format',\n\thourFormat: 'ab-date-hour-format',\n\tperiodFormat: 'ab-date-period-format',\n\ttimeDelimiter: 'ab-date-time-delimiter',\n\n\t// validation\n\tvalidateCondition: 'ab-date-validate-condition',\n\tvalidateRange: 'ab-date-validate-range',\n\tvalidateRangeUnit: 'ab-date-validate-range-unit',\n\tvalidateRangeBefore: 'ab-date-validate-range-before',\n\tvalidateRangeAfter: 'ab-date-validate-range-after',\n\tvalidateRangeBeforeLabel: 'ab-date-validate-before-label',\n\tvalidateRangeAfterLabel: 'ab-date-validate-after-label',\n\n\tvalidateLeft: 'ab-date-validate-left',\n\tvalidateRight: 'ab-date-validate-right'\n};\n\nvar delimiterList = [\n\t{ id: 'comma', value: \"Comma\", sign: \",\" },\n\t{ id: 'slash', value: \"Slash\", sign: \"/\" },\n\t{ id: 'space', value: \"Space\", sign: \" \" },\n\t{ id: 'dash', value: \"Dash\", sign: \"-\" },\n\t{ id: 'colon', value: \"Colon\", sign: \":\" },\n];\n\n\n/** Private methods **/\nfunction getDelimiterSign(text) {\n\tvar delimiterItem = delimiterList.filter(function (item) {\n\t\treturn item.id == text;\n\t})[0];\n\n\treturn delimiterItem ? delimiterItem.sign : '';\n}\n\nfunction getDateFormat(setting) {\n\tvar dateFormat = \"\";\n\n\t// Date format\n\tfor (var i = 1; i <= 3; i++) {\n\t\tif (setting.dayOrder == i) {\n\t\t\tdateFormat += setting.dayFormat;\n\t\t\tdateFormat += (i != 3) ? getDelimiterSign(setting.dayDelimiter) : '';\n\t\t}\n\t\tif (setting.monthOrder == i) {\n\t\t\tdateFormat += setting.monthFormat;\n\t\t\tdateFormat += (i != 3) ? getDelimiterSign(setting.monthDelimiter) : '';\n\t\t}\n\t\tif (setting.yearOrder == i) {\n\t\t\tdateFormat += setting.yearFormat;\n\t\t\tdateFormat += (i != 3) ? getDelimiterSign(setting.yearDelimiter) : '';\n\t\t}\n\t}\n\n\t// Time format\n\tif (setting.includeTime) {\n\t\tdateFormat += (' {hour}{delimiter}{minute}{period}'\n\t\t\t.replace('{hour}', setting.hourFormat)\n\t\t\t.replace('{delimiter}', getDelimiterSign(setting.timeDelimiter))\n\t\t\t.replace('{minute}', '%i')\n\t\t\t.replace('{period}', setting.periodFormat != 'none' ? setting.periodFormat : '')\n\t\t);\n\t}\n\n\treturn dateFormat;\n}\n\nfunction refreshDateDisplay() {\n\tvar dateFormat = getDateFormat({\n\t\tdayOrder: $$(ids.dayOrder).getValue(),\n\t\tmonthOrder: $$(ids.monthOrder).getValue(),\n\t\tyearOrder: $$(ids.yearOrder).getValue(),\n\t\tdayFormat: $$(ids.dayFormat).getValue(),\n\t\tmonthFormat: $$(ids.monthFormat).getValue(),\n\t\tyearFormat: $$(ids.yearFormat).getValue(),\n\t\tdayDelimiter: $$(ids.dayDelimiter).getValue(),\n\t\tmonthDelimiter: $$(ids.monthDelimiter).getValue(),\n\t\tyearDelimiter: $$(ids.yearDelimiter).getValue(),\n\n\t\tincludeTime: $$(ids.includeTime).getValue(),\n\t\thourFormat: $$(ids.hourFormat).getValue(),\n\t\ttimeDelimiter: $$(ids.timeDelimiter).getValue(),\n\t\tperiodFormat: $$(ids.periodFormat).getValue(),\n\t});\n\n\tvar dateDisplay = webix.Date.dateToStr(dateFormat)(new Date());\n\n\t$$(ids.dateDisplay).setValue(dateDisplay);\n}\n\n\n/**\n * ABFieldDateComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n */\nvar ABFieldDateComponent = new ABFieldComponent({\n\tfieldDefaults: ABFieldDateDefaults,\n\n\telements: (App, field) => {\n\t\tids = field.idsUnique(ids, App);\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname: \"includeTime\",\n\t\t\t\tid: ids.includeTime,\n\t\t\t\tlabelRight: \"Include time\",\n\t\t\t\tlabelWidth: 0,\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\t// Re-render default date picker\n\t\t\t\t\t\twebix.ui({\n\t\t\t\t\t\t\tview: 'datepicker',\n\t\t\t\t\t\t\tlabel: \"Default\",\n\t\t\t\t\t\t\tid: ids.default,\n\t\t\t\t\t\t\ttimepicker: newVal ? true : false,\n\t\t\t\t\t\t\tdisabled: $$(ids.currentToDefault).getValue() == true\n\t\t\t\t\t\t}, $$(ids.default));\n\n\t\t\t\t\t\trefreshDateDisplay();\n\n\t\t\t\t\t\tif (newVal)\n\t\t\t\t\t\t\t$$(ids.timeFormat).show();\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\t$$(ids.timeFormat).hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: 'checkbox',\n\t\t\t\tid: ids.currentToDefault,\n\t\t\t\tname: \"defaultCurrentDate\",\n\t\t\t\tlabelRight: 'Set current date to default value',\n\t\t\t\tlabelWidth: 0,\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\t\t$$(ids.default).disable();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$$(ids.default).enable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: 'datepicker',\n\t\t\t\tid: ids.default,\n\t\t\t\tlabel: \"Default\",\n\t\t\t\tname: 'defaultDate',\n\t\t\t\ttimepicker: false\n\t\t\t},\n\t\t\t{\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview: 'label',\n\t\t\t\t\t\tlabel: 'Display',\n\t\t\t\t\t\tcss: 'ab-text-bold',\n\t\t\t\t\t\twidth: 80\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: 'label',\n\t\t\t\t\t\tid: ids.dateDisplay,\n\t\t\t\t\t\tlabel: ''\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\n\t\t\t// Display date format\n\t\t\t{\n\t\t\t\tview: \"accordion\",\n\t\t\t\tmulti: false,\n\t\t\t\tcollapsed: true,\n\t\t\t\trows: [\n\t\t\t\t\t// Day format\n\t\t\t\t\t{\n\t\t\t\t\t\theader: \"Day\",\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\trows: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"dayFormat\",\n\t\t\t\t\t\t\t\t\tid: ids.dayFormat,\n\t\t\t\t\t\t\t\t\tlabel: \"Format\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvalue: '%d',\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: '%d', value: \"1 2 ... 30 31\" },\n\t\t\t\t\t\t\t\t\t\t// { id: 'Do', value: \"1st 2nd ... 30th 31st\" },\n\t\t\t\t\t\t\t\t\t\t{ id: '%j', value: \"01 02 ... 30 31\" },\n\t\t\t\t\t\t\t\t\t\t// { id: 'dd', value: \"Su Mo ... Fr Sa\" },\n\t\t\t\t\t\t\t\t\t\t{ id: '%D', value: \"Sun Mon ... Fri Sat\" },\n\t\t\t\t\t\t\t\t\t\t{ id: '%l', value: \"Sunday Monday ... Friday Saturday\" },\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"dayOrder\",\n\t\t\t\t\t\t\t\t\tid: ids.dayOrder,\n\t\t\t\t\t\t\t\t\tlabel: \"Places\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvalue: '1',\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: 1, value: \"1\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 2, value: \"2\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 3, value: \"3\" }\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"radio\",\n\t\t\t\t\t\t\t\t\tname: \"dayDelimiter\",\n\t\t\t\t\t\t\t\t\tid: ids.dayDelimiter,\n\t\t\t\t\t\t\t\t\tlabel: \"Delimiter\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvertical: true,\n\t\t\t\t\t\t\t\t\toptions: delimiterList,\n\t\t\t\t\t\t\t\t\tvalue: 'slash',\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\t// Month format\n\t\t\t\t\t{\n\t\t\t\t\t\theader: \"Month\",\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\trows: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"monthFormat\",\n\t\t\t\t\t\t\t\t\tid: ids.monthFormat,\n\t\t\t\t\t\t\t\t\tlabel: \"Format\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvalue: '%m',\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: '%n', value: \"1 2 ... 11 12\" },\n\t\t\t\t\t\t\t\t\t\t// { id: 'Mo', value: \"1st 2nd ... 11th 12th\" },\n\t\t\t\t\t\t\t\t\t\t{ id: '%m', value: \"01 02 ... 11 12\" },\n\t\t\t\t\t\t\t\t\t\t{ id: '%M', value: \"Jan Feb ... Nov Dec\" },\n\t\t\t\t\t\t\t\t\t\t{ id: '%F', value: \"January February ... November December\" }\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"monthOrder\",\n\t\t\t\t\t\t\t\t\tid: ids.monthOrder,\n\t\t\t\t\t\t\t\t\tlabel: \"Places\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvalue: '2',\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: 1, value: \"1\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 2, value: \"2\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 3, value: \"3\" },\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"radio\",\n\t\t\t\t\t\t\t\t\tname: \"monthDelimiter\",\n\t\t\t\t\t\t\t\t\tid: ids.monthDelimiter,\n\t\t\t\t\t\t\t\t\tlabel: \"Delimiter\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvertical: true,\n\t\t\t\t\t\t\t\t\toptions: delimiterList,\n\t\t\t\t\t\t\t\t\tvalue: 'slash',\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\t// Year format\n\t\t\t\t\t{\n\t\t\t\t\t\theader: \"Year\",\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\trows: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"yearFormat\",\n\t\t\t\t\t\t\t\t\tid: ids.yearFormat,\n\t\t\t\t\t\t\t\t\tlabel: \"Format\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvalue: '%Y',\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: '%y', value: \"70 71 ... 29 30\" },\n\t\t\t\t\t\t\t\t\t\t{ id: '%Y', value: \"1970 1971 ... 2029 2030\" },\n\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"yearOrder\",\n\t\t\t\t\t\t\t\t\tid: ids.yearOrder,\n\t\t\t\t\t\t\t\t\tlabel: \"Places\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvalue: '3',\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: 1, value: \"1\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 2, value: \"2\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 3, value: \"3\" },\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"radio\",\n\t\t\t\t\t\t\t\t\tname: \"yearDelimiter\",\n\t\t\t\t\t\t\t\t\tid: ids.yearDelimiter,\n\t\t\t\t\t\t\t\t\tlabel: \"Delimiter\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvertical: true,\n\t\t\t\t\t\t\t\t\toptions: delimiterList,\n\t\t\t\t\t\t\t\t\tvalue: 'slash',\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\t// Time\n\t\t\t\t\t{\n\t\t\t\t\t\tid: ids.timeFormat,\n\t\t\t\t\t\thidden: true,\n\t\t\t\t\t\theader: \"Time\",\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\trows: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"hourFormat\",\n\t\t\t\t\t\t\t\t\tid: ids.hourFormat,\n\t\t\t\t\t\t\t\t\tlabel: \"Hour\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvalue: '%h',\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: '%h', value: \"00 01 ... 10 11\" },\n\t\t\t\t\t\t\t\t\t\t{ id: '%g', value: \"0 1 ... 10 11\" },\n\t\t\t\t\t\t\t\t\t\t{ id: '%H', value: \"00 01 ... 22 23\" },\n\t\t\t\t\t\t\t\t\t\t{ id: '%G', value: \"0 1 ... 22 23\" }\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"periodFormat\",\n\t\t\t\t\t\t\t\t\tid: ids.periodFormat,\n\t\t\t\t\t\t\t\t\tlabel: \"Period\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvalue: 'none',\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: 'none', value: \"[none]\" },\n\t\t\t\t\t\t\t\t\t\t{ id: '%a', value: \"am pm\" },\n\t\t\t\t\t\t\t\t\t\t{ id: '%A', value: \"AM PM\" }\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"radio\",\n\t\t\t\t\t\t\t\t\tname: \"timeDelimiter\",\n\t\t\t\t\t\t\t\t\tid: ids.timeDelimiter,\n\t\t\t\t\t\t\t\t\tlabel: \"Delimiter\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvertical: true,\n\t\t\t\t\t\t\t\t\toptions: delimiterList,\n\t\t\t\t\t\t\t\t\tvalue: 'colon',\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t]\n\t\t\t},\n\n\t\t\t// Validator\n\t\t\t{\n\t\t\t\tview: 'label',\n\t\t\t\tlabel: \"Validation criteria\",\n\t\t\t\tcss: 'ab-text-bold'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: ids.validateCondition,\n\t\t\t\tview: \"select\",\n\t\t\t\tname: \"validateCondition\",\n\t\t\t\tlabel: \"Condition\",\n\t\t\t\tlabelWidth: 100,\n\t\t\t\tvalue: 'none',\n\t\t\t\toptions: [\n\t\t\t\t\t{ id: 'none', value: '[None]' },\n\t\t\t\t\t{ id: 'dateRange', value: 'Range' },\n\t\t\t\t\t{ id: 'between', value: 'Between' },\n\t\t\t\t\t{ id: 'notBetween', value: 'Not between' },\n\t\t\t\t\t{ id: '=', value: 'Equal to' },\n\t\t\t\t\t{ id: '<>', value: 'Not equal to' },\n\t\t\t\t\t{ id: '>', value: 'Greater than' },\n\t\t\t\t\t{ id: '<', value: 'Less than' },\n\t\t\t\t\t{ id: '>=', value: 'Greater than or Equal to' },\n\t\t\t\t\t{ id: '<=', value: 'Less than or Equal to' }\n\t\t\t\t],\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\tswitch (newVal) {\n\t\t\t\t\t\t\tcase 'none':\n\t\t\t\t\t\t\t\t$$(ids.validateRange).hide();\n\t\t\t\t\t\t\t\t$$(ids.validateLeft).hide();\n\t\t\t\t\t\t\t\t$$(ids.validateRight).hide();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'dateRange':\n\t\t\t\t\t\t\t\t$$(ids.validateRange).show();\n\t\t\t\t\t\t\t\t$$(ids.validateLeft).hide();\n\t\t\t\t\t\t\t\t$$(ids.validateRight).hide();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'between':\n\t\t\t\t\t\t\tcase 'notBetween':\n\t\t\t\t\t\t\t\t$$(ids.validateRange).hide();\n\t\t\t\t\t\t\t\t$$(ids.validateLeft).define('label', 'Start Date');\n\t\t\t\t\t\t\t\t$$(ids.validateLeft).refresh();\n\t\t\t\t\t\t\t\t$$(ids.validateLeft).show();\n\t\t\t\t\t\t\t\t$$(ids.validateRight).show();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '=':\n\t\t\t\t\t\t\tcase '<>':\n\t\t\t\t\t\t\tcase '>':\n\t\t\t\t\t\t\tcase '<':\n\t\t\t\t\t\t\tcase '>=':\n\t\t\t\t\t\t\tcase '<=':\n\t\t\t\t\t\t\t\t$$(ids.validateRange).hide();\n\t\t\t\t\t\t\t\t$$(ids.validateLeft).define('label', 'Date');\n\t\t\t\t\t\t\t\t$$(ids.validateLeft).refresh();\n\t\t\t\t\t\t\t\t$$(ids.validateLeft).show();\n\t\t\t\t\t\t\t\t$$(ids.validateRight).hide();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: ids.validateRange,\n\t\t\t\thidden: true,\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: ids.validateRangeUnit,\n\t\t\t\t\t\tview: \"select\",\n\t\t\t\t\t\tname: \"validateRangeUnit\",\n\t\t\t\t\t\tlabel: 'Unit',\n\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{ id: 'days', value: 'Days' },\n\t\t\t\t\t\t\t{ id: 'months', value: 'Months' },\n\t\t\t\t\t\t\t{ id: 'years', value: 'Years' }\n\t\t\t\t\t\t],\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: function (newVal) {\n\t\t\t\t\t\t\t\t$$(ids.validateRangeBeforeLabel).refresh();\n\t\t\t\t\t\t\t\t$$(ids.validateRangeAfterLabel).refresh();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: ids.validateRangeBeforeLabel,\n\t\t\t\t\t\t\t\tview: 'template',\n\t\t\t\t\t\t\t\talign: 'left',\n\t\t\t\t\t\t\t\twidth: 140,\n\t\t\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\t\t\ttemplate: function () {\n\t\t\t\t\t\t\t\t\tvar beforeLabel = 'Before #number# #unit#'\n\t\t\t\t\t\t\t\t\t\t.replace('#number#', $$(ids.validateRangeBefore).getValue())\n\t\t\t\t\t\t\t\t\t\t.replace('#unit#', $$(ids.validateRangeUnit).getValue());\n\n\t\t\t\t\t\t\t\t\treturn beforeLabel;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: 'label',\n\t\t\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\t\twidth: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: ids.validateRangeAfterLabel,\n\t\t\t\t\t\t\t\tview: 'template',\n\t\t\t\t\t\t\t\talign: 'right',\n\t\t\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\t\t\ttemplate: function () {\n\t\t\t\t\t\t\t\t\tvar afterLabel = 'After #number# #unit#'\n\t\t\t\t\t\t\t\t\t\t.replace('#number#', $$(ids.validateRangeAfter).getValue())\n\t\t\t\t\t\t\t\t\t\t.replace('#unit#', $$(ids.validateRangeUnit).getValue());\n\n\t\t\t\t\t\t\t\t\treturn afterLabel;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: ids.validateRangeBefore,\n\t\t\t\t\t\t\t\tview: 'slider',\n\t\t\t\t\t\t\t\tname: \"validateRangeBefore\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonChange: function (newVal, oldValue) {\n\t\t\t\t\t\t\t\t\t\t$$(ids.validateRangeBeforeLabel).refresh();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: ids.validateRangeAfter,\n\t\t\t\t\t\t\t\tview: 'slider',\n\t\t\t\t\t\t\t\tname: \"validateRangeAfter\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonChange: function (newVal, oldValue) {\n\t\t\t\t\t\t\t\t\t\t$$(ids.validateRangeAfterLabel).refresh();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: ids.validateLeft,\n\t\t\t\tname: \"validateStartDate\",\n\t\t\t\tview: 'datepicker',\n\t\t\t\tlabel: 'Start Date',\n\t\t\t\tlabelWidth: 100,\n\t\t\t\thidden: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: ids.validateRight,\n\t\t\t\tname: \"validateEndDate\",\n\t\t\t\tview: 'datepicker',\n\t\t\t\tlabel: 'End Date',\n\t\t\t\tlabelWidth: 100,\n\t\t\t\thidden: true\n\t\t\t}\n\n\n\t\t]\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules: {},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these:\n\tlogic: {\n\n\t\t// isValid: function (ids, isValid) {\n\n\t\t// }\n\n\t\t// populate: function (ids, values) {\n\t\t// \tif (values.settings.validation) {\n\t\t// \t\t$$(ids.validateMinimum).enable();\n\t\t// \t\t$$(ids.validateMaximum).enable();\n\t\t// \t} else {\n\t\t// \t\t$$(ids.validateMinimum).disable();\n\t\t// \t\t$$(ids.validateMaximum).disable();\n\t\t// \t}\n\t\t// }\n\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit: function (ids) {\n\t\trefreshDateDisplay();\n\t}\n\n\n});\n\n\nclass ABFieldDate extends ABField {\n\tconstructor(values, object) {\n\t\tsuper(values, object, ABFieldDateDefaults);\n\n\t\t// we're responsible for setting up our specific settings:\n\t\tfor (var dv in defaultValues) {\n\t\t\tthis.settings[dv] = values.settings[dv] || defaultValues[dv];\n\t\t}\n\n\t\t// text to Int:\n\t\tthis.settings.includeTime = parseInt(this.settings.includeTime);\n\t\tthis.settings.defaultCurrentDate = parseInt(this.settings.defaultCurrentDate);\n\t\tthis.settings.dayOrder = parseInt(this.settings.dayOrder);\n\t\tthis.settings.monthOrder = parseInt(this.settings.monthOrder);\n\t\tthis.settings.yearOrder = parseInt(this.settings.yearOrder);\n\n\n\t}\n\n\t// return the default values for this DataField\n\tstatic defaults() {\n\t\treturn ABFieldDateDefaults;\n\t}\n\n\t/*\n\t* @function propertiesComponent\n\t*\n\t* return a UI Component that contains the property definitions for this Field.\n\t*\n\t* @param {App} App the UI App instance passed around the Components.\n\t* @return {Component}\n\t*/\n\tstatic propertiesComponent(App) {\n\t\treturn ABFieldDateComponent.component(App);\n\t}\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\tisValid() {\n\n\t\tvar validator = super.isValid();\n\n\t\t// validator.addError('columnName', L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name) );\n\n\t\treturn validator;\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\t// toObj () {\n\n\t// \tvar obj = super.toObj();\n\n\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t// \treturn obj;\n\t// }\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t// return the grid column header definition for this instance of ABFieldDate\n\tcolumnHeader(isObjectWorkspace) {\n\t\tvar config = super.columnHeader(isObjectWorkspace);\n\n\t\tif (this.settings.includeTime)\n\t\t\tconfig.editor = 'datetime';\n\t\telse\n\t\t\tconfig.editor = 'date';\n\n\t\tconfig.sort = 'string';\n\n\n\t\t// NOTE: it seems that the default value is a string in ISO format.\n\n\t\t//// NOTE: webix seems unable to parse ISO string into => date here.\n\t\t// config.map = '(date)#'+this.columnName+'#';   // so don't use this.\n\n\t\tconfig.format = (d) => {\n\t\t\tif ((d == '') || (d == null)) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\t// convert ISO string -> Date() -> our formatted string\n\n\t\t\t// pull format from settings.\n\t\t\tvar dateFormat = getDateFormat(this.settings);\n\n\t\t\treturn webix.Date.dateToStr(dateFormat)(new Date(d));\n\t\t};\n\n\n\t\tconfig.editFormat = (d) => {\n\t\t\t// this routine needs to return a Date() object for the editor to work with.\n\n\t\t\t// if d is not set, return a default Date() value.\n\t\t\tif ((d == '') || (d == null)) {\n// TODO: setup default date from settings:\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\t// else retun the actual ISO string => Date() value\n\t\t\treturn new Date(d);\n\t\t}\n\n\n\t\treturn config;\n\t}\n\n\n\n\t/**\n\t * @method defaultValue\n\t * insert a key=>value pair that represent the default value\n\t * for this field.\n\t * @param {obj} values a key=>value hash of the current values.\n\t */\n\tdefaultValue(values) {\n\t\t// if no default value is set, then don't insert a value.\n\t\tif (values[this.columnName] == null) {\n\t\t\t// Set current date as default\n\t\t\tif (this.settings.defaultCurrentDate) {\n\t\t\t\tvalues[this.columnName] = new Date();\n\t\t\t}\n\t\t\t// Specfic default date\n\t\t\telse if (this.settings.defaultDate != null && this.settings.defaultDate.length > 0) {\n\t\t\t\tvalues[this.columnName] = new Date(this.settings.defaultDate);\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\n\t/**\n\t * @method isValidData\n\t * Parse through the given data and return an error if this field's\n\t * data seems invalid.\n\t * @param {obj} data  a key=>value hash of the inputs to parse.\n\t * @param {OPValidator} validator  provided Validator fn\n\t * @return {array} \n\t */\n\tisValidData(data, validator) {\n\n\t\tif (data[this.columnName] != null) {\n\t\t\tvar value = data[this.columnName];\n\n\t\t\tif (!(value instanceof Date)) {\n\t\t\t\tvalue = new Date(value);\n\t\t\t}\n\n\t\t\t// verify we didn't end up with an InValid Date result.\n\t\t\tif ((Object.prototype.toString.call(value) === '[object Date]')\n\t\t\t\t&& (isFinite(value))) {\n\n\t\t\t\t// all good, so store as ISO format string.\n\t\t\t\tdata[this.columnName] = value.toISOString();\n\n\t\t\t} else {\n\n\t\t\t\t// return a validation error\n\t\t\t\tvalidator.addError(this.columnName, 'Should be a Date!');\n\t\t\t}\n\t\t}\n\n\t}\n\n}\n\n\nexport default ABFieldDate;\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/dataFields/ABFieldDate.js","/*\n * ABFieldImage\n *\n * An ABFieldImage defines a Image field type.\n *\n */\n\nimport ABField from \"./ABField\"\nimport ABFieldComponent from \"./ABFieldComponent\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\n\nvar ABFieldImageDefaults = {\n\tkey : 'image', // unique key to reference this specific DataField\n\t// type : 'string', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\ticon : 'file-image-o',   // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\t\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName : L('ab.dataField.image.menuName', '*Image Attachment'),\n\t\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.image.description', '*Attach an image to this object.')\n}\n\n\n\nvar defaultValues = {\n\t'useWidth':0,\n\t'imageWidth':'',\n\t'useHeight': 0,\n\t'imageHeight': '',\n\t'removeExistingData': 0\n}\n\n\n\n/**\n * ABFieldImageComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\nvar ABFieldImageComponent = new ABFieldComponent({\n\n\tfieldDefaults: ABFieldImageDefaults,\n\n\telements:(App, field) => {\n\n\t\tvar ids = {\n\t\t\timageWidth: '',\n\t\t\timageHeight: ''\n\t\t}\n\t\tids = field.idsUnique(ids, App);\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"checkbox\",\n\t\t\t\t\t\tname:\"useWidth\", \n\t\t\t\t\t\tlabelRight:L('ab.dataField.image.width', \"*width\"), \n\t\t\t            width: 80,\n\t\t\t            labelWidth: 0,\n\t\t\t\t\t\tvalue:1,\n\t\t\t            click: function() {\n\t\t\t\t\t\t\tif (this.getValue())\n\t\t\t\t\t\t\t\t$$(ids.imageWidth).enable()\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t$$(ids.imageWidth).disable();\n\t\t\t            }\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: 'text',\n\t\t\t\t\t\tname:'imageWidth',\n\t\t\t\t\t\tid: ids.imageWidth\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"checkbox\",\n\t\t\t\t\t\tname:\"useHeight\",\n// id:componentIds.useHeight, \n\t\t\t\t\t\tlabelRight:L('ab.dataField.image.height', \"*height\"), \n\t\t\t          \twidth: 80,\n\t\t\t            labelWidth: 0,\n\t\t\t\t\t\tvalue:1,\n\t\t\t            click: function() {\n\t\t\t\t\t\t\tif (this.getValue())\n\t\t\t\t\t\t\t\t$$(ids.imageHeight).enable()\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t$$(ids.imageHeight).disable();\n\t\t\t            }\n\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: 'text',\n\t\t\t\t\t\tname: 'imageHeight',\n\t\t\t          \tid: ids.imageHeight\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules:{\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic:{\n\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit:function(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n})\n\n\n\n\n\nclass ABFieldImage extends ABField {\n\n    constructor(values, object) {\n    \tsuper(values, object, ABFieldImageDefaults);\n\n    \t/*\n    \t{\n\t\t\tsettings: {\n\t\t\t\t'useWidth':0,\n\t\t\t\t'imageWidth':'',\n\t\t\t\t'useHeight': 0,\n\t\t\t\t'imageHeight': '',\n\t\t\t\t'removeExistingData': 0\n\t\t\t}\n    \t}\n    \t*/\n\n    \t// we're responsible for setting up our specific settings:\n    \tfor (var dv in defaultValues) {\n    \t\tthis.settings[dv] = values.settings[dv] || defaultValues[dv];\n    \t}\n\n\n    \t// text to Int:\n    \tthis.settings.useWidth = parseInt(this.settings.useWidth);\n    \tthis.settings.useHeight = parseInt(this.settings.useHeight);\n    \tthis.settings.removeExistingData = parseInt(this.settings.removeExistingData);\n  \t}\n\n\n  \t// return the default values for this DataField\n  \tstatic defaults() {\n  \t\treturn ABFieldImageDefaults;\n  \t}\n\n\n\n\t/*\n\t * @function propertiesComponent\n\t *\n\t * return a UI Component that contains the property definitions for this Field.\n\t *\n\t * @param {App} App the UI App instance passed around the Components.\n\t * @return {Component}\n\t */\n  \tstatic propertiesComponent(App) {\n  \t\treturn ABFieldImageComponent.component(App);\n  \t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\tisValid() {\n\n\t\tvar validator = super.isValid();\n\n\t\t// validator.addError('columnName', L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name) );\n\n\t\treturn validator;\n\t}\n\n\n\n\t/**\n\t * @function destroy\n\t * On a destroy operation, ask if the user wants to keep the related images.\n\t */\n\tdestroy () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\t// verify we have been .save()d before:\n\t\t\t\tif (this.id) {\n\n\t\t\t\t\t// Ask the user what to do about the existing images:\n\t\t\t\t\tOP.Dialog.Confirm({\n\t\t\t\t\t\ttitle: L('ab.dataField.image.keepImages', '*Keep Images?'),\n\t\t\t\t\t\tmessage: L('ab.dataField.image.keepImagesDescription', '*Do you want to keep the images referenced by #label#?').replace('#label#', this.label),\n\t\t\t\t\t\tcallback: (result) => {\n\n\t\t\t\t\t\t\t// update this setting so the server can respond correctly in\n\t\t\t\t\t\t\t// ABFieldImage.migrateDrop()\n\t\t\t\t\t\t\tthis.settings.removeExistingData = result ? 0: 1;\n\t\t\t\t\t\t\tthis.save()\n\t\t\t\t\t\t\t.then(()=>{\n\n// TODO: a reminder that you still got alot on the server to do!\nOP.Dialog.Alert({\n\ttitle:'!! TODO !!',\n\ttext:'Tell a Developer to actually pay attention to this!'\n})\n\t\t\t\t\t\t\t\t// now the default .destroy() \n\t\t\t\t\t\t\t\tsuper.destroy()\n\t\t\t\t\t\t\t\t.then(resolve)\n\t\t\t\t\t\t\t\t.catch(reject);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t} else {\n\t\t\t\t\tresolve();  // nothing to do really\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t)\n\t}\n\n\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\t// toObj () {\n\n\t// \tvar obj = super.toObj();\n\n\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t// \treturn obj;\n\t// }\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\tidCustomContainer(obj) {\n\t\treturn \"#columnName#-#id#-image\"\n\t\t\t.replace('#id#', obj.id)\n\t\t\t.replace('#columnName#', this.columnName);\n\t}\n\n\n\t// return the grid column header definition for this instance of ABFieldImage\n\tcolumnHeader (isObjectWorkspace) {\n\t\tvar config = super.columnHeader(isObjectWorkspace);\n\n\t\tconfig.editor = false;  // 'text';  // '[edit_type]'   for your unique situation\n\t\tconfig.sort   = 'string' // '[sort_type]'   for your unique situation\n\n\t\tif (this.settings.useWidth) {\n\t\t\tconfig.width = this.settings.imageWidth;\n\t\t}\n\n\t\t// populate our default template:\n\t\tconfig.template = (obj) => {\n\n\t\t\tvar imgDiv = [\n\t\t\t\t'<div id=\"#id#\" class=\"ab-image-data-field\">',\n\t\t\t\tthis.imageTemplate(obj),\n\t\t\t\t'</div>'\n\t\t\t].join('');\n\n\t\t\treturn imgDiv\n\t\t\t\t.replace('#id#', this.idCustomContainer(obj) )\n\t\t}\n\n\t\treturn config;\n\t}\n\n\n\t/*\n\t * @function customDisplay\n\t * perform any custom display modifications for this field.  \n\t * @param {object} row is the {name=>value} hash of the current row of data.\n\t * @param {App} App the shared ui App object useful more making globally\n\t *\t\t\t\t\tunique id references.\n\t * @param {HtmlDOM} node  the HTML Dom object for this field's display.\n\t */\n\tcustomDisplay(row, App, node) {\n\t\t// sanity check.\n\t\tif (!node) { return }\n\n\n\t\tvar idBase = App.unique(this.idCustomContainer(row));\n\t\tvar ids = {\n\t\t\tcontainer:idBase+'-container',\n\t\t\tuploader: idBase+'-uploader',\n\t\t\ticon: idBase+'-icon',\n\t\t\timage: idBase+'-image'\n\t\t}\n\n\n\t\t// safety check:\n\t\t// webix seems to crash if you specify a .container that doesn't exists:\n\t\t// Note: when the template is first created, we don't have App.unique() \n\t\tvar parentContainer = node.querySelector('#'+this.idCustomContainer(row)); // $$(this.idCustomContainer(obj));\n\t\tif(parentContainer) {\n\n\t\t\tparentContainer.innerHTML = '';\n\t\t\tparentContainer.id = idBase;\t// change it to the unique one.\n\n\t\t\tvar imgHeight = 33;\n\t\t\tif (this.settings.useHeight){\n\t\t\t\timgHeight = parseInt(this.settings.imageHeight);\n\t\t\t}\n\n\t\t\tvar imgWidth = 50;\n\t\t\tif (this.settings.useWidth){\n\t\t\t\timgWidth = parseInt(this.settings.imageWidth);\n\t\t\t}\n//// TODO: actually pay attention to the height and width when \n//// displaying the images.\n\n\t\t\t// use a webix component for displaying the content.\n\t\t\t// do this so I can use the progress spinner\n\t\t\tvar webixContainer = webix.ui({\n\t\t\t\tview:'template',\n\t\t\t\tid: ids.container,\n\t\t\t\tcontainer: idBase,\n\t\t\t\t\n\t\t\t\ttemplate:this.imageTemplate(row),\n\n\t\t\t\tborderless:true,\n\t\t\t\theight: imgHeight,\n\t\t\t\twidth:  imgWidth\n\t\t\t});\n\t\t\twebix.extend(webixContainer, webix.ProgressBar);\n\n\t\t\t////\n\t\t\t//// Prepare the Uploader\n\t\t\t////\n\n\t\t\t// The Server Side action key format for this Application:\n\t\t\tvar actionKey = 'opstool.AB_'+this.object.application.name.replace('_','')+'.view';\n\t\t\tvar url = '/'+[ 'opsportal', 'image', this.object.application.name, actionKey, '1'].join('/');\n\n\t\t\tvar uploader = webix.ui({ \n\t\t\t    view:\"uploader\",  \n\t\t\t    id:ids.uploader, \n\t\t\t    apiOnly: true, \n\t\t\t    upload:url,\n\t\t\t    inputName:'image',\n\t\t\t    multiple: false,\n\t\t\t    // formData:{\n\t\t\t    // \tappKey:application.name,\n\t\t\t    // \tpermission:actionKey,\n\t\t\t    // \tisWebix:true,\n\t\t\t    // \timageParam:'upload'\n\t\t\t    // },\n\t\t\t    on: {\n\n\t\t\t    \t// when a file is added to the uploader\n\t\t\t    \tonBeforeFileAdd:function(item){\n\n\t\t\t\t\t\tnode.classList.remove('webix_invalid');\n\t\t\t\t\t\tnode.classList.remove('webix_invalid_cell');\n\t\t\t\t\t\t\n\t\t\t    \t\t// verify file type\n\t\t\t    \t\tvar acceptableTypes = ['jpg', 'jpeg', 'bmp', 'png', 'gif'];\n\t\t\t\t\t    var type = item.type.toLowerCase();\n\t\t\t\t\t    if (acceptableTypes.indexOf(type) == -1){\n//// TODO: multilingual\nwebix.message(\"Only [\"+acceptableTypes.join(\", \")+\"] images are supported\");\n\t\t\t\t\t        return false;\n\t\t\t\t\t    }\n\n\t\t\t\t\t\t// start progress indicator\n\t\t\t\t\t\twebixContainer.showProgress({\n\t\t\t\t\t\t   type:\"icon\",\n\t\t\t\t\t\t   delay:2000\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t    \t// when upload is complete:\n\t\t\t    \tonFileUpload:(item, response)=>{\n\t\t\t\t\t\t\n\t\t\t\t\t\twebixContainer.hideProgress();\n\t\t\t\t\t\tthis.showImage(idBase, response.data.uuid);\n\n// TODO: delete previous image from our OPsPortal service?\n\t\t\t\t\t\t\n\t\t\t\t\t\t// update just this value on our current object.model\n\t\t\t\t\t\tvar values = {};\n\t\t\t\t\t\tvalues[this.columnName] = response.data.uuid\n\t\t\t\t\t\tthis.object.model().update(row.id, values)\n\t\t\t\t\t\t.then(()=>{\n\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err)=>{\n\n\t\t\t\t\t\t\tnode.classList.add('webix_invalid');\n\t\t\t\t\t\t\tnode.classList.add('webix_invalid_cell');\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tOP.Error.log('Error updating our entry.', {error:err, row:row, values:values });\n\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t})\n\n\t\t\t\t\t},\n\n\t\t\t\t\t// if an error was returned\n\t\t\t\t\tonFileUploadError:function(item, response){\n\t\t\t\t\t\tOP.Error.log('Error loading image', response);\n\t\t\t\t\t\twebixContainer.hideProgress();\n\t\t\t\t\t}\n\t\t\t    }\n\t\t\t});\n\t\t\tuploader.addDropZone(webixContainer.$view);\n\n\t\t}\t\n\t}\n\n\n\timageTemplate(obj) {\n\n\t\t// deault view is icon:\n\t\tvar iconDisplay = '';\n\t\tvar imageDisplay = 'display:none;';\n\t\tvar imageURL    = ''\n\t\t\n\t\t// if we have a value for this field, then switch to image:\n\t\tvar value = obj[this.columnName];\n\t\tif ((value) && (value != '')) {\n\t\t\ticonDisplay = 'display:none;';\n\t\t\timageDisplay = '';\n\t\t\timageURL    = \"background-image:url('/opsportal/image/\" + this.object.application.name+\"/\"+obj[this.columnName]+\"');\"\n\t\t}\n\n\t\treturn [\n\t\t\t'<div class=\"image-data-field-icon\" style=\"text-align: center; '+iconDisplay+'\"><i class=\"fa fa-file-image-o fa-2x\"></i></div>',\n\t\t\t'<div class=\"image-data-field-image\" style=\"'+imageDisplay+' width:100%; height:100%; background-repeat: no-repeat; background-position: center center; background-size: cover; '+imageURL+'\"></div>',\n\t\t].join('');\n\n\t}\n\n\n\tshowImage(id, uuid) {\n\t\tvar parentContainer = document.getElementById(id); // $$(this.idCustomContainer(obj));\n\t\tif(parentContainer) {\n\n\t\t\tparentContainer.querySelector('.image-data-field-icon').style.display = 'none';\n\t\t\tvar image = parentContainer.querySelector('.image-data-field-image');\n\t\t\timage.style.display = '';\n\t\t\timage.style.backgroundImage = \"url('/opsportal/image/\" + this.object.application.name+\"/\"+uuid+\"')\";\n\n\t\t}\n\t}\n\n\n}\n\n\n\n//// NOTE: if you need a unique [edit_type] by your returned config.editor above:\n// webix.editors = {\n//   \"[edit_type]\": {\n//     focus: function () {...}\n//     getValue: function () {...},\n//     setValue: function (value) {...},\n//     render: function () {...}\n//   }\n// };\n\n\n//// NOTE: if you need a unique [sort_type] by your returned config.sort above:\n// webix.DataStore.prototype.sorting.as.[sort_type] = function(a,b){ \n//     return a > b ? 1 : -1; \n// }\n\n\nexport default ABFieldImage;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/dataFields/ABFieldImage.js","/*\n * ABFieldNumber\n *\n * An ABFieldNumber defines a Number field type.\n *\n */\n\nimport ABField from \"./ABField\"\nimport ABFieldComponent from \"./ABFieldComponent\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\n\nvar ABFieldNumberDefaults = {\n\tkey : 'number', // unique key to reference this specific DataField\n\ticon : 'slack',   // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName : L('ab.dataField.number.menuName', '*Number'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.number.description', '*A Float or Integer Value')\n}\n\n\n\nvar formatList = [\n\t{ id: 'none', value: L('ab.dataField.number.none', \"*None\") },\n\t{ id: 'dollar', value: L('ab.dataField.number.format.dollar', \"$\"), sign: \"$\", position: \"prefix\" },\n\t{ id: 'pound', value: L('ab.dataField.number.format.pound', \"\"), sign: \"\", position: \"prefix\" },\n\t{ id: 'euroBefore', value: L('ab.dataField.number.format.euroBefore', \" (before)\"), sign: \"\", position: \"prefix\" },\n\t{ id: 'euroAfter', value: L('ab.dataField.number.format.euroAfter', \" (after)\"), sign: \"\", position: \"postfix\" },\n\t{ id: 'percent', value: L('ab.dataField.number.format.percent', \"%\"), sign: \"%\", position: \"postfix\" },\n];\n\nvar defaultValues = {\n\t'allowRequired':0,\n\t'numberDefault':'',\n\t'typeFormat': 'none',\n\t'typeDecimals': 'none',\n\t'typeDecimalPlaces': 'none',\n\t'typeRounding' : 'none',\n\t'typeThousands': 'none',\n\t'validation':0,\n\t'validateMinimum':'',\n\t'validateMaximum':''\n}\n\n/**\n * ABFieldNumberComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\nvar ABFieldNumberComponent = new ABFieldComponent({\n\n\tfieldDefaults: ABFieldNumberDefaults,\n\n\telements:(App, field) => {\n\n\n\n\t\t// var idBase = ABFieldNumberDefaults.type;\n\t\t// var ids = {\n\t\t// \ttypeDecimalPlaces: this.unique(App, '_typeDecimalPlaces'),  // App.unique(idBase +'_typeDecimalPlaces'),\n\t\t// \ttypeRounding: App.unique(idBase +'_typeRounding'),\n\t\t// \tvalidateMinimum: App.unique(idBase + '_validateMinimum'),\n\t\t// \tvalidateMaximum: App.unique(idBase + '_validateMaximum')\n\t\t// }\n\n\t\tvar ids = {\n\t\t\ttypeDecimalPlaces \t: '',\n\t\t\ttypeRounding \t\t: '',\n\t\t\tvalidateMinimum \t: '',\n\t\t\tvalidateMaximum \t: ''\n\t\t}\n\t\tids = field.idsUnique(ids, App);\n\n\t\treturn [\n\t\t\t// {\n\t\t\t// \tview: \"text\",\n\t\t\t// \tname:'textDefault',\n\t\t\t// \tlabelWidth: App.config.labelWidthLarge,\n\t\t\t// \tplaceholder: L('ab.dataField.string.default', '*Default text')\n\t\t\t// },\n\t\t\t{\n\t\t\t\tview: \"checkbox\",\n// id: componentIds.allowRequired,\n\t\t\t\tname:\"allowRequired\",\n\t\t\t\tlabelRight: L(\"ab.dataField.number.required\", \"*Required\"),\n\t\t\t\t// inputWidth: 130,\n\t\t\t\tlabelWidth: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"text\",\n\t\t\t\tlabel: L(\"ab.dataField.number.defaultValue\", \"*Default Value\"),\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n// id: componentIds.numberDefault,\n\t\t\t\tname:\"numberDefault\",\n\t\t\t\tplaceholder: L('ab.dataField.number.defaultNumber', '*Default number'),\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\t// Validate number\n\t\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t\t// $$(componentIds.numberDefault).setValue(oldVal);\n\t\t\t\t\t\t\tthis.setValue(oldVal);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"richselect\",\n// id: componentIds.typeFormat,\n\t\t\t\tname:'typeFormat',\n\t\t\t\tlabel: L('ab.dataField.number.format', \"*Format\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\toptions: formatList\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"richselect\",\n// id: componentIds.typeDecimals,\n\t\t\t\tname:'typeDecimals',\n\t\t\t\tlabel: L('ab.dataField.number.decimals', \"*Decimals\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\toptions: [\n\t\t\t\t\t{ id: 'none', value: L('ab.dataField.number.none', \"*None\") },\n\t\t\t\t\t{ id: 'period', value: L('ab.dataField.number.period', \"*Period\") },\n\t\t\t\t\t{ id: 'comma', value: L('ab.dataField.number.comma', \"*Comma\") }\n\t\t\t\t],\n\t\t\t\ton: {\n\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\tif (newValue == 'none') {\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).disable();\n\t\t\t\t\t\t\t$$(ids.typeRounding).disable();\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).hide();\n\t\t\t\t\t\t\t$$(ids.typeRounding).hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).enable();\n\t\t\t\t\t\t\t$$(ids.typeRounding).enable();\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).show();\n\t\t\t\t\t\t\t$$(ids.typeRounding).show();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"richselect\",\n\t\t\t\tid: ids.typeDecimalPlaces,\n\t\t\t\tname:'typeDecimalPlaces',\n\t\t\t\tlabel: \"Places\",\n\t\t\t\tvalue: 'none',\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\tdisabled: true,\n\t\t\t\thidden: true,\n\t\t\t\toptions: [\n\t\t\t\t\t{ id: 'none', value: \"0\" },\n\t\t\t\t\t{ id: 1, value: \"1\" },\n\t\t\t\t\t{ id: 2, value: \"2\" },\n\t\t\t\t\t{ id: 3, value: \"3\" },\n\t\t\t\t\t{ id: 4, value: \"4\" },\n\t\t\t\t\t{ id: 5, value: \"5\" },\n\t\t\t\t\t{ id: 10, value: \"10\" }\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"richselect\",\n\t\t\t\tid: ids.typeRounding,\n\t\t\t\tname:'typeRounding',\n\t\t\t\tlabel: L('ab.dataField.number.rounding', \"*Rounding\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\tvertical: true,\n\t\t\t\tdisabled: true,\n\t\t\t\thidden: true,\n\t\t\t\toptions: [\n\t\t\t\t\t{ id: 'none', value: L('ab.dataField.number.default', \"*Default\") },\n\t\t\t\t\t{ id: 'roundUp', value: L('ab.dataField.number.roundUp', \"*Round Up\") },\n\t\t\t\t\t{ id: 'roundDown', value: L('ab.dataField.number.roundDown', \"*Round Down\") }\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"richselect\",\n// id: componentIds.typeThousands,\n\t\t\t\tname:'typeThousands',\n\t\t\t\tlabel: L('ab.dataField.number.thousands', \"*Thousands\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\tvertical: true,\n\t\t\t\toptions: [\n\t\t\t\t\t{ id: 'none', value: L('ab.dataField.number.none', \"*None\") },\n\t\t\t\t\t{ id: 'comma', value: L('ab.dataField.number.comma', \"*Comma\") },\n\t\t\t\t\t{ id: 'period', value: L('ab.dataField.number.period', \"*Period\") },\n\t\t\t\t\t{ id: 'space', value: L('ab.dataField.number.space', \"*Space\") }\n\t\t\t\t]\n\t\t\t},\n\n\n\n\t\t\t{\n\t\t\t\tview: 'checkbox',\n// id: componentIds.validate,\n\t\t\t\tname:'validation',\n\t\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\t\tlabelRight: L('ab.dataField.number.validation', \"*Validation\"),\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal) {\n\t\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\t\t$$(ids.validateMinimum).enable();\n\t\t\t\t\t\t\t$$(ids.validateMaximum).enable();\n\t\t\t\t\t\t\t$$(ids.validateMinimum).show();\n\t\t\t\t\t\t\t$$(ids.validateMaximum).show();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$$(ids.validateMinimum).disable();\n\t\t\t\t\t\t\t$$(ids.validateMaximum).disable();\n\t\t\t\t\t\t\t$$(ids.validateMinimum).hide();\n\t\t\t\t\t\t\t$$(ids.validateMaximum).hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: 'text',\n\t\t\t\tid: ids.validateMinimum,\n\t\t\t\tname:'validateMinimum',\n\t\t\t\tlabel: L('ab.dataField.number.minimum', \"*Minimum\"),\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\tdisabled: true,\n\t\t\t\thidden: true,\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function(newVal, oldVal) {\n\t\t\t\t\t\t// Validate number\n\t\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t\t$$(ids.validateMinimum).setValue(oldVal || '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: 'text',\n\t\t\t\tid: ids.validateMaximum,\n\t\t\t\tname:'validateMaximum',\n\t\t\t\tlabel: L('ab.dataField.number.maximum', \"*Maximum\"),\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\tdisabled: true,\n\t\t\t\thidden: true,\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\t// Validate number\n\t\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t\t$$(ids.validateMaximum).setValue(oldVal || '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t]\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues:defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules:{\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these:\n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your\n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic:{\n\n\t\tpopulate:function(ids, values) {\n\t\t\tif (values.settings.validation) {\n\t\t\t\t$$(ids.validateMinimum).enable();\n\t\t\t\t$$(ids.validateMaximum).enable();\n\t\t\t} else {\n\t\t\t\t$$(ids.validateMinimum).disable();\n\t\t\t\t$$(ids.validateMaximum).disable();\n\t\t\t}\n\t\t}\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit:function(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n})\n\n\n\n\n\nclass ABFieldNumber extends ABField {\n\n    constructor(values, object) {\n    \tsuper(values, object, ABFieldNumberDefaults);\n\n    \t/*\n    \t{\n\t\t\tsettings: {\n\t\t\t\t'allowRequired':0,\n\t\t\t\t'numberDefault':null,\n\t\t\t\t'typeFormat': 'none',\n\t\t\t\t'typeDecimals': 'none',\n\t\t\t\t'typeDecimalPlaces': 'none',\n\t\t\t\t'typeRounding' : 'none',\n\t\t\t\t'typeThousands': 'none',\n\t\t\t\t'validation':0,\n\t\t\t\t'validateMinimum':null,\n\t\t\t\t'validateMaximum':null\n\t\t\t}\n    \t}\n    \t*/\n\n    \t// we're responsible for setting up our specific settings:\n    \tfor (var dv in defaultValues) {\n    \t\tthis.settings[dv] = values.settings[dv] || defaultValues[dv];\n    \t}\n\n\n    \t// text to Int:\n    \tthis.settings.allowRequired = parseInt(this.settings.allowRequired);\n    \tthis.settings.validation = parseInt(this.settings.validation);\n\n  \t}\n\n\n  \t// return the default values for this DataField\n  \tstatic defaults() {\n  \t\treturn ABFieldNumberDefaults;\n  \t}\n\n\n\n\t/*\n\t * @function propertiesComponent\n\t *\n\t * return a UI Component that contains the property definitions for this Field.\n\t *\n\t * @param {App} App the UI App instance passed around the Components.\n\t * @return {Component}\n\t */\n  \tstatic propertiesComponent(App) {\n  \t\treturn ABFieldNumberComponent.component(App);\n  \t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\tisValid() {\n\n\t\tvar validator = super.isValid();\n\n\t\t// validator.addError('columnName', L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name) );\n\n\t\treturn validator;\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\t// toObj () {\n\n\t// \tvar obj = super.toObj();\n\n\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t// \treturn obj;\n\t// }\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t// return the grid column header definition for this instance of ABFieldNumber\n\tcolumnHeader (isObjectWorkspace) {\n\t\tvar config = super.columnHeader(isObjectWorkspace);\n\n\t\tconfig.editor = 'number';\t\t// [edit_type] simple inline editing.\n\t\tconfig.sort   = 'int';\t\t\t// [sort_type]\n\n\t\treturn config;\n\t}\n\n\n\n\t/**\n\t * @method defaultValue\n\t * insert a key=>value pair that represent the default value\n\t * for this field.\n\t * @param {obj} values a key=>value hash of the current values.\n\t */\n\tdefaultValue(values) {\n\t\t\n\t\t// if no default value is set, then don't insert a value.\n\t\tif (this.settings.numberDefault != '') {\n\t\t\tvalues[this.columnName] = this.settings.numberDefault;\n\t\t}\n\t}\n\n\n\n\t/**\n\t * @method isValidData\n\t * Parse through the given data and return an error if this field's\n\t * data seems invalid.\n\t * @param {obj} data  a key=>value hash of the inputs to parse.\n\t * @param {OPValidator} validator  provided Validator fn\n\t * @return {array} \n\t */\n\tisValidData(data, validator) {\n\n\t\tif (typeof data[this.columnName] != 'undefined') {\n\t\t\tvar value = data[this.columnName];\n\n\t\t\t// if this is an integer:\n\t\t\tif (this.settings.typeDecimals == 'none') {\n\n\t\t\t\tvalue = parseInt(value);\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tvar places = parseInt(this.settings.typeDecimalPlaces) || 2;\n\t\t\t\tvalue = parseFloat(parseFloat(value).toFixed(places));\n\t\t\t}\n\n\t\t\tfunction isNumeric(n) {\n\t\t\t  return !Number.isNaN(parseFloat(n)) && Number.isFinite(n);\n\t\t\t}\n\t\t\tif (!isNumeric(value)) {\n\t\t\t\tvalidator.addError(this.columnName, 'invalid number');\n\t\t\t}\n\t\t}\n\n\t}\n\n}\n\n\n\t// NOTE: if you need a unique [edit_type] by your returned config.editor above:\n    webix.editors.number = webix.extend({\n// TODO : Validate number only\n    }, webix.editors.text);\n\n\n//// NOTE: if you need a unique [sort_type] by your returned config.sort above:\n// webix.DataStore.prototype.sorting.as.[sort_type] = function(a,b){\n//     return a > b ? 1 : -1;\n// }\n\nexport default ABFieldNumber;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/dataFields/ABFieldNumber.js","/*\n * ABFieldString\n *\n * An ABFieldString defines a string field type.\n *\n */\n\nimport ABField from \"./ABField\"\nimport ABFieldComponent from \"./ABFieldComponent\"\n\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar ABFieldStringDefaults = {\n\tkey : 'string', // unique key to reference this specific DataField\n\t// type : 'string', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\ticon : 'font',   // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName : L('ab.dataField.string.menuName', '*Single line text'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.string.description', '*short string value')\n}\n\n\n\n\n/**\n * ABFieldStringComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n */\nvar ABFieldStringComponent = new ABFieldComponent({\n\n\tfieldDefaults: ABFieldStringDefaults,\n\n\telements:function(App) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tview: \"text\",\n\t\t\t\tname:'textDefault',\n\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\tlabel: L('ab.dataField.string.defaultLabel', '*Default'),\n\t\t\t\tplaceholder: L('ab.dataField.string.default', '*Enter default value')\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname:'supportMultilingual',\n\t\t\t\tlabelRight: L('ab.dataField.string.supportMultilingual', '*Support multilingual'),\n\t\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\t\tvalue: true\n\t\t\t}\n\t\t]\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues:{\n\t\t'textDefault': '',\n\t\t'supportMultilingual':1\n\t},\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules:{\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these:\n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your\n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic:{\n\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit:function(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n})\n\n\n\n\n\nclass ABFieldString extends ABField {\n\n    constructor(values, object) {\n    \tsuper(values, object, ABFieldStringDefaults);\n\n    \t/*\n    \t{\n\t\t\tsettings: {\n\t\t\t\ttextDefault: 'string',\n\t\t\t\tsupportMultilingual: true/false\n\t\t\t}\n    \t}\n    \t*/\n\n    \t// we're responsible for setting up our specific settings:\n    \tthis.settings.textDefault = values.settings.textDefault || '';\n    \tthis.settings.supportMultilingual = values.settings.supportMultilingual+\"\" || \"1\";\n\n    \t// text to Int:\n    \tthis.settings.supportMultilingual = parseInt(this.settings.supportMultilingual);\n\n  \t}\n\n\n  \t// return the default values for this DataField\n  \tstatic defaults() {\n  \t\treturn ABFieldStringDefaults;\n  \t}\n\n\n\n\t/*\n\t * @function propertiesComponent\n\t *\n\t * return a UI Component that contains the property definitions for this Field.\n\t *\n\t * @param {App} App the UI App instance passed around the Components.\n\t * @return {Component}\n\t */\n  \tstatic propertiesComponent(App) {\n  \t\treturn ABFieldStringComponent.component(App);\n  \t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\tisValid() {\n\n\t\tvar validator = super.isValid();\n\n\t\t// validator.addError('columnName', L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name) );\n\n\t\treturn validator;\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\t// toObj () {\n\n\t// \tvar obj = super.toObj();\n\n\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t// \treturn obj;\n\t// }\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t// return the grid column header definition for this instance of ABFieldString\n\tcolumnHeader (isObjectWorkspace) {\n\t\tvar config = super.columnHeader(isObjectWorkspace);\n\n\t\tconfig.editor = 'text';\n\t\tconfig.sort   = 'string'\n\n\t\treturn config;\n\t}\n\n\n\n\t/*\n\t * @function isMultilingual\n\t * does this field represent multilingual data?\n\t * @return {bool}\n\t */\n\tisMultilingual() {\n\t\treturn this.settings.supportMultilingual == 1;\n\t}\n\n\n\n}\n\n\n\nexport default ABFieldString;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/dataFields/ABFieldString.js","/*\n * ABView\n *\n * An ABView defines a UI display container.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nexport default class ABView  {\n\n\t/**\n\t * @param {obj} values  key=>value hash of ABView values\n\t * @param {ABApplication} application the application object this view is under\n\t * @param {ABView} parent the ABView this view is a child of. (can be null)\n\t * @param {obj} defaultValues special sub class defined default values.\n\t */\n    constructor(values, application, parent, defaultValues) {\n\n    \tthis.defaults = defaultValues;\n    \t\n  \t// \t{\n  \t// \t\tid:'uuid',\t\t\t\t\t// uuid value for this obj\n  \t// \t\tkey:'viewKey',\t\t\t\t// unique key for this View Type\n  \t// \t\ticon:'font',\t\t\t\t// fa-[icon] reference for an icon for this View Type\n  \t// \t\tlabel:'',\t\t\t\t\t// pulled from translation\n\n\t//\t\tsettings: {\t\t\t\t\t// unique settings for the type of field\n\t//\t\t},\n\n\t// \t\tchildren:[],\t\t\t\t// the child views contained by this view.\n\n\t//\t\ttranslations:[]\n  \t// \t}\n  \t\t\n  \t\tthis.fromValues(values);\n\n\n    \t// label is a multilingual value:\n    \tOP.Multilingual.translate(this, this, ['label']);\n\n    \tthis.application = application;\n\n    \tthis.parent = parent || null;\n  \t}\n\n\n\n  \tviewKey() {\n  \t\treturn this.defaults.key;\n  \t}\n\n\n  \tviewIcon() {\n  \t\treturn this.defaults.icon;\n  \t}\n\n\n  \t/*\n  \t * @method isValid\n  \t * check the current values to make sure they are valid.\n  \t * Here we check the default values provided by ABView.\n  \t *\n  \t * @return {OP.Validation.validator()}\n  \t */\n\tisValid() {\n\n\t\tvar validator = OP.Validation.validator();\n\n\t\t// // labels must be unique among views on the same parent\n\t\tvar parent = this.parent;\n\t\tif (!parent) { parent = this.application; }\n\n\n\t\tvar isNameUnique = (parent.views((v)=>{\n\t\t\treturn (v.id != this.id)\n\t\t\t\t\t&& (v.label.toLowerCase() == this.label.toLowerCase() );\n\t\t}).length == 0);\n\t\tif (!isNameUnique) {\n\t\t\tvalidator.addError('label', L('ab.validation.view.label.unique', '*View label must be unique among peers.'));\n\t\t}\n\n\t\treturn validator;\n\t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\t/// ABApplication data methods\n\n\n\t/**\n\t * @method destroy()\n\t *\n\t * destroy the current instance of ABApplication\n\t *\n\t * also remove it from our _AllApplications\n\t *\n\t * @return {Promise}\n\t */\n\tdestroy () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\t// verify we have been .save()d before:\n\t\t\t\tif (this.id) {\n\n\t\t\t\t\tif (!this.parent) {\n\n\t\t\t\t\t\tthis.application.viewDestroy(this)\n\t\t\t\t\t\t.then(resolve)\n\t\t\t\t\t\t.catch(reject);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tresolve();  // nothing to do really\n\t\t\t\t}\n\n\t\t\t}\n\t\t)\n\n\t}\n\n\n\t/**\n\t * @method save()\n\t *\n\t * persist this instance of ABField with it's parent ABObject\n\t *\n\t *\n\t * @return {Promise}\n\t *\t\t\t\t\t\t.resolve( {this} )\n\t */\n\tsave () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\t// if this is our initial save()\n\t\t\t\tif (!this.id) {\n\t\t\t\t\tthis.id = OP.Util.uuid();\t// setup default .id\n\t\t\t\t}\n\n\t\t\t\t// if this is not a child of another view then store under\n\t\t\t\t// application.\n\t\t\t\tvar parent = this.parent;\n\t\t\t\tif (!parent) parent = this.application;\n\n\t\t\t\tparent.viewSave(this)\n\t\t\t\t.then(resolve)\n\t\t\t\t.catch(reject)\n\t\t\t}\n\t\t)\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABField instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * @return {json}\n\t */\n\ttoObj () {\n\n\t\tOP.Multilingual.unTranslate(this, this, ['label']);\n\n\t\t// // for each Object: compile to json\n\t\tvar currChildren = [];\n\t\tthis._children.forEach((child) => {\n\t\t\tcurrChildren.push(child.toObj())\n\t\t})\n\n\t\treturn {\n\t\t\tid : this.id,\n\t\t\tkey : this.key,\n\t\t\ticon : this.icon,\n\n// parent: this.parent,\n\n\t\t\tsettings: this.settings || {},\n\t\t\ttranslations:this.translations || [],\n\t\t\tchildren:currChildren\n\n\t\t}\n\t}\n\n\n\t/**\n\t * @method fromValues()\n\t *\n\t * initialze this object with the given set of values.\n\t * @param {obj} values\n\t */\n\tfromValues (values) {\n\n \t\tthis.id = values.id;\t\t\t// NOTE: only exists after .save()\n    \tthis.key = values.key || this.viewKey();\n    \tthis.icon = values.icon || this.viewIcon();\n\n// this.parent = values.parent || null;\n\n\t\tvalues.settings = values.settings || {};\n\n    \t// if this is being instantiated on a read from the Property UI,\n    \t// .label is coming in under .settings.label\n    \tthis.label = values.label || values.settings.label || '?label?';\n\n\n    \tthis.translations = values.translations || [];\n\n    \tthis.settings = values.settings || {};\n\n\n    \tvar children = [];\n    \t// (values.children || []).forEach((child) => {\n    \t// \tchildren.push(this.newChild(child));\n    \t// })\n    \tthis._children = children;\n\n    \t// convert from \"0\" => 0\n\n\t}\n\n\n\n\tisRoot() {\n\t\treturn this.parent == null;\n\t}\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/classes/views/ABView.js","\n/*\n * AB Choose\n *\n * When choosing an initial application to work with, we can\n *   - select an application from a list  :  ab_choose_list\n *   - create an application from a form  :  ab_choose_form\n *\n */\n\n\nimport AB_Choose_List from './ab_choose_list'\nimport AB_Choose_Form from './ab_choose_form'\n\n\nexport default class ABChoose extends OP.Component {   // (idBase, function(App) {\n\n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_choose');\n\n\n\t\tvar ids = {\n\t\t\tcomponent: \tthis.unique('component')\n\t\t}\n\n\n\t\t// Define the external components used in this Component:\n\t\tvar AppList = new AB_Choose_List(App);  // OP.Component['ab_choose_list'](App);\n\t\tvar AppForm = new AB_Choose_Form(App);  // OP.Component['ab_choose_form'](App);\n\n\n\t\t// This component's UI definition:\n\t\t// Application multi-views\n\t\tthis.ui = {\n\t\t\tview:\"multiview\",\n\t\t\tanimate:false,\n\t\t\tid: ids.component,\n\t\t\tcells: [\n\t\t\t\tAppList.ui,\n\t\t\t\tAppForm.ui\n\t\t\t]\n\t\t};\n\n\n\t\t// This component's Init definition:\n\t\tthis.init = function() {\n\n\t\t\tAppList.init();\n\t\t\tAppForm.init();\n\n\t\t}\n\n\n\t\tthis.actions({\n\n\t\t\t/**\n\t\t\t * @function transitionApplicationChooser\n\t\t\t *\n\t\t\t * Switch the AppBuilder UI to show the Application Chooser component.\n\t\t\t */\n\t\t\ttransitionApplicationChooser:function() {\n\t\t\t\t$$(ids.component).show();\n\t\t\t}\n\n\t\t})\n\n\n\t\tvar _logic = {\n\n\t\t}\n\n\t\tthis._logic = _logic;\n\n\t}\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_choose.js","\n/*\n * AB Choose Form\n *\n * Display the form for creating a new Application.\n *\n */\n\nimport ABApplication from \"../classes/ABApplication\"\n\n\n\nexport default class ABChoose extends OP.Component {  // .extend(idBase, function(App) {\n\n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_choose_form');\n\n\t\tvar L = this.Label;\t// lazy shortcut\n\n\t\tvar labels = {\n\n\t\t\tcommon: App.labels,\n\n\t\t\tcomponent: {\n\n\t\t\t\tformHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\t\t\tplaceholderName: L('ab.application.form.placeholderName', \"*Application name\"),\n\t\t\t\tplaceholderDescription: L('ab.application.form.placeholderDescription', \"*Application description\"),\n\t\t\t\tformDescription: L('ab.application.form.formDescription', \"*Description\"),\n\n\t\t\t\tsectionPermission: L('ab.application.form.sectionPermission', \"*Permission\"),\n\t\t\t\tpermissionHeader: L('ab.application.form.headerPermission',  \"*Who can use this app?\"),\n\t\t\t\tcreateNewRole: L('ab.application.form.createNewRoleButton', \"*Create new roll\"),\n\n\t\t\t\tinvalidName: L('ab.application.invalidName', \"*This application name is invalid\"),\n\t\t\t\tduplicateName: L('ab.application.duplicateName', \"*Name must be unique.\"),\n\n\t\t\t}\n\t\t}\n\n\n\t\tvar ids = {\n\t\t\tcomponent: \tthis.unique('component'),\n\n\t\t\tform: this.unique('form'),\n\t\t\tappFormPermissionList: \tthis.unique('permission'),\n\t\t\tappFormCreateRoleButton: this.unique('createRole'),\n\n\t\t\tsaveButton: this.unique('buttonSave')\n\t\t}\n\n\n\t\tthis.ui = {\n\n\t\t\tid: ids.component,\n\t\t\tresponsive:\"hide\",\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tresponsiveCell:false,\n\t\t\t\t\trows: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\t\t\t\thidden: App.config.hideMobile\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"toolbar\",\n\t\t\t\t\t\t\tcols: [{ view: \"label\", label: labels.component.formHeader, fillspace: true }]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"form\",\n\t\t\t\t\t\t\tid: ids.form,\n\t\t\t\t\t\t\tautoheight: true,\n\t\t\t\t\t\t\tmargin: 0,\n\t\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t\t//{ type: \"section\", template: '<span class=\"webix_icon fa-edit\" style=\"max-width:32px;\"></span>Information', margin: 0 },\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"label\",\n\t\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\t\tlabel: labels.common.formName,\n\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\tplaceholder: labels.component.placeholderName,\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\tonChange: function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\t_logic.permissionRenameRole(newValue, oldValue);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{ height: App.config.smallSpacer },\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"description\",\n\t\t\t\t\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t\t\t\t\t// label: labels.common.formDescription,\n\t\t\t\t\t\t\t\t\tlabel: \"Description\",\n\t\t\t\t\t\t\t\t\tlabelAlign: \"left\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tplaceholder: labels.component.placeholderDescription,\n\t\t\t\t\t\t\t\t\theight: 100\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{ height: App.config.smallSpacer },\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"toolbar\",\n\t\t\t\t\t\t\t\t\tcss: \"ab-toolbar-submenu\",\n\t\t\t\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttemplate: labels.component.permissionHeader,\n\t\t\t\t\t\t\t\t\t\t\ttype: 'header',\n\t\t\t\t\t\t\t\t\t\t\tborderless: true\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tview: \"toggle\",\n\t\t\t\t\t\t\t\t\t\t\tid: ids.appFormCreateRoleButton,\n\t\t\t\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\t\t\t\talign: \"right\",\n\t\t\t\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\t\t\t\tcss: \"ab-standard-button\",\n\t\t\t\t\t\t\t\t\t\t\toffIcon: \"square-o\",\n\t\t\t\t\t\t\t\t\t\t\tonIcon: \"check-square-o\",\n\t\t\t\t\t\t\t\t\t\t\tlabel: labels.component.createNewRole,\n\t\t\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t\t\tonItemClick: function (id, e) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t_logic.createRoleButtonClick();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"permissions\",\n\t\t\t\t\t\t\t\t\tid: ids.appFormPermissionList,\n\t\t\t\t\t\t\t\t\tview: \"list\",\n\t\t\t\t\t\t\t\t\t//height: 130,\n\t\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\t\tautoheight: true,\n\t\t\t\t\t\t\t\t\tmargin: 0,\n\t\t\t\t\t\t\t\t\tcss: \"ab-app-form-permission\",\n\t\t\t\t\t\t\t\t\ttemplate: \"{common.markCheckbox()} #name#\",\n\t\t\t\t\t\t\t\t\ttype:{\n\t\t\t\t\t\t\t\t\t\tmarkCheckbox:function(obj ){\n\t\t\t\t\t\t\t\t\t\t\treturn \"<span class='check webix_icon fa-\"+(obj.markCheckbox?\"check-\":\"\")+\"square-o'></span>\";\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\tonItemClick: function (id, e, node) {\n\t\t\t\t\t\t\t\t\t\t\t_logic.permissionClick(id, e, node);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{ height: App.config.smallSpacer },\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tmargin: 5,\n\t\t\t\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t\t\t\t{ fillspace: true },\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\t\t\t\t\tvalue: labels.common.cancel,\n\t\t\t\t\t\t\t\t\t\t\twidth: App.config.buttonWidthSmall,\n\t\t\t\t\t\t\t\t\t\t\tcss: \"ab-cancel-button\",\n\t\t\t\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t\t\t\t_logic.cancel();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: ids.saveButton,\n\t\t\t\t\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\t\t\t\t\tlabel: labels.common.save,\n\t\t\t\t\t\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\t\t\t\t\t\twidth: App.config.buttonWidthSmall,\n\t\t\t\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t\t\t\t_logic.buttonSaveClick();\n\t\t\t\t\t\t\t\t\t\t\t} // end click()\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\t\t\t\thidden: App.config.hideMobile\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tconst FormFields = ['label', 'description'];\n\n\n\n\t\tthis.init = function() {\n\t\t\twebix.extend($$(ids.form), webix.ProgressBar);\n\t\t\twebix.extend($$(ids.appFormPermissionList), webix.ProgressBar);\n\t\t}\n\n\n\n\t\tvar _logic = {\n\n\n\t\t\t/**\n\t\t\t * @function applicationCreate\n\t\t\t *\n\t\t\t * Step through the process of creating an ABApplication with the\n\t\t\t * current state of the Form.\n\t\t\t *\n\t\t\t * @param {obj} values \tcurrent value hash of the form values.\n\t\t\t */\n\t\t\tapplicationCreate: function(values) {\n\n\t\t\t\tvar newApp = {\n\t\t\t\t\tname: values.label,\n\t\t\t\t\tlabel: values.label,\n\t\t\t\t\tdescription: values.description\n\t\t\t\t};\n\n\t\t\t\tasync.waterfall([\n\t\t\t\t\tfunction (cb) {\n\t\t\t\t\t\t// Create application data\n\t\t\t\t\t\tABApplication.create(newApp)\n\t\t\t\t\t\t\t.then(function (result) {\n\t\t\t\t\t\t\t\tcb(null, result);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(cb);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (createdApp, cb) {\n\t\t\t\t\t\t_logic.permissionSave(createdApp)\n\t\t\t\t\t\t\t.then(function () { cb(); })\n\t\t\t\t\t\t\t.catch(cb)\n\t\t\t\t\t}\n\t\t\t\t], function (err) {\n\t\t\t\t\t_logic.formReady();\n\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\twebix.message({\n\t\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\t\ttext: labels.common.createErrorMessage.replace('{0}', values.label)\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tAD.error.log('App Builder : Error create application data', { error: err });\n\n\t\t\t\t\t\t_logic.buttonSaveEnable();\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tApp.actions.transitionApplicationList();\n\n\t\t\t\t\twebix.message({\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\ttext: labels.common.createSuccessMessage.replace('{0}', values.label)\n\t\t\t\t\t});\n\n\t\t\t\t\t_logic.buttonSaveEnable();\n\n\t\t\t\t});\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function applicationUpdate\n\t\t\t *\n\t\t\t * Step through the process of updating an ABApplication with the\n\t\t\t * current state of the Form.\n\t\t\t *\n\t\t\t * @param {ABApplication} application\n\t\t\t */\n\t\t\tapplicationUpdate: function(Application) {\n\t\t\t\tvar values = _logic.formValues();\n\n\t\t\t\tasync.waterfall([\n\t\t\t\t\tfunction (next) {\n\t\t\t\t\t\t_logic.permissionSave(Application)\n\t\t\t\t\t\t\t.then(function (result) { next(null, result); })\n\t\t\t\t\t\t\t.catch(next);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (app_role, next) {\n\t\t\t\t\t\t// Update application data\n\t\t\t\t\t\tApplication.label = values.label;\n\t\t\t\t\t\tApplication.description = values.description;\n\n\t\t\t\t\t\tif (app_role && app_role.id)\n\t\t\t\t\t\t\tApplication.role = app_role.id;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tApplication.role = null;\n\n\t\t\t\t\t\tApplication.save()\n\t\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\t\tnext();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(next)\n\n\t\t\t\t\t}\n\t\t\t\t], function (err) {\n\n\t\t\t\t\t_logic.formReady();\n\t\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\twebix.message({\n\t\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\t\ttext: labels.common.updateErrorMessage.replace('{0}', Application.label)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tAD.error.log('App Builder : Error update application data', { error: err });\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tApp.actions.transitionApplicationList();\n\n\t\t\t\t\twebix.message({\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\ttext: labels.common.updateSucessMessage.replace('{0}', Application.label)\n\t\t\t\t\t});\n\n\t\t\t\t});\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function buttonSaveClick\n\t\t\t *\n\t\t\t * Process the user clicking on the [Save] button.\n\t\t\t */\n\t\t\tbuttonSaveClick: function() {\n\n\t\t\t\t_logic.buttonSaveDisable();\n\t\t\t\t_logic.formBusy();\n\n\t\t\t\t// if there is a selected Application, then this is an UPDATE\n\t\t\t\tvar updateApp = App.actions.getSelectedApplication();\n\t\t\t\tif (updateApp) { \n\n\t\t\t\t\tif (_logic.formValidate('update')) {\n\n\t\t\t\t\t\t_logic.applicationUpdate(updateApp);\n\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t} else { \n\n\t\t\t\t\t// else this is a Create\n\t\t\t\t\tif (_logic.formValidate('add')) {\n\n\t\t\t\t\t\t_logic.applicationCreate(_logic.formValues());\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * @function buttonSaveDisable\n\t\t\t *\n\t\t\t * Disable the save button.\n\t\t\t */\n\t\t\tbuttonSaveDisable:function() {\n\t\t\t\t$$(ids.saveButton).disable();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function buttonSaveEnable\n\t\t\t *\n\t\t\t * Re-enable the save button.\n\t\t\t */\n\t\t\tbuttonSaveEnable:function() {\n\t\t\t\t$$(ids.saveButton).enable();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function cancel\n\t\t\t *\n\t\t\t * Cancel the current Form Operation and return us to the AppList.\n\t\t\t */\n\t\t\tcancel: function() {\n\n\t\t\t\t_logic.formReset();\n\t\t\t\tApp.actions.transitionApplicationList();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function createRoleButtonClick\n\t\t\t *\n\t\t\t * The user clicked the [Create Role] button.  Update the UI and add a\n\t\t\t * unique Application permission to our list.\n\t\t\t */\n\t\t\tcreateRoleButtonClick: function() {\n\n\t\t\t\tif ($$(ids.appFormCreateRoleButton).getValue()) {\n\n// TODO: if not called from anywhere else, then move the name gathering into .permissionAddNew()\n\t\t\t\t\t// Add new app role\n\t\t\t\t\tvar appName = $$(ids.form).elements[\"label\"].getValue();\n\t\t\t\t\t_logic.permissionAddNew(appName);\n\t\t\t\t}\n\t\t\t\telse { \n\t\t\t\t\t// Remove app role\n\t\t\t\t\t_logic.permissionRemoveNew();\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function formBusy\n\t\t\t *\n\t\t\t * Show the progress indicator to indicate a Form operation is in\n\t\t\t * progress.\n\t\t\t */\n\t\t\tformBusy: function() {\n\n\t\t\t\t$$(ids.form).showProgress({ type: 'icon' });\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function formPopulate()\n\t\t\t *\n\t\t\t * populate the form values from the given ABApplication\n\t\t\t *\n\t\t\t * @param {ABApplication} application  instance of the ABApplication\n\t\t\t */\n\t\t\tformPopulate: function(application) {\n\n\t\t\t\tvar Form = $$(ids.form);\n\n\t\t\t\t// Populate data to form\n\t\t\t\tif (application) {\n\t\t\t\t\tFormFields.forEach(function(f){\n\t\t\t\t\t\tif (Form.elements[f]) {\n\t\t\t\t\t\t\tForm.elements[f].setValue(application[f]);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\t// _logic.permissionPopulate(application);\n\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function formReady()\n\t\t\t *\n\t\t\t * remove the busy indicator from the form.\n\t\t\t */\n\t\t\tformReady: function() {\n\t\t\t\t$$(ids.form).hideProgress();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function formReset()\n\t\t\t *\n\t\t\t * return the form to an empty state.\n\t\t\t */\n\t\t\tformReset: function() {\n\n\t\t\t\t$$(ids.form).clear();\n\t\t\t\t$$(ids.form).clearValidation();\n\t\t\t\t// $$(self.webixUiids.appFormPermissionList).clearValidation();\n\t\t\t\t// $$(self.webixUiids.appFormPermissionList).clearAll();\n\t\t\t\t// $$(self.webixUiids.appFormCreateRoleButton).setValue(0);\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function formValidate()\n\t\t\t *\n\t\t\t * validate the form values.\n\t\t\t *\n\t\t\t * @return {bool}  true if all values pass validation.  false otherwise.\n\t\t\t */\n\t\t\tformValidate:function(op) {\n\t\t\t\t// op : ['add', 'update', 'destroy']\n\n\t\t\t\tvar Form = $$(ids.form);\n\t\t\t\tif (!Form.validate()) {\n\t\t\t\t\t// TODO : Error message\n\n\t\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\n\t\t\t\tvar validator = ABApplication.isValid(op, Form.getValues());\n\t\t\t\tif (validator.fail()) {\n\t\t\t\t\tvalidator.updateForm(Form);\n\t\t\t\t\t_logic.formReady();\n\t\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\n\t\t\t\t// var appName = $$(ids.form).elements['label'].getValue(),\n\t\t\t\t// \tappDescription = $$(ids.form).elements['description'].getValue();\n\n\t\t\t\t// if (!inputValidator.validate(appName)) {\n\t\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t\t// \treturn false;\n\t\t\t\t// }\n\n\t\t\t\t// // Prevent duplicate application name\n\t\t\t\t// if (self.data.filter(function (app) { return app.name.trim().toLowerCase() == appName.trim().replace(/ /g, '_').toLowerCase(); }).length > 0) {\n\t\t\t\t// \tOP.Dialog.Alert({\n\t\t\t\t// \t\ttitle: labels.component.invalidName,\n\t\t\t\t// \t\ttext: labels.component.duplicateName.replace(\"#appName#\", appName),\n\t\t\t\t// \t\tok: labels.common.ok\n\t\t\t\t// \t});\n\n\t\t\t\t// \t$$(ids.form).elements['label'].focus();\n\t\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t\t// \treturn false;\n\t\t\t\t// }\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function formValues()\n\t\t\t *\n\t\t\t * return an object hash of name:value pairs of the current Form.\n\t\t\t *\n\t\t\t * @return {obj}\n\t\t\t */\n\t\t\tformValues: function() {\n\t\t\t\t// return the current values of the Form elements.\n\t\t\t\treturn $$(ids.form).getValues();\n\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function permissionAddNew\n\t\t\t *\n\t\t\t * create a new permission entry based upon the current Application.label\n\t\t\t *\n\t\t\t * This not only adds it to our Permission List, but also selects it.\n\t\t\t *\n\t\t\t * @param {string} appName\tThe Application.label of the current Application\n\t\t\t */\n\t\t\tpermissionAddNew: function(appName) {\n\n\t\t\t\t// add new role entry\n\t\t\t\t$$(ids.appFormPermissionList).add({\n\t\t\t\t\tid: 'newRole',\n\t\t\t\t\tname: _logic.permissionName(appName),\n\t\t\t\t\tisApplicationRole: true,\n\t\t\t\t\tmarkCheckbox: 1\n\t\t\t\t}, 0);\n\n\n\t\t\t\t// Select new role\n\t\t\t\tvar selectedIds = $$(ids.appFormPermissionList).getSelectedId(true);\n\t\t\t\tselectedIds.push('newRole');\n\t\t\t\t$$(ids.appFormPermissionList).select(selectedIds);\n\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function permissionClick\n\t\t\t *\n\t\t\t * Process when a permission entry in the list is clicked.\n\t\t\t */\n\t\t\tpermissionClick: function (id, e, node) {\n\t\t\t\t\n\n\t\t\t\tvar List = $$(ids.appFormPermissionList);\n\n\t\t\t\tvar item = List.getItem(id); \n\n\t\t\t\tif (List.getItem(id).isApplicationRole) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (List.isSelected(id)) {\n\t\t\t\t\titem.markCheckbox = 0; \n\t\t\t\t\tList.unselect(id);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\titem.markCheckbox = 1; \n\t\t\t\t\tvar selectedIds = List.getSelectedId();\n\n\t\t\t\t\tif (typeof selectedIds === 'string' || !isNaN(selectedIds)) {\n\t\t\t\t\t\tif (selectedIds)\n\t\t\t\t\t\t\tselectedIds = [selectedIds];\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tselectedIds = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tselectedIds.push(id);\n\n\t\t\t\t\tList.select(selectedIds);\n\n\t\t\t\t\tList.updateItem(id, item); \n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function permissionName\n\t\t\t *\n\t\t\t * returns a formatted name for a Permission Role based upon the provided Application.label\n\t\t\t *\n\t\t\t * @param {string} appName\tthe current value of the Application.label\n\t\t\t * @return {string} \tPermission Role Name.\n\t\t\t */\n\t\t\tpermissionName: function(appName) {\n\t\t\t\treturn appName  + \" Application Role\";\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function permissionPopulate\n\t\t\t *\n\t\t\t * fill out the Permission list\n\t\t\t *\n\t\t\t * @param {ABApplication} application\tthe current ABApplication we are editing\n\t\t\t */\n\t\t\tpermissionPopulate: function(application) {\n\n\t\t\t\tvar PermForm = $$(ids.appFormPermissionList);\n\t\t\t\t// Get user's roles\n\t\t\t\tPermForm.showProgress({ type: 'icon' });\n\t\t\t\tasync.waterfall([\n\t\t\t\t\tfunction (next) {\n\t\t\t\t\t\tAD.comm.service.get({ url: '/app_builder/user/roles' })\n\t\t\t\t\t\t\t.fail(function (err) { next(err); })\n\t\t\t\t\t\t\t.done(function (roles) {\n\n\t\t\t\t\t\t\t\t// scan the roles and determine if any of them have been created\n\t\t\t\t\t\t\t\t// after the current Application.name:\n\t\t\t\t\t\t\t\tvar parsedRoles = roles.map((r) => {\n\t\t\t\t\t\t\t\t\tif (application) {\n\t\t\t\t\t\t\t\t\t\tif (r.name == _logic.permissionName(application.name.split('_').join(' '))) {\n\t\t\t\t\t\t\t\t\t\t\tr.isApplicationRole = true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn r;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tnext(null, parsedRoles);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tfunction (available_roles, next) {\n\t\t\t\t\t\tif (application && application.id) {\n\t\t\t\t\t\t\tapplication.getPermissions()\n\t\t\t\t\t\t\t\t.then(function (selected_role_ids) {\n\t\t\t\t\t\t\t\t\tnext(null, available_roles, selected_role_ids);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(function (err) { next(err); });\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tnext(null, available_roles, []);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t},\n\t\t\t\t\tfunction (available_roles, selected_role_ids, next) {\n\n\t\t\t\t\t\t// mark the role(s) in available_roles that is tied\n\t\t\t\t\t\t// this application:\n\t\t\t\t\t\tif (application && application.role) {\n\t\t\t\t\t\t\tavailable_roles.forEach(function (r) {\n\t\t\t\t\t\t\t\tif (r.id == (application.role.id || application.role)) {\n\t\t\t\t\t\t\t\t\tr.isApplicationRole = true;\n\t\t\t\t\t\t\t\t\tr.markCheckbox = 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Sort permission list\n\t\t\t\t\t\tavailable_roles.sort(function (a, b) {\n\t\t\t\t\t\t\treturn (a.isApplicationRole === b.isApplicationRole) ? 0 : a.isApplicationRole ? -1 : 1;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// reload list from our available_roles\n\t\t\t\t\t\tPermForm.clearAll();\n\t\t\t\t\t\tPermForm.parse(available_roles);\n\n\t\t\t\t\t\t// mark which roles have already been selected\n\t\t\t\t\t\tif (selected_role_ids && selected_role_ids.length > 0) {\n\t\t\t\t\t\t\t// Select permissions\n\t\t\t\t\t\t\tPermForm.select(selected_role_ids);\n\t\t\t\t\t\t\tavailable_roles.forEach(function (r) {\n\t\t\t\t\t\t\t\tif (selected_role_ids.indexOf(r.id) > -1) {\n\t\t\t\t\t\t\t\t\tvar item = $$(ids.appFormPermissionList).getItem(r.id);\n\t\t\t\t\t\t\t\t\titem.markCheckbox = 1;\n\t\t\t\t\t\t\t\t\t$$(ids.appFormPermissionList).updateItem(r.id, item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// Select create role application button\n\t\t\t\t\t\t\tvar markCreateButton = available_roles.filter(function (r) { return r.isApplicationRole; }).length > 0 ? 1 : 0;\n\t\t\t\t\t\t\t$$(ids.appFormCreateRoleButton).setValue(markCreateButton);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnext();\n\t\t\t\t\t}\n\t\t\t\t], function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\twebix.message(err.message);\n\t\t\t\t\t}\n\n\t\t\t\t\tPermForm.hideProgress();\n\n\t\t\t\t});\n\n\t\t\t\t// return appName  + \" Application Role\";\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function permissionRemoveNew()\n\t\t\t *\n\t\t\t * Intended to be called when the USER unselects the option to create a Permission\n\t\t\t * for this Application.\n\t\t\t *\n\t\t\t * We remove any Permission Role created for this Application.\n\t\t\t */\n\t\t\tpermissionRemoveNew: function() {\n\n\t\t\t\t// find any roles that are put here from our application form:\n\t\t\t\tvar appRoles = $$(ids.appFormPermissionList).find(function (perm) { return perm.isApplicationRole; });\n\n\t\t\t\t// remove them:\n\t\t\t\tappRoles.forEach(function (r) {\n\t\t\t\t\t$$(ids.appFormPermissionList).remove(r.id);\n\t\t\t\t});\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * permissionRenameRole\n\t\t\t *\n\t\t\t * When the name of the Appliction changes, change the Name of the Permission as well.\n\t\t\t *\n\t\t\t * @param {string} newValue  the current name of the application\n\t\t\t * @param {string} oldValue  the previous name of the application\n\t\t\t */\n\t\t\tpermissionRenameRole:function( newValue, oldValue) {\n\n\t\t\t\tvar editRole = $$(ids.appFormPermissionList).find(function (d) { return d.name === _logic.permissionName(oldValue); });\n\n\t\t\t\teditRole.forEach(function (r) {\n\t\t\t\t\tvar editItem = $$(ids.appFormPermissionList).getItem(r.id);\n\t\t\t\t\teditItem.name = _logic.permissionName(newValue);\n\n\t\t\t\t\t$$(ids.appFormPermissionList).updateItem(editItem.id, editItem);\n\t\t\t\t});\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function permissionSave()\n\t\t\t *\n\t\t\t * step through saving the current Permission Settings and associating\n\t\t\t * them with the current Application.\n\t\t\t *\n\t\t\t * @param {ABApplication} App  \tThe current Application we are working with.\n\t\t\t * @return {Promise}\t\t\t.resolve( {Permission} ) if one is created for this App\n\t\t\t */\n\t\t\tpermissionSave: function (app) {\n\t//// REFACTOR:\n\t// this step implies that ab_choose_form understands the intracies of how\n\t// ABApplication and Permissions work.\n\t\t\t\treturn new Promise(\n\t\t\t\t\t(resolve, reject) => {\n\n\t\t\t\t\t\tvar saveRoleTasks = [],\n\t\t\t\t\t\t\tappRole = null;\n\n\t\t\t\t\t\t//// Process the option to create a newRole For this Application:\n\n\t\t\t\t\t\t// if the button is set\n\t\t\t\t\t\tif ($$(ids.appFormCreateRoleButton).getValue()) {\n\n\t\t\t\t\t\t\t// check to see if we already have a permission that isApplicationRole\n\t\t\t\t\t\t\tvar selectedPerms = $$(ids.appFormPermissionList).getSelectedItem(true);\n\t\t\t\t\t\t\tselectedPerms = selectedPerms.filter((perm) => { return perm.isApplicationRole; })\n\n\t\t\t\t\t\t\t// if not, then create one:\n\t\t\t\t\t\t\tif (selectedPerms.length == 0) {\n\n\t\t\t\t\t\t\t\t// Create new role for application\n\t\t\t\t\t\t\t\tsaveRoleTasks.push(function (cb) {\n\t\t\t\t\t\t\t\t\tapp.createPermission()\n\t\t\t\t\t\t\t\t\t\t.then(function (result) {\n\n\t\t\t\t\t\t\t\t\t\t\t// remember the Role we just created\n\t\t\t\t\t\t\t\t\t\t\tappRole = result;\n\t\t\t\t\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.catch(cb)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Delete any existing application roles\n\t\t\t\t\t\t\tsaveRoleTasks.push(function (cb) {\n\t\t\t\t\t\t\t\tapp.deletePermission()\n\t\t\t\t\t\t\t\t\t.then(function () { cb(); })\n\t\t\t\t\t\t\t\t\t.catch(cb)\n\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//// Now process any additional roles:\n\n\t\t\t\t\t\t// get array of selected permissions that are not our newRole\n\t\t\t\t\t\tvar permItems = $$(ids.appFormPermissionList).getSelectedItem(true);\n\t\t\t\t\t\tpermItems = permItems.filter( function (item) { return item.id !== 'newRole'; }); // Remove new role item\n\n\n\t\t\t\t\t\t// Make sure Application is linked to selected permission items:\n\t\t\t\t\t\tsaveRoleTasks.push(function (cb) {\n\n\t\t\t\t\t\t\t// ok, so we removed the 'newRole' entry, but we might\n\t\t\t\t\t\t\t// have created an entry for it earlier, if so, add in\n\t\t\t\t\t\t\t// the created one here:\n\t\t\t\t\t\t\tif ($$(ids.appFormCreateRoleButton).getValue() && appRole) {\n\n\t\t\t\t\t\t\t\t// make sure it isn't already in there:\n\t\t\t\t\t\t\t\tvar appRoleItem = permItems.filter( function (item) { return item.id == appRole.id; });\n\t\t\t\t\t\t\t\tif (!appRoleItem || appRoleItem.length < 1) {\n\n\t\t\t\t\t\t\t\t\t// if not, add it :\n\t\t\t\t\t\t\t\t\tpermItems.push({\n\t\t\t\t\t\t\t\t\t\tid: appRole.id,\n\t\t\t\t\t\t\t\t\t\tisApplicationRole: true\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\t// Assign Role Permissions\n\t\t\t\t\t\t\tapp.assignPermissions(permItems)\n\t\t\t\t\t\t\t\t.then(function () { cb(); })\n\t\t\t\t\t\t\t\t.catch(cb)\n\t\t\t\t\t\t});\n\n\n\n\t\t\t\t\t\tasync.series(saveRoleTasks, function(err, results) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// we return the instance of the newly created Permission.\n\t\t\t\t\t\t\t\tresolve(appRole);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\n\n\t//// REFACTOR QUESTION:\n\t// why are we updating the app.permissions with this data structure?\n\t// where is this data structure being used?\n\t// Earlier we are using another structure (permissionAddNew()) ... how is that related to this?\n\n\t\t\t\t\t\t\t\t// // Final task\n\t\t\t\t\t\t\t\t// saveRoleTasks.push(function (cb) {\n\t\t\t\t\t\t\t\t// \t// Update store app data\n\t\t\t\t\t\t\t\t// \tvar applicationData = self.data.filter(function (d) { return d.id == app.id; });\n\t\t\t\t\t\t\t\t// \tapplicationData.forEach(function (app) {\n\t\t\t\t\t\t\t\t// \t\tapp.attr('permissions', $.map(permItems, function (item) {\n\t\t\t\t\t\t\t\t// \t\t\treturn {\n\t\t\t\t\t\t\t\t// \t\t\t\tapplication: app.id,\n\t\t\t\t\t\t\t\t// \t\t\t\tpermission: item.id,\n\t\t\t\t\t\t\t\t// \t\t\t\tisApplicationRole: item.isApplicationRole\n\t\t\t\t\t\t\t\t// \t\t\t}\n\t\t\t\t\t\t\t\t// \t\t}));\n\t\t\t\t\t\t\t\t// \t});\n\n\t\t\t\t\t\t\t\t// \tq.resolve(appRole);\n\t\t\t\t\t\t\t\t// \tcb();\n\t\t\t\t\t\t\t\t// })\n\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function show()\n\t\t\t *\n\t\t\t * Show the Form Component.\n\t\t\t */\n\t\t\tshow:function() {\n\n\t\t\t\t$$(ids.component).show();\n\t\t\t}\n\t\t}\n\t\tthis._logic = _logic;\n\n\n\t\tthis.actions({\n\n\n\t\t\t// initiate a request to create a new Application\n\t\t\ttransitionApplicationForm:function(application){\n\t\t\t\t\n\t\t\t\t// if no application is given, then this should be a [create] operation,\n\n\t\t\t\t// so clear our AppList\n\t\t\t\tif ('undefined' == typeof application) {\n\t\t\t\t\tApp.actions.unselectApplication();\n\t\t\t\t}\n\n\t\t\t\t// now prepare our form:\n\t\t\t\t_logic.formReset();\n\t\t\t\tif (application) {\n\t\t\t\t\t// populate Form here:\n\t\t\t\t\t_logic.formPopulate(application);\n\t\t\t\t}\n\t\t\t\t_logic.permissionPopulate(application);\n\t\t\t\t_logic.show();\n\t\t\t}\n\n\t\t})\n\n\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_choose_form.js","\n/*\n * AB Choose List\n *\n * Display a list of Applications for the user to select.\n *\n */\nimport ABApplication from \"../classes/ABApplication\"\nimport AB_Choose_List_Menu from \"./ab_common_popupEditMenu\"\n\n\nexport default class ABChooseList extends OP.Component { \n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_choose_list');\n\n\t\tvar L = this.Label;\n\n\t\tvar labels = {\n\n\t\t\tcommon: App.labels,\n\n\t\t\tcomponent: {\n\t\t\t\ttitle: L('ab.application.application', '*Application'),\n\n\t\t\t\tcreateNew: L('ab.application.createNew', '*Add new application'),\n\t\t\t\tnoApplication: L('ab.application.noApplication', \"*There is no application data\"),\n\n\t\t\t\tconfirmDeleteTitle : L('ab.application.delete.title', \"*Delete application\"),\n\t\t\t\tconfirmDeleteMessage : L('ab.application.delete.message', \"*Do you want to delete <b>{0}</b>?\")\t\t\t\t\t\n\t\t\t}\n\t\t}\n\n\n\t\tvar ids = {\n\t\t\tcomponent: \tthis.unique('component'),\n\n\t\t\tuploader: \tthis.unique('uploader'),\n\t\t\tlist: \t\tthis.unique('list'),\n\t\t\ttoolBar: \tthis.unique('toolbar'),\n\t\t\tbuttonCreateNewApplication: this.unique('buttonNewApp')\n\t\t}\t\n\n\t\tvar MenuComponent = new AB_Choose_List_Menu(App);\n\n\n\t\tthis.ui = {\n\n\t\t\tid: ids.component,\n\t\t\tresponsive:\"hide\",\n\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tresponsiveCell:false,\n\t\t\t\t\trows: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\t\t\t\thidden: App.config.hideMobile\n\t\t\t\t\t\t},\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// ToolBar\n\t\t\t\t\t\t//\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"toolbar\",\n\t\t\t\t\t\t\tid: ids.toolBar,\n\t\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t\t{ view: \"label\", label:labels.component.title, fillspace: true },\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: ids.buttonCreateNewApplication,\n\t\t\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\t\t\tlabel: labels.component.createNew,\n\t\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\t\ticon: \"plus\",\n\t\t\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\t\t\t// Inform our Chooser we have a request to create an Application:\n\t\t\t\t\t\t\t\t\t\tApp.actions.transitionApplicationForm( /* leave empty for a create */ );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"uploader\",\n\t\t\t\t\t\t\t\t\tid: ids.uploader,\n\t\t\t\t\t\t\t\t\tlabel: labels.common.import,\n\t\t\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\t\t\tupload: '/app_builder/appJSON',\n\t\t\t\t\t\t\t\t\tmultiple: false,\n\t\t\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\t\t\ticon: \"upload\",\n\t\t\t\t\t\t\t\t\tautosend: true,\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\tonAfterFileAdd: function () {\n\t\t\t\t\t\t\t\t\t\t\t_logic.onAfterFileAdd();\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tonFileUpload: function (item, response) {\n\t\t\t\t\t\t\t\t\t\t\t_logic.onFileUpload(item, response);\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tonFileUploadError: function (details, response) {\n\t\t\t\t\t\t\t\t\t\t\t_logic.onFileUploadError(details, response);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\n\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// The List of Applications\n\t\t\t\t\t\t//\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: ids.list,\n\t\t\t\t\t\t\tview: \"list\",\n\t\t\t\t\t\t\tcss: 'ab-app-select-list',\n\t\t\t\t\t\t\ttemplate: function (obj, common) {\n\t\t\t\t\t\t\t\treturn _logic.templateListItem(obj, common);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttype: {\n\t\t\t\t\t\t\t\theight: App.config.appListRowHeight, // Defines item height\n\t\t\t\t\t\t\t\ticonGear: \"<span class='webix_icon fa-cog'></span>\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tselect: false,\n\t\t\t\t\t\t\tonClick: {\n\t\t\t\t\t\t\t\t\"ab-app-list-item\": function (ev, id, trg) {\n\t\t\t\t\t\t\t\t\treturn _logic.onClickListItem(ev, id, trg);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"ab-app-list-edit\": function (ev, id, trg) {\n\t\t\t\t\t\t\t\t\treturn _logic.onClickListEdit(ev, id, trg);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\t\t\t\thidden: App.config.hideMobile\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t \t\t\t}\n\t\t\t]\n\t\t}\n\n\n\t\tvar _data={};\n\n\n\t\tvar _logic = {\n\n\n\t\t\t/**\n\t\t\t * @function busy\n\t\t\t *\n\t\t\t * show a busy indicator on our App List\n\t\t\t */\n\t\t\tbusy: function() {\n\t\t\t\tif ($$(ids.list).showProgress)\n\t\t\t\t\t$$(ids.list).showProgress({ icon: 'cursor' });\n\t\t\t},\n\n\n\t\t\tcallbackApplicationEditorMenu: function(action) {\n\n\t\t\t\tvar selectedApp = $$(ids.list).getSelectedItem();\n\n\t\t\t\tswitch (action) {\n\n\t\t\t\t\tcase 'edit':\n\t\t\t\t\t\tApp.actions.transitionApplicationForm(selectedApp);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'delete':\n\t\t\t\t\t\tOP.Dialog.ConfirmDelete({\n\t\t\t\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t\t\t\t\ttext: labels.component.confirmDeleteMessage.replace('{0}', selectedApp.label),\n\t\t\t\t\t\t\tcallback: function (result) {\n\n\t\t\t\t\t\t\t\tif (!result) return;\n\n\t\t\t\t\t\t\t\tApp.actions.deleteApplication(selectedApp);\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'export':\n\t\t\t\t\t\t// Download the JSON file to disk\n\t\t\t\t\t\twindow.location.assign('/app_builder/appJSON/' + selectedApp.id + '?download=1');\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function loadData\n\t\t\t *\n\t\t\t * Load all the ABApplications and display them in our App List\n\t\t\t */\n\t\t\tloadData:function(){\n\n\t\t\t\t// Get applications data from the server\n\t\t\t\t_logic.busy();\n\t\t\t\tABApplication.allApplications()\n\t\t\t\t\t.then(function (data) {\n\n\t\t\t\t\t\t_logic.ready();\n\n\t\t\t\t\t\t// make sure our overlay is updated when items are added/removed\n\t\t\t\t\t\t// from our data list.\n\t\t\t\t\t\tdata.attachEvent(\"onAfterAdd\", function(id, index){\n\t\t\t\t\t\t    _logic.refreshOverlay();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdata.attachEvent(\"onAfterDelete\", function(id){\n\t\t\t\t\t\t\t_logic.refreshOverlay();\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\t_data.listApplications = data;\n\n\t\t\t\t\t\t_logic.refreshList();\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function (err) {\n\t\t\t\t\t\t_logic.ready();\n\t\t\t\t\t\twebix.message({\n\t\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\t\ttext: err\n\t\t\t\t\t\t});\n\t\t\t\t\t\tAD.error.log('App Builder : Error loading application data', { error: err });\n\t\t\t\t\t})\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function onAfterFileAdd\n\t\t\t *\n\t\t\t * UI updates for when a file upload is initiated\n\t\t\t */\n\t\t\tonAfterFileAdd: function () {\n\t\t\t\t$$(ids.uploader).disable();\n\t\t\t\t_logic.busy();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function onClickListEdit\n\t\t\t *\n\t\t\t * UI updates for when the edit gear is clicked\n\t\t\t */\n\t\t\tonClickListEdit: function(ev, id, trg) {\n\n\t\t\t\tvar options = [\n\t\t\t\t\t{ label: labels.common.edit, icon: \"fa-pencil-square-o\", command:'edit' },\n\t\t\t\t\t{ label: labels.common.export, icon: \"fa-download\", command:'export' },\n\t\t\t\t\t{ label: labels.common.delete, icon: \"fa-trash\", command:'delete' }\n\t\t\t\t];\n\n\t\t\t\tMenuComponent.menuOptions(options);\n\n\t\t\t\t// Show menu\n\t\t\t\tMenuComponent.show(trg);\n\t\t\t\t$$(ids.list).select(id);\n\n\t\t\t\treturn false; // block default behavior\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function onClickListItem\n\t\t\t *\n\t\t\t * An item in the list is selected. So update the workspace with that \n\t\t\t * object.\n\t\t\t */\n\t\t\tonClickListItem: function(ev, id, trg) {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t_logic.busy();\n\n\t\t\t\t$$(ids.list).select(id);\n\n\t\t\t\tvar selectedApp = $$(ids.list).getItem(id);\n\n\t\t\t\tif (selectedApp) {\n\n\t\t\t\t\t_logic.ready();\n\n\t\t\t\t\t// We've selected an Application to work with\n\t\t\t\t\tApp.actions.transitionWorkspace( selectedApp );\n\t\t\t\t}\n\n\t\t\t\treturn false; // block default behavior\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function onFileUpload\n\t\t\t *\n\t\t\t * The File Upload process finished.\n\t\t\t */\n\t\t\tonFileUpload: function (item, response) {\n\t\t\t\t_logic.loadData(); // refresh app list\n\t\t\t\t$$(ids.uploader).enable();\n\t            _logic.ready();\n\t        },\n\n\n\t\t\t/**\n\t\t\t * @function onFileUploadError\n\t\t\t *\n\t\t\t * The File Upload process exited with an error.\n\t\t\t */\n\t        onFileUploadError: function(details, response) {\n\n\t\t\t\tvar errorMessage = 'Error: ' + (response && response.message);\n\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\ttext: errorMessage\n\t\t\t\t});\n\t\t\t\t// webix.message({\n\t\t\t\t// \ttype: 'error',\n\t\t\t\t// \ttext: errorMessage\n\t\t\t\t// });\n\t\t\t\t_logic.loadData(); // refresh app list\n\t\t\t\t$$(ids.uploader).enable();\n\t            _logic.ready();\n\t        },\n\n\n\t\t\t/**\n\t\t\t * @function refreshOverlay\n\t\t\t *\n\t\t\t * If we have no items in our list, display a Message.\n\t\t\t */\n\t\t\trefreshOverlay: function() {\n\t\t\t\tvar appList = $$(ids.list);\n\n\t\t\t\tif (!appList.count()) //if no data is available\n\t\t\t\t\tappList.showOverlay(labels.component.noApplication);\n\t\t\t\telse\n\t\t\t\t\tappList.hideOverlay();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function ready\n\t\t\t *\n\t\t\t * remove the busy indicator on our App List\n\t\t\t */\n\t\t\tready: function() {\n\t\t\t\tif ($$(ids.list).hideProgress)\n\t\t\t\t\t$$(ids.list).hideProgress();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function reset\n\t\t\t *\n\t\t\t * Return our App List to an unselected state.\n\t\t\t */\n\t\t\treset:function() {\n\t\t\t\t$$(ids.list).unselectAll();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function refreshList\n\t\t\t *\n\t\t\t * Apply our list of ABApplication data to our AppList\n\t\t\t */\n\t\t\trefreshList: function() {\n\n\t\t\t\tvar appList = $$(ids.list);\n\n\t\t\t\tappList.clearAll();\n\t\t\t\tappList.data.unsync();\n\t\t\t\tappList.data.sync(_data.listApplications);\n\n\t\t\t\t_logic.refreshOverlay();\n\n\t\t\t\tappList.refresh();\n\n\t\t\t\t_logic.ready();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function show\n\t\t\t *\n\t\t\t * Trigger our List component to show\n\t\t\t */\n\t\t\tshow:function() {\n\t\t\t\t$$(ids.component).show();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function templateListItem\n\t\t\t *\n\t\t\t * Defines the template for each row of our AppList.\n\t\t\t *\n\t\t\t * @param {obj} obj the current instance of ABApplication for the row.\n\t\t\t * @param {?} common the webix.common icon data structure\n\t\t\t * @return {string}\n\t\t\t */\n\t\t\ttemplateListItem: function(obj, common) {\n\t\t\t\treturn _templateListItem\n\t\t\t\t\t.replace('#label#', obj.label || '')\n\t\t\t\t\t.replace('#description#', obj.description || '')\n\t\t\t\t\t.replace('{common.iconGear}', common.iconGear);\n\t\t\t}\n\t\t}\n\t\tthis._logic = _logic;\n\n\n\t\t/*\n\t\t * _templateListItem\n\t\t *\n\t\t * The AppList Row template definition.\n\t\t */\n\t\tvar _templateListItem = [\n\t\t\t\"<div class='ab-app-list-item'>\",\n\t\t\t\t\"<div class='ab-app-list-info'>\",\n\t\t\t\t\t\"<div class='ab-app-list-name'>#label#</div>\",\n\t\t\t\t\t\"<div class='ab-app-list-description'>#description#</div>\",\n\t\t\t\t\"</div>\",\n\t\t\t\t\"<div class='ab-app-list-edit'>\",\n\t\t\t\t\t\"{common.iconGear}\",\n\t\t\t\t\"</div>\",\n\t\t\t\"</div>\"\n\t\t].join('');\n\n\n\n\t\t/*\n\t\t * @function _init\n\t\t *\n\t\t * The init() that performs the necessary setup for our AppList chooser.\n\t\t */\n\t\tthis.init = function() {\n\t\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t\t\twebix.extend($$(ids.list), webix.OverlayBox);\n\n\t\t\tMenuComponent.init({\n\t\t\t\tonClick: _logic.callbackApplicationEditorMenu\n\t\t\t})\n\n\t\t\t// start things off by loading the current list of Applications\n\t\t\t_logic.loadData();\n\t\t}\n\n\n\n\t\t/*\n\t\t * The exported methods available to other Components.\n\t\t */\n\t\tthis.actions({\n\n\n\t\t\t/**\n\t\t\t * @function unselectApplication\n\t\t\t *\n\t\t\t * resets the AppList to an unselected state.\n\t\t\t */\n\t\t\tunselectApplication:function() {\n\t\t\t\t_logic.reset();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function getSelectedApplication\n\t\t\t *\n\t\t\t * returns which ABApplication is currently selected.\n\t\t\t * @return {ABApplication}  or {null} if nothing selected.\n\t\t\t */\n\t\t\tgetSelectedApplication:function() {\n\t\t\t\treturn $$(ids.list).getSelectedItem();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function deleteApplication\n\t\t\t *\n\t\t\t * deletes the given ABAppliction.\n\t\t\t *\n\t\t\t * NOTE: this assumes the component using this method has already\n\t\t\t * provided the delete confirmation.\n\t\t\t *\n\t\t\t * @param {ABApplication} app  the ABAppliction to delete.\n\t\t\t */\n\t\t\tdeleteApplication: function(app) {\n\n\t\t\t\tif (!app) return;\n\n\t\t\t\t// Delete application data\n\t\t\t\t_logic.busy();\n\n\n\t\t\t\tapp.destroy()\n\t\t\t\t\t.then(function (result) {\n\t\t\t\t\t\t_logic.reset();\n\t\t\t\t\t\t_logic.ready();\n\n\t\t\t\t\t\twebix.message({\n\t\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\t\ttext: labels.common.deleteSuccessMessage.replace('{0}', app.label)\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function (err) {\n\t\t\t\t\t\t_logic.reset();\n\t\t\t\t\t\t_logic.ready()\n\n\t\t\t\t\t\twebix.message({\n\t\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\t\ttext: labels.common.deleteErrorMessage.replace(\"{0}\", app.label)\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tAD.error.log('App Builder : Error delete application data', { error: err });\n\t\t\t\t\t})\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function transitionApplicationList\n\t\t\t *\n\t\t\t * Trigger our List component to show\n\t\t\t */\n\t\t\ttransitionApplicationList:function() {\n\t\t\t\t$$(ids.component).show();\n\t\t\t}\n\t\t})\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_choose_list.js","\n/*\n * ab_work\n *\n * Display the component for working with an ABApplication.\n *\n */\n\n// import ABApplication from \"../classes/ABApplication\"\nimport AB_Work_Object from \"./ab_work_object\"\nimport AB_Work_Interface from \"./ab_work_interface\"\n\n\n\nexport default class AB_Work extends OP.Component {  // ('ab_work', function(App) {\n\n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_work');\n\n\t\tvar L = this.Label;\n\n\n\t\tvar labels = {\n\n\t\t\tcommon : App.labels,\n\n\t\t\tcomponent: {\n\n\t\t\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\t\t\tbackToApplication: L('ab.application.backToApplication', \"*Back to Applications page\"),\n\t\t\t\tsynchronize: L('ab.application.synchronize', \"*Synchronize\"),\n\t\t\t\tobjectTitle: L('ab.object.title', \"*Objects\"),\n\t\t\t\tinterfaceTitle: L('ab.interface.title', \"*Interface\")\n\t\t\t}\n\t\t}\n\n\n\n\t\t// internal list of Webix IDs to reference our UI components.\n\t\tvar ids = {\n\t\t\tcomponent:  \tthis.unique('component'),\n\t\t\ttoolBar:  \t\tthis.unique('toolbar'),\n\t\t\tbuttonSync:  \tthis.unique('button_sync'),\n\t\t\tlabelAppName:  \tthis.unique('label_appname'),\n\t\t\ttabbar:  \t\tthis.unique('tabbar'),\n\t\t\ttab_object: \tthis.unique('tab_object'),\n\t\t\ttab_interface: \tthis.unique('tab_interface'),\n\t\t\tworkspace: \t\tthis.unique('workspace'),\n\t\t}\n\n\n\t\tvar AppObjectWorkspace = new AB_Work_Object(App);\n\t\tvar AppInterfaceWorkspace = new AB_Work_Interface(App);\n\n\n\n\t\t// Our webix UI definition:\n\t\tthis.ui = {\n\t\t\tid: ids.component,\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tview: \"toolbar\",\n\t\t\t\t\tid: ids.toolBar,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\tlabel: labels.component.backToApplication,\n\t\t\t\t\t\t\twidth: 200,\n\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\ticon: \"arrow-left\",\n\t\t\t\t\t\t\talign: \"left\",\n\n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\tApp.actions.transitionApplicationChooser();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"label\",\n\t\t\t\t\t\t\tid: ids.labelAppName,\n\t\t\t\t\t\t\talign: \"center\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"spacer\",\n\t\t\t\t\t\t\twidth: 200,\n\t\t\t\t\t\t\talrign: \"right\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// {\n\t\t\t\t\t\t// \tid: ids.buttonSync,\n\t\t\t\t\t\t// \tview: \"button\",\n\t\t\t\t\t\t// \ttype: \"icon\",\n\t\t\t\t\t\t// \ticon: \"refresh\",\n\t\t\t\t\t\t// \tlabel: labels.component.synchronize,\n\t\t\t\t\t\t// \tautowidth: true,\n\t\t\t\t\t\t// \talign: \"right\",\n\t\t\t\t\t\t// \tclick: function () {\n\t\t\t\t\t\t// \t\t_logic.synchronize();\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t//{ height: App.config.mediumSpacer },\n\t\t\t\t// {\n\t\t\t\t// \tview:\"segmented\",\n\t\t\t\t// \tid: ids.tabbar,\n\t\t\t\t// \tvalue: ids.tab_object,\n\t\t\t\t// \tmultiview: true,\n\t\t\t\t// \talign: \"center\",\n\t\t\t\t// \toptions:[\n\t\t\t\t// \t\t{\n\t\t\t\t// \t\t\tid: ids.tab_object,\n\t\t\t\t// \t\t\tvalue: labels.component.objectTitle,\n\t\t\t\t// \t\t\twidth: App.config.tabWidthMedium\n\t\t\t\t// \t\t},\n\t\t\t\t// \t\t{\n\t\t\t\t// \t\t\tid: ids.tab_interface,\n\t\t\t\t// \t\t\tvalue: labels.component.interfaceTitle,\n\t\t\t\t// \t\t\twidth: App.config.tabWidthMedium\n\t\t\t\t// \t\t}\n\t\t\t\t// \t],\n\t\t\t\t// \ton: {\n\t\t\t\t// \t\tonChange: function (idNew, idOld) {\n\t\t\t\t// \t\t\tif (idNew != idOld) {\n\t\t\t\t// \t\t\t\t_logic.tabSwitch(idNew, idOld);\n\t\t\t\t// \t\t\t}\n\t\t\t\t// \t\t}\n\t\t\t\t// \t}\n\t\t\t\t// },\n\t\t\t\t{ height: App.config.mediumSpacer },\n\t\t\t\t{\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twidth: App.config.mediumSpacer\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"tabbar\",\n\t\t\t\t\t\t\t\t\tid: ids.tabbar,\n\t\t\t\t\t\t\t\t\tvalue: ids.tab_object,\n\t\t\t\t\t\t\t\t\tmultiview: true,\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: ids.tab_object,\n\t\t\t\t\t\t\t\t\t\t\tvalue: labels.component.objectTitle,\n\t\t\t\t\t\t\t\t\t\t\twidth: App.config.tabWidthMedium\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: ids.tab_interface,\n\t\t\t\t\t\t\t\t\t\t\tvalue: labels.component.interfaceTitle,\n\t\t\t\t\t\t\t\t\t\t\twidth: App.config.tabWidthMedium\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\tonChange: function (idNew, idOld) {\n\t\t\t\t\t\t\t\t\t\t\tif (idNew != idOld) {\n\t\t\t\t\t\t\t\t\t\t\t\t_logic.tabSwitch(idNew, idOld);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: ids.workspace,\n\t\t\t\t\t\t\t\t\tcells: [\n\t\t\t\t\t\t\t\t\t\tAppObjectWorkspace.ui,\n\t\t\t\t\t\t\t\t\t\tAppInterfaceWorkspace.ui\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twidth: App.config.mediumSpacer\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{ height: App.config.mediumSpacer }\n\t\t\t]\n\t\t};\n\n\n\n\t\t// Our init() function for setting up our UI\n\t\tthis.init = function() {\n\n\t\t\tAppObjectWorkspace.init();\n\t\t\tAppInterfaceWorkspace.init();\n\n//// TODO: keep track of the last workspace in application.workspace.lastWorkspace on every\n//// tab switch, then use that value here to show you which tab to display on loading.\n//// don't save application each time the tab workspace changes.  just make the setting \n//// and then when they update anything in those workspace editors, this get's updated.\n\n\t\t\t// initialize the Object Workspace to show first.\n\t\t\t_logic.tabSwitch(ids.tab_object);\n\t\t}\n\n\n\n\n\t\t// our internal business logic\n\t\tvar _logic = {\n\n\n\t\t\tapplicationInit:function(application) {\n\n\t\t\t\t// setup Application Label:\n\t\t\t\t$$(ids.labelAppName).define('label', application.label);\n\t\t\t\t$$(ids.labelAppName).refresh();\n\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function show()\n\t\t\t *\n\t\t\t * Show this component.\n\t\t\t */\n\t\t\tshow:function() {\n\n\t\t\t\t$$(ids.component).show();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function synchronize\n\t\t\t *\n\t\t\t * Kick off the Synchronization process.\n\t\t\t */\n\t\t\tsynchronize:function() {\n\n\t// self.element.trigger(self.options.synchronizeEvent, {\n\t// \tappID: AD.classes.AppBuilder.currApp.id\n\t// });\n\t//// Question: where should this logic go?  Here or in ab.js ?\n\nconsole.error('TODO: ab_work.logic.synchronize()!');\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function tabSwitch\n\t\t\t *\n\t\t\t * Every time a tab switch happens, decide which workspace to show.\n\t\t\t *\n\t\t\t * @param {string} idTab\tthe id of the tab that was changed to.\n\t\t\t * @param {string} idOld\tthe previous tab id\n\t\t\t */\n\t\t\ttabSwitch:function(idTab, idOld) {\n\n\t\t\t\tswitch( idTab ) {\n\n\t\t\t\t\t// Object Workspace Tab\n\t\t\t\t\tcase ids.tab_object:\n\n\t\t\t\t\t\t// $$(ids.buttonSync).show();\n\t\t\t\t\t\tAppObjectWorkspace.show();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t// Interface Workspace Tab\n\t\t\t\t\tcase ids.tab_interface:\n\n\t\t\t\t\t\t// $$(ids.buttonSync).hide();\n\t\t\t\t\t\tAppInterfaceWorkspace.show();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\tthis._logic = _logic;\n\n\n\n\t\tthis.actions({\n\n\t\t\t/**\n\t\t\t * @function transitionWorkspace\n\t\t\t *\n\t\t\t * Switch the UI to view the App Workspace screen.\n\t\t\t *\n\t\t\t * @param {ABApplication} application\n\t\t\t */\n\t\t\ttransitionWorkspace:function(application){\n\n\t\t\t\t_logic.applicationInit(application);\n\t\t\t\tAppObjectWorkspace.applicationLoad(application);\n\t\t\t\tAppInterfaceWorkspace.applicationLoad(application);\n\n\n\t\t\t\t_logic.show();\t\n\t\t\t}\n\n\t\t})\n\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work.js","\n/*\n * ab_work_interface\n *\n * Display the Interface for designing Pages and Views in the App Builder.\n *\n */\n\nimport AB_Work_Interface_List from \"./ab_work_interface_list\"\n\n\nexport default class AB_Work_Interface extends OP.Component {  \n\n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_work_interface');\n\n\t\tvar L = this.Label;\n\n\n\t\tvar labels = {\n\n\t\t\tcommon : App.labels,\n\n\t\t\tcomponent: {\n\n\t\t\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\n\t\t\t}\n\t\t}\n\n\n\t\tvar ViewList = new AB_Work_Interface_List(App);\n\n\n\t\t// internal list of Webix IDs to reference our UI components.\n\t\tvar ids = {\n\t\t\tcomponent: this.unique('component'),\n\n\t\t}\n\n\n\n\t\t// Our webix UI definition:\n\t\tthis.ui = {\n\t\t\tid: ids.component,\n\t\t\tmargin: 10,\n\t\t\tcols: [\n\t\t\t\tViewList.ui,\n\t\t\t\t{ view: \"resizer\"},\n{\n\t// id: ids.noSelection,\n\trows:[\n\t\t{\n\t\t\tmaxHeight: App.config.xxxLargeSpacer,\n\t\t\thidden: App.config.hideMobile\n\t\t},\n\t\t{\n\t\t\tview:'label',\n\t\t\talign: \"center\",\n\t\t\tlabel:\"interface workspace\",\n\t\t},\n\t\t{\n\t\t\tmaxHeight: App.config.xxxLargeSpacer,\n\t\t\thidden: App.config.hideMobile\n\t\t}\n\t]\n}\n\t\t\t]\n\t\t};\n\n\n\n\t\t// Our init() function for setting up our UI\n\t\tthis.init = function() {\n\t\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\t\t\tViewList.init();\n\n\t\t}\n\n\n\t\t// our internal business logic\n\t\tvar _logic = {\n\n\n\t\t\t/**\n\t\t\t * @function applicationLoad\n\t\t\t *\n\t\t\t * Initialize the Object Workspace with the given ABApplication.\n\t\t\t *\n\t\t\t * @param {ABApplication} application \n\t\t\t */\n\t\t\tapplicationLoad:function(application) {\n\n\t\t\t\tViewList.applicationLoad(application);\n\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function show()\n\t\t\t *\n\t\t\t * Show this component.\n\t\t\t */\n\t\t\tshow:function() {\n\n\t\t\t\t$$(ids.component).show();\n\t\t\t}\n\t\t}\n\t\tthis._logic = _logic;\n\n\n\t\tthis.actions({\n\n\t\t});\n\n\n\n\t\t// \n\t\t// Define our external interface methods:\n\t\t// \n\t\tthis.applicationLoad = _logic.applicationLoad;\n\t\tthis.show = _logic.show;\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_interface.js","\n/*\n * ab_work_object_list\n *\n * Manage the Object List\n *\n */\n\nimport ABApplication from \"../classes/ABApplication\"\nimport AB_Work_Interface_List_NewPage from \"./ab_work_interface_list_newPage\"\nimport AB_Common_PopupEditMenu from \"./ab_common_popupEditMenu\"\n\n\n\nexport default class AB_Work_Interface_List extends OP.Component {  \n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_work_interface_list');\n\n\t\tvar L = this.Label;\n\n\n\t\tvar labels = {\n\n\t\t\tcommon : App.labels,\n\n\t\t\tcomponent: {\n\n\t\t\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\t\t\taddNew: L('ab.interface.addNewPage', '*Add new Page'),\n\n\t\t\t\tconfirmDeleteTitle: L('ab.interface.delete.title', \"*Delete Page\"),\n\t\t\t\tconfirmDeleteMessage: L('ab.interface.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\n\t\t\t}\n\t\t}\n\n\t\t// internal list of Webix IDs to reference our UI components.\n\t\tvar ids = {\n\t\t\tcomponent: this.unique('component'),\n\n\t\t\tlist: this.unique('editlist'),\n\t\t\tbuttonNew: this.unique('buttonNew')\n\t\t}\n\n\n\t\t// // Note: put these here so _logic is defined:\n\t\t// // There is a Popup for adding a new Object:\n\t\tvar PopupNewPageComponent = new AB_Work_Interface_List_NewPage(App);\n\t\tvar PopupEditPageComponent = new AB_Common_PopupEditMenu(App);\n\n\n\n\t\t// Our webix UI definition:\n\t\tthis.ui = {\n\t\t\tid:ids.component,\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tview: App.custom.edittree.view,  // \"editlist\",\n\t\t\t\t\tid: ids.list,\n\t\t\t\t\twidth: 250,\t// TODO: @James\n\n\t\t\t\t\tselect: true,\n\n\t\t\t\t\teditaction: 'custom',\n\t\t\t\t\teditable: true,\n\t\t\t\t\teditor: \"text\",\n\t\t\t\t\teditValue: \"label\",\n\n\t\t\t\t\ttemplate: function(obj, common) {\n\t\t\t\t\t\treturn _logic.templateListItem(obj, common);\n\t\t\t\t\t},\n\t\t\t\t\ttype: {\n\t\t\t\t\t\theight: 35,\n\t\t\t\t\t\ticonGear: \"<span class='webix_icon fa-cog'></span>\"\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonAfterRender: function () {\n\t\t\t\t\t\t\t_logic.onAfterRender();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonAfterSelect: function (id) {\n\t\t\t\t\t\t\t_logic.onAfterSelect(id);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonAfterOpen: function () {\n\t\t\t\t\t\t\t_logic.onAfterOpen();\n\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonAfterClose: function () {\n\t\t\t\t\t\t\tvar ids = this.getSelectedId(true);\n\n\t\t\t\t\t\t\t// Show gear icon\n\t\t\t\t\t\t\tids.forEach(function (id) {\n\t\t\t\t\t\t\t\tself.showGear(id);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonBeforeEditStop: function (state, editor) {\n\t\t\t\t\t\t\t_logic.onBeforeEditStop(state, editor);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonAfterEditStop: function (state, editor, ignoreUpdate) {\n\t\t\t\t\t\t\t_logic.onAfterEditStop(state, editor, ignoreUpdate);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonClick: {\n\t\t\t\t\t\t\"ab-page-list-edit\": function (e, id, trg) {\n\t\t\t\t\t\t\t_logic.clickEditMenu(e, id, trg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonNew,\n\t\t\t\t\tvalue: labels.component.addNew,\n\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t_logic.clickNewView();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\n\n\t\t// Our init() function for setting up our UI\n\t\tthis.init = function() {\n\n\t\t\tif ($$(ids.component))\n\t\t\t\t$$(ids.component).adjust();\n\n\t\t\tif ($$(ids.list)) {\n\t\t\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t\t\t\t$$(ids.list).adjust();\n\t\t\t}\n\n\t\t\tPopupNewPageComponent.init({\n\t\t\t\tonSave: _logic.callbackNewPage\n\t\t\t});\n\n\t\t\tPopupEditPageComponent.init({\n\t\t\t\tonClick: _logic.callbackPageEditMenu\n\t\t\t})\n\t\t}\n\n\n\n\t\t// our internal business logic\n\t\tvar _logic = {\n\n\n\t\t\t/**\n\t\t\t * @function applicationLoad\n\t\t\t *\n\t\t\t * Initialize the Object List from the provided ABApplication\n\t\t\t *\n\t\t\t * If no ABApplication is provided, then show an empty form. (create operation)\n\t\t\t *\n\t\t\t * @param {ABApplication} application  \t[optional] The current ABApplication\n\t\t\t *\t\t\t\t\t\t\t\t\t\twe are working with.\n\t\t\t */\n\t\t\tapplicationLoad : function(application){\n\t\t\t\t_logic.listBusy();\n\n\t\t\t\tCurrentApplication = application;\n\n\t\t\t\t// get a DataCollection of all our objects\n\t\t\t\tviewList = new webix.DataCollection({\n\t\t\t\t\tdata: application.views(),\n\t\t\t\t});\n\n\t\t\t\t// clear our list and display our objects:\n\t\t\t\tvar List = $$(ids.list);\n\t\t\t\tList.clearAll();\n\t\t\t\tList.data.unsync();\n\t\t\t\tList.data.sync(viewList);\n\t\t\t\tList.refresh();\n\t\t\t\tList.unselectAll();\n\n\n\n\t\t\t\t//\n\t\t\t\t_logic.listReady();\n\n\n\t\t\t\t// // prepare our Popup with the current Application\n\t\t\t\tPopupNewPageComponent.applicationLoad(application);\n\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function callbackNewObject\n\t\t\t *\n\t\t\t * Once a New Page was created in the Popup, follow up with it here.\n\t\t\t */\n\t\t\tcallbackNewPage:function(page){\n\n\t\t\t\t$$(ids.list).add(page);\n\t\t\t\t$$(ids.list).select(page.id);\n\t\t\t\tPopupNewPageComponent.hide();\n\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function callbackPageEditMenu\n\t\t\t *\n\t\t\t * Respond to the edit menu selection.\n\t\t\t */\n\t\t\tcallbackPageEditMenu: function(action) {\n\n\t\t\t\tswitch (action) {\n\t\t\t\t\tcase 'rename':\n\t\t\t\t\t\t_logic.rename();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'delete':\n\t\t\t\t\t\t_logic.remove();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tclickEditMenu: function(e, id, trg) {\n\t\t\t\t// Show menu\n\t\t\t\tPopupEditPageComponent.show(trg);\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\n\t\t\tlistBusy:function() {\n\t\t\t\t$$(ids.list).showProgress({ type: \"icon\" });\n\t\t\t},\n\n\n\t\t\tlistReady:function() {\n\t\t\t\t$$(ids.list).hideProgress();\n\t\t\t},\n\n\n\t\t\tonAfterClose: function() {\nconsole.error('!! todo: onAfterClose()');\n\t\t\t\t\t\t\t\t\t\t\t\t\t// var ids = this.getSelectedId(true);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t// // Show gear icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t// ids.forEach(function (id) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t// \tself.showGear(id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t// });\n\t\t\t},\n\n\n\t\t\tonAfterEditStop: function(state, editor, ignoreUpdate) {\n\n\t\t\t\t_logic.showGear(editor.id);\n\n\t\t\t\tif (state.value != state.old) {\n\t\t\t\t\t_logic.listBusy();\n\n\t\t\t\t\tvar selectedPage = $$(ids.list).getSelectedItem(false);\n\t\t\t\t\tselectedPage.label = state.value;\n\n\t\t\t\t\t// Call server to rename\n\t\t\t\t\tselectedPage.save()\n\t\t\t\t\t\t.catch(function () {\n\t\t\t\t\t\t\t_logic.listReady();\n\n\t\t\t\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\t\t\t\ttext: labels.common.renameErrorMessage.replace(\"{0}\", state.old)\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\t_logic.listReady();\n\n\t\t\t\t\t\t\t// TODO : should use message box\n\t\t\t\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\t\t\t\ttext: labels.common.renameSuccessMessage.replace(\"{0}\", state.value)\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tonAfterOpen: function() {\nconsole.error('!! todo: onAfterOpen() ');\n\t\t\t\t\t\t\t// var ids = this.getSelectedId(true);\n\n\t\t\t\t\t\t\t// // Show gear icon\n\t\t\t\t\t\t\t// ids.forEach(function (id) {\n\t\t\t\t\t\t\t// \tself.showGear(id);\n\t\t\t\t\t\t\t// });\n\t\t\t},\n\n\n\t\t\tonAfterRender: function() {\nconsole.error('!! todo: onAfterRender() editing');\n\t\t\t\t// webix.once(function () {\n\t\t\t\t// \t$$(self.webixUiId.objectList).data.each(function (d) {\n\t\t\t\t// \t\t$($$(self.webixUiId.objectList).getItemNode(d.id)).find('.ab-object-unsync-number').html(99);\n\t\t\t\t// \t});\n\t\t\t\t// });\n\n\t\t\t\t// // Show gear icon\n\t\t\t\t// if (this.getSelectedId(true).length > 0) {\n\t\t\t\t// \t$(this.getItemNode(this.getSelectedId(false))).find('.ab-object-list-edit').show();\n\t\t\t\t// \tself.refreshUnsyncNumber();\n\t\t\t\t// }\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function onAfterSelect()\n\t\t\t *\n\t\t\t * Perform these actions when a View is selected in the List.\n\t\t\t */\n\t\t\tonAfterSelect: function (id) {\n\n\t\t\t\tvar view = $$(ids.list).getItem(id);\n\t// App.actions.populateViewWorkspace(view);\n\n\t\t\t\t_logic.showGear(id);\n\t\t\t},\n\n\n\n\t\t\tonBeforeEditStop: function(state, editor) {\nconsole.error('!! todo: onBeforeEditStop() editing');\n\t\t\t\t// if (!inputValidator.validateFormat(state.value)) {\n\t\t\t\t// \treturn false;\n\t\t\t\t// }\n\n\t\t\t\t// // Validation - check duplicate\n\t\t\t\t// if (!inputValidator.rules.preventDuplicateObjectName(state.value, editor.id) && state.value != state.old) {\n\t\t\t\t// \twebix.alert({\n\t\t\t\t// \t\ttitle: self.labels.object.invalidName,\n\t\t\t\t// \t\tok: self.labels.common.ok,\n\t\t\t\t// \t\ttext: self.labels.object.duplicateName.replace(\"{0}\", state.value)\n\t\t\t\t// \t});\n\n\t\t\t\t// \treturn false;\n\t\t\t\t// }\n\t\t\t},\n\n\n\t\t\trename: function() {\n\t\t\t\tvar pageID = $$(ids.list).getSelectedId(false);\n\t\t\t\t$$(ids.list).edit(pageID);\n\t\t\t},\n\n\t\t\tremove: function() {\n\n\t\t\t\tvar selectedPage = $$(ids.list).getSelectedItem(false);\n\n\t\t\t\t// verify they mean to do this:\n\t\t\t\tOP.Dialog.Confirm({\n\t\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t\t\tmessage: labels.component.confirmDeleteMessage.replace('{0}', selectedPage.label),\n\t\t\t\t\tcallback: (isOK) => {\n\n\t\t\t\t\t\tif (isOK) {\n\t\t\t\t\t\t\t_logic.listBusy();\n\n\t\t\t\t\t\t\tselectedPage.destroy()\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t_logic.listReady();\n\n\t\t\t\t\t\t\t\t\t$$(ids.list).remove(selectedPage.id);\n\t// App.actions.clearObjectWorkspace();\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\n\t\t\tshowGear: function(id) {\n\t\t\t\tvar gearIcon = $$(ids.list).getItemNode(id).querySelector('.ab-page-list-edit');\n\t\t\t\tgearIcon.style.visibility = \"visible\";\n\t\t\t\tgearIcon.style.display = \"block\";\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * @function show()\n\t\t\t *\n\t\t\t * Show this component.\n\t\t\t */\n\t\t\tshow:function() {\n\n\t\t\t\t$$(ids.component).show();\n\t\t\t},\n\n\n\n\t\t\t/**\n\t\t\t * @function templateListItem\n\t\t\t *\n\t\t\t * Defines the template for each row of our ObjectList.\n\t\t\t *\n\t\t\t * @param {obj} obj the current instance of ABObject for the row.\n\t\t\t * @param {?} common the webix.common icon data structure\n\t\t\t * @return {string}\n\t\t\t */\n\t\t\ttemplateListItem: function(item, common) {\n\n\n\t\t\t\tvar template = _templateListItem;\n\n\n\t\t\t\ttemplate = template.replace(\"#iconGear#\", \"<div class='ab-page-list-edit'>{common.iconGear}</div>\");\n\t\t\t\ttemplate = template.replace('#typeIcon#', 'fa-file-o');\n\n\n\t\t\t\t\t\t\t// // Disallow rename/delete on Tabs\n\t\t\t\t\t\t\t// if (item.type !== 'tab')\n\t\t\t\t\t\t\t// \ttemplate = template.replace(\"#iconGear#\", \"<div class='ab-page-list-edit'>{common.iconGear}</div>\");\n\t\t\t\t\t\t\t// else\n\t\t\t\t\t\t\t// \ttemplate = template.replace(\"#iconGear#\", \"\");\n\n\t\t\t\t\t\t\t// switch (item.type) {\n\t\t\t\t\t\t\t// \tcase 'modal':\n\t\t\t\t\t\t\t// \t\ttemplate = template.replace('#typeIcon#', 'fa-list-alt');\n\t\t\t\t\t\t\t// \t\tbreak;\n\t\t\t\t\t\t\t// \tcase 'tab':\n\t\t\t\t\t\t\t// \t\ttemplate = template.replace('#typeIcon#', 'fa-folder-o');\n\t\t\t\t\t\t\t// \t\tbreak;\n\t\t\t\t\t\t\t// \tcase 'page':\n\t\t\t\t\t\t\t// \tdefault:\n\t\t\t\t\t\t\t// \t\ttemplate = template.replace('#typeIcon#', 'fa-file-o');\n\t\t\t\t\t\t\t// \t\tbreak;\n\t\t\t\t\t\t\t// }\n\n\t\t\t\treturn template\n\t\t\t\t\t.replace('#label#', item.label)\n\t\t\t\t\t.replace('{common.icon()}', common.icon(item))\n\t\t\t\t\t.replace('{common.iconGear}', common.iconGear);\n\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function clickNewView\n\t\t\t *\n\t\t\t * Manages initiating the transition to the new Object Popup window\n\t\t\t */\n\t\t\tclickNewView:function() {\n\n\t\t\t\t// show the new popup\n\t\t\t\tPopupNewPageComponent.show();\n\t\t\t},\n\n\t\t\t// rename: function () {\n\t\t\t// \tvar objectId = $$(ids.list).getSelectedId(false);\n\t\t\t// \t$$(ids.list).edit(objectId);\n\t\t\t// },\n\n\t\t\t// remove: function () {\n\n\t\t\t// \tvar selectedObject = $$(ids.list).getSelectedItem(false);\n\n\t\t\t// \t// verify they mean to do this:\n\t\t\t// \tOP.Dialog.Confirm({\n\t\t\t// \t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t// \t\tmessage: labels.component.confirmDeleteMessage.replace('{0}', selectedObject.label),\n\t\t\t// \t\tcallback: (isOK) => {\n\n\t\t\t// \t\t\tif (isOK) {\n\t\t\t// \t\t\t\t_logic.listBusy();\n\n\t\t\t// \t\t\t\tselectedObject.destroy()\n\t\t\t// \t\t\t\t\t.then(() => {\n\t\t\t// \t\t\t\t\t\t_logic.listReady();\n\n\t\t\t// \t\t\t\t\t\t$$(ids.list).remove(selectedObject.id);\n\t\t\t// \t\t\t\t\t\tApp.actions.clearObjectWorkspace();\n\t\t\t// \t\t\t\t\t});\n\n\t\t\t// \t\t\t}\n\t\t\t// \t\t}\n\t\t\t// \t})\n\t\t\t// },\n\n\t\t\t// callbackObjectEditorMenu: function (action) {\n\t\t\t// \tswitch (action) {\n\t\t\t// \t\tcase 'rename':\n\t\t\t// \t\t\t_logic.rename();\n\t\t\t// \t\t\tbreak;\n\t\t\t// \t\tcase 'delete':\n\t\t\t// \t\t\t_logic.remove();\n\t\t\t// \t\t\tbreak;\n\t\t\t// \t}\n\t\t\t// }\n\t\t}\n\t\tthis._logic = _logic;\n\n\n\t\t/*\n\t\t * _templateListItem\n\t\t *\n\t\t * The Object Row template definition.\n\t\t */\n\t\tvar _templateListItem = [\n\t\t\t\"<div class='ab-page-list-item'>\",\n\t\t\t\t\"{common.icon()} <span class='webix_icon #typeIcon#'></span> #label# #iconGear#\",\n\t\t\t\"</div>\"\n\t\t].join('');\n\n\n\n\n\t\tvar CurrentApplication = null;\n\t\tvar viewList = null;\n\n\n\n\t\t// Expose any globally accessible Actions:\n\t\tthis.actions({\n\n\n\t\t})\n\n\n\n\t\t//\n\t\t// Define our external interface methods:\n\t\t// \n\t\tthis.applicationLoad = _logic.applicationLoad;\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_interface_list.js","\n/*\n * ab_work_interface_list_newPage\n *\n * Display the form for creating a new Application.\n *\n */\n\nimport AB_Work_Interface_List_NewPage_BlankPage from \"./ab_work_interface_list_newPage_blankPage\"\n// import AB_Work_Interface_List_NewPage_QuickPage from \"./ab_work_interface_list_newPage_quickPage\"\nimport ABPage from '../classes/views/ABViewPage'\n\n\n\nexport default class AB_Work_Interface_List_NewPage extends OP.Component {  \n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_work_interface_list_newPage');\n\n\t\tvar L = this.Label;\n\n\n\t\tvar labels = {\n\n\t\t\tcommon : App.labels,\n\n\t\t\tcomponent: {\n\n\t\t\t\taddNewPage : L('ab.interface.addNewPage', '*Add a new page'),\n\n\t\t\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\t\t\tquickPage : L('ab.interface.quickPage', '*Quick Page'),\n\t\t\t\tblankPage : L('ab.interface.blankPage', '*Blank Page'),\n\n\t\t\t}\n\t\t}\n\n\t\t// internal list of Webix IDs to reference our UI components.\n\t\tvar ids = {\n\t\t\tcomponent: this.unique('component'),\n\n\t\t\tselectTab: this.unique('selectTab'),\n\n\t\t\ttabBlank: this.unique('tabBlank'),\n\t\t\ttabQuick: this.unique('tabQuick'),\n\n\t\t\tbuttonSave: this.unique('buttonSave')\n\n\t\t}\n\n\n\t\tvar BlankPage = new AB_Work_Interface_List_NewPage_BlankPage(App);\n\t\t// var QuickPage = new AB_Work_Interface_List_NewPage_QuickPage(App);\n\n\n\t\t// Our webix UI definition:\n\t\tthis.ui = {\n\t\t\tview: \"window\",\n\t\t\tid: ids.component,\n\n//// TODO: @James\nwidth: 650,\nmaxHeight: 500,\n\n\t\t\tposition: \"center\",\n\t\t\tmodal: true,\n\t\t\thead: labels.component.addNewPage,\n\t\t\tbody: {\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: ids.selectTab,\n\t\t\t\t\t\tview: \"tabbar\",\n\t\t\t\t\t\tmultiview: true,\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{ id: ids.tabQuick, value: labels.component.quickPage },\n\t\t\t\t\t\t\t{ id: ids.tabBlank, value: labels.component.blankPage }\n\t\t\t\t\t\t],\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: function(newTab, oldTab){\n\t\t\t\t\t\t\t\t_logic.tabSwitch(newTab, oldTab);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcells: [\n\t\t\t\t\t\t\tBlankPage.ui,\n\t\t\t\t\t\t\t// QuickPage.ui\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tmargin: 5,\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\t\tvalue: labels.common.cancel,\n\t\t\t\t\t\t\t\tclick: function () { \n\t\t\t\t\t\t\t\t\t_logic.buttonCancel();  \n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: ids.buttonSave,\n\t\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\t\tvalue: labels.common.add,\n// type: \"form\",\n\t\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\t\t_logic.buttonSave();\n\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\n\n\n\t\t// Our init() function for setting up our UI\n\t\tthis.init = function(options) {\n\t\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t\t\t// we're a popup, so create our own ui\n\t\t\twebix.ui(this.ui);\n\n\t\t\tBlankPage.init();\n\n\t\t\t// register our callbacks:\n\t\t\tfor(var c in _logic.callbacks) {\n\t\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t\t}\n\n\t\t\t$$(ids.selectTab).setValue(ids.tabBlank);\n\t\t\t_logic.tabSwitch( ids.tabBlank )\n\t\t}\n\n\n\t\tvar CurrentApplication = null;\n\t\tvar CurrentEditor = null;\n\n\n\t\t// our internal business logic \n\t\tvar _logic = {\n\n\t\t\t/**\n\t\t\t * @function applicationLoad()\n\t\t\t *\n\t\t\t * Prepare our New Popups with the current Application\n\t\t\t */\n\t\t\tapplicationLoad: function(application) {\n\t\t\t\tCurrentApplication = application;\n\n\t\t\t\tBlankPage.applicationLoad(application);\n// QuickPage.applicationLoad(application);\n\t\t\t},\n\n\n\t\t\tbuttonCancel: function() {\n\t\t\t\tCurrentEditor.clear();\n\t\t\t\t_logic.hide();\n\t\t\t},\n\t\t\t\n\t\t\tbuttonSave:function(){\n\n\t\t\t\tvar values = CurrentEditor.values();\n\t\t\t\t\n\t\t\t\t// this interface only creates Root Pages, or pages related to \n\t\t\t\tvar page = null;\n\t\t\t\tif(values.parent) {\n\t\t\t\t\tpage = values.parent.newChild(values);\n\t\t\t\t} else {\n\t\t\t\t\tpage = CurrentApplication.viewNew(values);\n\t\t\t\t}\n\n\t\t\t\tvar validator = page.isValid(values);\n\t\t\t\tif (validator.fail()) {\n\t\t\t\t\tCurrentEditor.errors(validator);\n\t\t\t\t} else {\n\n\t\t\t\t\tpage.save()\n\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t_logic.callbacks.onSave(page);\n\t\t\t\t\t\tBlankPage.clear();\n// QuickPage.clear();\n\t\t\t\t\t\t_logic.hide();\n\n\t\t\t\t\t\t// the CurrentApplication has changed it's values, so \n\t\t\t\t\t\t// refresh our editors with the curent values:\n\t\t\t\t\t\t_logic.applicationLoad(CurrentApplication);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tcallbacks:{\n\t\t\t\tonSave: function() { console.error('!! no onSave() callback handler! '); }\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function hide()\n\t\t\t *\n\t\t\t * Hide this component.\n\t\t\t */\n\t\t\thide:function() {\n\n\t\t\t\t$$(ids.component).hide();\n\t\t\t},\n\n\t\t\t// /**\n\t\t\t//  * @function formBusy\n\t\t\t//  *\n\t\t\t//  * Show the progress indicator to indicate a Form operation is in \n\t\t\t//  * progress.\n\t\t\t//  */\n\t\t\t// formBusy: function() {\n\n\t\t\t// \t$$(ids.form).showProgress({ type: 'icon' });\n\t\t\t// },\n\n\n\t\t\t// /**\n\t\t\t//  * @function formReady()\n\t\t\t//  *\n\t\t\t//  * remove the busy indicator from the form.\n\t\t\t//  */\n\t\t\t// formReady: function() {\n\t\t\t// \t$$(ids.form).hideProgress();\n\t\t\t// },\n\n\n\t\t\t/**\n\t\t\t * @function show()\n\t\t\t *\n\t\t\t * Show this component.\n\t\t\t */\n\t\t\tshow:function() {\n\n\t\t\t\t$$(ids.component).show();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function tabSwitch()\n\t\t\t *\n\t\t\t * Switch between the different New Page Editors.\n\t\t\t */\n\t\t\ttabSwitch: function(newTab, oldTab) {\n\n\t\t\t\tif (newTab != oldTab) {\n\n\t\t\t\t\tswitch (newTab) {\n\t\t\t\t\t\tcase ids.tabQuick:\n\t\t\t\t\t\t\tCurrentEditor = QuickPage;\n\t\t\t\t\t\t\tQuickPage.show();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase ids.tabBlank:\n\t\t\t\t\t\t\tCurrentEditor = BlankPage;\n\t\t\t\t\t\t\tBlankPage.show();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._logic = _logic;\n\n\n\n\t\t// Expose any globally accessible Actions:\n\t\tthis.actions({\n\n\n\t\t\t/**\n\t\t\t * @function populateApplicationForm()\n\t\t\t *\n\t\t\t * Initialze the Form with the values from the provided ABApplication.\n\t\t\t *\n\t\t\t * If no ABApplication is provided, then show an empty form. (create operation)\n\t\t\t *\n\t\t\t * @param {ABApplication} Application  \t[optional] The current ABApplication \n\t\t\t *\t\t\t\t\t\t\t\t\t\twe are working with.\n\t\t\t */\n\t\t\t// populateApplicationForm:function(Application){\n\t\t\t\t\n\t\t\t// \t_logic.formReset();\n\t\t\t// \tif (Application) {\n\t\t\t// \t\t// populate Form here:\n\t\t\t// \t\t_logic.formPopulate(Application);\n\t\t\t// \t}\n\t\t\t// \t_logic.permissionPopulate(Application);\n\t\t\t// \t_logic.show();\n\t\t\t// }\n\n\t\t})\n\n\n\t\t// \n\t\t// Define our external interface methods:\n\t\t// \n\t\tthis.applicationLoad = _logic.applicationLoad;\n\t\tthis.hide = _logic.hide;\n\t\tthis.show = _logic.show;\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_interface_list_newPage.js","\n/*\n * ab_work_interface_list_newPage_blankPage\n *\n * Display the form for creating a new blank page \n *\n */\n\nimport ABPage from '../classes/views/ABViewPage'\n\n\nexport default class AB_Work_Interface_List_NewPage_BlankPage extends OP.Component {  \n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_work_interface_list_newPage_blankPage');\n\n\t\tvar L = this.Label;\n\n\t\tvar labels = {\n\t\t\tcommon : App.labels,\n\t\t\tcomponent: {\n\n\t\t\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\t\t\tparentPage: L('ab.interface.page.parentList', '*Parent Page'),\n\t\t\t\tplaceholderPageName: L('ab.interface.placeholderPageName', '*Page name'),\n\n\t\t\t\trootPage: L('ab.interface.rootPage', '*[Root page]')\n\t\t\t}\n\t\t}\n\n\n\t\t// internal list of Webix IDs to reference our UI components.\n\t\tvar ids = {\n\t\t\tcomponent: this.unique('component'),\n\n\t\t\tparentList: this.unique('parentList'),\n\t\t\tformName: this.unique('formName')\n\n\t\t}\n\n\n\n\t\t// Our webix UI definition:\n\t\tthis.ui = {\n\t\t\tview: \"form\",\n\t\t\tid: ids.component,\n\n//// TODO: @James\nwidth: 400,\n\n\t\t\telements: [\n\t\t\t\t{ \n\t\t\t\t\tview: \"select\", \n\t\t\t\t\tid: ids.parentList, \n\t\t\t\t\tlabel: labels.component.parentPage, \n\t\t\t\t\tname: \"parent\", \n\t\t\t\t\tlabelWidth: 110, \n\t\t\t\t\toptions: [] \n\t\t\t\t},\n\t\t\t\t{ \n\t\t\t\t\tview: \"text\", \n\t\t\t\t\tid: ids.formName,\n\t\t\t\t\tlabel: labels.common.formName, \n\t\t\t\t\tname: \"label\", \n\t\t\t\t\trequired: true, \n\t\t\t\t\tplaceholder: labels.component.placeholderPageName, \n\t\t\t\t\tlabelWidth: 110 \n\t\t\t\t}\n\t\t\t]\n\n\t\t};\n\n\n\n\t\t// Our init() function for setting up our UI\n\t\tthis.init = function() {\n\t\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t\t}\n\n\n\t\tvar CurrentApplication = null;\n\n\t\t// our internal business logic \n\t\tvar _logic = this._logic = {\n\n\t\t\t\n\t\t\t/**\n\t\t\t * @function applicationLoad()\n\t\t\t *\n\t\t\t * Prepare our New Popups with the current Application\n\t\t\t */\n\t\t\tapplicationLoad: function(application) {\n\t\t\t\tCurrentApplication = application;\n\n\t\t\t\tvar options = [{ id: '-', value: labels.component.rootPage }];\n\t\t\t\tapplication.views((v)=>{ return v.isRoot(); }).forEach(function (page) {\n\t\t\t\t\t\toptions.push({ id: page.id, value: page.label });\n\t\t\t\t});\n\n\t\t\t\t$$(ids.parentList).define('options', options);\n\t\t\t\t$$(ids.parentList).refresh();\n\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * @function clear()\n\t\t\t *\n\t\t\t * Clear our form\n\t\t\t */\n\t\t\tclear:function() {\n\t\t\t\t$$(ids.component).clearValidation();\n\t\t\t\t$$(ids.component).clear();\n\t\t\t\t$$(ids.parentList).setValue('-');\n\t\t\t},\n\n\n\n\t\t\t/**\n\t\t\t * @function errors()\n\t\t\t *\n\t\t\t * show errors on our form:\n\t\t\t */\n\t\t\terrors: function (validator) {\n\t\t\t\tvalidator.updateForm($$(ids.component));\n\t\t\t},\n\n\n\t\t\t// /**\n\t\t\t//  * @function formBusy\n\t\t\t//  *\n\t\t\t//  * Show the progress indicator to indicate a Form operation is in \n\t\t\t//  * progress.\n\t\t\t//  */\n\t\t\t// formBusy: function() {\n\n\t\t\t// \t$$(ids.form).showProgress({ type: 'icon' });\n\t\t\t// },\n\n\n\t\t\t// /**\n\t\t\t//  * @function formReady()\n\t\t\t//  *\n\t\t\t//  * remove the busy indicator from the form.\n\t\t\t//  */\n\t\t\t// formReady: function() {\n\t\t\t// \t$$(ids.form).hideProgress();\n\t\t\t// },\n\n\n\t\t\t/**\n\t\t\t * @function show()\n\t\t\t *\n\t\t\t * Show this component.\n\t\t\t */\n\t\t\tshow:function() {\n\n\t\t\t\t\t// $$(componentId.addNewForm).clearValidation();\n\t\t\t\t\t// $$(componentId.addNewForm).clear();\n\n\t\t\t\t\t// var options = [{ id: '', value: '[Root page]' }];\n\t\t\t\t\t// application.pages.each(function (d) {\n\t\t\t\t\t// \tif (!d.parent) { // Get only root pages\n\t\t\t\t\t// \t\toptions.push({ id: d.id, value: d.label });\n\t\t\t\t\t// \t}\n\t\t\t\t\t// });\n\n\t\t\t\t\t// $$(componentId.addNewParentList).define('options', options);\n\n\t\t\t\t\t// // Default select parent page\n\t\t\t\t\t// if (selectedPage) {\n\t\t\t\t\t// \tvar selected_page_id = selectedPage.id;\n\n\t\t\t\t\t// \tif (selectedPage.parent)\n\t\t\t\t\t// \t\tselected_page_id = selectedPage.parent.id || selectedPage.parent;\n\n\t\t\t\t\t// \t$$(componentId.addNewParentList).setValue(selected_page_id);\n\t\t\t\t\t// }\n\t\t\t\t\t// else\n\t\t\t\t\t// \t$$(componentId.addNewParentList).setValue('');\n\n\t\t\t\t\t// $$(componentId.addNewParentList).render();\n\n\n\t\t\t\t$$(ids.component).show();\n\t\t\t},\n\n\n\t\t\tvalues:function() {\n\n\t\t\t\tvar parent = $$(ids.parentList).getValue().trim();\n\t\t\t\tif (parent == '-') parent = null;\n\n\t\t\t\t// convert a parent .id value to the actual object (or undefined if not found)\n\t\t\t\tif (parent) {\n\t\t\t\t\tCurrentApplication.views((v)=>{ return v.id == parent; })[0];\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tparent: parent,\n\t\t\t\t\tlabel: $$(ids.formName).getValue().trim(),\n\t\t\t\t\tkey: ABPage.defaults().key\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\n\n\t\t// Expose any globally accessible Actions:\n\t\tthis.actions({\n\n\n\t\t\t/**\n\t\t\t * @function populateApplicationForm()\n\t\t\t *\n\t\t\t * Initialze the Form with the values from the provided ABApplication.\n\t\t\t *\n\t\t\t * If no ABApplication is provided, then show an empty form. (create operation)\n\t\t\t *\n\t\t\t * @param {ABApplication} Application  \t[optional] The current ABApplication \n\t\t\t *\t\t\t\t\t\t\t\t\t\twe are working with.\n\t\t\t */\n\t\t\t// populateApplicationForm:function(Application){\n\t\t\t\t\n\t\t\t// \t_logic.formReset();\n\t\t\t// \tif (Application) {\n\t\t\t// \t\t// populate Form here:\n\t\t\t// \t\t_logic.formPopulate(Application);\n\t\t\t// \t}\n\t\t\t// \t_logic.permissionPopulate(Application);\n\t\t\t// \t_logic.show();\n\t\t\t// }\n\n\t\t})\n\n\n\t\t// \n\t\t// Define our external interface methods:\n\t\t// \n\t\tthis.applicationLoad = _logic.applicationLoad;\n\t\tthis.clear = _logic.clear;\n\t\tthis.errors = _logic.errors;\n\t\tthis.show = _logic.show;\n\t\tthis.values = _logic.values;\n\n\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_interface_list_newPage_blankPage.js","\n/*\n * ab_work_object\n *\n * Display the Object Tab UI:\n *\n */\n\n\nimport AB_Work_Object_List from \"./ab_work_object_list\"\nimport AB_Work_Object_Workspace from \"./ab_work_object_workspace\"\n\n\n\nexport default class AB_Work_Object extends OP.Component {   //.extend(idBase, function(App) {\n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_work_object');\n\t\tvar L = this.Label;\n\n\t\tvar labels = {\n\t\t\tcommon : App.labels,\n\t\t\tcomponent: {\n\t\t\t}\n\t\t}\n\n\n\t\t// internal list of Webix IDs to reference our UI components.\n\t\tvar ids = {\n\t\t\tcomponent: this.unique('component'),\n\n\t\t}\n\n\n\t\tvar ObjectList = new AB_Work_Object_List(App);\n\t\tvar ObjectWorkspace = new AB_Work_Object_Workspace(App);\n\n\n\t\t// Our webix UI definition:\n\t\tthis.ui = {\n\t\t\tid: ids.component,\n\t\t\tmargin: 10,\n\t\t\tcols: [\n\t\t\t\tObjectList.ui,\n\t\t\t\t{ view: \"resizer\"},\n\t\t\t\tObjectWorkspace.ui\n\t\t\t]\n\t\t};\n\n\n\n\n\n\t\t// Our init() function for setting up our UI\n\t\tthis.init = function() {\n\n\t\t\tObjectWorkspace.init();\n\t\t\tObjectList.init();\n\n\t\t}\n\n\n\t\t// our internal business logic\n\t\tvar _logic = {\n\n\n\t\t\t/**\n\t\t\t * @function applicationLoad\n\t\t\t *\n\t\t\t * Initialize the Object Workspace with the given ABApplication.\n\t\t\t *\n\t\t\t * @param {ABApplication} application\n\t\t\t */\n\t\t\tapplicationLoad: function(application) {\n\t\t\t\tObjectList.applicationLoad(application);\n\t\t\t\tApp.actions.clearObjectWorkspace();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function show()\n\t\t\t *\n\t\t\t * Show this component.\n\t\t\t */\n\t\t\tshow:function() {\n\n\t\t\t\t$$(ids.component).show();\n\t\t\t}\n\t\t}\n\t\tthis._logic = _logic;\n\n\n\n\t\t// \n\t\t// Define our external interface methods:\n\t\t// \n\t\tthis.applicationLoad = _logic.applicationLoad;\n\t\tthis.show = _logic.show;\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object.js","\n/*\n * ab_work_object_list\n *\n * Manage the Object List\n *\n */\n\nimport ABListNewObject from \"./ab_work_object_list_newObject\"\nimport ABListEditMenu from \"./ab_common_popupEditMenu\"   // \"./ab_work_object_list_popupEditMenu\"\n\n\n\nexport default class AB_Work_Object_List extends OP.Component {   //.extend(idBase, function(App) {\n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_work_object_list');\n\t\tvar L = this.Label;\n\n\t\tvar labels = {\n\t\t\tcommon : App.labels,\n\t\t\tcomponent: {\n\n\t\t\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\t\t\taddNew: L('ab.object.addNew', '*Add new object'),\n\n\t\t\t\tconfirmDeleteTitle: L('ab.object.delete.title', \"*Delete object\"),\n\t\t\t\tconfirmDeleteMessage: L('ab.object.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\t\t\t}\n\t\t}\n\n\t\t// internal list of Webix IDs to reference our UI components.\n\t\tvar ids = {\n\t\t\tcomponent: this.unique('component'),\n\n\t\t\tlist: this.unique('editlist'),\n\t\t\tbuttonNew: this.unique('buttonNew')\n\n\t\t}\n\n\n\t\t// There is a Popup for adding a new Object:\n\t\tvar PopupNewObjectComponent = new ABListNewObject(App);\n\n\t\t// the popup edit list for each entry in the list.\n\t\tvar PopupEditObjectComponent = new ABListEditMenu(App);\n\n\n\n\t\t// Our webix UI definition:\n\t\tthis.ui = {\n\t\t\tid:ids.component,\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tview: App.custom.editlist.view,  // \"editlist\",\n\t\t\t\t\tid: ids.list,\n\t\t\t\t\twidth: 250,\t// TODO: @James\n\n\t\t\t\t\tselect: true,\n\n\t\t\t\t\teditaction: 'custom',\n\t\t\t\t\teditable: true,\n\t\t\t\t\teditor: \"text\",\n\t\t\t\t\teditValue: \"label\",\n\n\t\t\t\t\ttemplate: function(obj, common) {\n\t\t\t\t\t\treturn _logic.templateListItem(obj, common);\n\t\t\t\t\t},\n\t\t\t\t\ttype: {\n\t\t\t\t\t\theight: 35,\n\t\t\t\t\t\ticonGear: \"<div class='ab-object-list-edit'><span class='webix_icon fa-cog'></span></div>\"\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonAfterRender: function () {\n\t\t\t\t\t\t\t_logic.onAfterRender();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonAfterSelect: function (id) {\n\t\t\t\t\t\t\t_logic.selectObject(id);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonBeforeEditStop: function (state, editor) {\n\t\t\t\t\t\t\t_logic.onBeforeEditStop(state, editor);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonAfterEditStop: function (state, editor, ignoreUpdate) {\n\t\t\t\t\t\t\t_logic.onAfterEditStop(state, editor, ignoreUpdate);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonClick: {\n\t\t\t\t\t\t\"ab-object-list-edit\": function (e, id, trg) {\n\t\t\t\t\t\t\t_logic.clickEditMenu(e, id, trg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonNew,\n\t\t\t\t\tvalue: labels.component.addNew,\n\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t_logic.clickNewObject();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\n\n\t\tvar CurrentApplication = null;\n\t\tvar objectList = null;\n\n\n\t\t// Our init() function for setting up our UI\n\t\tthis.init = () => {\n\n\t\t\tif ($$(ids.component))\n\t\t\t\t$$(ids.component).adjust();\n\n\t\t\tif ($$(ids.list)) {\n\t\t\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t\t\t\t$$(ids.list).adjust();\n\t\t\t}\n\n\t\t\tPopupNewObjectComponent.init({\n\t\t\t\tonDone: _logic.callbackNewObject\n\t\t\t});\n\n\t\t\tPopupEditObjectComponent.init({\n\t\t\t\tonClick: _logic.callbackObjectEditorMenu\n\t\t\t})\n\t\t}\n\n\n\n\t\t// our internal business logic\n\t\tvar _logic = this._logic = {\n\n\n\t\t\t/**\n\t\t\t * @function applicationLoad\n\t\t\t *\n\t\t\t * Initialize the Object List from the provided ABApplication\n\t\t\t *\n\t\t\t * If no ABApplication is provided, then show an empty form. (create operation)\n\t\t\t *\n\t\t\t * @param {ABApplication} application  \t[optional] The current ABApplication\n\t\t\t *\t\t\t\t\t\t\t\t\t\twe are working with.\n\t\t\t */\n\t\t\tapplicationLoad : function(application){\n\t\t\t\t_logic.listBusy();\n\n\t\t\t\tCurrentApplication = application;\n\n\t\t\t\t// get a DataCollection of all our objects\n\t\t\t\tobjectList = new webix.DataCollection({\n\t\t\t\t\tdata: application.objects(),\n\t\t\t\t});\n\n\t\t\t\t// clear our list and display our objects:\n\t\t\t\tvar List = $$(ids.list);\n\t\t\t\tList.clearAll();\n\t\t\t\tList.data.unsync();\n\t\t\t\tList.data.sync(objectList);\n\t\t\t\tList.refresh();\n\t\t\t\tList.unselectAll();\n\n\n\n\t\t\t\t//\n\t\t\t\t_logic.listReady();\n\n\n\t\t\t\t// prepare our Popup with the current Application\n\t\t\t\tPopupNewObjectComponent.applicationLoad(application);\n\n\t\t\t},\n\n\n\t\t\tclickEditMenu: function(e, id, trg) {\n\t\t\t\t// Show menu\n\t\t\t\tPopupEditObjectComponent.show(trg);\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\n\t\t\tlistBusy:function() {\n\t\t\t\t$$(ids.list).showProgress({ type: \"icon\" });\n\t\t\t},\n\n\t\t\tlistReady:function() {\n\t\t\t\t$$(ids.list).hideProgress();\n\t\t\t},\n\n\t\t\tonAfterRender: function() {\nconsole.error('!! todo: onAfterRender() editing');\n\t\t\t\t// webix.once(function () {\n\t\t\t\t// \t$$(self.webixUiId.objectList).data.each(function (d) {\n\t\t\t\t// \t\t$($$(self.webixUiId.objectList).getItemNode(d.id)).find('.ab-object-unsync-number').html(99);\n\t\t\t\t// \t});\n\t\t\t\t// });\n\n\t\t\t\t// // Show gear icon\n\t\t\t\t// if (this.getSelectedId(true).length > 0) {\n\t\t\t\t// \t$(this.getItemNode(this.getSelectedId(false))).find('.ab-object-list-edit').show();\n\t\t\t\t// \tself.refreshUnsyncNumber();\n\t\t\t\t// }\n\t\t\t},\n\n\t\t\tonAfterEditStop: function(state, editor, ignoreUpdate) {\n\n\t\t\t\t_logic.showGear(editor.id);\n\n\t\t\t\tif (state.value != state.old) {\n\t\t\t\t\t_logic.listBusy();\n\n\t\t\t\t\tvar selectedObject = $$(ids.list).getSelectedItem(false);\n\t\t\t\t\tselectedObject.label = state.value;\n\n\t\t\t\t\t// Call server to rename\n\t\t\t\t\tselectedObject.save()\n\t\t\t\t\t\t.catch(function () {\n\t\t\t\t\t\t\t_logic.listReady();\n\n\t\t\t\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\t\t\t\ttext: labels.common.renameErrorMessage.replace(\"{0}\", state.old)\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\t_logic.listReady();\n\n\t\t\t\t\t\t\t// TODO : should use message box\n\t\t\t\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\t\t\t\ttext: labels.common.renameSuccessMessage.replace(\"{0}\", state.value)\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonBeforeEditStop: function(state, editor) {\nconsole.error('!! todo: onBeforeEditStop() editing');\n\t\t\t\t// if (!inputValidator.validateFormat(state.value)) {\n\t\t\t\t// \treturn false;\n\t\t\t\t// }\n\n\t\t\t\t// // Validation - check duplicate\n\t\t\t\t// if (!inputValidator.rules.preventDuplicateObjectName(state.value, editor.id) && state.value != state.old) {\n\t\t\t\t// \twebix.alert({\n\t\t\t\t// \t\ttitle: self.labels.object.invalidName,\n\t\t\t\t// \t\tok: self.labels.common.ok,\n\t\t\t\t// \t\ttext: self.labels.object.duplicateName.replace(\"{0}\", state.value)\n\t\t\t\t// \t});\n\n\t\t\t\t// \treturn false;\n\t\t\t\t// }\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function selectObject()\n\t\t\t *\n\t\t\t * Perform these actions when an Object is selected in the List.\n\t\t\t */\n\t\t\tselectObject: function (id) {\n\n\t\t\t\tvar object = $$(ids.list).getItem(id);\n\t\t\t\tApp.actions.populateObjectWorkspace(object);\n\n\t//// TODO: do we need these?\n\n\t\t\t\t// // Refresh unsync number\n\t\t\t\t// self.refreshUnsyncNumber();\n\n\t\t\t\t_logic.showGear(id);\n\t\t\t},\n\n\t\t\tshowGear: function(id) {\n\t\t\t\tvar gearIcon = $$(ids.list).getItemNode(id).querySelector('.ab-object-list-edit');\n\t\t\t\tgearIcon.style.visibility = \"visible\";\n\t\t\t\tgearIcon.style.display = \"block\";\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * @function show()\n\t\t\t *\n\t\t\t * Show this component.\n\t\t\t */\n\t\t\tshow:function() {\n\n\t\t\t\t$$(ids.component).show();\n\t\t\t},\n\n\n\n\t\t\t/**\n\t\t\t * @function templateListItem\n\t\t\t *\n\t\t\t * Defines the template for each row of our ObjectList.\n\t\t\t *\n\t\t\t * @param {obj} obj the current instance of ABObject for the row.\n\t\t\t * @param {?} common the webix.common icon data structure\n\t\t\t * @return {string}\n\t\t\t */\n\t\t\ttemplateListItem: function(obj, common) {\n\t\t\t\treturn _templateListItem\n\t\t\t\t\t.replace('#label#', obj.label || '??label??')\n\t\t\t\t\t.replace('{common.iconGear}', common.iconGear);\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function callbackNewObject\n\t\t\t *\n\t\t\t * Once a New Object was created in the Popup, follow up with it here.\n\t\t\t */\n\t\t\tcallbackNewObject:function(err, object){\n\n\t\t\t\tif (err) {\n\t\t\t\t\tOP.Error.log('Error creating New Object', {error: err});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$$(ids.list).add(object);\n\t\t\t\t$$(ids.list).select(object.id);\n\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function clickNewObject\n\t\t\t *\n\t\t\t * Manages initiating the transition to the new Object Popup window\n\t\t\t */\n\t\t\tclickNewObject:function() {\n\n\t\t\t\t// show the new popup\n\t\t\t\tPopupNewObjectComponent.show();\n\t\t\t},\n\n\t\t\trename: function () {\n\t\t\t\tvar objectId = $$(ids.list).getSelectedId(false);\n\t\t\t\t$$(ids.list).edit(objectId);\n\t\t\t},\n\n\t\t\tremove: function () {\n\n\t\t\t\tvar selectedObject = $$(ids.list).getSelectedItem(false);\n\n\t\t\t\t// verify they mean to do this:\n\t\t\t\tOP.Dialog.Confirm({\n\t\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t\t\tmessage: labels.component.confirmDeleteMessage.replace('{0}', selectedObject.label),\n\t\t\t\t\tcallback: (isOK) => {\n\n\t\t\t\t\t\tif (isOK) {\n\t\t\t\t\t\t\t_logic.listBusy();\n\n\t\t\t\t\t\t\tselectedObject.destroy()\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t_logic.listReady();\n\n\t\t\t\t\t\t\t\t\t$$(ids.list).remove(selectedObject.id);\n\t\t\t\t\t\t\t\t\tApp.actions.clearObjectWorkspace();\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tcallbackObjectEditorMenu: function (action) {\n\t\t\t\tswitch (action) {\n\t\t\t\t\tcase 'rename':\n\t\t\t\t\t\t_logic.rename();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'delete':\n\t\t\t\t\t\t_logic.remove();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\t/*\n\t\t * _templateListItem\n\t\t *\n\t\t * The Object Row template definition.\n\t\t */\n\t\tvar _templateListItem = [\n\t\t\t\"<div class='ab-object-list-item'>\",\n\t\t\t\t\"#label#\",\n\t\t\t\t// \"{common.unsyncNumber}\",\n\t\t\t\t\"{common.iconGear}\",\n\t\t\t\"</div>\",\n\t\t].join('');\n\n\n\n\t\t// Expose any globally accessible Actions:\n\t\tthis.actions({\n\n\n\t\t\t/**\n\t\t\t * @function getSelectedObject\n\t\t\t *\n\t\t\t * returns which ABObject is currently selected.\n\t\t\t * @return {ABObject}  or {null} if nothing selected.\n\t\t\t */\n\t\t\tgetSelectedObject:function() {\n\t\t\t\treturn $$(ids.list).getSelectedItem();\n\t\t\t},\n\n\t\t})\n\n\n\t\t// \n\t\t// Define our external interface methods:\n\t\t// \n\t\tthis.applicationLoad = _logic.applicationLoad;\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_list.js","\n/*\n * ab_work_object_list_newObject\n *\n * Display the form for creating a new Object.  This Popup will manage several\n * different sub components for gathering Object data for saving.\n *\n * The sub components will gather the data for the object and do basic form\n * validations on their interface.\n *\n * when ready, the sub component will call onSave(values, cb)  to allow this\n * component to manage the actual final object validation, and saving to this\n * application.  On success, cb(null) will be called.  on error cb(err) will\n * be called.\n *\n */\n\nimport ABBlankObject from \"./ab_work_object_list_newObject_blank\"\n\n\n\n\nexport default class AB_Work_Object_List_NewObject extends OP.Component {   //.extend(idBase, function(App) {\n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_work_object_list_newObject');\n\t\tvar L = this.Label;\n\n\t\tvar labels = {\n\t\t\tcommon : App.labels,\n\t\t\tcomponent: {\n\t\t\t\taddNew: L('ab.object.addNew', '*Add new object')\n\t\t\t}\n\t\t}\n\n\t\t// internal list of Webix IDs to reference our UI components.\n\t\tvar ids = {\n\t\t\tcomponent: this.unique('component'),\n\t\t}\n\n\n\t\tvar BlankTab = new ABBlankObject(App);\n\n\n\t\t// Our webix UI definition:\n\t\tthis.ui = {\n\t\t\tview: \"window\",\n\t\t\tid: ids.component,\n\t\t\t// width: 400,\n\t\t\tposition: \"center\",\n\t\t\tmodal: true,\n\t\t\thead: labels.component.addNew,\n\t\t\tselectNewObject: true,\n\t\t\tbody: {\n\t\t\t\tview: \"tabview\",\n\t\t\t\tcells: [\n\t\t\t\t\tBlankTab.ui,\n\t\t\t\t\t// importObjectCreator.getCreateView(),\n\t\t\t\t\t// importCsvCreator.getCreateView()\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\n\n\n\t\t// Our init() function for setting up our UI\n\t\tthis.init = (options) => {\n\t\t\twebix.ui(this.ui);\n\n\t\t\t// register our callbacks:\n\t\t\tfor(var c in _logic.callbacks) {\n\t\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t\t}\n\n\n\t\t\tvar ourCBs = {\n\t\t\t\tonCancel: _logic.hide,\n\t\t\t\tonSave: _logic.save\n\t\t\t}\n\n\t\t\tBlankTab.init(ourCBs);\n\n\t\t}\n\n\n\n\t\t// our internal business logic\n\t\tvar _logic = this._logic = {\n\n\n\n\n\t\t\t/**\n\t\t\t * @function applicationLoad()\n\t\t\t *\n\t\t\t * prepare ourself with the current application\n\t\t\t */\n\t\t\tapplicationLoad:function(application) {\n\t\t\t\t// _logic.show();\n\t\t\t\tcurrentApplication = application;\t// remember our current Application.\n\t\t\t},\n\n\n\t\t\tcallbacks:{\n\t\t\t\tonDone:function(){}\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function hide()\n\t\t\t *\n\t\t\t * remove the busy indicator from the form.\n\t\t\t */\n\t\t\thide: function() {\n\t\t\t\tif ($$(ids.component))\n\t\t\t\t\t$$(ids.component).hide();\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function save\n\t\t\t *\n\t\t\t * take the data gathered by our child creation tabs, and\n\t\t\t * add it to our current application.\n\t\t\t *\n\t\t\t * @param {obj} values  key=>value hash of model values.\n\t\t\t * @param {fn}  cb \t\tnode style callback to indicate success/failure\n\t\t\t */\n\t\t\tsave:function (values, cb) {\n\n\t\t\t\t// must have an application set.\n\t\t\t\tif (!currentApplication) {\n\t\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\t\ttitle:'Shoot!',\n\t\t\t\t\t\ttest:'No Application Set!  Why?'\n\t\t\t\t\t});\n\t\t\t\t\tcb(true);\t// there was an error.\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// create a new (unsaved) instance of our object:\n\t\t\t\tvar newObject = currentApplication.objectNew(values);\n\n\n\t\t\t\t// have newObject validate it's values.\n\t\t\t\tvar validator = newObject.isValid();\n\t\t\t\tif (validator.fail()) {\n\t\t\t\t\tcb(validator);\t\t\t\t\t\t\t// tell current Tab component the errors\n\t\t\t\t\treturn false;\t\t\t\t\t\t\t// stop here.\n\t\t\t\t}\n\n\n\t\t\t\t// if we get here, save the new Object\n\t\t\t\tnewObject.save()\n\t\t\t\t\t.then(function(obj){\n\n\t\t\t\t\t\t// successfully done:\n\t\t\t\t\t\tcb();\t\t\t\t\t\t\t\t\t// tell current tab component save successful\n\t\t\t\t\t\t_logic.hide();\t\t\t\t\t\t\t// hide our popup\n\t\t\t\t\t\t_logic.callbacks.onDone(null, obj);\t\t// tell parent component we're done\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function(err){\n\t\t\t\t\t\tcb(err);\t\t\t\t\t\t\t\t// tell current Tab component there was an error\n\t\t\t\t\t})\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function show()\n\t\t\t *\n\t\t\t * Show this component.\n\t\t\t */\n\t\t\tshow:function() {\n\n\t\t\t\tif ($$(ids.component))\n\t\t\t\t\t$$(ids.component).show();\n\t\t\t}\n\t\t}\n\n\n\t\tvar currentApplication = null;\n\n\n\t\t// Expose any globally accessible Actions:\n\t\tthis.actions({\n\n\t\t});\n\n\n\n\t\t// \n\t\t// Define our external interface methods:\n\t\t// \n\t\tthis.applicationLoad = _logic.applicationLoad;\n\t\tthis.show = _logic.show;\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_list_newObject.js","\n/*\n * ab_work_object_list_newObject_blank\n *\n * Display the form for creating a new Application.\n *\n */\n\n\nexport default class AB_Work_Object_List_NewObject_Blank extends OP.Component {   //.extend(idBase, function(App) {\n\n    constructor(App) {\n        super(App, 'ab_work_object_list_newObject_blank');\n        var L = this.Label;\n\n        var labels = {\n            common : App.labels,\n            component: {\n                placeholderName: L('ab.object.form.placeholderName', \"*Object name\"),\n                addNewObject: L('ab.object.form.addNewObject', \"*Add Object\")\n            }\n        }\n\n        // internal list of Webix IDs to reference our UI components.\n        var ids = {\n            component: this.unique('component'),\n\n            form: this.unique('blank'),\n            buttonSave: this.unique('save'),\n            buttonCancel: this.unique('cancel')\n        }\n\n\n\n        // Our webix UI definition:\n        this.ui = {\n            id: ids.component,\n            header: labels.common.create,\n            body: {\n                view: \"form\",\n                id: ids.form,\n                width: 400,\n                rules: {\n\n// TODO:\n// name: inputValidator.rules.validateObjectName\n                },\n                elements: [\n                    { view: \"text\", label: labels.common.formName, name: \"name\", required: true, placeholder: labels.component.placeholderName, labelWidth: 70 },\n                    {\n                        margin: 5,\n                        cols: [\n                            { fillspace: true },\n                            {\n                                view: \"button\",\n                                id: ids.buttonCancel,\n                                value: labels.common.cancel, \n                                css: \"ab-cancel-button\",\n                                autowidth: true,\n                                click: function () {\n                                    _logic.cancel();\n                                }\n                            },\n                            {\n                                view: \"button\",\n                                id: ids.buttonSave,\n                                value: labels.component.addNewObject,\n                                autowidth: true, \n                                type: \"form\",\n                                click: function () {\n                                    return _logic.save();\n                                }\n                            }\n                        ]\n                    }\n                ]\n            }\n        };\n\n\n\n        // Our init() function for setting up our UI\n        this.init = ( options ) => {\n            // webix.extend($$(ids.form), webix.ProgressBar);\n\n            // load up our callbacks.\n            for(var c in _logic.callbacks) {\n                _logic.callbacks[c] = options[c] || _logic.callbacks[c];\n            }\n\n        }\n\n\n\n        // our internal business logic \n        var _logic = this._logic = {\n\n            callbacks:{\n                onCancel: function() { console.warn('NO onCancel()!') },\n                onSave  : function(values, cb) { console.warn('NO onSave()!') },\n            },\n\n            \n            cancel:function() {\n\n                _logic.formClear();\n                _logic.callbacks.onCancel();\n            },\n\n\n            formClear:function() {\n                $$(ids.form).clearValidation();\n                $$(ids.form).clear();\n            },\n\n\n            /**\n             * @function hide()\n             *\n             * hide this component.\n             */\n            hide:function() {\n\n                $$(ids.component).hide();\n            },\n\n\n            /**\n             * @function save\n             *\n             * verify the current info is ok, package it, and return it to be \n             * added to the application.createModel() method.\n             */\n            save:function() {\n                var saveButton = $$(ids.buttonSave);\n                saveButton.disable();\n\n                var Form = $$(ids.form);\n\n                Form.clearValidation();\n\n                // if it doesn't pass the basic form validation, return:\n                if (!Form.validate()) {\n                    saveButton.enable();\n                    return false;\n                }\n\n                var values = Form.getValues();\n\n\n                // now send data back to be added:\n                _logic.callbacks.onSave(values, function(validator) {\n\n                    if (validator) {\n                        validator.updateForm(Form);\n\n                        // get notified if there was an error saving.\n                        saveButton.enable();\n                        return false;\n                    } \n\n                    // if there was no error, clear the form for the next\n                    // entry:\n                    _logic.formClear();\n                    saveButton.enable();\n                });\n\n            },\n\n\n            /**\n             * @function show()\n             *\n             * Show this component.\n             */\n            show:function() {\n\n                if ($$(ids.component))\n                    $$(ids.component).show();\n            }\n        }\n\n\n\n        // Expose any globally accessible Actions:\n        this.actions({\n\n\n            /**\n             * @function populateApplicationForm()\n             *\n             * Initialze the Form with the values from the provided ABApplication.\n             *\n             * If no ABApplication is provided, then show an empty form. (create operation)\n             *\n             * @param {ABApplication} Application   [optional] The current ABApplication \n             *                                      we are working with.\n             */\n            // populateApplicationForm:function(Application){\n                \n            //  _logic.formReset();\n            //  if (Application) {\n            //      // populate Form here:\n            //      _logic.formPopulate(Application);\n            //  }\n            //  _logic.permissionPopulate(Application);\n            //  _logic.show();\n            // }\n\n        })\n\n\n\n        // \n        // Define our external interface methods:\n        // \n\n\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_list_newObject_blank.js","\n/*\n * ab_work_object_workspace\n *\n * Manage the Object Workspace area.\n *\n */\n\nimport ABApplication from \"../classes/ABApplication\"\nimport ABWorkspaceDatatable from \"./ab_work_object_workspace_datatable\"\nimport ABPopupDefineLabel from \"./ab_work_object_workspace_popupDefineLabel\"\nimport ABPopupFrozenColumns from \"./ab_work_object_workspace_popupFrozenColumns\"\nimport ABPopupHideFields from \"./ab_work_object_workspace_popupHideFields\"\nimport ABPopupNewDataField from \"./ab_work_object_workspace_popupNewDataField\"\nimport ABPopupSortField from \"./ab_work_object_workspace_popupSortFields\"\n\n\nexport default class ABWorkObjectWorkspace extends OP.Component {\n    \n    /**\n     * @param {object} ??\n     */\n    constructor(App) {\n        super(App, 'ab_work_object_workspace');\n        var L = this.Label;\n        \n        var labels = {\n            common: App.labels,\n            component: {\n                addNewRow: L('ab.object.addNewRow', \"*Add new row\"),\n                selectObject: L('ab.object.selectObject', \"*Select an object to work with.\"),\n                // formHeader: L('ab.application.form.header', \"*Application Info\"),\n                hideFields: L('ab.object.toolbar.hideFields', \"*Hide fields\"),\n                filterFields: L('ab.object.toolbar.filterFields', \"*Add filters\"),\n                sortFields: L('ab.object.toolbar.sortFields', \"*Apply sort\"),\n                frozenColumns: L('ab.object.toolbar.frozenColumns', \"*Frozen columns\"),\n                defineLabel: L('ab.object.toolbar.defineLabel', \"*Define label\"),\n                permission: L('ab.object.toolbar.permission', \"*Permission\"),\n                addFields: L('ab.object.toolbar.addFields', \"*Add new column\"),\n                \"export\": L('ab.object.toolbar.export', \"*Export\"),\n                confirmDeleteTitle : L('ab.object.delete.title', \"*Delete data field\"),\n                confirmDeleteMessage : L('ab.object.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n            }\n        };\n\n\n\n    \t// internal list of Webix IDs to reference our UI components.\n    \tvar ids = {\n    \t\tcomponent: this.unique('component'),\n\n    \t\tbuttonAddField: this.unique('buttonAddField'),\n    \t\tbuttonExport: this.unique('buttonExport'),\n    \t\tbuttonFieldsVisible: this.unique('buttonFieldsVisible'),\n    \t\tbuttonFilter: this.unique('buttonFilter'),\n    \t\tbuttonFrozen: this.unique('buttonFrozen'),\n    \t\tbuttonLabel: this.unique('buttonLabel'),\n    \t\tbuttonRowNew: this.unique('buttonRowNew'),\n    \t\tbuttonSort: this.unique('buttonSort'),\n\n    \t\tdatatable: this.unique('datatable'),\n\n    \t\t// Toolbar:\n    \t\ttoolbar: this.unique('toolbar'),\n\n    \t\tnoSelection: this.unique('noSelection'),\n    \t\tselectedObject: this.unique('selectedObject'),\n\n    \t}\n\n\n        // The DataTable that displays our object:\n        var DataTable = new ABWorkspaceDatatable(App);\n\n        // Various Popups on our page:\n        var PopupDefineLabelComponent = new ABPopupDefineLabel(App);\n\n        var PopupFrozenColumnsComponent = new ABPopupFrozenColumns(App);\n\n        var PopupHideFieldComponent = new ABPopupHideFields(App);\n\n        var PopupNewDataFieldComponent = new ABPopupNewDataField(App);\n\n        var PopupSortFieldComponent = new ABPopupSortField(App);\n\n    \t// Our webix UI definition:\n    \tthis.ui = {\n    \t\tview:'multiview',\n    \t\tid: ids.component,\n    \t\trows:[\n    \t\t\t{\n    \t\t\t\tid: ids.noSelection,\n    \t\t\t\trows:[\n    \t\t\t\t\t{\n    \t\t\t\t\t\tmaxHeight: App.config.xxxLargeSpacer,\n    \t\t\t\t\t\thidden: App.config.hideMobile\n    \t\t\t\t\t},\n    \t\t\t\t\t{\n    \t\t\t\t\t\tview:'label',\n    \t\t\t\t\t\talign: \"center\",\n    \t\t\t\t\t\tlabel:labels.component.selectObject\n    \t\t\t\t\t},\n    \t\t\t\t\t{\n    \t\t\t\t\t\tmaxHeight: App.config.xxxLargeSpacer,\n    \t\t\t\t\t\thidden: App.config.hideMobile\n    \t\t\t\t\t}\n    \t\t\t\t]\n    \t\t\t},\n    \t\t\t{\n    \t\t\t\tid: ids.selectedObject,\n    \t\t\t\trows: [\n    \t\t\t\t\t{\n    \t\t\t\t\t\tview: 'toolbar',\n    \t\t\t\t\t\tid: ids.toolbar,\n    \t\t\t\t\t\thidden: true,\n    \t\t\t\t\t\tcss: \"ab-data-toolbar\",\n    \t\t\t\t\t\tcols: [\n    \t\t\t\t\t\t\t{\n    \t\t\t\t\t\t\t\tview: \"button\",\n    \t\t\t\t\t\t\t\tid: ids.buttonFieldsVisible,\n    \t\t\t\t\t\t\t\tlabel: labels.component.hideFields,\n    \t\t\t\t\t\t\t\ticon: \"eye-slash\",\n    \t\t\t\t\t\t\t\ttype: \"icon\",\n    \t\t\t\t\t\t\t\tautowidth: true,\n    \t\t\t\t\t\t\t\tbadge: 0,\n    \t\t\t\t\t\t\t\tclick: function () {\n    \t\t\t\t\t\t\t\t\t_logic.toolbarFieldsVisible(this.$view);\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t},\n    \t\t\t\t\t\t\t{\n    \t\t\t\t\t\t\t\tview: 'button',\n    \t\t\t\t\t\t\t\tid: ids.buttonFilter,\n    \t\t\t\t\t\t\t\tlabel: labels.component.filterFields,\n    \t\t\t\t\t\t\t\ticon: \"filter\",\n    \t\t\t\t\t\t\t\ttype: \"icon\",\n    \t\t\t\t\t\t\t\tautowidth: true,\n    \t\t\t\t\t\t\t\tbadge: 0,\n    \t\t\t\t\t\t\t\tclick: function () {\n    \t\t\t\t\t\t\t\t\t_logic.toolbarFilter(this);\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t},\n    \t\t\t\t\t\t\t{\n    \t\t\t\t\t\t\t\tview: 'button',\n    \t\t\t\t\t\t\t\tid: ids.buttonSort,\n    \t\t\t\t\t\t\t\tlabel: labels.component.sortFields,\n    \t\t\t\t\t\t\t\ticon: \"sort\",\n    \t\t\t\t\t\t\t\ttype: \"icon\",\n    \t\t\t\t\t\t\t\tautowidth: true,\n    \t\t\t\t\t\t\t\tbadge: 0,\n    \t\t\t\t\t\t\t\tclick: function () {\n    \t\t\t\t\t\t\t\t\t_logic.toolbarSort(this.$view);\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t},\n    \t\t\t\t\t\t\t{\n    \t\t\t\t\t\t\t\tview: 'button',\n    \t\t\t\t\t\t\t\tid: ids.buttonFrozen,\n    \t\t\t\t\t\t\t\tlabel: labels.component.frozenColumns,\n    \t\t\t\t\t\t\t\ticon: \"thumb-tack\",\n    \t\t\t\t\t\t\t\ttype: \"icon\",\n    \t\t\t\t\t\t\t\tautowidth: true,\n    \t\t\t\t\t\t\t\tbadge: 0,\n    \t\t\t\t\t\t\t\tclick: function(){\n    \t\t\t\t\t\t\t\t\t_logic.toolbarFrozen(this.$view);\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t},\n    \t\t\t\t\t\t\t{\n    \t\t\t\t\t\t\t\tview: 'button',\n    \t\t\t\t\t\t\t\tid: ids.buttonLabel,\n    \t\t\t\t\t\t\t\tlabel: labels.component.defineLabel,\n    \t\t\t\t\t\t\t\ticon: \"crosshairs\",\n    \t\t\t\t\t\t\t\ttype: \"icon\",\n    \t\t\t\t\t\t\t\tautowidth: true,\n    \t\t\t\t\t\t\t\tclick: function () {\n    \t\t\t\t\t\t\t\t\t_logic.toolbarDefineLabel(this.$view);\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t},\n    \t\t\t\t\t\t\t{\n    \t\t\t\t\t\t\t\tview: 'button',\n    \t\t\t\t\t\t\t\tlabel: labels.component.permission,\n    \t\t\t\t\t\t\t\ticon: \"lock\",\n    \t\t\t\t\t\t\t\ttype: \"icon\",\n    \t\t\t\t\t\t\t\tautowidth: true,\n    \t\t\t\t\t\t\t\tclick: function() {\n    \t\t\t\t\t\t\t\t\t_logic.toolbarPermission(this.$view);\n    \t\t\t\t\t\t\t\t}\n\n    \t\t\t\t\t\t\t},\n    \t\t\t\t\t\t\t{\n    \t\t\t\t\t\t\t\tview: 'button',\n    \t\t\t\t\t\t\t\tid: ids.buttonAddField,\n    \t\t\t\t\t\t\t\tlabel: labels.component.addFields,\n    \t\t\t\t\t\t\t\ticon: \"plus\",\n    \t\t\t\t\t\t\t\ttype: \"icon\",\n    \t\t\t\t\t\t\t\tautowidth: true,\n    \t\t\t\t\t\t\t\tclick:function() {\n    \t\t\t\t\t\t\t\t\t_logic.toolbarAddFields(this.$view);\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t},\n    \t\t\t\t\t\t\t{\n    \t\t\t\t\t\t\t\tview: 'button',\n    \t\t\t\t\t\t\t\tid: ids.buttonExport,\n    \t\t\t\t\t\t\t\tlabel: labels.component.export,\n    \t\t\t\t\t\t\t\ticon: \"download\",\n    \t\t\t\t\t\t\t\ttype: \"icon\",\n    \t\t\t\t\t\t\t\tautowidth: true,\n    \t\t\t\t\t\t\t\tclick: function() {\n    \t\t\t\t\t\t\t\t\t_logic.toolbarButtonExport(this.$view);\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t]\n    \t\t\t\t\t},\n    \t\t\t\t\tDataTable.ui,\n    \t\t\t\t\t{\n    \t\t\t\t\t\tcols: [\n    \t\t\t\t\t\t\t{\n    \t\t\t\t\t\t\t\tview: \"button\",\n    \t\t\t\t\t\t\t\tid: ids.buttonRowNew,\n    \t\t\t\t\t\t\t\tvalue: labels.component.addNewRow,\n    \t\t\t\t\t\t\t\tclick: function () {\n    \t\t\t\t\t\t\t\t\t_logic.rowAdd();\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t]\n    \t\t\t\t\t}\n    \t\t\t\t]\n\n    \t\t\t}\n    \t\t]\n    \t}\n\n\n\n\n    \t// Our init() function for setting up our UI\n    \tthis.init = function() {\n    \t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n    \t\tDataTable.init({\n    \t\t\tonEditorMenu:_logic.callbackHeaderEditorMenu\n    \t\t});\n\n    \t\tPopupDefineLabelComponent.init({\n    \t\t\tonChange:_logic.callbackDefineLabel\t\t// be notified when there is a change in the label\n    \t\t});\n\n    \t\tPopupFrozenColumnsComponent.init({\n    \t\t\tonChange:_logic.callbackFrozenColumns\t\t// be notified when there is a change in the frozen columns\n    \t\t});\n\n    \t\tPopupHideFieldComponent.init({\n    \t\t\tonChange:_logic.callbackFieldsVisible\t\t// be notified when there is a change in the hidden fields\n    \t\t});\n\n    \t\tPopupNewDataFieldComponent.init({\n    \t\t\tonSave:_logic.callbackAddFields\t\t\t// be notified when a new Field is created & saved\n    \t\t});\n\n// ?? what is this for ??\n    \t\tvar fieldList = DataTable.getFieldList();\n\n    \t\tPopupSortFieldComponent.init({\n    \t\t\tonChange:_logic.callbackSortFields\t\t// be notified when there is a change in the sort fields\n    \t\t});\n\n\n    \t\t$$(ids.noSelection).show();\n    \t}\n\n        \n\n        var CurrentObject = null;\n\n\n    \t// our internal business logic\n    \tvar _logic = {\n\n\n    \t\t/**\n    \t\t * @function callbackDefineLabel\n    \t\t *\n    \t\t * call back for when the Define Label popup is finished.\n    \t\t */\n    \t\tcallbackAddFields:function(field) {\n    \t\t\tDataTable.refresh();\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function callbackDefineLabel\n    \t\t *\n    \t\t * call back for when the Define Label popup is finished.\n    \t\t */\n    \t\tcallbackDefineLabel: function() {\n\n    \t\t},\n\n    \t\t/**\n    \t\t * @function callbackFrozenColumns\n    \t\t *\n    \t\t * call back for when the hidden fields have changed.\n    \t\t */\n    \t\tcallbackFrozenColumns: function() {\n\n    \t\t\tvar frozenID = CurrentObject.workspaceFrozenColumnID;\n\n    \t\t\tif (typeof(frozenID) != \"undefined\") {\n    \t\t\t\tvar badgeNumber = DataTable.getColumnIndex(frozenID) + 1;\n\n    \t\t\t\t$$(ids.buttonFrozen).define('badge', badgeNumber);\n    \t\t\t\t$$(ids.buttonFrozen).refresh();\n    \t\t\t}\n\n    \t\t\tDataTable.refresh();\n    \t\t},\n\n    \t\t/**\n    \t\t * @function callbackFieldsVisible\n    \t\t *\n    \t\t * call back for when the hidden fields have changed.\n    \t\t */\n    \t\tcallbackFieldsVisible: function() {\n\n    \t\t\tvar hiddenFields = CurrentObject.workspaceHiddenFields;\n\n    \t\t\tif (typeof(hiddenFields) != \"undefined\") {\n    \t\t\t\t$$(ids.buttonFieldsVisible).define('badge', hiddenFields.length);\n    \t\t\t\t$$(ids.buttonFieldsVisible).refresh();\n\n    \t\t\t}\n    \t\t\tDataTable.refresh();\n\n    \t\t\t// if you unhide a field it may fall inside the frozen columns range so lets check\n    \t\t\t_logic.callbackFrozenColumns();\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function callbackHeaderEditorMenu\n    \t\t *\n    \t\t * call back for when an editor menu action has been selected.\n    \t\t * @param {string} action [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n    \t\t */\n    \t\tcallbackHeaderEditorMenu: function(action, field, node) {\n\n    \t\t\tswitch(action) {\n\n    \t\t\t\tcase 'hide':\n    \t\t\t\tcase 'filter':\n    \t\t\t\tcase 'sort':\nconsole.error('!! TODO: callbackHeaderEditorMenu():  unimplemented action:'+action);\n    \t\t\t\t\tbreak;\n\n    \t\t\t\tcase 'edit':\n    \t\t\t\t\t// pass control on to our Popup:\n    \t\t\t\t\tPopupNewDataFieldComponent.show(node, field);\n    \t\t\t\t\tbreak;\n\n    \t\t\t\tcase 'delete':\n\n    \t\t\t\t\t// verify they mean to do this:\n    \t\t\t\t\tOP.Dialog.Confirm({\n    \t\t\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n    \t\t\t\t\t\tmessage: labels.component.confirmDeleteMessage.replace('{0}', field.label),\n    \t\t\t\t\t\tcallback:function( isOK ) {\n\n    \t\t\t\t\t\t\tif (isOK) {\n\n    \t\t\t\t\t\t\t\tfield.destroy()\n    \t\t\t\t\t\t\t\t.then(()=>{\n    \t\t\t\t\t\t\t\t\tDataTable.refresh();\n    \t\t\t\t\t\t\t\t});\n\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t}\n    \t\t\t\t\t})\n    \t\t\t\t\tbreak;\n    \t\t\t}\n\n    \t\t},\n\n    \t\t/**\n    \t\t * @function callbackSortFields\n    \t\t *\n    \t\t * call back for when the sort fields popup changes\n    \t\t */\n    \t\tcallbackSortFields: function() {\n\n    \t\t\tvar sortFields = CurrentObject.workspaceSortFields;\n\n    \t\t\tif (typeof(sortFields) != \"undefined\") {\n    \t\t\t\t$$(ids.buttonSort).define('badge', sortFields.length);\n    \t\t\t\t$$(ids.buttonSort).refresh();\n    \t\t\t}\n\n    \t\t\tDataTable.sortTable();\n    \t\t},\n\n\n\n    \t\t/**\n    \t\t * @function rowAdd()\n    \t\t *\n    \t\t * When our [add row] button is pressed, alert our DataTable\n    \t\t * component to add a row.\n    \t\t */\n    \t\trowAdd:function() {\n    \t\t\tDataTable.addRow();\n    \t\t},\n\n\n\n    \t\t/**\n    \t\t * @function show()\n    \t\t *\n    \t\t * Show this component.\n    \t\t */\n    \t\tshow:function() {\n\n    \t\t\t$$(ids.component).show();\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function toolbarAddFields\n    \t\t *\n    \t\t * Show the popup to allow the user to create new fields for\n    \t\t * this object.\n    \t\t */\n    \t\ttoolbarAddFields: function($view) {\n    \t\t\tPopupNewDataFieldComponent.show($view);\n    \t\t},\n\n\n    \t\ttoolbarButtonExport: function($view) {\nconsole.error('TODO: Button Export()');\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function toolbarDefineLabel\n    \t\t *\n    \t\t * Show the popup to allow the user to define the default label for\n    \t\t * this object.\n    \t\t */\n    \t\ttoolbarDefineLabel: function($view) {\n    \t\t\tPopupDefineLabelComponent.show($view);\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function toolbarFieldsVisible\n    \t\t *\n    \t\t * Show the popup to allow the user to hide columns for this view.\n    \t\t */\n    \t\ttoolbarFieldsVisible: function($view) {\n    \t\t\tPopupHideFieldComponent.show($view);\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function toolbarFilter\n    \t\t *\n    \t\t * show the popup to add a filter to the datatable\n    \t\t */\n    \t\ttoolbarFilter: function($view) {\n// self.refreshPopupData();\n// $$(self.webixUiId.filterFieldsPopup).show($view);\nconsole.error('TODO: button filterFields()');\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function toolbarFrozen\n    \t\t *\n    \t\t * show the popup to freeze columns for the datatable\n    \t\t */\n    \t\ttoolbarFrozen: function ($view) {\n    \t\t\tPopupFrozenColumnsComponent.show($view);\n    \t\t},\n\n\n    \t\ttoolbarPermission: function ($view) {\nconsole.error('TODO: toolbarPermission()');\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function toolbarSort\n    \t\t *\n    \t\t * show the popup to sort the datatable\n    \t\t */\n    \t\ttoolbarSort:function($view) {\n    \t\t\tPopupSortFieldComponent.show($view);\n                    // self.refreshPopupData();\n                    // $$(self.webixUiId.sortFieldsPopup).show($view);\n                    //console.error('TODO: toolbarSort()');\n    \t\t}\n    \t}\n        this._logic = _logic;\n\n\n\n    \t// Expose any globally accessible Actions:\n    \tthis.actions({\n\n\n\n    \t\t/**\n    \t\t * @function clearObjectWorkspace()\n    \t\t *\n    \t\t * Clear the object workspace.\n    \t\t */\n    \t\tclearObjectWorkspace:function(){\n\n    \t\t\t// NOTE: to clear a visual glitch when multiple views are updating\n    \t\t\t// at one time ... stop the animation on this one:\n    \t\t\t$$(ids.noSelection).show(false, false);\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function populateObjectWorkspace()\n    \t\t *\n    \t\t * Initialize the Object Workspace with the provided ABObject.\n    \t\t *\n    \t\t * @param {ABObject} object  \tcurrent ABObject instance we are working with.\n    \t\t */\n    \t\tpopulateObjectWorkspace: function(object) {\n\n    \t\t\t$$(ids.toolbar).show();\n    \t\t\t$$(ids.selectedObject).show();\n\n    \t\t\tCurrentObject = object;\n\n    \t\t\tApp.actions.populateObjectPopupAddDataField(object);\n\n    \t\t\tDataTable.objectLoad(object);\n\n    \t\t\t// update hiddenFields\n\n    \t\t\tPopupDefineLabelComponent.objectLoad(object);\n    \t\t\tPopupFrozenColumnsComponent.objectLoad(object);\n    \t\t\tPopupHideFieldComponent.objectLoad(object);\n    \t\t\tPopupSortFieldComponent.objectLoad(object);\n\n    \t\t\t_logic.callbackFieldsVisible();\n    \t\t\t_logic.callbackFrozenColumns();\n    \t\t\t_logic.callbackSortFields();\n\n    \t\t}\n\n\n    \t});\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace.js","\n/*\n * ab_work_object_workspace\n *\n * Manage the Object Workspace area.\n *\n */\n\nimport AB_Work_HeaderEditMenu from \"./ab_work_object_workspace_popupHeaderEditMenu\"\n\n\nexport default class ABWorkObjectDatatable extends OP.Component {\n    \n    constructor(App) {\n        super(App, 'ab_work_object_workspace_datatable');\n        var L = this.Label;\n        \n        var labels = {\n            common: App.labels,\n            component: {\n\n                confirmDeleteRowTitle : L('ab.object.deleteRow.title', \"*Delete data\"),\n                confirmDeleteRowMessage : L('ab.object.deleteRow.message', \"*Do you want to delete this row?\"),\n\n            }\n        };\n\n\n    \t// internal list of Webix IDs to reference our UI components.\n    \tvar ids = {\n    \t\tcomponent: this.unique('component'),\n\n    \t}\n\n\n        var PopupHeaderEditComponent = new AB_Work_HeaderEditMenu(App);\n\n\n    \t// Our webix UI definition:\n    \tthis.ui = {\n    \t\tview: \"datatable\",\n    \t\tid: ids.component,\n    \t\tresizeColumn: true,\n    \t\tresizeRow: true,\n    \t\tprerender: false,\n    \t\teditable: true,\n    \t\tfixedRowHeight: false,\n    \t\teditaction: \"custom\",\n    \t\tselect: \"cell\",\n    \t\tdragColumn: true,\n    \t\ton: {\n    \t\t\tonBeforeSelect: function (data, preserve) {\n\nconsole.error('!! ToDo: onBeforeSelect()');\n    \t\t\t\t// var itemNode = this.getItemNode({ row: data.row, column: data.column });\n\n    \t\t\t\t// var column = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == data.column; });\n    \t\t\t\t// if (!column || column.length < 1) {\n    \t\t\t\t// \tconsole.log('System could not found this column data');\n    \t\t\t\t// \treturn false;\n    \t\t\t\t// } else\n    \t\t\t\t// \tcolumn = column[0];\n\n    \t\t\t\t// return dataFieldsManager.customEdit(AD.classes.AppBuilder.currApp, AD.classes.AppBuilder.currApp.currObj, column, data.row, itemNode);\n    \t\t\t},\n    \t\t\tonAfterSelect: function (data, prevent) {\n    \t\t\t\t_logic.onAfterSelect(data, prevent);\n    \t\t\t},\n    \t\t\tonCheck: function (row, col, val) { // Update checkbox data\nconsole.error('!! ToDo: onCheck()');\n    \t\t\t\t// var item = $$(self.webixUiId.objectDatatable).getItem(row);\n\n    \t\t\t\t// self.updateRowData({ value: (val > 0 ? true : false) }, { row: row, column: col }, false)\n    \t\t\t\t// \t.fail(function (err) {\n    \t\t\t\t// \t\t// Rollback\n    \t\t\t\t// \t\titem[col] = !val;\n    \t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).updateItem(row, item);\n    \t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).refresh(row);\n\n    \t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n    \t\t\t\t// \t})\n    \t\t\t\t// \t.then(function (result) {\n    \t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n    \t\t\t\t// \t});\n    \t\t\t},\n    \t\t\tonBeforeEditStop: function (state, editor) {\nconsole.error('!! ToDo: onBeforeEditStop()');\n    \t\t\t\t// var column = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == editor.column; });\n\n    \t\t\t\t// if (!column || column.length < 1) return true;\n    \t\t\t\t// column = column[0];\n\n    \t\t\t\t// var passValidate = dataFieldsManager.validate(column, state.value);\n\n    \t\t\t\t// if (!passValidate) {\n    \t\t\t\t// \t$$(self.webixUiId.objectDatatable).editCancel();\n    \t\t\t\t// }\n\n    \t\t\t\t// return passValidate;\n    \t\t\t},\n    \t\t\tonAfterEditStop: function (state, editor, ignoreUpdate) {\n    \t\t\t\t_logic.onAfterEditStop(state, editor, ignoreUpdate);\n    \t\t\t},\n    \t\t\tonAfterLoad: function () {\n    \t\t\t\t_logic.onAfterLoad();\n    \t\t\t},\n    \t\t\tonColumnResize: function (id, newWidth, oldWidth, user_action) {\nconsole.error('!! ToDo: onColumnResize()');\n    \t\t\t\t// var columnConfig = $$(self.webixUiId.objectDatatable).getColumnConfig(id);\n    \t\t\t\t// var column = self.data.columns.filter(function (col) { return col.id == columnConfig.dataId; });\n    \t\t\t\t// if (column && column[0])\n    \t\t\t\t// \tcolumn[0].setWidth(newWidth);\n\n    \t\t\t\t// // if (typeof columnConfig.template !== 'undefined' && columnConfig.template !== null) {\n    \t\t\t\t// // \t// For calculate/refresh row height\n    \t\t\t\t// // \t$$(self.webixUiId.objectDatatable).render();\n    \t\t\t\t// // }\n    \t\t\t},\n    \t\t\tonBeforeColumnDrag: function (sourceId, event) {\nconsole.error('!! ToDo: onBeforeColumnDrag()');\n    \t\t\t\t// if (sourceId === 'appbuilder_trash') // Remove column\n    \t\t\t\t// \treturn false;\n    \t\t\t\t// else\n    \t\t\t\t// \treturn true;\n    \t\t\t},\n    \t\t\tonBeforeColumnDrop: function (sourceId, targetId, event) {\nconsole.error('!! ToDo: onBeforeColumnDrag()');\n    \t\t\t\t// if (targetId === 'appbuilder_trash') // Remove column\n    \t\t\t\t// \treturn false;\n\n    \t\t\t\t// if ($$(self.webixUiId.visibleButton).config.badge > 0) {\n    \t\t\t\t// \twebix.alert({\n    \t\t\t\t// \t\ttitle: self.labels.object.couldNotReorderField,\n    \t\t\t\t// \t\tok: self.labels.common.ok,\n    \t\t\t\t// \t\ttext: self.labels.object.couldNotReorderFieldDetail\n    \t\t\t\t// \t});\n\n    \t\t\t\t// \treturn false;\n    \t\t\t\t// }\n    \t\t\t},\n    \t\t\tonAfterColumnDrop: function (sourceId, targetId, event) {\nconsole.error('!! ToDo: onAfterColumnDrop()');\n    \t\t\t\t// self.reorderColumns();\n    \t\t\t},\n    \t\t\tonAfterColumnShow: function (id) {\nconsole.error('!! ToDo: onAfterColumnShow()');\n    \t\t\t\t// $$(self.webixUiId.visibleFieldsPopup).showField(id);\n    \t\t\t},\n    \t\t\tonAfterColumnHide: function (id) {\nconsole.error('!! ToDo: onAfterColumnHide()');\n    \t\t\t\t// $$(self.webixUiId.visibleFieldsPopup).hideField(id);\n    \t\t\t},\n\n    \t\t\tonHeaderClick: function (id, e, node) {\n    \t\t\t\t_logic.onHeaderClick(id, e, node);\n    \t\t\t}\n    \t\t}\n    \t}\n\n\n\n    \t// Our init() function for setting up our UI\n    \tthis.init = (options) => {\n\n    \t\t// register our callbacks:\n    \t\tfor(var c in _logic.callbacks) {\n    \t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n    \t\t}\n\n    \t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n            PopupHeaderEditComponent.init({\n                onClick:_logic.callbackHeaderEdit       // be notified when there is a change in the hidden fields\n            })\n\n\n    \t\t// NOTE: register the onAfterRender() here, so it only registers\n    \t\t// one.\n    \t\tvar DataTable = $$(ids.component);\n    \t\tvar throttleOnAfterRender = null;\n    \t\tDataTable.attachEvent(\"onAfterRender\", function(data){\n\n    \t\t\tif (throttleOnAfterRender) clearTimeout(throttleOnAfterRender);\n    \t\t\tthrottleOnAfterRender = setTimeout(()=>{\n    \t\t\t\tif (CurrentObject) {\n    \t\t\t\t\tCurrentObject.customDisplays(data, App, DataTable);\n    \t\t\t\t}\n    \t\t\t}, 150);\n\n    \t\t});\n\n\n    \t\t// Process our onItemClick events. \n    \t\t// this is a good place to check if our delete/trash icon was clicked.\n    \t\tDataTable.attachEvent(\"onItemClick\", function (id, e, node) {\n\n    \t\t\t// make sure we have an object selected before processing this.\n    \t\t\tif (!CurrentObject) { return; }\n\n\n    \t\t\t// if this was our trash icon:\n    \t\t\tif (e.target.className.indexOf('trash') > -1) {\n\n    \t\t\t\tOP.Dialog.Confirm({\n    \t\t\t\t\ttitle: labels.component.confirmDeleteRowTitle,\n    \t\t\t\t\ttext:  labels.component.confirmDeleteRowMessage,\n    \t\t\t\t\tcallback: function (result) {\n    \t\t\t\t\t\tif (result) {\n\n    \t\t\t\t\t\t\tCurrentObject.model()\n    \t\t\t\t\t\t\t.delete(id)\n    \t\t\t\t\t\t\t.then((response)=>{\n\n    \t\t\t\t\t\t\t\tif (response.numRows > 0) {\n    \t\t\t\t\t\t\t\t\tDataTable.remove(id);\n    \t\t\t\t\t\t\t\t\tDataTable.clearSelection();\n    \t\t\t\t\t\t\t\t} else {\n\n    \t\t\t\t\t\t\t\t\tOP.Dialog.Alert({\n    \t\t\t\t\t\t\t\t\t\ttext:'No rows were effected.  This does not seem right.'\n    \t\t\t\t\t\t\t\t\t})\n//// TODO: what do we do here?\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t.catch((err)=>{\n\n    \t\t\t\t\t\t\t\tOP.Error.log('Error deleting item:', {error:err});\n\n//// TODO: what do we do here?\t\n    \t\t\t\t\t\t\t})\n    \t\t\t\t\t\t}\n\n    \t\t\t\t\t\tDataTable.clearSelection();\n    \t\t\t\t\t\treturn true;\n    \t\t\t\t\t}\n    \t\t\t\t});\n    \t\t\t}\t\n    \t\t\t\n    \t\t});\n\n    \t}\n\n\n\n    \tvar CurrentObject = null;\t\t// current ABObject being displayed\n    \tvar EditField\t= null;\t\t\t// which field (column header) is popup editor for\n    \tvar EditNode\t= null;\t\t\t// which html node (column header) is popup editor for\n\n\n\n    \t// our internal business logic\n    \tvar _logic = this._logic = {\n\n\n    \t\tcallbacks:{\n\n    \t\t\t/**\n    \t\t\t * @function onEditorMenu\n    \t\t\t * report back which menu action was clicked.\n    \t\t\t * We get the info from our popupHeaderEditor component, but all the\n    \t\t\t * logic to respond to those options are in our parent. So we pass it\n    \t\t\t * on ...\n    \t\t\t *\n    \t\t\t * @param {string} action [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n    \t\t\t * @param {ABField} field  the field to which the action is to be applied\n    \t\t\t * @param {dom} node  the optional html node for this header item.\n    \t\t\t */\n    \t\t\tonEditorMenu: function(action, field) {  }\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function callbackHeaderEdit\n    \t\t *\n    \t\t * call back for when an item in the Header Edit Menu has been selected.\n    \t\t * @param {string} action the action requested for this field:\n    \t\t */\n    \t\tcallbackHeaderEdit: function(action) {\n\n    \t\t\tPopupHeaderEditComponent.hide();\n    \t\t\t_logic.callbacks.onEditorMenu(action, EditField, EditNode);\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function getColumnIndex\n    \t\t *\n    \t\t * return the column index of a given column ID\n    \t\t * @param {string} id column id you want the index of\n    \t\t */\n    \t\tgetColumnIndex: function(id) {\n    \t\t\tvar DataTable = $$(ids.component);\n\n    \t\t\treturn DataTable.getColumnIndex(id);\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function getColumnConfig\n    \t\t *\n    \t\t * return the column config of a datagrid\n    \t\t * @param {string} id datagrid id you want the column info from\n    \t\t */\n    \t\tgetFieldList: function() {\n    \t\t\tvar DataTable = $$(ids.component);\n\n    \t\t\treturn DataTable.fieldList;\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function onAfterEditStop\n    \t\t * When an editor is finished.\n    \t\t * @param {json} state\n    \t\t * @param {} editor\n    \t\t * @param {} ignoreUpdate\n    \t\t * @return\n    \t\t */\n    \t\tonAfterEditStop: function (state, editor, ignoreUpdate) {\n\n    \t\t\t// state:   {value: \"new value\", old: \"old value\"}\n    \t\t\t// editor:  { column:\"columnName\", row:ID, value:'value', getInputNode:fn(), config:{}, focus: fn(), getValue: fn(), setValue: function, getInputNode: function, render: function}\n\n    \t\t\tvar DataTable = $$(ids.component);\n\n    \t\t\tif (state.value != state.old) {\n\n\n\n    \t\t\t\tvar item = DataTable.getItem(editor.row);\n    \t\t\t\titem[editor.column] = state.value;\n\n    \t\t\t\tDataTable.removeCellCss(item.id, editor.column, \"webix_invalid\");\n    \t\t\t\tDataTable.removeCellCss(item.id, editor.column, \"webix_invalid_cell\");\n\n    \t\t\t\tvar validator = CurrentObject.isValidData(item);\n    \t\t\t\tif (validator.pass()) {\n\n\n//// Question: do we submit full item updates?  or just patches?\nvar patch = {};\npatch[editor.column] = item[editor.column];  // NOTE: isValidData() might also condition the data for sending.state.value;\n\n    \t\t\t\t\tCurrentObject.model()\n    \t\t\t\t\t.update(item.id, item)\n// .update(item.id, patch)\n    \t\t\t\t\t.then(()=>{\n\n    \t\t\t\t\t\tDataTable.updateItem(editor.row, item);\n    \t\t\t\t\t\tDataTable.clearSelection();\n    \t\t\t\t\t\tDataTable.refresh(editor.row);\n\n    \t\t\t\t\t})\n    \t\t\t\t\t.catch((err)=>{\n\n    \t\t\t\t\t\tOP.Error.log('Error saving item:', {error:err});\n\n    \t\t\t\t\t\tDataTable.clearSelection();\n    \t\t\t\t\t\tif (OP.Validation.isGridValidationError(err, editor.row, DataTable)) {\n\n// Do we reset the value?\n// item[editor.column] = state.old;\n// DataTable.updateItem(editor.row, item);\n\n    \t\t\t\t\t\t} else {\n\n// this was some other Error!\n\n    \t\t\t\t\t\t}\n\n\n    \t\t\t\t\t})\n\n    \t\t\t\t} else {\n\n    \t\t\t\t\tvalidator.updateGrid(editor.row, DataTable);\n    \t\t\t\t}\n\n\n\n    \t\t\t} else {\n\n    \t\t\t\tDataTable.clearSelection();\n    \t\t\t}\n\n    \t\t\treturn false;\n\n    \t\t\t\t// var item = $$(self.webixUiId.objectDatatable).getItem(editor.row);\n\n    \t\t\t\t// self.updateRowData(state, editor, ignoreUpdate)\n    \t\t\t\t// \t.fail(function (err) { // Cached\n    \t\t\t\t// \t\titem[editor.column] = state.old;\n    \t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).updateItem(editor.row, item);\n    \t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).refresh(editor.row);\n\n    \t\t\t\t// \t\t// TODO : Message\n\n    \t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n    \t\t\t\t// \t})\n    \t\t\t\t// \t.then(function (result) {\n    \t\t\t\t// \t\tif (item) {\n    \t\t\t\t// \t\t\titem[editor.column] = state.value;\n\n    \t\t\t\t// \t\t\tif (result && result.constructor.name === 'Cached' && result.isUnsync())\n    \t\t\t\t// \t\t\t\titem.isUnsync = true;\n\n    \t\t\t\t// \t\t\t$$(self.webixUiId.objectDatatable).updateItem(editor.row, item);\n    \t\t\t\t// \t\t}\n\n    \t\t\t\t// \t\t// TODO : Message\n\n    \t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n    \t\t\t\t// \t});\n    \t\t},\n\n\n    \t\tonAfterLoad: function() {\n    \t\t\t_logic.sortTable();\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function onAfterSelect\n    \t\t * This is when a user clicks on a cell.  We use the onAfterSelect to\n    \t\t * trigger a normal .editCell() if there isn't a custom editor for this field.\n    \t\t * @param {json} data webix cell data\n    \t\t * @return\n    \t\t */\n    \t\tonAfterSelect: function (data, prevent) {\n    \t\t\t// data: {row: 1, column: \"name\", id: \"1_name\", toString: function}\n    \t\t\t// data.row: .model.id\n    \t\t\t// data.column => columnName of the field\n\n\n    \t\t\t// Normal update data\n    \t\t\t$$(ids.component).editCell(data.row, data.column);\n\n\n    \t\t\t\t// var columnConfig = $$(self.webixUiId.objectDatatable).getColumnConfig(data.column),\n    \t\t\t\t// \tfieldData = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == data.column; });\n\n    \t\t\t\t// if (!fieldData || fieldData.length < 1) {\n    \t\t\t\t// \tconsole.log('System could not found this column data');\n    \t\t\t\t// \treturn false;\n    \t\t\t\t// } else\n    \t\t\t\t// \tfieldData = fieldData[0];\n\n    \t\t\t\t// // Custom update data\n    \t\t\t\t// if (dataFieldsManager.hasCustomEdit(columnConfig.fieldName, fieldData))\n    \t\t\t\t// \treturn false;\n\n    \t\t\t\t// // Normal update data\n    \t\t\t\t// this.editCell(data.row, data.column);\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function onHeaderClick\n    \t\t *\n    \t\t * process the user clicking on the header for one of our columns.\n    \t\t */\n    \t\tonHeaderClick: function (id, e, node) {\n\n    \t\t\t// Ignore system columns\n    \t\t\tif (id.column == 'appbuilder_trash')\n    \t\t\t\treturn false;\n\n    \t\t\t// save our EditNode & EditField:\n    \t\t\tEditNode = node;\n\n    \t\t\tEditField = CurrentObject.fields(function(f){ return f.columnName == id.column; })[0];\n    \t\t\tif (EditField) {\n\n    \t\t\t\t// show the popup\n    \t\t\t\tPopupHeaderEditComponent.show(node);\n    \t\t\t}\n\n    \t\t\treturn false;\n    \t\t},\n\n\n    \t\tobjectLoad:function(object) {\n\n    \t\t\tCurrentObject = object;\n\n    \t\t\tPopupHeaderEditComponent.objectLoad(object);\n\n    \t\t\t_logic.refresh();\n    \t\t},\n\n\n    \t\t// rebuild the data table view:\n    \t\trefresh: function() {\n\n    \t\t\t// wait until we have an Object defined:\n    \t\t\tif (CurrentObject) {\n\n    \t\t\t\tvar DataTable = $$(ids.component);\n    \t\t\t\tDataTable.clearAll();\n\n\n    \t\t\t\t//// update DataTable structure:\n    \t\t\t\t// get column list from our CurrentObject\n    \t\t\t\tvar columnHeaders = CurrentObject.columnHeaders(true);\n\n    \t\t\t\t// add the delete / Trash column\n    \t\t\t\tcolumnHeaders.push({\n    \t\t\t\t\tid: \"appbuilder_trash\",\n    \t\t\t\t\theader: \"\",\n    \t\t\t\t\twidth: 40,\n    \t\t\t\t\ttemplate: \"<span class='trash'>{common.trashIcon()}</span>\",\n    \t\t\t\t\tcss: { 'text-align': 'center' }\n    \t\t\t\t})\n    \t\t\t\tDataTable.refreshColumns(columnHeaders)\n\n\n    \t\t\t\t// freeze columns:\n    \t\t\t\tif (CurrentObject.workspaceFrozenColumnID != \"\") {\n    \t\t\t\t\tDataTable.define('leftSplit', DataTable.getColumnIndex(CurrentObject.workspaceFrozenColumnID) + 1);\n    \t\t\t\t\tDataTable.refreshColumns()\n    \t\t\t\t}\n\n\n    \t\t\t\t//// update DataTable Content\n\n    \t\t\t\t// Set the Model object with a condition / skip / limit, then\n    \t\t\t\t// use it to load the DataTable:\n    \t\t\t\t//// NOTE: this should take advantage of Webix dynamic data loading on\n    \t\t\t\t//// larger data sets.\n    \t\t\t\tCurrentObject.model()\n    \t\t\t\t.where({})\n    \t\t\t\t.skip(0)\n    \t\t\t\t.limit(30)\n    \t\t\t\t.loadInto(DataTable);\n    \t\t\t}\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function rowAdd()\n    \t\t *\n    \t\t * add a new row to the data table\n    \t\t */\n    \t\trowAdd:function() {\n    \t\t\tvar emptyObj = CurrentObject.defaultValues();\n    \t\t\tCurrentObject.model()\n    \t\t\t.create(emptyObj)\n    \t\t\t.then((obj)=>{\n    \t\t\t\tvar DataTable = $$(ids.component);\n    \t\t\t\tDataTable.add(obj, 0);\n    \t\t\t})\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function show()\n    \t\t *\n    \t\t * Show this component.\n    \t\t */\n    \t\tshow:function() {\n\n    \t\t\t$$(ids.component).show();\n    \t\t},\n\n\n    \t\t/**\n    \t\t * @function sort(dir, a, b)\n    \t\t *\n    \t\t * Sort this component.\n    \t\t */\n    \t\tsort:function(dir, aValue, bValue) {\n    \t\t\tvar result = false;\n\n    \t\t\tif (dir == 'asc') {\n    \t\t\t\tresult = aValue > bValue ? 1 : -1;\n    \t\t\t}\n    \t\t\telse {\n    \t\t\t\tresult = aValue < bValue ? 1 : -1;\n    \t\t\t}\n    \t\t\treturn result;\n    \t\t},\n\n\n    \t\tsortNext:function(dir, a, b, sorts, index) {\n    \t\t\tvar index = index+1,\n    \t\t\t\ta = a,\n    \t\t\t\tb = b,\n    \t\t\t\taValue = a[sorts[index].by],\n    \t\t\t\tbValue = b[sorts[index].by],\n    \t\t\t\tresult = false;\n\n    \t\t\tif (aValue == bValue && sorts.length > index+1) {\n    \t\t\t\tresult = _logic.sortNext(sorts[index].dir, a, b, sorts, index)\n    \t\t\t} else {\n    \t\t\t\tresult = _logic.sort(sorts[index].dir, aValue, bValue);\n    \t\t\t}\n    \t\t\treturn result;\n    \t\t},\n\n\n    \t\tsortTable:function() {\n    \t\t\tvar DataTable = $$(ids.component);\n\n    \t\t\tif (CurrentObject) {\n    \t\t\t\tvar sorts = CurrentObject.workspaceSortFields;\n\n    \t\t\t\tif (sorts.length > 0) {\n    \t\t\t\t\tvar columnOrders = [];\n\n    \t\t\t\t\tDataTable.sort(function (a, b) {\n    \t\t\t\t\t\tvar result = false,\n    \t\t\t\t\t\t\tindex = 0,\n    \t\t\t\t\t\t\taValue = a[sorts[index].by],\n    \t\t\t\t\t\t\tbValue = b[sorts[index].by];\n\n    \t\t\t\t\t\tif (aValue == bValue && sorts.length > index+1) {\n    \t\t\t\t\t\t\tresult = _logic.sortNext(sorts[index].dir, a, b, sorts, index);\n    \t\t\t\t\t\t} else {\n    \t\t\t\t\t\t\tresult = _logic.sort(sorts[index].dir, aValue, bValue);\n    \t\t\t\t\t\t}\n\n    \t\t\t\t\t\treturn result;\n    \t\t\t\t\t});\n\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n\n\n    \t}\n        \n\n\n\n\n    \t// Expose any globally accessible Actions:\n    \tthis.actions({\n\n\n    \t})\n\n\n        // \n        // Define our external interface methods:\n        // \n        this.objectLoad = _logic.objectLoad;\n        this.refresh = _logic.refresh;\n        this.addRow = _logic.rowAdd;\n\n        // expose data for badge on frozen button\n        this.getColumnIndex = _logic.getColumnIndex;\n\n        // expose data for column sort UI\n        this.getFieldList = _logic.getFieldList;\n        this.sortTable = _logic.sortTable;\n\n    }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace_datatable.js","\n/*\n * ab_work_object_workspace_popupDefineLabel\n *\n * Manage the Add New Data Field popup.\n *\n */\n\n\nexport default class ABWorkObjectPopupDefineLabel extends OP.Component {\n    \n    constructor(App) {\n        super(App, 'ab_work_object_workspace_popupDefineLabel');\n        var L = this.Label;\n        \n        var labels = {\n            common: App.labels,\n            component: {\n                labelFormat: L('ab.define_label.labelFormat', \"*Label format\"),\n                selectFieldToGenerate: L('ab.define_label.selectFieldToGenerate', \"*Select field item to generate format.\"),\n                labelFields: L('ab.define_label.labelFields', \"*Fields\"),\n            }\n        };\n        \n        // internal list of Webix IDs to reference our UI components.\n        var ids = {\n            component: this.unique('component'),\n            format: this.unique('format'),\n            list: this.unique('list'),\n            buttonSave: this.unique('buttonSave'),\n        };\n        \n        \n        // webix UI definition:\n        this.ui = {\n            view: \"popup\",\n            id: ids.component,\n            modal: true,\n            autoheight:true,\n            // maxHeight: 420,\n            width: 500,\n            body: {\n                rows: [\n                    {\n                        view: \"label\",\n                        label: \"<b>{0}</b>\".replace(\"{0}\", labels.component.labelFormat)\n                    },\n                    {\n                        view: \"textarea\",\n                        id: ids.format,\n                        height: 100\n                    },\n                    {\n                        view: \"label\",\n                        label: labels.component.selectFieldToGenerate\n                    },\n                    {\n                        view: \"label\",\n                        label: \"<b>{0}</b>\".replace(\"{0}\", labels.component.labelFields)\n                    },\n                    {\n                        view: 'list',\n                        id: ids.list,\n                        width: 500,\n                        maxHeight: 180,\n                        select: false,\n                        template: '#label#',\n                        on: {\n                            onItemClick: function (id, e, node) {\n                                _logic.onItemClick(id, e, node);\n                            }\n                        }\n                    },\n                    {\n                        height: 10\n                    },\n                    {\n                        cols: [\n                            {\n                                view: \"button\", \n                                value: labels.common.cancel, \n                                width: 100, \n                                click: function () {\n                                    _logic.buttonCancel(); \n                                }\n                            },\n                            {\n                                view: \"button\", \n                                id: ids.buttonSave, \n                                label: labels.common.save, \n                                type: \"form\", \n                                width: 120, \n                                click: function () {\n                                    _logic.buttonSave();\n                                }\n                            }\n                            \n                        ]\n                    }\n                ]\n            },\n            on: {\n                onShow: function () {\n                    _logic.onShow();\n                }\n            }\n        };\n        \n\n\n        var _currentObject = null;\n    \n\n\n        // for setting up UI\n        this.init = (options) => {\n            // register callbacks:\n            for(var c in _logic.callbacks) {\n                _logic.callbacks[c] = options[c] || _logic.callbacks[c];\n            }\n\n            webix.ui(this.ui);\n\n            webix.extend($$(ids.list), webix.ProgressBar);\n        };\n\n\n\n        // internal business logic \n        var _logic = this.logic = {\n            buttonCancel: function() {\n                $$(ids.component).hide();\n            },\n            \n            buttonSave: function() {\n                // disable our save button\n                var ButtonSave = $$(ids.buttonSave);\n                ButtonSave.disable();\n    \n                // get our current labelFormt\n                var labelFormat = $$(ids.format).getValue();\n    \n                // start our spinner\n                var List = $$(ids.list);\n                List.showProgress({ type: 'icon' });\n                \n                // convert from our User Friendly {Label} format to our \n                // object friendly {Name} format\n                List.data.each(function (d) {\n                    labelFormat = labelFormat.replace(new RegExp('{' + d.label + '}', 'g'), '{' + d.id + '}');\n                });\n                \n                // save the value\n                _currentObject.labelFormat = labelFormat;\n                _currentObject.save()\n                .then(function(){\n    \n                    // all good, so\n                    List.hideProgress();    // hide the spinner\n                    ButtonSave.enable();    // enable the save button\n                    _logic.hide();          // hide the popup\n    \n                    // alert our parent component we are done with our changes:\n                    _logic.callbacks.onSave();\n                })\n                .catch(function(err){\n                    List.hideProgress();    // hide the spinner\n                    ButtonSave.enable();    // enable the save button\n    \n                    // display some error to the user:\n                    OP.Error.log('Error trying to save our Object', {error:err});\n                })\n            },\n            \n            callbacks: {\n                onCancel: function() { console.warn('NO onCancel()!') },\n                onSave  : function(field) { console.warn('NO onSave()!') },\n            },\n            \n            hide: function() {\n                $$(ids.component).hide();\n            },\n            \n            objectLoad: function(object) {\n                _currentObject = object;\n                \n                // clear our list\n                var List = $$(ids.list);\n                List.clearAll();\n                \n                // refresh list with new set of fields\n                var allFields = _currentObject.fields();\n                var listFields = [];\n                allFields.forEach((f) => {\n                    listFields.push({\n                        id: f.name,\n                        label: f.label\n                    })\n                });\n                \n                List.parse(allFields);\n            },\n    \n            onItemClick: function(id, e, node) {\n                var selectedItem = $$(ids.list).getItem(id);\n                var labelFormat = $$(ids.format).getValue();\n                labelFormat += '{{0}}'.replace('{0}', selectedItem.label);\n                $$(ids.format).setValue(labelFormat);\n            },\n            \n            onShow: function() {\n                    var labelFormat = _currentObject.labelFormat;\n                    var Format = $$(ids.format);\n                    var List = $$(ids.list);\n                    \n                    Format.setValue('');\n                    Format.enable();\n                    List.enable();\n                    $$(ids.buttonSave).enable();\n                    \n                    // our labelFormat should be in a computer friendly {name} format\n                    // here we want to convert it to a user friendly {label} format\n                    // to use in our popup:\n                    if (labelFormat) {\n                        if (List.data && List.data.count() > 0) {\n                            List.data.each(function (d) {\n                                labelFormat = labelFormat.replace('{' + d.id + '}', '{' + d.label + '}');\n                            });\n                        }\n                    }\n                    else { \n                        // no label format:\n                        // Default to first field\n                        if (List.data && List.data.count() > 0) {\n                            var field = List.getItem(List.getFirstId());\n                            labelFormat = '{' + field.label + '}';\n                        }\n                    }\n                    \n                    Format.setValue(labelFormat || '');\n            },\n            \n            /**\n             * @function show()\n             *\n             * Show this component.\n             * @param {obj} $view  the webix.$view to hover the popup around.\n             */\n            show:function($view) {\n                $$(ids.component).show($view);\n            }\n        };\n              \n\n\n        // Expose any globally accessible Actions:\n        this.actions({\n        });\n\n\n        \n        this.objectLoad = _logic.objectLoad;\n        this.show = _logic.show;\n\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupDefineLabel.js","\n/*\n * ab_work_object_workspace_popupFrozenColumns\n *\n * Manage the Frozen Columns popup.\n *\n */\n\n\nexport default class AB_Work_Object_Workspace_PopupFrozenColumns extends OP.Component {   //.extend(idBase, function(App) {\n\n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_work_object_workspace_popupFrozenColumns');\n\n\t\tvar L = this.Label;\n\n\n\t\tvar labels = {\n\t\t\tcommon : App.labels,\n\t\t\tcomponent: {\n\t\t\t\tclearAll: L('ab.frozen_fields.clearAll', \"*Clear All\"),\n\t\t\t\t// hideAll: L('ab.visible_fields.hideAll', \"*Hide All\"),\n\t\t\t}\n\t\t}\n\n\n\t\t// internal list of Webix IDs to reference our UI components\n\t\tvar ids = {\n\t\t\tcomponent: this.unique('component'),\n\t\t\tlist: this.unique('list'),\n\t\t}\n\n\n\t\t// Our webix UI definition:\n\t\tthis.ui = {\n\t\t\tview:\"popup\",\n\t\t\tid: ids.component,\n\t\t\t// modal: true,\n\t\t\tautoheight:true,\n\t\t\twidth: 500,\n\t\t\tbody: {\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview: 'button', value: labels.component.clearAll, click: function (id, e, node) {\n\t\t\t\t\t\t\t_logic.clickClearAll(id, e, node);\n\n\t\t\t\t\t\t\t// dataTable.define('leftSplit', 0);\n\t\t\t\t\t\t\t// dataTable.refreshColumns();\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// $$(ids.component).refreshShowIcons();\n\t\t\t\t\t\t\t// $$(ids.component).callChangeEvent();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: 'list',\n\t\t\t\t\t\tid: ids.list,\n\t\t\t\t\t\twidth: 250,\n\t\t\t\t\t\tautoheight: true,\n\t\t\t\t\t\tselect: false,\n\t\t\t\t\t\ttemplate: '<span style=\"min-width: 18px; display: inline-block;\"><i class=\"fa fa-circle-o ab-frozen-field-icon\"></i>&nbsp;</span> #label#',\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonItemClick: function (id, e, node) {\n\t\t\t\t\t\t\t\t_logic.clickListItem(id, e, node);\n\n\t\t\t\t\t\t\t\t// dataTable.define('leftSplit', dataTable.getColumnIndex(id) + 1);\n\t\t\t\t\t\t\t\t// dataTable.refreshColumns();\n\t\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t\t// $$(ids.component).refreshShowIcons();\n\t\t\t\t\t\t\t\t// $$(ids.component).callChangeEvent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonShow: function () {\n\t\t\t\t\t_logic.onShow();\n\t\t\t\t\t_logic.iconsReset();\n\t\t\t\t}\n\t\t\t}\n\t    }\n\n\n\n\t\t// Our init() function for setting up our UI\n\t\tthis.init = (options) => {\n\n\t\t\t// register our callbacks:\n\t\t\tfor(var c in _logic.callbacks) {\n\t\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t\t}\n\n\t\t\twebix.ui(this.ui);\n\t\t}\n\n\n\t\tvar CurrentObject = null;\n\n\t\t// our internal business logic\n\t\tvar _logic = this._logic = {\n\n\t\t\tcallbacks:{\n\n\t\t\t\t/**\n\t\t\t\t * @function onChange\n\t\t\t\t * called when we have made changes to the hidden field settings\n\t\t\t\t * of our Current Object.\n\t\t\t\t *\n\t\t\t\t * this is meant to alert our parent component to respond to the\n\t\t\t\t * change.\n\t\t\t\t */\n\t\t\t\tonChange:function(){}\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function clickClearAll\n\t\t\t * the user clicked the [clear all] option.  So show unfreeze all our columns.\n\t\t\t */\n\t\t\tclickClearAll: function () {\n\t\t\t\t// store empty string to not freeze any columns\n\t\t\t\tCurrentObject.workspaceFrozenColumnID = \"\";\n\t\t\t\tCurrentObject.save()\n\t\t\t\t.then(function(){\n\t\t\t\t\t_logic.iconsReset();\n\t\t\t\t\t_logic.callbacks.onChange();\n\t\t\t\t})\n\t\t\t\t.catch(function(err){\n\t\t\t\t\tOP.Error.log('Error trying to save workspaceFrozenColumnID', {error:err, fields:\"\" });\n\t\t\t\t})\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function clickListItem\n\t\t\t * update the list to show which columns are frozen by showing an icon next to the column name\n\t\t\t */\n\t\t\tclickListItem: function(id, e, node) {\n\t\t\t\t// update our Object with current frozen column id\n\t\t\t\tvar List = $$(ids.list);\n\t\t\t\tvar recordClicked = List.getItem(id);\n\t\t\t\tvar label = recordClicked.label;\n\t\t\t\tCurrentObject.workspaceFrozenColumnID = label;\n\t\t\t\tCurrentObject.save()\n\t\t\t\t.then(function(){\n\t\t\t\t\t_logic.iconsReset();\n\t\t\t\t\t_logic.callbacks.onChange()\n\t\t\t\t})\n\t\t\t\t.catch(function(err){\n\t\t\t\t\tOP.Error.log('Error trying to save workspaceFrozenColumnID', {error:err, fields:label });\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * @function iconDefault\n\t\t\t * Hide the icon for the given node\n\t\t\t * @param {DOM} node  the html dom node of the element that contains our icon\n\t\t\t */\n\t\t\ticonDefault: function(node) {\n\t\t\t\tif (node) {\n\t\t\t\t\tnode.querySelector('.ab-frozen-field-icon').classList.remove(\"fa-circle\");\n\t\t\t\t\tnode.querySelector('.ab-frozen-field-icon').classList.add(\"fa-circle-o\");\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function iconFreeze\n\t\t\t * Show the icon for the given node\n\t\t\t * @param {DOM} node  the html dom node of the element that contains our icon\n\t\t\t */\n\t\t\ticonFreeze: function(node) {\n\t\t\t\tif (node) {\n\t\t\t\t\tnode.querySelector('.ab-frozen-field-icon').classList.remove(\"fa-circle-o\");\n\t\t\t\t\tnode.querySelector('.ab-frozen-field-icon').classList.add(\"fa-circle\");\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * @function iconsReset\n\t\t\t * Reset the icon displays according to the current values in our Object\n\t\t\t */\n\t\t\ticonsReset: function() {\n\t\t\t\tvar List = $$(ids.list);\n\t\t\t\tvar isFrozen = false;\n\n\t\t\t\t// for each item in the List\n\t\t\t\tvar id = List.getFirstId();\n\t\t\t\twhile(id) {\n\t\t\t\t\tvar record = List.getItem(id);\n\t\t\t\t\tvar label = record.label;\n\n\t\t\t\t\t// find it's HTML Node\n\t\t\t\t\tvar node = List.getItemNode(id);\n\n\t\t\t\t\tif (CurrentObject.workspaceFrozenColumnID == \"\") {\n\t\t\t\t\t\t// if there isn't any frozen columns just use the plain icon\n\t\t\t\t\t\t_logic.iconDefault(node);\n\t\t\t\t\t} else if (isFrozen == false) {\n\t\t\t\t\t\t// if this item is not the frozen id it is frozen until we reach the frozen id\n\t\t\t\t\t\t_logic.iconFreeze(node);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// else just show default icon\n\t\t\t\t\t\t_logic.iconDefault(node);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (CurrentObject.workspaceFrozenColumnID == label) {\n\t\t\t\t\t\tisFrozen = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (CurrentObject.workspaceHiddenFields.indexOf(label) != -1) {\n\t\t\t\t\t\tnode.style.display = \"none\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode.style.display = \"\";\n\t\t\t\t\t}\n\n\t\t\t\t\t// next item\n\t\t\t\t\tid = List.getNextId(id);\n\t\t\t\t}\n\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function objectLoad\n\t\t\t * Ready the Popup according to the current object\n\t\t\t * @param {ABObject} object  the currently selected object.\n\t\t\t */\n\t\t\tobjectLoad: function(object) {\n\t\t\t\tCurrentObject = object;\n\t\t\t},\n\n\t\t\tonShow: function() {\n\t\t\t\t// refresh list\n\t\t\t\tvar allFields = CurrentObject.fields();\n\t\t\t\tvar listFields = [];\n\t\t\t\tallFields.forEach((f) => {\n\t\t\t\t\tlistFields.push({\n\t\t\t\t\t\tid: f.id,\n\t\t\t\t\t\tlabel: f.label,\n\t\t\t\t\t\t$css:\"hidden_fields_\"+f.id\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t\t$$(ids.list).parse(listFields);\n\t\t\t},\n\n\t\t\t/**\n\t         * @function show()\n\t         *\n\t         * Show this component.\n\t         * @param {obj} $view  the webix.$view to hover the popup around.\n\t         */\n\t        show:function($view) {\n\t            $$(ids.component).show($view);\n\t        }\n\n\t\t}\n\n\n\n\t\t// Expose any globally accessible Actions:\n\t\tthis.actions({\n\n\n\t\t})\n\n\n\t\t// \n\t\t// Define our external interface methods:\n\t\t// \n\t\tthis.objectLoad = _logic.objectLoad;\n\t\tthis.show = _logic.show;\n\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupFrozenColumns.js","\n/*\n * ab_work_object_workspace_popupHeaderEditMenu\n *\n * Manage the Add New Data Field popup.\n *\n */\n\n\nexport default class ABWorkObjectPopupHeaderEditMenu extends OP.Component {\n\n    constructor(App) {\n        super(App, 'ab_work_object_workspace_popupHeaderEditMenu');\n        var L = this.Label;\n        \n        var labels = {\n            common: App.labels,\n            component: {\n                hideField: L('ab.object.hideField', \"*Hide field\"),\n                filterField: L('ab.object.filterField', \"*Filter field\"),\n                sortField: L('ab.object.sortField', \"*Sort field\"),\n                editField: L('ab.object.editField', \"*Edit field\"),\n                deleteField: L('ab.object.deleteField', \"*Delete field\")\n            }\n        };\n        \n        var ids = {\n            component: this.unique('component'),\n            list: this.unique('list')\n        };\n\n        // the list of options shown in the popup menu:\n        var menuItems = {\n            // Normally all items are available\n            'default': [\n                { command: labels.component.hideField, icon: \"fa-columns\" },\n                { command: labels.component.filterField, icon: \"fa-filter\" },\n                { command: labels.component.sortField, icon: \"fa-sort\" },\n                { command: labels.component.editField, icon: \"fa-pencil-square-o\" },\n                { command: labels.component.deleteField, icon: \"fa-trash\" }\n            ],\n            // But for imported objects, edit & delete are disabled\n            'imported': [\n                { command: labels.component.hideField, icon: \"fa-columns\" },\n                { command: labels.component.filterField, icon: \"fa-filter\" },\n                { command: labels.component.sortField, icon: \"fa-sort\" },\n                //{ command: labels.editField, icon: \"fa-pencil-square-o\" },\n            ]\n        };\n        \n\n        \n        // webix UI definition:\n        this.ui = {\n            view:\"popup\",\n            id: ids.component,\n            modal: false,\n            autoheight:true,\n    \n            width: 180,\n            body: {\n                id: ids.list,\n                view: 'list',\n                datatype: \"json\",\n                autoheight: true,\n                select: false,\n                template: \"<i class='fa #icon#' aria-hidden='true'></i> #command#\",\n                data: menuItems['default'], // start with the default set:\n                on: {\n                    'onItemClick': function (timestamp, e, node) {\n                        _logic.onItemClick(timestamp, e, node);\n                    }\n                }\n            }\n        };\n        \n        \n        var CurrentObject = null;\n        \n        \n        // setting up UI\n        this.init = (options) => {\n            // register callbacks:\n            for(var c in _logic.callbacks) {\n                _logic.callbacks[c] = options[c] || _logic.callbacks[c];\n            }\n\n            // create the instance of our popup\n            webix.ui(this.ui);\n\n        }\n        \n\n\n        // internal business logic\n        var _logic = this.logic = {\n            callbacks: {\n                /**\n                 * @function onClick\n                 * report back which menu action was clicked.\n                 * possible actions: \n                 *      [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n                 */\n                onClick: function(action) {  }\n            },\n    \n            hide: function() {\n                $$(ids.component).hide();\n            },\n    \n            /**\n             * @function objectLoad\n             * Ready the Popup according to the current object\n             * @param {ABObject} object  the currently selected object.\n             */\n            objectLoad: function(object) {\n                CurrentObject = object;\n    \n                // TODO:\n                // check if object is imported, if so, then switch the \n                // shown fields to the imported menu:\n    \n                var listItems = menuItems['default'];\n                var List = $$(ids.list);\n                List.clearAll();\n                List.parse(listItems);\n            },\n    \n            /**\n             * @function onItemClick\n             * when an entry in our popup menu is selected, make sure our\n             * parent component is alerted to the action requested.\n             *\n             * possible return action values: \n             *      [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n             *\n             */\n            onItemClick: function(timestamp, e, node) {\n                var action = null;\n                var menu = node.textContent.trim();\n                switch(menu) {\n                    case labels.component.hideField:\n                        action = 'hide';\n                        break;\n                    case labels.component.filterField:\n                        action = 'filter';\n                        break;\n                    case labels.component.sortField:\n                        action = 'sort';\n                        break;\n                    case labels.component.editField:\n                        action = 'edit';\n                        break;\n                    case labels.component.deleteField:\n                        action = 'delete';\n                        break;\n                }\n    \n                _logic.callbacks.onClick(action);\n            },\n    \n            /**\n             * @function show()\n             *\n             * Show this component.\n             * @param {obj} $view  the webix.$view to hover the popup around.\n             */\n            show:function($view) {\n                $$(ids.component).show($view);\n            }\n        };\n    \n\n        \n            \n        // Expose any globally accessible Actions:\n        this.actions({\n            // populateObjectPopupAddDataField: function(object) {\n            // \t_currentObject = object;\n            // }\n        });\n        \n        this.hide = _logic.hide;\n        this.show = _logic.show;\n        this.objectLoad = _logic.objectLoad;\n        \n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupHeaderEditMenu.js","\n/*\n * ab_work_object_workspace_popupHideFields\n *\n * Manage the Hide Fields popup.\n *\n */\n\n\nexport default class AB_Work_Object_Workspace_PopupHideFields extends OP.Component {  \n\n    constructor(App) {\n        super(App, 'ab_work_object_workspace_popupHideFields');\n        var L = this.Label;\n\n        var labels = {\n            common : App.labels,\n            component: {\n                showAll: L('ab.visible_fields.showAll', \"*Show All\"),\n                hideAll: L('ab.visible_fields.hideAll', \"*Hide All\"),\n                errorFrozen: L('ab.visible_fields.errorFrozen', \"*Sorry, you cannot hide your last frozen column.\"),\n            }\n        }\n\n\n        // internal list of Webix IDs to reference our UI components\n        var ids = {\n            component: this.unique('component'),\n            list: this.unique('list')\n        }\n\n\n        // Our webix UI definition:\n        this.ui = {\n            view:\"popup\",\n            id: ids.component,\n            // modal: true,\n            autoheight:true,\n            body: {\n                rows: [\n                    {\n                        cols: [\n                            {\n                                view: 'button',\n                                value: labels.component.showAll,\n                                click: function () {\n                                    _logic.clickShowAll();\n                                }\n                            },\n                            {\n                                view: 'button',\n                                value: labels.component.hideAll,\n                                click: function () {\n                                    _logic.clickHideAll()\n                                }\n                            }\n                        ]\n                    },\n                    {\n                        view: 'list',\n                        id: ids.list,\n                        autoheight: true,\n                        select: false,\n                        template: '<span style=\"min-width: 18px; display: inline-block;\"><i class=\"fa fa-circle ab-visible-field-icon\"></i>&nbsp;</span> #label#',\n                        on: {\n                            onItemClick: function (id, e, node) {\n                                _logic.clickListItem(id, e, node);\n                            }\n                        }\n                    }\n                ]\n            },\n            on: {\n                onShow: function () {\n                    _logic.onShow();\n                    _logic.iconsReset();\n                }\n            }\n        }\n\n\n        // Our init() function for setting up our UI\n        this.init = (options) => {\n\n            // register our callbacks:\n            for(var c in _logic.callbacks) {\n                _logic.callbacks[c] = options[c] || _logic.callbacks[c];\n            }\n\n            webix.ui(this.ui);\n        }\n\n\n        var CurrentObject = null;\n\n\n        // our internal business logic\n        var _logic = this._logic = {\n\n            callbacks:{\n\n                /**\n                 * @function onChange\n                 * called when we have made changes to the hidden field settings\n                 * of our Current Object.\n                 *\n                 * this is meant to alert our parent component to respond to the\n                 * change.\n                 */\n                onChange:function(){}\n            },\n\n\n            /**\n             * @function clickHideAll\n             * the user clicked the [hide all] option.  So hide all our fields.\n             */\n            clickHideAll: function () {\n\n                // create an array of all our field.id's:\n                var allFields = CurrentObject.fields();\n                var newHidden = [];\n                allFields.forEach(function(f){\n                    newHidden.push(f.columnName);\n                })\n\n                // store that\n                CurrentObject.workspaceHiddenFields = newHidden;\n                CurrentObject.save()\n                .then(function(){\n                    _logic.iconsReset()\n                    _logic.callbacks.onChange()\n                })\n                .catch(function(err){\n                    OP.Error.log('Error trying to save workspaceHiddenFields', {error:err, fields:newHidden });\n                })\n            },\n\n\n            /**\n             * @function clickShowAll\n             * the user clicked the [show all] option.  So show all our fields.\n             */\n            clickShowAll: function () {\n\n                // store an empty array of hidden fields\n                CurrentObject.workspaceHiddenFields = [];\n                CurrentObject.save()\n                .then(function(){\n                    _logic.iconsReset();\n                    _logic.callbacks.onChange()\n                })\n                .catch(function(err){\n                    OP.Error.log('Error trying to save workspaceHiddenFields', {error:err, fields:newHidden });\n                })\n            },\n\n\n            /**\n             * @function clickListItem\n             * update the clicked field setting.\n             */\n            clickListItem: function(id, e, node) {\n                var List = $$(ids.list);\n                var item = List.getItem(id);\n                if (CurrentObject.workspaceFrozenColumnID == item.columnName) {\n                    OP.Dialog.Alert({\n                        text: labels.component.errorFrozen\n                    });\n                    return;\n                }\n\n                var newFields = [];\n                var isHidden = CurrentObject.workspaceHiddenFields.filter((fID) => { return fID == item.columnName;}).length>0;\n                if (isHidden) {\n                    // unhide this field\n\n                    // get remaining fields\n                    newFields = CurrentObject.workspaceHiddenFields.filter((fID)=>{ return fID != item.columnName;});\n\n                    // find the icon and display it:\n                    _logic.iconShow(node);\n\n                } else {\n                    newFields = CurrentObject.workspaceHiddenFields;\n                    newFields.push(item.columnName);\n\n                    _logic.iconHide(node);\n                }\n\n                // update our Object with current hidden fields\n                CurrentObject.workspaceHiddenFields = newFields;\n                CurrentObject.save()\n                .then(function(){\n                    _logic.callbacks.onChange()\n                })\n                .catch(function(err){\n                    OP.Error.log('Error trying to save workspaceHiddenFields', {error:err, fields:newFields });\n                })\n            },\n\n            /**\n             * @function iconFreezeOff\n             * Remove thumb tack if the field is not the choosen frozen column field\n             * @param {DOM} node  the html dom node of the element that contains our icon\n             */\n            iconFreezeOff: function(node) {\n                if (node) {\n                    node.querySelector('.ab-visible-field-icon').classList.remove(\"fa-thumb-tack\");\n                    node.querySelector('.ab-visible-field-icon').classList.add(\"fa-circle\");\n                }\n            },\n\n            /**\n             * @function iconFreezeOn\n             * Show a thumb tack if the field is the choosen frozen column field\n             * @param {DOM} node  the html dom node of the element that contains our icon\n             */\n            iconFreezeOn: function(node) {\n                if (node) {\n                    node.querySelector('.ab-visible-field-icon').classList.remove(\"fa-circle\");\n                    node.querySelector('.ab-visible-field-icon').classList.add(\"fa-thumb-tack\");\n                }\n            },\n\n\n            /**\n             * @function iconHide\n             * Hide the icon for the given node\n             * @param {DOM} node  the html dom node of the element that contains our icon\n             */\n            iconHide: function(node) {\n                if (node) {\n                    node.querySelector('.ab-visible-field-icon').style.visibility = \"hidden\";\n                }\n            },\n\n\n            /**\n             * @function iconShow\n             * Show the icon for the given node\n             * @param {DOM} node  the html dom node of the element that contains our icon\n             */\n            iconShow: function(node) {\n                if (node) {\n                    node.querySelector('.ab-visible-field-icon').style.visibility = \"visible\";\n                }\n            },\n\n\n            /**\n             * @function iconsReset\n             * Reset the icon displays according to the current values in our Object\n             */\n            iconsReset: function() {\n\n                var List = $$(ids.list);\n\n                // for each item in the List\n                var id = List.getFirstId();\n                while(id) {\n                    var item = List.getItem(id);\n\n                    // find it's HTML Node\n                    var node = List.getItemNode(id);\n\n                    if (CurrentObject.workspaceFrozenColumnID == item.columnName) {\n                        _logic.iconFreezeOn(node);\n                    } else {\n                        _logic.iconFreezeOff(node);\n                    }\n\n                    // if this item is not hidden, show it.\n                    if (CurrentObject.workspaceHiddenFields.indexOf(item.columnName) == -1) {\n                        _logic.iconShow(node);\n                    } else {\n                        // else hide it\n                        _logic.iconHide(node);\n                    }\n\n                    // next item\n                    id = List.getNextId(id);\n                }\n\n            },\n\n\n            /**\n             * @function objectLoad\n             * Ready the Popup according to the current object\n             * @param {ABObject} object  the currently selected object.\n             */\n            objectLoad: function(object) {\n                CurrentObject = object;\n            },\n\n            /**\n             * @function onShow\n             * Ready the Popup according to the current object each time it is shown (perhaps a field was created or delted)\n             */\n            onShow: function() {\n                // refresh list\n                var allFields = CurrentObject.fields();\n                var listFields = [];\n                allFields.forEach((f) => {\n                    listFields.push({\n                        id: f.id,\n                        label: f.label,\n                        columnName: f.columnName\n                    })\n                })\n\n                $$(ids.list).parse(allFields);\n            },\n\n            /**\n             * @function show()\n             *\n             * Show this component.\n             * @param {obj} $view  the webix.$view to hover the popup around.\n             */\n            show:function($view) {\n                $$(ids.component).show($view);\n            }\n\n        }\n\n\n\n        // Expose any globally accessible Actions:\n        this.actions({\n\n\n        })\n\n        // \n        // Define our external interface methods:\n        // \n        this.objectLoad = _logic.objectLoad;\n        this.show = _logic.show;\n\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupHideFields.js","\n/*\n * ab_work_object_workspace_popupNewDataField\n *\n * Manage the Add New Data Field popup.\n *\n */\n\nimport ABFieldManager from \"../classes/ABFieldManager\"\n\n\nexport default class AB_Work_Object_Workspace_PopupNewDataField extends OP.Component {   //.extend(idBase, function(App) {\n\n    constructor(App) {\n        super(App, 'ab_work_object_workspace_popupNewDataField');\n        var L = this.Label;\n\n        var labels = {\n            common : App.labels,\n            component: {\n                fieldType: L('ab.add_fields.fieldType', \"*Field type\"),\n                label: L('ab.add_fields.label', \"*Label\"),\n                addNewField: L('ab.add_fields.addNewField', \"*Add Column\"),\n            }\n        }\n\n\n        // internal list of Webix IDs to reference our UI components.\n        var ids = {\n            component: this.unique('component'),\n            types: this.unique('types'),\n            editDefinitions: this.unique('editDefinitions'),\n\n            buttonSave: this.unique('buttonSave'),\n            buttonCancel: this.unique('buttonCancel')\n        }\n\n\n\n        // Our webix UI definition:\n        this.ui = {\n            view:\"popup\",\n            id: ids.component,\n            modal: true,\n            autoheight:true,\n            // maxHeight: 420,\n\n    // ready: function () {\n    //  console.error('ready() called!!!')\n    //  _logic.resetState();\n    // },\n\n            body: {\n                css: 'ab-add-fields-popup',\n                borderless: true,\n                rows: [\n                    {\n                        view: \"richselect\",\n                        id: ids.types,\n                        label: labels.component.fieldType,\n                        labelWidth: App.config.labelWidthLarge,\n                        options: [\n                            //We will add these later\n                            { id:'temporary', view:'temporary' }\n                        ],\n                        on: {\n                            onChange: function (id, ev, node) {\n                                _logic.onChange(id);\n                            }\n                        }\n                    },\n                    {\n                        height: 10,\n                        type: \"line\"\n                    },\n                    {\n                        view:'multiview',\n                        id: ids.editDefinitions,\n                        // NOTE: can't leave this an empty []. We redefine this value later.\n                        cells: [ { id:'del_me', view:'label', label:'edit definition here' } ]\n                    },\n                    { height: 10 },\n                    {\n                        cols: [\n                            { fillspace: true },\n                            {\n                                view: \"button\",\n                                value: labels.common.cancel,\n                                css: \"ab-cancel-button\",\n                                autowidth: true,\n                                click: function () {\n                                    _logic.buttonCancel();\n                                }\n                            },\n                            {\n                                view: \"button\",\n                                id: ids.buttonSave,\n                                label: labels.component.addNewField,\n                                autowidth: true,\n                                type: \"form\",\n                                click: function () {\n                                    _logic.buttonSave();\n                                }\n                            }\n                        ]\n                    }\n                ]\n            },\n            on: {\n                onBeforeShow: function () {\n                    _logic.resetState();\n                },\n                onShow: function () {\n                    _logic.onShow();\n                },\n                onHide: function () {\n                    _logic.resetState();\n                }\n            }\n        }\n\n\n        var _objectHash = {};       // 'name' => ABFieldXXX object\n        var _componentHash = {};    // 'name' => ABFieldXXX ui component\n        var _componentsByType = {}; // 'type' => ABFieldXXX ui component\n        var _currentEditor = null;\n        var _currentObject = null;\n\n        var defaultEditorComponent = null;  // the default editor.\n        var defaultEditorID = null; // the default editor id.\n        var submenus = [];  // Create the submenus for our Data Fields:\n\n        var _editField = null;      // field instance being edited\n\n\n\n        // Our init() function for setting up our UI\n        this.init = (options) => {\n\n            // register our callbacks:\n            for(var c in _logic.callbacks) {\n                _logic.callbacks[c] = options[c] || _logic.callbacks[c];\n            }\n\n\n            // initialize our components\n            webix.ui(this.ui);\n\n            var Fields = ABFieldManager.allFields();\n\n\n            //// we need to load a submenu entry and an editor definition for each\n            //// of our Fields\n\n\n\n            var newEditorList = {\n                view:'multiview',\n                id:ids.editDefinitions,\n                rows:[]\n            }\n\n            Fields.forEach(function(F){\n\n                var menuName = F.defaults().menuName ;\n                var key = F.defaults().key;\n\n                // add a submenu for the fields multilingual key\n                submenus.push( {\"id\":menuName, \"value\":menuName} );\n\n\n                // Add the Field's definition editor here:\n                var editorComponent = F.propertiesComponent(App);\n                if (!defaultEditorComponent) {\n                    defaultEditorComponent = editorComponent;\n                    defaultEditorID = menuName;\n                }\n                newEditorList.rows.push(editorComponent.ui);\n\n\n                _objectHash[ menuName ] = F;\n                _componentHash[ menuName ] = editorComponent;\n                _componentsByType[ key ]  = editorComponent;\n\n            })\n\n\n            // the submenu button has a placeholder we need to remove and update\n            // with one that has all our submenus in it.\n            // var firstID = $$(ids.types).getFirstId();\n            // $$(ids.types).updateItem(firstID, {\n            //  value: labels.component.chooseType,\n            //  submenu: submenus\n            // })\n            $$(ids.types).define(\"options\",submenus);\n            $$(ids.types).refresh\n\n            // now remove the 'del_me' definition editor placeholder.\n            webix.ui(newEditorList, $$(ids.editDefinitions));\n\n            // hide all the unused editors:\n            for (var c in _componentHash){\n                _componentHash[c].hide();\n            }\n\n            defaultEditorComponent.show(); // show the default editor\n            _currentEditor = defaultEditorComponent;\n\n            // set the richselect to the first option by default.\n            $$(ids.types).setValue(submenus[0].id);\n\n            // $$(ids.editDefinitions).show();\n\n// $$(ids.editDefinitions).cells() // define the edit Definitions here.\n        }\n\n\n\n        // our internal business logic\n        var _logic = this._logic = {\n\n\n            buttonCancel:function() {\n\n                _logic.resetState();\n\n                // clear all editors:\n                for (var c in _componentHash) {\n                    _componentHash[c].clear();\n                }\n\n                // hide this popup.\n                $$(ids.component).hide();\n            },\n\n\n            buttonSave:function() {\n\n                $$(ids.buttonSave).disable();\n\n\n                var editor = _currentEditor;\n                if (editor) {\n\n                    // the editor can define some basic form validations.\n                    if (editor.isValid()) {\n\n                        var values = editor.values();\n\n                        var field = null;\n                        var oldData = null;\n\n                        // if this is an ADD operation, (_editField will be undefined)\n                        if (!_editField) {\n\n                            // get a new instance of a field:\n                            field = _currentObject.fieldNew(values);\n\n                        } else {\n\n                            // use our _editField, backup our oldData\n                            oldData = _editField.toObj();\n                            _editField.fromValues(values);\n\n                            field = _editField;\n                        }\n\n\n                        var validator = field.isValid();\n                        if (validator.fail()) {\n                            validator.updateForm($$(editor.ui.id))\n    // OP.Form.isValidationError(errors, $$(editor.ui.id));\n\n                            // keep our old data\n                            if (oldData) {\n                                field.fromValues(oldData);\n                            }\n\n                            $$(ids.buttonSave).enable();\n                        } else {\n\n                            field.save()\n                            .then(()=>{\n\n                                $$(ids.buttonSave).enable();\n                                _logic.hide();\n                                _currentEditor.clear();\n                                _logic.callbacks.onSave(field)\n                            })\n                            .catch((err) => {\n                                OP.Validation.isFormValidationError(err, $$(editor.ui.id));\n                                $$(ids.buttonSave).enable();\n                            })\n                        }\n\n\n                    } else {\n                        $$(ids.buttonSave).enable();\n                    }\n\n                }  else {\n\n                    OP.Dialog.Alert({\n                        title: '! Could not find the current editor.',\n                        text: 'go tell a developer about this.'\n                    })\n                    $$(ids.buttonSave).enable();\n                }\n\n    // if (!inputValidator.validateFormat(fieldInfo.name)) {\n    //  self.enable();\n    //  return;\n    // }\n\n    // // Validate duplicate field name\n    // var existsColumn = $.grep(dataTable.config.columns, function (c) { return c.id == fieldInfo.name.replace(/ /g, '_'); });\n    // if (existsColumn && existsColumn.length > 0 && !data.editFieldId) {\n    //  webix.alert({\n    //      title: labels.add_fields.duplicateFieldTitle,\n    //      text: labels.add_fields.duplicateFieldDescription,\n    //      ok: labels.common.ok\n    //  });\n    //  this.enable();\n    //  return;\n    // }\n\n    // if (fieldInfo.weight == null)\n    //  fieldInfo.weight = dataTable.config.columns.length;\n\n    // // Call callback function\n    // if (base.saveFieldCallback && base.fieldName) {\n    //  base.saveFieldCallback(base.fieldName, fieldInfo)\n    //      .then(function () {\n    //          self.enable();\n    //          base.resetState();\n    //          base.hide();\n    //      });\n    // }\n\n\n            },\n\n\n            callbacks:{\n                onCancel: function() { console.warn('NO onCancel()!') },\n                onSave  : function(field) { console.warn('NO onSave()!') },\n            },\n\n\n\n            hide:function() {\n                $$(ids.component).hide();\n            },\n\n\n\n            modeAdd:function() {\n\n                // show default editor:\n                defaultEditorComponent.show(false, false);\n                _currentEditor = defaultEditorComponent;\n\n                // show the ability to switch data types\n                $$(ids.types).show();\n\n                // change button text to 'add'\n                $$(ids.buttonSave).define('label', labels.component.addNewField);\n                $$(ids.buttonSave).refresh();\n            },\n\n\n            modeEdit: function(field) {\n\n                if (_currentEditor) _currentEditor.hide();\n\n                // switch to this field's editor:\n                // hide the rest\n                for(var c in _componentsByType) {\n                    if (c == field.key) {\n                        _componentsByType[c].populate(field);\n                        _componentsByType[c].show(false, false);\n                        _currentEditor = _componentsByType[c];\n                    } else {\n                        _componentsByType[c].hide();\n                    }\n                }\n\n                // hide the ability to switch data types\n                $$(ids.types).hide();\n\n                // change button text to 'save'\n                $$(ids.buttonSave).define('label', labels.common.save);\n                $$(ids.buttonSave).refresh();\n            },\n\n\n            /**\n             * @function onChange\n             * swap the editor view to match the data field selected in the menu.\n             *\n             * @param {string} name  the menuName() of the submenu that was selected.\n             */\n            onChange: function (name) {\n                // note, the submenu returns the Field.menuName() values.\n                // we use that to lookup the Field here:\n                var editor = _componentHash[name];\n                if (editor) {\n                    editor.show();\n                    _currentEditor = editor;\n                    $$(ids.types).blur();\n                } else {\n\n                    // most likely they clicked on the menu button itself.\n                    // do nothing.\n\n                    // OP.Error.log(\"App Builder:Workspace:Object:NewDataField: could not find editor for submenu item:\"+name, { name:name });\n                }\n\n            },\n\n\n\n            onShow: function() {\n                // if (!AD.comm.isServerReady()) {\n                //  this.getTopParentView().hide();\n\n                //  webix.alert({\n                //      title: labels.add_fields.cannotUpdateFields,\n                //      text: labels.add_fields.waitRestructureObjects,\n                //      ok: labels.common.ok\n                //  });\n                // }\n                // else { // Set default field type\n                //  this.showFieldData('string');\n                // }\n    console.error('TODO: onShow();')\n            },\n\n\n\n            resetState: function() {\n                defaultEditorComponent.show(); // show the default editor\n                _currentEditor = defaultEditorComponent;\n\n                // set the richselect to the first option by default.\n                $$(ids.types).setValue(submenus[0].id);\n\n                // add mode :  change button text to 'Add'\n                // show the default editor\n    console.error('TODO: resetState()');\n            },\n\n\n\n            /**\n             * @function show()\n             *\n             * Show this component.\n             * @param {obj} $view  the webix.$view to hover the popup around.\n             * @param {ABField} field the ABField to edit.  If not provided, then\n             *                        this is an ADD operation.\n             */\n            show:function($view, field) {\n\n                _editField = field;\n\n                if (_editField) {\n\n                    _logic.modeEdit(field);\n\n                } else {\n\n                    _logic.modeAdd();\n\n                }\n\n                $$(ids.component).show($view);\n            },\n\n\n\n            typeClick:function() {\n                // NOTE: for functional testing we need a way to display the submenu\n                // (functional tests don't do .hover very well)\n                // so this routine is to enable .click() to show the submenu.\n\n                var subMenuId = $$(ids.types).config.data[0].submenu;\n\n                // #HACK Sub-menu popup does not render on initial\n                // Force it to render popup by use .getSubMenu()\n                if (typeof subMenuId != 'string') {\n                    $$(ids.types).getSubMenu($$(ids.types).config.data[0].id);\n                    subMenuId = $$(ids.types).config.data[0].submenu;\n                }\n\n                if ($$(subMenuId))\n                    $$(subMenuId).show();\n            }\n        }\n\n\n\n        // Expose any globally accessible Actions:\n        this.actions({\n\n            populateObjectPopupAddDataField: function(object) {\n                _currentObject = object;\n            }\n\n        })\n\n\n\n        // \n        // Define our external interface methods:\n        // \n        this.show = _logic.show;       // {fn}     fn(node, ABField)\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupNewDataField.js","\n/*\n * ab_work_object_workspace_popupSortFields\n *\n * Manage the Sort Fields popup.\n *\n */\n\n\nexport default class AB_Work_Object_Workspace_PopupSortFields extends OP.Component {   //.extend(idBase, function(App) {\n\n\tconstructor(App) {\n\t\tsuper(App, 'ab_work_object_workspace_popupSortFields');\n\t\tvar L = this.Label;\n\n\t\tvar labels = {\n\t\t\tcommon : App.labels,\n\t\t\tcomponent: {\n\n\t\t\t\taddNewSort: \tL('ab.sort_fields.addNewSort', \t\"*Add new sort\"),\n\t\t\t\tselectField:\tL('ab.sort_fields.selectField', \"*Please select field\"),\n\t\t\t\ttextAsc:\t\tL('ab.sort_fields.textAsc', \t\"*A -> Z\"),\n\t\t\t\ttextDesc: \t\tL('ab.sort_fields.textDesc', \t\"*Z -> A\"),\n\t\t\t\tdateAsc: \t\tL('ab.sort_fields.dateAsc', \t\"*Before -> After\"),\n\t\t\t\tdateDesc: \t\tL('ab.sort_fields.dateDesc', \t\"*After -> Before\"),\n\t\t\t\tnumberAsc: \t\tL('ab.sort_fields.numberAsc', \t\"*1 -> 9\"),\n\t\t\t\tnumberDesc: \tL('ab.sort_fields.numberDesc', \t\"*9 -> 1\"),\n\t\t\t\tbooleanAsc: \tL('ab.sort_fields.booleanAsc', \t\"*Checked -> Unchecked\"),\n\t\t\t\tbooleanDesc: \tL('ab.sort_fields.booleanDesc', \"*Unchecked -> Checked\")\n\n\t\t\t}\n\t\t}\n\n\n\t\t// internal list of Webix IDs to reference our UI components\n\t\tvar ids = {\n\t\t\tcomponent: this.unique('component'),\n\t\t\tlist: this.unique('list'),\n\t\t\tform: this.unique(\"form\"),\n\t\t}\n\n\n\t\t// Our webix UI definition:\n\t\tthis.ui = {\n\t\t\tview:\"popup\",\n\t\t\tid: ids.component,\n\t\t\tautoheight:true,\n\t\t\twidth: 500,\n\t\t\tbody: {\n\t\t\t\tview: \"form\",\n\t\t\t\tid: ids.form,\n\t\t\t\tautoheight: true,\n\t\t\t\tborderless: true,\n\t\t\t\telements: [{\n\t\t\t\t\tview: \"button\", value: labels.component.addNewSort, click: function (id, e, node) {\n\t\t\t\t\t\t_logic.clickAddNewSort();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonShow: function () {\n\t\t\t\t\t_logic.onShow();\n\t\t\t\t}\n\t\t\t}\n\t    }\n\n\n\n\t\t// Our init() function for setting up our UI\n\t\tthis.init = (options) => {\n\t\t\t// register our callbacks:\n\t\t\tfor(var c in _logic.callbacks) {\n\t\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t\t}\n\n\t\t\twebix.ui(this.ui);\n\t\t}\n\n\n\t\tvar CurrentObject = null;\n\n\t\t// our internal business logic\n\t\tvar _logic = this._logic = {\n\n\t\t\tcallbacks:{\n\n\t\t\t\t/**\n\t\t\t\t * @function onChange\n\t\t\t\t * called when we have made changes to the hidden field settings\n\t\t\t\t * of our Current Object.\n\t\t\t\t *\n\t\t\t\t * this is meant to alert our parent component to respond to the\n\t\t\t\t * change.\n\t\t\t\t */\n\t\t\t\tonChange:function(){}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * @function clickAddNewSort\n\t\t\t * the user clicked the add new sort buttton. I don't know what it does...will update later\n\t\t\t */\n\t\t\tclickAddNewSort: function(by, dir, as, id) {\n\t\t\t\t// Prevent duplicate fields\n\t\t\t\tvar sort_popup = $$(ids.component),\n\t\t\t\t\tsort_form = $$(ids.form);\n\n\t\t\t\tvar viewIndex = sort_form.getChildViews().length - 1;\n\t\t\t\tvar listFields = _logic.getFieldList(true);\n\t\t\t\tsort_form.addView({\n\t\t\t\t\tid: 'sort' + webix.uid(),\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"combo\",\n\t\t\t\t\t\t\twidth: 220,\n\t\t\t\t\t\t\toptions: listFields,\n\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\"onChange\": function (columnId) {\n\t\t\t\t\t\t\t\t\tvar allFields = CurrentObject.fields();\n\t\t\t\t\t\t\t\t\tvar columnConfig = \"\",\n\t\t\t\t\t\t\t\t\t\tsortDir = this.getParentView().getChildViews()[1],\n\t\t\t\t\t\t\t\t\t\tsortAs = this.getParentView().getChildViews()[2],\n\t\t\t\t\t\t\t\t\t\tdefaultAs = null,\n\t\t\t\t\t\t\t\t\t\toptions = null;\n\n\t\t\t\t\t\t\t\t\tallFields.forEach((f) => {\n\t\t\t\t\t\t\t\t\t\tif (f.columnName == columnId) {\n\t\t\t\t\t\t\t\t\t\t\tcolumnConfig = f\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\tif (!columnConfig)\n\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\tswitch (columnConfig.key) {\n\t\t\t\t\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\t\t\t\t\toptions = [\n\t\t\t\t\t\t\t\t\t\t\t\t{ id: 'asc', value: labels.component.textAsc },\n\t\t\t\t\t\t\t\t\t\t\t\t{ id: 'desc', value: labels.component.textDesc }];\n\t\t\t\t\t\t\t\t\t\t\tdefaultAs = \"string\";\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"date\":\n\t\t\t\t\t\t\t\t\t\t\toptions = [\n\t\t\t\t\t\t\t\t\t\t\t\t{ id: 'asc', value: labels.component.dateAsc },\n\t\t\t\t\t\t\t\t\t\t\t\t{ id: 'desc', value: labels.component.dateDesc }];\n\t\t\t\t\t\t\t\t\t\t\tdefaultAs = \"date\";\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"number\":\n\t\t\t\t\t\t\t\t\t\t\toptions = [\n\t\t\t\t\t\t\t\t\t\t\t\t{ id: 'asc', value: labels.component.numberAsc },\n\t\t\t\t\t\t\t\t\t\t\t\t{ id: 'desc', value: labels.component.numberDesc }];\n\t\t\t\t\t\t\t\t\t\t\tdefaultAs = \"int\";\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tsortDir.define('options', options);\n\t\t\t\t\t\t\t\t\tsortDir.refresh();\n\n\t\t\t\t\t\t\t\t\tsortAs.setValue(defaultAs);\n\n\t\t\t\t\t\t\t\t\t_logic.refreshFieldList();\n\n\t\t\t\t\t\t\t\t\t_logic.saveSorts();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"segmented\", width: 200, options: [{ id: '', value: labels.component.selectField }],\n\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\tonChange: function (newv, oldv) { // 'asc' or 'desc' values\n\t\t\t\t\t\t\t\t\t_logic.saveSorts();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"text\", width: 20, hidden: true, value: \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"button\", icon: \"trash\", type: \"icon\", width: 30, click: function () {\n\t\t\t\t\t\t\t\tsort_form.removeView(this.getParentView());\n\t\t\t\t\t\t\t\t_logic.refreshFieldList(true);\n\t\t\t\t\t\t\t\t_logic.saveSorts();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}, viewIndex);\n\n\t\t\t\t// Select field\n\t\t\t\tif (by) {\n\t\t\t\t\tvar fieldsCombo = sort_form.getChildViews()[viewIndex].getChildViews()[0];\n\t\t\t\t\tfieldsCombo.setValue(by);\n\t\t\t\t}\n\t\t\t\tif (dir) {\n\t\t\t\t\tvar segmentButton = sort_form.getChildViews()[viewIndex].getChildViews()[1];\n\t\t\t\t\tsegmentButton.setValue(dir);\n\t\t\t\t}\n\t\t\t\tif (as) {\n\t\t\t\t\tvar asField = sort_form.getChildViews()[viewIndex].getChildViews()[2];\n\t\t\t\t\tasField.setValue(as);\n\t\t\t\t}\n\t\t\t\t_logic.callbacks.onChange();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * @function getFieldList\n\t\t\t * return field list so we can present a custom UI for view\n\t\t\t */\n\t\t\tgetFieldList: function (excludeSelected) {\n\t\t\t\tvar sort_popup = $$(ids.component),\n\t\t\t\t\tsort_form = $$(ids.form),\n\t\t\t\t\tlistFields = [];\n\n\t\t\t\tif (!CurrentObject.fields())\n\t\t\t\t\treturn listFields;\n\n\t\t\t\t// Get all fields include hidden fields\n\t\t\t\tvar allFields = CurrentObject.fields();\n\t\t\t\tallFields.forEach((f) => {\n\t\t\t\t\tlistFields.push({\n\t\t\t\t\t\tid: f.columnName,\n\t\t\t\t\t\tlabel: f.label\n\t\t\t\t\t});\n\t\t\t\t})\n\n\t\t\t\t// Remove selected field\n\t\t\t\tif (excludeSelected) {\n\t\t\t\t\tvar childViews = sort_form.getChildViews();\n\t\t\t\t\tif (childViews.length > 1) { // Ignore 'Add new sort' button\n\t\t\t\t\t\tchildViews.forEach(function (cView, index) {\n\t\t\t\t\t\t\tif (childViews.length - 1 <= index)\n\t\t\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t\t\tvar selectedValue = cView.getChildViews()[0].getValue();\n\t\t\t\t\t\t\tif (selectedValue) {\n\t\t\t\t\t\t\t\tvar removeIndex = null;\n\t\t\t\t\t\t\t\tvar removeItem = $.grep(listFields, function (f, index) {\n\t\t\t\t\t\t\t\t\tif (f.id == selectedValue) {\n\t\t\t\t\t\t\t\t\t\tremoveIndex = index;\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tlistFields.splice(removeIndex, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn listFields;\n\t\t\t},\n\n\t\t\t// /**\n\t\t\t//  * @function sort\n\t\t\t//  * this preforms the sort on the datagrid (this may move to the datagrid once I read further)\n\t\t\t//  */\n\t\t\t// sort: function () {\n\t\t\t// \tvar sort_popup = $$(ids.component),\n\t\t\t// \t\tsort_form = $$(ids.form),\n\t\t\t// \t\tcolumnOrders = [];\n\t\t\t//\n\t\t\t// \tsort_form.getChildViews().forEach(function (cView, index) {\n\t\t\t// \t\tif (sort_form.getChildViews().length - 1 <= index) // Ignore 'Add a sort' button\n\t\t\t// \t\t\treturn;\n\t\t\t//\n\t\t\t// \t\tvar columnId = cView.getChildViews()[0].getValue();\n\t\t\t// \t\tvar order = cView.getChildViews()[1].getValue();\n\t\t\t//\n\t\t\t// \t\tif (columnId) {\n\t\t\t// \t\t\tvar columnConfig = sort_popup.dataTable.getColumnConfig(columnId);\n\t\t\t//\n\t\t\t// \t\t\tif (columnConfig) {\n\t\t\t// \t\t\t\tcolumnOrders.push({\n\t\t\t// \t\t\t\t\tname: columnConfig.id,\n\t\t\t// \t\t\t\t\torder: order\n\t\t\t// \t\t\t\t});\n\t\t\t// \t\t\t}\n\t\t\t// \t\t}\n\t\t\t// \t});\n\t\t\t//\n\t\t\t// \tsort_popup.dataTable.sort(function (a, b) {\n\t\t\t// \t\tvar result = false;\n\t\t\t//\n\t\t\t// \t\tfor (var i = 0; i < columnOrders.length; i++) {\n\t\t\t// \t\t\tvar column = columnOrders[i],\n\t\t\t// \t\t\t\taValue = a[column.name],\n\t\t\t// \t\t\t\tbValue = b[column.name];\n\t\t\t//\n\t\t\t// \t\t\tif ($.isArray(aValue)) {\n\t\t\t// \t\t\t\taValue = $.map(aValue, function (item) { return item.text }).join(' ');\n\t\t\t// \t\t\t}\n\t\t\t//\n\t\t\t// \t\t\tif ($.isArray(bValue)) {\n\t\t\t// \t\t\t\tbValue = $.map(bValue, function (item) { return item.text }).join(' ');\n\t\t\t// \t\t\t}\n\t\t\t//\n\t\t\t// \t\t\tif (aValue != bValue) {\n\t\t\t// \t\t\t\tif (column.order == 'asc') {\n\t\t\t// \t\t\t\t\tresult = aValue > bValue ? 1 : -1;\n\t\t\t// \t\t\t\t}\n\t\t\t// \t\t\t\telse {\n\t\t\t// \t\t\t\t\tresult = aValue < bValue ? 1 : -1;\n\t\t\t// \t\t\t\t}\n\t\t\t// \t\t\t\tbreak;\n\t\t\t// \t\t\t}\n\t\t\t// \t\t}\n\t\t\t//\n\t\t\t// \t\treturn result;\n\t\t\t// \t});\n\t\t\t// },\n\n\t\t\t/**\n\t\t\t * @function objectLoad\n\t\t\t * Ready the Popup according to the current object\n\t\t\t * @param {ABObject} object  the currently selected object.\n\t\t\t */\n\t\t\tobjectLoad: function(object) {\n\t\t\t\tCurrentObject = object;\n\n\t\t\t\t// // refresh list\n\t\t\t\t// var allFields = CurrentObject.fields();\n\t\t\t\t// allFields.forEach((f) => {\n\t\t\t\t// \talert(f.label);\n\t\t\t\t// \tlistFields.push({\n\t\t\t\t// \t\tid: f.id,\n\t\t\t\t// \t\tlabel: f.label,\n\t\t\t\t// \t\t$css:\"hidden_fields_\"+f.id\n\t\t\t\t// \t})\n\t\t\t\t// })\n\n\t\t\t\t//$$(ids.list).parse(listFields);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * @function objectLoad\n\t\t\t * Ready the Popup according to the current object\n\t\t\t * @param {ABObject} object  the currently selected object.\n\t\t\t */\n\t\t\tonShow: function() {\n\t\t\t\tvar sort_popup = $$(ids.component),\n\t\t\t\t\tsort_form = $$(ids.form);\n\n\t\t\t\tvar childViews = sort_form.getChildViews();\n\t\t\t\tif (childViews.length == 1) {\n\t\t\t\t\tvar sorts = CurrentObject.workspaceSortFields;\n\t\t\t\t\tsorts.forEach((s) => {\n\t\t\t\t\t\t_logic.clickAddNewSort(s.by, s.dir, s.as);\n\t\t\t\t\t});\n\n\t\t\t\t\tif (sorts.length == 0) {\n\t\t\t\t\t\t_logic.clickAddNewSort();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * @function refreshFieldList\n\t\t\t * return an updated field list so you cannot duplicate a sort\n\t\t\t */\n\t\t\trefreshFieldList: function (ignoreRemoveViews) {\n\t\t\t\tvar sort_popup = $$(ids.component),\n\t\t\t\t\tsort_form = $$(ids.form),\n\t\t\t\t\tlistFields = _logic.getFieldList(false),\n\t\t\t\t\tselectedFields = [],\n\t\t\t\t\tremoveChildViews = [];\n\n\t\t\t\tvar childViews = sort_form.getChildViews();\n\t\t\t\tif (childViews.length > 1) { // Ignore 'Add new sort' button\n\t\t\t\t\tchildViews.forEach(function (cView, index) {\n\t\t\t\t\t\tif (childViews.length - 1 <= index)\n\t\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t\tvar fieldId = cView.getChildViews()[0].getValue(),\n\t\t\t\t\t\t\tfieldObj = $.grep(listFields, function (f) { return f.id == fieldId });\n\n\t\t\t\t\t\tif (fieldObj.length > 0) {\n\t\t\t\t\t\t\t// Add selected field to list\n\t\t\t\t\t\t\tselectedFields.push(fieldObj[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Add condition to remove\n\t\t\t\t\t\t\tremoveChildViews.push(cView);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Remove filter conditions when column is deleted\n\t\t\t\tif (!ignoreRemoveViews) {\n\t\t\t\t\tremoveChildViews.forEach(function (cView, index) {\n\t\t\t\t\t\tsort_form.removeView(cView);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Field list should not duplicate field items\n\t\t\t\tchildViews = sort_form.getChildViews();\n\t\t\t\tif (childViews.length > 1) { // Ignore 'Add new sort' button\n\t\t\t\t\tchildViews.forEach(function (cView, index) {\n\t\t\t\t\t\tif (childViews.length - 1 <= index)\n\t\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t\tvar fieldId = cView.getChildViews()[0].getValue(),\n\t\t\t\t\t\t\tfieldObj = $.grep(listFields, function (f) { return f.id == fieldId });\n\n\t\t\t\t\t\tvar selectedFieldsExcludeCurField = $(selectedFields).not(fieldObj);\n\n\t\t\t\t\t\tvar enableFields = $(listFields).not(selectedFieldsExcludeCurField).get();\n\n\t\t\t\t\t\t// Update field list\n\t\t\t\t\t\tcView.getChildViews()[0].define('options', enableFields);\n\t\t\t\t\t\tcView.getChildViews()[0].refresh();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * @function saveSorts\n\t\t\t * This parses the sort form to build in order the sorts then saves to the application object workspace\n\t\t\t */\n\t\t\tsaveSorts: function() {\n\t\t\t\t// Prevent duplicate fields\n\t\t\t\tvar sort_popup = $$(ids.component),\n\t\t\t\t\tsort_form = $$(ids.form),\n\t\t\t\t\tsortFields = [];\n\n\t\t\t\tvar childViews = sort_form.getChildViews();\n\t\t\t\tif (childViews.length > 1) { // Ignore 'Add new sort' button\n\t\t\t\t\tchildViews.forEach(function (cView, index) {\n\t\t\t\t\t\tif (childViews.length - 1 <= index)\n\t\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t\tvar by = cView.getChildViews()[0].getValue();\n\t\t\t\t\t\tvar dir = cView.getChildViews()[1].getValue();\n\t\t\t\t\t\tvar as = cView.getChildViews()[2].getValue();\n\t\t\t\t\t\tsortFields.push({\"by\":by, \"dir\":dir, \"as\":as})\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tCurrentObject.workspaceSortFields = sortFields;\n\t\t\t\tCurrentObject.save()\n\t\t\t\t.then(function(){\n\t\t\t\t\t_logic.callbacks.onChange();\n\t\t\t\t})\n\t\t\t\t.catch(function(err){\n\t\t\t\t\tOP.Error.log('Error trying to save workspaceSortFields', {error:err, fields:sortFields });\n\t\t\t\t});\n\t\t\t},\n\n\n            /**\n             * @function show()\n             *\n             * Show this component.\n             * @param {obj} $view  the webix.$view to hover the popup around.\n             */\n            show:function($view) {\n                $$(ids.component).show($view);\n            }\n\n\n\t\t}\n\n\n\n\t\t// Expose any globally accessible Actions:\n\t\tthis.actions({\n\n\n\t\t})\n\n\n\t\t// \n\t\t// Define our external interface methods:\n\t\t// \n\t\tthis.objectLoad = _logic.objectLoad;\n\t\tthis.show = _logic.show;\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/components/ab_work_object_workspace_popupSortFields.js","//\n// REFACTORING:\n//\n// Our goal here is to create a Model object that will interact with Sails' blueprints and \n// return native Webix DataCollections.\n//\n// We also want to listen for updates on Sails Sockets and notify the DataCollections.\n//\n// Until we have the refactoring in place, we will reuse the AD.Model.extent() objects,\n// and convert the results to DataCollections.\n//\n\n\n\n// Namespacing conventions:\n// OP.Model.extend('[application].[Model]', {static}, {instance} );  --> Object\nOP.Model.extend('opstools.BuildApp.ABApplication',\n\t{\n\t\tuseSockets: true,\n\t\trestURL: '/app_builder/abapplication'\n\t},\n\t{\n\t\t// instance Methods\n\t}\n);\n\t\t\n\t\t\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/data/ABApplication.js","\n/*\n * custom_datetimepicker\n *\n * Create a custom webix component.\n *\n */\n\n\nvar ComponentKey = 'ab_custom_datetimepicker';\nexport default class ABCustomDateTimePicker extends OP.CustomComponent { //.extend(ComponentKey, function(App, componentKey ) {\n\n\tconstructor(App, key) {\n\t\t// App \t{obj}\tour application instance object.\n\t\t// componentKey {string}\tthe destination key in App.custom[componentKey] for the instance of this component:\n\n\t\tsuper(App, key);\n\n\t\tvar L = this.Label;\n\n\n\t\tvar labels = {\n\n\t\t\tcommon : App.labels,\n\n\t\t\tcomponent: {\n\n\t\t\t}\n\n\t\t}\n\n\t\t// internal list of Webix IDs to reference our UI components.\n\t\tvar ids = {\n\t\t\tcomponent: App.unique(ComponentKey),\n\t\t}\n\n\n\n\t\t// Our webix UI definition:\n\t\tvar _ui = {\n\t        name: App.unique(\"custom_datetimepicker\")\t// keep this unique for this App instance.\n\t    };\n\t    this.view = ComponentKey;\n\n\n\n\n\t\t// our internal business logic \n\t\tvar _logic = {\n\n\t\t}\n\t\tthis._logic = _logic;\n\n\n\t\t// Tell Webix to create an INSTANCE of our custom component:\n\t\twebix.editors.$popup.datetime = {\n\t\t\tview: \"popup\", width: 250, height: 250, padding: 0,\n\t\t\tbody: { view: \"calendar\", icons: true, borderless: true, timepicker: true }\n\t\t};\n\n\t\twebix.editors.datetime = webix.extend({\n\t\t\tpopupType: \"datetime\"\n\t\t}, webix.editors.date);\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/webix_custom_components/datetimepicker.js","\n/*\n * custom_editlist\n *\n * Create a custom webix component.\n *\n */\n\n\nvar ComponentKey = 'ab_custom_editlist';\nexport default class ABCustomEditList extends OP.CustomComponent { // .extend(ComponentKey, function(App, componentKey ) {\n\n\tconstructor(App, key) {\n\t\t// App \t{obj}\tour application instance object.\n\t\t// key {string}\tthe destination key in App.custom[componentKey] for the instance of this component:\n\n\t\tsuper(App, key);\n\n\t\tvar L = this.Label;\n\n\n\t\tvar labels = {\n\n\t\t\tcommon : App.labels,\n\n\t\t\tcomponent: {\n\n\t\t\t}\n\n\t\t}\n\n\t\t// internal list of Webix IDs to reference our UI components.\n\t\tvar ids = {\n\t\t\tcomponent: App.unique(ComponentKey),\n\t\t}\n\n\n\n\t\t// Our webix UI definition:\n\t\tvar _ui = {\n\t        name: ComponentKey\n\t    };\n\t    this.view = ComponentKey;\n\n\n\n\t    // our internal business logic \n\t\tvar _logic = {\n\n\t\t}\n\t\tthis._logic = _logic;\n\n\n\t\t// Tell Webix to create an INSTANCE of our custom component:\n\t    webix.protoUI(_ui, webix.EditAbility, webix.ui.list);\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/webix_custom_components/editlist.js","\n/*\n * custom_edittree\n *\n * Create a custom webix component.\n *\n */\n\nvar ComponentKey = 'ab_custom_edittree';\nexport default class ABCustomEditTree extends OP.CustomComponent {   // .extend(ComponentKey, function(App, componentKey ) {\n\n\tconstructor(App, key) {\n\t\t// App \t{obj}\tour application instance object.\n\t\t// key {string}\tthe destination key in App.custom[componentKey] for the instance of this component:\n\n\t\tsuper(App, key);\n\n\t\tvar L = this.Label;\n\n\n\t\tvar labels = {\n\n\t\t\tcommon : App.labels,\n\n\t\t\tcomponent: {\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// internal list of Webix IDs to reference our UI components.\n\t\tvar ids = {\n\t\t\tcomponent: App.unique(ComponentKey),\n\t\t}\n\n\n\n\t\t// Our webix UI definition:\n\t\tvar _ui = {\n\t        name: ComponentKey\n\t    };\n\t    this.view = ComponentKey;\n\n\n\n\t    // our internal business logic \n\t\tvar _logic = {\n\n\t\t}\n\t\tthis._logic = _logic;\n\n\n\n\t\t// Tell Webix to create an INSTANCE of our custom component:\n\t    webix.protoUI(_ui, webix.EditAbility, webix.ui.tree);\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/opstools/AppBuilder/webix_custom_components/edittree.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/css-loader/lib/css-base.js","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/style-loader/fixUrls.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".webix_view, .webix_el_colorpicker input, .webix_el_combo input, .webix_el_datepicker input, .webix_el_search input, .webix_el_text input, .webix_control button, .webix_control input, .webix_control textarea, .webix_el_label, .webix_inp_bottom_label, .webix_inp_label, .webix_inp_top_label {\\n\\tfont-family: \\\"Helvetica Neue\\\",Helvetica,Arial,sans-serif !important;\\n}\\n.ab-generated-page {\\n\\toverflow-y: auto;\\n}\\n.ab-main-container {\\n\\tposition: relative;\\n\\tdisplay: block;\\n\\twidth: 100%;\\n\\tbackground: -moz-linear-gradient(top, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0) 100%); /* FF3.6-15 */\\n\\tbackground: -webkit-linear-gradient(top, rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 100%); /* Chrome10-25,Safari5.1-6 */\\n\\tbackground: linear-gradient(to bottom, rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\\n}\\n.ab-main-container .pointer {\\n\\tcursor: pointer;\\n}\\n.ab-main-container .right {\\n\\ttext-align: right;\\n}\\n.ab-main-container .center {\\n\\ttext-align: center;\\n}\\n.ab-main-container .left {\\n\\ttext-align: left;\\n}\\n.ab-text-bold {\\n\\tfont-weight: bold !important;\\n}\\n.ab-scroll-y {\\n\\toverflow-y: auto !important;\\n}\\n.ab-ellipses-text, .ab-ellipses-text > div {\\n\\toverflow: hidden;\\n\\twhite-space: nowrap;\\n\\ttext-overflow: ellipsis;\\n}\\n.float-left {\\n\\tfloat: left;\\n}\\n.float-right {\\n\\tfloat: right;\\n}\\n\\n/* Webix icon */\\n.ab-main-container .webix_icon {\\n\\tline-height: inherit;\\n}\\n\\n/* Fix overflow-x */\\n.ab-generated-page .webix_scroll_cont {\\n\\toverflow: auto !important;\\n}\\n\\n/* == Webix datatable == */\\n/* Checkbox column */\\n.ab-main-container .webix_hcell.center input[type=checkbox] {\\n\\twidth:20px;\\n\\theight:20px;\\n\\tmargin-top:12px;\\n  }\\n.ab-main-container .webix_table_checkbox {\\n\\twidth:20px;\\n\\theight:20px;\\n\\tmargin-top:5px;\\n}\\n/* Last column */\\n.ab-main-container .webix_column.webix_last > div,\\n.ab-main-container .webix_hs_center td.webix_last,\\n.ab-main-container .ab-app-list-descriptionwebix_hs_right td.webix_last {\\n\\tborder-right-width: 1px !important;\\n}\\n/* No padding/margin column */\\n.ab-column-no-padding div {\\n\\tpadding: 0px !important;\\n\\tmargin: 0px !important;\\n}\\n.ab-main-container .ab-cell-warn {\\n\\tbackground-color: #F5AE0F !important;\\n}\\n\\n/* Webix selected item */\\n.webix_list_item.webix_selected,\\n.webix_column>div.webix_cell_select,\\n.webix_column>div.webix_column_select,\\n.webix_column>div.webix_row_select {\\n\\tbackground-color: #3498db !important;\\n}\\n\\n/* Webix message */\\n.webix_success {\\n  background-color: #BFF2BF;\\n}\\n.webix_success div {\\n  background-color: #BFF2BF;\\n  border: 1px solid #007A00;\\n  color: #000;\\n}\\n\\n/* Webix list */\\n.ab-main-container .webix_list_item .webix_selected,\\n.ab-main-container .webix_tree_item.webix_selected {\\n\\tcolor: #fff !important;\\n\\tbackground-color: #3498db !important;\\n}\\n.ab-app-form-permission .webix_selected {\\n\\tcolor: #333 !important;\\n\\tbackground-color: transparent !important;\\n}\\n\\n/* Webix toolbar */\\n.ab-toolbar-submenu, .ab-toolbar-submenu .webix_header>div {\\n\\tbackground: #EEE !important;\\n\\tcolor: #666 !important;\\n\\tfont-size: 15px !important;\\n\\tfont-weight: bold !important;\\n\\tborder-bottom: 0px !important;\\n}\\n\\n/* Webix segmented */\\n.ab-form-component-item .webix_segment_0.webix_selected,\\n.ab-form-component-item .webix_segment_1.webix_selected,\\n.ab-form-component-item .webix_segment_N.webix_selected,\\n.ab-component-view-edit-field .webix_segment_0.webix_selected,\\n.ab-component-view-edit-field .webix_segment_1.webix_selected,\\n.ab-component-view-edit-field .webix_segment_N.webix_selected {\\n\\tcolor: #fff !important;\\n\\tbackground-color: #3498db !important;\\n}\\n\\n.ab-form-component-item .webix_segment_0,\\n.ab-form-component-item .webix_segment_1,\\n.ab-form-component-item .webix_segment_N,\\n.ab-component-view-edit-field .webix_segment_0,\\n.ab-component-view-edit-field .webix_segment_1,\\n.ab-component-view-edit-field .webix_segment_N {\\n\\tcolor: #3498db;\\n\\tbackground: #fff;\\n}\\n\\n/* Add new columns popup */\\n.ab-add-fields-popup {\\n\\toverflow-y: auto;\\n}\\n\\n/* Application list */\\n.ab-app-list {\\n/*\\n\\tmin-height: 300px;\\n\\tpadding: 40px 100px;\\n*/\\n}\\n.ab-app-select-list .webix_selected {\\n\\tbackground-color: #FFF !important;\\n\\tcolor: #333 !important;\\n}\\n.ab-app-select-list .webix_list_item:hover {\\n\\tbackground: #ebebeb;\\n}\\n.ab-app-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n\\tmargin: -2px -10px;\\n\\tpadding: 15px;\\n\\tline-height: 20px;\\n}\\ndiv[view_id='ab-app-list'] div.webix_list_item:hover,\\ndiv[view_id='ab-object-list'] div.webix_list_item:hover,\\ndiv[view_id='ab-object-list-menu'] div.webix_list_item:hover,\\ndiv[view_id='ab-new-connectObject-list-item'] div.webix_list_item:hover,\\ndiv[view_id='ab-edit-header-items'] div.webix_list_item:hover,\\ndiv[view_id='ab-frozen-field-list'] div.webix_list_item:hover {\\n\\tbackground-color: #eee;\\n}\\n.ab-app-list-name {\\n\\tfont-size: large;\\n}\\n.ab-app-list-description {\\n\\tcolor: #999;\\n\\tfont-size: small;\\n}\\n.ab-app-list-info {\\n\\twidth: 95%;\\n\\tdisplay: inline-block;\\n}\\n.ab-app-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tright: 10px;\\n\\topacity: 0.4;\\n\\tline-height: 70px;\\n\\theight: 70px;\\n}\\n.ab-app-list-edit:hover {\\n\\topacity: 1;\\n}\\n\\n/* Application workspace */\\n.ab-app-workspace {\\n\\t/*min-height: 100px;*/\\n}\\n.ab-unsync-data-warning {\\n\\tcursor: pointer;\\n    color: #fff;\\n    background-color: #F5962F;\\n    border: #fff dotted 1px !important;\\n    padding-left: 2px;\\n}\\n.ab-unsync-data-popup .webix_win_head {\\n\\tbackground-color: #F5962F;\\n}\\n.ab-unsync-data-popup .webix_win_head .header {\\n\\tpadding-left: 5px;\\n\\tfont-weight: bold;\\n    color: #fff;\\n}\\n.ab-unsync-data-status {\\n\\tpadding: 3px;\\n}\\n.ab-unsync-data-in-progress {\\n\\tbackground-color: #F5AE0F;\\n}\\n.ab-unsync-data-done {\\n\\tbackground-color: #3AB349;\\n}\\n.ab-unsync-data-error {\\n\\tbackground-color: #EC2F2F;\\n}\\n\\n/* Object list */\\n.ab-object-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n}\\n.ab-object-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0px;\\n\\tright: 5px;\\n\\tdisplay: none;\\n}\\n.ab-object-unsync {\\n\\tbackground-color: #d2e3ef;\\n\\tcolor: #4a4a4a;\\n\\tposition: absolute;\\n\\ttop: 4px;\\n\\tright: 30px;\\n\\tfont-size: 12px;\\n\\tborder-radius: 6px;\\n\\tpadding: 0px 4px;\\n\\theight: 20px;\\n\\tline-height: 20px;\\n\\tdisplay: none;\\n}\\n\\n/* Interface list */\\n.ab-page-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n}\\n.ab-page-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0px;\\n\\tright: 5px;\\n\\tdisplay: none;\\n\\tcursor: pointer;\\n}\\n\\n/* Object datatable */\\n.ab-object-data-header {\\n\\tposition: relative;\\n}\\n.ab-object-data-new-header {\\n\\tbackground-color: #cfd9e0;\\n}\\n\\n.ab-object-data-header-edit {\\n\\tdisplay: none;\\n\\tposition: absolute;\\n\\ttop: 15px;\\n\\tright: 10px;\\n}\\n.ab-object-data-header:hover .ab-object-data-header-edit {\\n\\tdisplay: block;\\n}\\n.ab-object-unsync-data {\\n\\tbackground-color: #dae6fb;\\n}\\n.ab-object-view-column {\\n\\tcolor: #3498db;\\n\\tfont-weight: bold;\\n\\ttext-align: center;\\n\\tcursor: pointer;\\n}\\n\\n/* Connect object data */\\n.ab-connect-data-info {\\n\\tdisplay: inline-block;\\n\\twidth: 90px;\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n}\\n\\n.ab-connect-data-disable {\\n\\tbackground-color: #aaa;\\n}\\n\\n/* Custom selectivity */\\n.ab-main-container .selectivity-multiple-input-container {\\n\\tbackground: none !important;\\n\\tpadding: 0px !important;\\n\\toverflow: hidden !important;\\n\\tmax-height: 100% !important;\\n}\\n.ab-main-container .selectivity-multiple-selected-item {\\n\\tbackground: #3498db !important;\\n\\tpadding-right: 5px;\\n\\t/*max-width: 100px !important;*/\\n}\\n\\n/* Interface tree view */\\n.ab-main-container .webix_tree_item.webix_selected span {\\n\\tpadding: 0px;\\n\\tbackground: #3498db !important;\\n}\\n\\n/* Interface new page popup */\\n.ab-interface-new-quick-page {\\n    overflow: scroll !important;\\n\\toverflow-x: hidden !important;\\n\\toverflow-y: auto !important;\\n}\\n\\n.ab-interface-new-quick-page .webix_inp_checkbox_border label {\\n\\tfont-weight: normal; /* Override bootstrap*/\\n}\\n\\n/* Interface page layout */\\n.ab-component-drop-area {\\n\\tmargin-right: 2px;\\n\\tborder: 1px dashed #000 !important;\\n\\tbackground-color: #D3E9EF;\\n\\tbackground-image:url(\\\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='30px' width='90px'><text x='20' y='20' fill='#95CBEF' font-size='15'>Drop Here</text></svg>\\\");\\n}\\n\\ndiv[view_id='ab-interface-layout-page'] .webix_list_item,\\n.ab-component-in-page {\\n\\twidth: 100%;\\n\\tposition: relative;\\n\\tbackground-color: #fff;\\n\\tclear: both;\\n}\\n\\n.ab-component-item-name {\\n\\tfloat: left;\\n\\tfont-size: 18px;\\n\\tborder-right: 1px solid #ebebeb;\\n\\tvertical-align: top;\\n\\tpadding-top: 10px;\\n\\twidth: 90px;\\n\\tmargin-bottom: -500em; /* CSS hack: equal height of right float */\\n\\tpadding-bottom: 500em;\\n}\\n\\n.ab-component-item-display {\\n\\tfloat: right;\\n\\tvertical-align: top;\\n\\tpadding: 10px;\\n\\twidth: 87%;\\n\\tline-height: 100%;\\n\\toverflow-x: auto;\\n}\\n\\n.ab-component-remove {\\n\\tposition: absolute;\\n\\ttop: 5px;\\n\\tright: 1px;\\n}\\n\\n.ab-component-link {\\n\\tcolor: #003B7E;\\n\\ttext-decoration: underline;\\n\\tcursor: pointer;\\n}\\n\\n/* Interface component list */\\n.ab-component-item-drag {\\n\\tborder: 1px dotted #000 !important;\\n\\tfont-size: 35px;\\n\\tbackground-color: #fff;\\n}\\n\\n/* Header component */\\n.ab-component-header {\\n\\tfont-size: 25px;\\n\\tfont-weight: bold;\\n\\tmargin: 0px;\\n\\tpadding: 0px;\\n}\\n.ab-component-description {\\n\\tfont-size: 14px;\\n\\tpadding: 0px;\\n}\\n\\n/* Menu component */\\n.ab-page-list-item .webix_tree_checkbox {\\n\\tmargin: 0px !important;\\n}\\n\\n/* Object toolbar */\\n.ab-data-toolbar {\\n\\tbackground: #aaa !important;\\n}\\n.ab-data-toolbar button {\\n\\ttext-align: center;\\n\\tfont-size: 14px;\\n}\\n.ab-data-toolbar button:hover, .ab-data-toolbar button:active {\\n\\tbackground: #aaa !important;\\n}\\n.ab-data-toolbar button .webix_icon_btn {\\n\\topacity: 0.6;\\n\\tfont-size: 15px;\\n}\\n.ab-data-toolbar button:hover .webix_icon_btn {\\n\\topacity: 1;\\n}\\n\\n/* Grid component */\\n.ab-page-grid-column-item .column-checkbox {\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\ttop: -5px;\\n\\twidth: 30px;\\n}\\n\\n.ab-page-grid-column-item .column-empty-checkbox {\\n\\tposition: relative;\\n\\twidth: 50px;\\n\\theight: 38px;\\n}\\n\\n.ab-page-grid-column-item .column-name {\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\ttop: -18px;\\n}\\n\\n/* Form component */\\n.ab-standard-button button, .ab-standard-button button:hover, .ab-standard-button button:active, .ab-standard-button .webix_icon_btn {\\n\\tbackground: transparent !important;\\n\\tborder-color: transparent !important;\\n\\tcolor: #666 !important;\\n\\tbox-shadow: none !important;\\n}\\n.ab-cancel-button button {\\n\\tbackground: transparent !important;\\n\\tcolor: #AAA;\\n\\tborder-color: transparent;\\n}\\n.ab-cancel-button button:hover {\\n\\ttext-decoration: underline;\\n}\\n.ab-cancel-button button:active {\\n\\tbox-shadow: none;\\n}\\n.ab-form-connect-data {\\n\\tfloat: left;\\n\\tborder: #CCC solid 1px;\\n\\tpadding: 0px 5px;\\n\\tmin-width: 70%;\\n\\tborder-radius: 6px;\\n}\\n\\n.ab-main-container .webix_layout_form {\\n\\tbackground-color: #fff !important;\\n}\\n\\n/* Loading Screen */\\n.ab-loading-screen {\\n\\tbackground: #000;\\n\\topacity: 0.7;\\n\\tposition: absolute !important;\\n}\\n.ab-loading-body {\\n\\tbackground: #000;\\n\\tborder-width: 0px !important;\\n}\\n.ab-loading-message {\\n\\tcolor: #fff !important;\\n\\tbackground: #000 !important;\\n\\tfont-size: 30px !important;\\n\\ttext-align: center;\\n\\tvertical-align: middle;\\n\\tborder-width: 0px !important;\\n\\tpadding-top: 20% !important;\\n\\theight: 100px !important;\\n}\\n.ab-loading-button {\\n\\ttext-align: center;\\n}\\n.ab-loading-button button {\\n\\tbackground-color: #003B7E;\\n\\twidth: 200px;\\n}\\n.ab-loading-cancel-button {\\n\\ttext-align: center;\\n\\tbackground: transparent;\\n}\\n.ab-loading-cancel-button a {\\n\\tcolor: #fff !important;\\n}\\n.ab-loading-screen .webix_progress_bottom {\\n\\theight: 40px !important;\\n\\topacity: 1;\\n}\\n.ab-loading-screen .webix_progress_bottom .webix_progress_state {\\n\\theight: 40px !important;\\n}\\n\\n/* Dynamic DataTable */\\n.dynamic-datatable-view .webix_badge {\\n\\tmargin: 0 !important;\\n}\\n\\n/* Number data field */\\n.ab-number-format-show {\\n\\twhite-space: nowrap;\\n}\\n\\n/* Icon Picker */\\n.ab-main-container .iconpicker .iconpicker-items {\\n\\tcolor: #000;\\n}\\n\\n/* Webix Tabs */\\ndiv.webix_item_tab {\\n\\tfont-size: 16px;\\n}\\n\\n::-webkit-input-placeholder { /* Chrome/Opera/Safari */\\n  color: #CCC;\\n}\\n::-moz-placeholder { /* Firefox 19+ */\\n  color: #CCC;\\n}\\n:-ms-input-placeholder { /* IE 10+ */\\n  color: #CCC;\\n}\\n:-moz-placeholder { /* Firefox 18- */\\n  color: #CCC;\\n}\\n\\n/* Webix popup */\\n.webix_popup_text {\\n\\tpadding-right: 20px;\\n\\tpadding-left: 20px;\\n}\\n\\n/* Webix badge */\\n.webix_badge {\\n\\tline-height: 22px;\\n\\ttext-indent: -1px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./assets/opstools/AppBuilder/AppBuilder.css\n// module id = 58\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\t// Test for IE <= 9 as proposed by Browserhacks\n\t\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t\t// Tests for existence of standard globals is to allow style-loader \n\t\t// to operate correctly into non-standard environments\n\t\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\t\treturn window && document && document.all && !window.atob;\n\t}),\n\tgetElement = (function(fn) {\n\t\tvar memo = {};\n\t\treturn function(selector) {\n\t\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t\t}\n\t\t\treturn memo[selector]\n\t\t};\n\t})(function (styleTarget) {\n\t\treturn document.querySelector(styleTarget)\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [],\n\tfixUrls = require(\"./fixUrls\");\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (typeof options.insertInto === \"undefined\") options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar styleTarget = getElement(options.insertInto)\n\tif (!styleTarget) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\tstyleTarget.insertBefore(styleElement, styleTarget.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\tstyleTarget.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\tstyleTarget.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\tstyleTarget.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\toptions.attrs.type = \"text/css\";\n\n\tattachTagAttrs(styleElement, options.attrs);\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\tattachTagAttrs(linkElement, options.attrs);\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction attachTagAttrs(element, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\telement.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement, options);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/* If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls){\n\t\tcss = fixUrls(css);\n\t}\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 59\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!./AppBuilder.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!./AppBuilder.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!./AppBuilder.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/opstools/AppBuilder/AppBuilder.css\n// module id = 60\n// module chunks = 0"],"sourceRoot":""}