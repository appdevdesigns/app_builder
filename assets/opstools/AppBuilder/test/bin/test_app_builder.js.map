{"version":3,"sources":["webpack:///webpack/bootstrap 0f69fd249fd651db1ddc","webpack:///./components/ab_work_object_list_popupEditMenu.js","webpack:////home/pong/Desktop/AppBuilder/~/app_builder/assets/opstools/BuildApp/BuildApp.js","webpack:////home/pong/Desktop/AppBuilder/~/app_builder/assets/opstools/BuildApp/OP_Bundle.js","webpack:///./test_app_builder.js"],"names":["describe","sandbox","mockApp","OP","Component","_newApp","componentName","target","before","beforeEach","sinon","create","afterEach","restore","it","assert","isNotNull","ui","equal","view","menuItems","body","data","labelRename","labels","rename","labelDelete","length","command","itemClickFn","on","onItemClick","spyLogicItemClick","spy","_logic","itemClickParam","textContent","calledOnce","calledWith","init","spyWebixUi","webix","spyLogicHide","options","onClick","action","console","log","callbacks","spyCallbacks","spyHide","result","webpackJsonp","module","exports","__webpack_require__","Object","defineProperty","value","_createClass","defineProperties","props","i","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_ABObject","_ABObject2","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","TypeError","_AllApplications","L","altText","AD","lang","label","getLabel","toDC","DataCollection","toArray","DC","ary","id","getFirstId","element","getItem","push","getNextId","ABApplication","attributes","_this","json","name","role","Multilingual","translate","fieldsMultilingual","newObjects","objects","forEach","_objects","Model","get","Models","destroy","_this2","then","remove","save","_this3","values","toObj","update","updateItem","add","unTranslate","currObjects","assignPermissions","permItems","_this4","Promise","resolve","reject","comm","service","put","url","roles","fail","done","getPermissions","_this5","createPermission","_this6","post","deletePermission","_this7","delete","filter","objectNew","objectDestroy","object","remaininObjects","o","objectSave","isIncluded","allApplications","ModelApplication","findAll","catch","newApp","app","App","isValid","op","errors","arrayApplications","nameMatch","trim","replace","toLowerCase","matchingApps","Form","validationError","message","ABField","fieldDefaults","defaults","fromValues","fieldKey","fieldIcon","icon","fieldMenuName","menuName","fieldDescription","description","isNameUnique","fields","f","isDifferent","columnName","fieldRemove","err","Util","uuid","fieldSave","settings","translations","showIcon","parseInt","columnHeader","isObjectWorkspace","config","header","clearEditor","ids","defaultValues","component","$$","setValue","editorPopulate","field","definitionEditor","Field","_onChange","onChange","newVal","oldVal","getValue","labelOnChange","_ui","rows","dataFieldHeaderLabel","placeholder","dataFieldHeaderLabelPlaceholder","labelWidth","labelWidthMedium","css","dataFieldColumnName","dataFieldColumnNamePlaceholder","align","labelRight","dataFieldShowIcon","labelWidthCheckbox","editorValues","_ABField","_ABField2","ABFieldComponent","elements","rules","logic","idBase","unique","eachDeep","e","autoheight","borderless","isNotEmpty","_init","clear","warn","clearValidation","hide","validate","populate","show","a","b","getValues","l","commonUI","concat","r","_component","list","fn","cols","idsUnique","_ABFieldString","_ABFieldString2","_ABFieldNumber","_ABFieldNumber2","_ABFieldImage","_ABFieldImage2","Fields","allFields","newField","_edittree","_edittree2","_editlist","_editlist2","_AppBuilder","_AppBuilder2","extend","edit","formName","ok","cancel","yes","no","createErrorMessage","createSuccessMessage","updateErrorMessage","updateSucessMessage","deleteErrorMessage","deleteSuccessMessage","renameErrorMessage","renameSuccessMessage","CustomComponent","AppChooser","AppWorkspace","animate","actions","transitionApplicationChooser","adjust","_actions","Control","OpsTool","self","templateDOM","resize_notification","tool","_super","webixUiId","loadingScreen","syncButton","initDOM","initWebixUI","cb","can","fragment","html","AppBuilder","container","resize","height","appListDom","$","width","parent","computedHeight","mh","_ABFieldManager","_ABFieldManager2","ABObject","application","labelFormat","isImported","urlPath","importFromObject","objectWorkspace","hiddenFields","newFields","fieldNew","_fields","currFields","columnHeaders","headers","idLookup","h","workspaceHiddenFields","hfID","hidden","set","_get","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","getPrototypeOf","getter","call","_ABField3","_ABFieldComponent","_ABFieldComponent2","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","constructor","setPrototypeOf","__proto__","ABFieldImageDefaults","ABFieldImageComponent","imageWidth","imageHeight","click","enable","disable","ABFieldImage","dv","useWidth","useHeight","editor","sort","propertiesComponent","ABFieldNumberDefaults","formatList","sign","position","ABFieldNumberComponent","typeDecimalPlaces","typeRounding","validateMinimum","validateMaximum","inputWidth","RegExp","test","newValue","oldValue","disabled","vertical","validation","ABFieldNumber","allowRequired","editors","number","text","ABFieldStringDefaults","ABFieldStringComponent","labelWidthLarge","ABFieldString","textDefault","supportMultilingual","AppList","AppForm","cells","_ABApplication","_ABApplication2","formHeader","placeholderName","placeholderDescription","formDescription","sectionPermission","permissionHeader","createNewRole","invalidName","duplicateName","common","form","appFormPermissionList","appFormCreateRoleButton","saveButton","responsive","maxWidth","appListSpacerColMaxWidth","minWidth","appListSpacerColMinWidth","responsiveCell","maxHeight","appListSpacerRowHeight","hideMobile","fillspace","margin","required","permissionRenameRole","smallSpacer","labelAlign","template","type","autowidth","offIcon","onIcon","createRoleButtonClick","markCheckbox","node","permissionClick","buttonWidthSmall","buttonSaveClick","FormFields","ProgressBar","applicationCreate","async","waterfall","createdApp","permissionSave","formReady","error","buttonSaveEnable","transitionApplicationList","applicationUpdate","Application","formValues","next","app_role","buttonSaveDisable","formBusy","updateApp","getSelectedApplication","formValidate","formReset","appName","permissionAddNew","permissionRemoveNew","showProgress","formPopulate","hideProgress","isValidationError","permissionName","isApplicationRole","selectedIds","getSelectedId","select","List","item","isSelected","unselect","isNaN","permissionPopulate","PermForm","parsedRoles","map","split","join","available_roles","selected_role_ids","clearAll","parse","indexOf","markCreateButton","appRoles","find","perm","editRole","d","editItem","saveRoleTasks","appRole","selectedPerms","getSelectedItem","appRoleItem","series","results","transitionApplicationForm","unselectApplication","title","createNew","noApplication","uploader","toolBar","buttonCreateNewApplication","MenuComponent","PopupMenu","import","upload","multiple","autosend","onAfterFileAdd","onFileUpload","response","onFileUploadError","details","templateListItem","appListRowHeight","iconGear","abAppListItem","ev","trg","onClickListItem","abAppListEdit","onClickListEdit","_data","busy","loadData","ready","attachEvent","index","refreshOverlay","listApplications","refreshList","selectedApp","transitionWorkspace","errorMessage","Dialog","Alert","appList","count","showOverlay","hideOverlay","reset","unselectAll","unsync","sync","refresh","_templateListItem","OverlayBox","deleteApplication","menu","confirmDeleteTitle","confirmDeleteMessage","head","export","datatype","timestamp","ConfirmDelete","callback","window","location","assign","backToApplication","synchronize","objectTitle","interfaceTitle","buttonSync","labelAppName","tabbar","tab_object","tab_interface","workspace","AppObjectWorkspace","AppInterfaceWorkspace","alrign","mediumSpacer","multiview","tabWidthMedium","idNew","idOld","tabSwitch","applicationInit","define","idTab","applicationLoad","ObjectList","ObjectWorkspace","clearObjectWorkspace","addNew","buttonNew","ObjectEditPopup","custom","editlist","editaction","editable","editValue","onAfterRender","onAfterSelect","selectObject","onBeforeEditStop","state","onAfterEditStop","ignoreUpdate","abObjectListEdit","clickEditMenu","clickNewObject","callbackObjectEditorMenu","listBusy","CurrentApplication","objectList","syncNumberRefresh","listReady","PopupNewObjectComponent","showGear","old","selectedObject","populateObjectWorkspace","gearIcon","getItemNode","querySelector","style","visibility","display","callbackNewObject","Error","newObject","PopupNewObject","objectId","Confirm","isOK","onDone","getSelectedObject","BlankTab","modal","selectNewObject","c","ourCBs","onCancel","onSave","currentApplication","validationErrors","buttonSave","buttonCancel","formClear","itemNode","addNewRow","hideFields","filterFields","sortFields","frozenColumns","defineLabel","permission","addFields","buttonAddField","buttonExport","buttonFieldsVisible","buttonFilter","buttonFrozen","buttonLabel","buttonRowNew","buttonSort","datatable","toolbar","noSelection","DataTable","PopupDefineLabelComponent","PopupDefineLabel","PopupNewDataFieldComponent","PopupHideFieldComponent","PopupHideField","badge","toolbarFieldsVisible","$view","toolbarFilter","toolbarSort","toolbarFrozen","toolbarDefineLabel","toolbarPermission","toolbarAddFields","toolbarButtonExport","rowAdd","onEditorMenu","callbackHeaderEditorMenu","callbackDefineLabel","callbackAddFields","callbackFieldsVisible","CurrentObject","populateObjectPopupAddDataField","objectLoad","resizeColumn","resizeRow","prerender","fixedRowHeight","dragColumn","onBeforeSelect","preserve","prevent","onCheck","row","col","val","onColumnResize","newWidth","oldWidth","user_action","onBeforeColumnDrag","sourceId","event","onBeforeColumnDrop","targetId","onAfterColumnDrop","onAfterColumnShow","onAfterColumnHide","onHeaderClick","EditField","EditNode","callbackHeaderEdit","PopupHeaderEdit","column","PopupHeaderEditComponent","refreshColumns","selectFieldToGenerate","labelFields","format","onShow","_currentObject","ButtonSave","each","listFields","selectedItem","Format","hideField","filterField","sortField","editField","deleteField","listItems","showAll","hideAll","clickShowAll","clickHideAll","listItemClick","iconsReset","newHidden","isHidden","fID","iconShow","iconHide","chooseType","addNewField","types","editDefinitions","submenu","typeClick","preventDefault","onMenuItemClick","onBeforeShow","resetState","onHide","_objectHash","_componentHash","_componentsByType","_currentEditor","defaultEditorComponent","_editField","submenus","newEditorList","F","editorComponent","firstID","oldData","modeAdd","modeEdit","subMenuId","getSubMenu","useSockets","restURL","ComponentKey","componentKey","protoUI","EditAbility","tree","useSourceMap","toString","content","cssWithMappingToString","modules","mediaQuery","alreadyImportedModules","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","baseUrl","protocol","host","currentDir","pathname","fixedCss","fullMatch","origUrl","unquotedOrigUrl","$1","newUrl","stylesInDom","memoize","memo","apply","arguments","isOldIE","document","all","atob","getElement","selector","styleTarget","singletonElement","singletonCounter","styleElementsInsertedAtTop","fixUrls","DEBUG","attrs","singleton","insertInto","insertAt","styles","listToStyles","addStylesToDom","newList","mayRemove","domStyle","refs","newStyles","j","parts","addStyle","media","part","insertStyleElement","styleElement","lastStyleElementInsertedAtTop","insertBefore","firstChild","nextSibling","appendChild","removeStyleElement","parentNode","removeChild","idx","splice","createStyleElement","createElement","attachTagAttrs","createLinkElement","linkElement","rel","keys","setAttribute","styleIndex","applyToSingletonTag","bind","URL","createObjectURL","revokeObjectURL","Blob","updateLink","href","applyToTag","updateStyle","newObj","replaceText","textStore","replacement","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","locals","hot","accept","newContent","require","dispose","parentJsonpFunction","webpackJsonpCallback","chunkIds","moreModules","executeModules","moduleId","chunkId","resolves","installedChunks","hasOwnProperty","shift","s","installedModules","requireEnsure","promise","getElementsByTagName","script","charset","timeout","nc","src","p","setTimeout","onScriptComplete","onerror","onload","clearTimeout","chunk","m","n","getDefault","getModuleExports","oe","_configDesktop","_configDesktop2","_configMobile","_configMobile2","innerWidth","errorObj","invalidAttributes","attr","hasFocused","raw","code","wasForm","msg","markInvalid","focus","_restURLs","findOne","_Models","OPModel","staticData","instanceData","cond","verb","params","Array","isArray","dc","onAfterDelete","nURI","k","oURI","util","string","replaceAll","uri","pop","u","curr","nameSpace","modelName","objectName","findObject","baseObj","nameList","whoops","objName","controlName","currLanguage","currentLanguage","t","language_code","foundOne","trans","_form","_form2","_multilingual","_multilingual2","_model","_model2","_util","_util2","_config","_config2","uid","buttonWidthLarge","buttonWidthMedium","buttonWidthExtraSmall","tabWidthLarge","tabWidthSmall","tabWidthExtraSmall","largeSpacer","objectWorkspaceColWidth","labelWidthSmall"],"mappings":"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","file":"test_app_builder.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0f69fd249fd651db1ddc","describe('ab_work_object_list_popupEditMenu component', () => {\n\n\tvar sandbox;\n\n\tvar mockApp = OP.Component._newApp();\n\tvar componentName = 'ab_work_object_list_popupEditMenu';\n\tvar target;\n\n\tbefore(() => {\n\t\tOP.Component['ab'](mockApp);\n\n\t\ttarget = OP.Component[componentName](mockApp);\n\n\t\t// TODO: render UI function\n\t\t// buildHTML();\n\n\t\t// TODO: mock up parent dependencies\n\t});\n\n\t/*\n\t**\n\t**\n\t**\n\t**\n\t**\n\t**\n\t*/\n\tbeforeEach(function () {\n\t\tsandbox = sinon.sandbox.create();\n\t});\n\n\tafterEach(function () {\n\t\tsandbox.restore();\n\t})\n\n\n\n\n\tit('should exist component', () => {\n\t\tassert.isNotNull(target);\n\t});\n\n\t// UI test cases\n\tdescribe('UI testing', () => {\n\n\t\tit('should have ui setting', () => {\n\t\t\tassert.isNotNull(target.ui, \"should have a ui property\");\n\t\t});\n\n\t\tit(\"should be webix's popup\", () => {\n\t\t\tassert.equal(target.ui.view, \"popup\");\n\t\t});\n\n\t\tit('should have 2 menu items', () => {\n\t\t\tlet menuItems = target.ui.body.data;\n\n\t\t\tlet labelRename = mockApp.labels.rename;\n\t\t\tlet labelDelete = mockApp.labels['delete'];\n\n\t\t\tassert.equal(menuItems.length, 2);\n\t\t\tassert.equal(menuItems[0].command, labelRename, 'first menu item should be rename');\n\t\t\tassert.equal(menuItems[1].command, labelDelete, 'second menu item should be delete');\n\t\t});\n\n\t\tit('should have item click event', () => {\n\t\t\tlet itemClickFn = target.ui.body.on.onItemClick;\n\n\t\t\tassert.isNotNull(itemClickFn, 'should have item click event');\n\t\t});\n\n\t\tit('should call _logic.onItemClick when a menu item is clicked', () => {\n\t\t\tlet itemClickFn = target.ui.body.on.onItemClick,\n\t\t\t\tspyLogicItemClick = sandbox.spy(target._logic, 'onItemClick'),\n\t\t\t\titemClickParam = { textContent: 'rename' };\n\n\t\t\t// Assume a menu item is clicked\n\t\t\titemClickFn(null, null, itemClickParam);\n\n\t\t\t// Assert _logic.onItemClick should be called in onItemClick of menu\n\t\t\tsinon.assert.calledOnce(spyLogicItemClick);\n\n\t\t\t// Assert pass a correct parameter to _logic.onItemClick\n\t\t\tsinon.assert.calledWith(spyLogicItemClick, itemClickParam);\n\t\t});\n\n\t});\n\n\n\tdescribe('Init testing', () => {\n\t\tit('should have init function', () => {\n\t\t\tassert.isNotNull(target.init, \"should have a init property\");\n\t\t});\n\n\t\tit('should create webix ui', () => {\n\t\t\tlet spyWebixUi = sandbox.spy(webix, 'ui'),\n\t\t\t\tspyLogicHide = sandbox.spy(target._logic, 'hide');\n\n\t\t\t// Call init\n\t\t\ttarget.init();\n\n\t\t\t// Assert call webix.ui once and pass .ui of this component to webix.ui()\n\t\t\tsinon.assert.calledOnce(spyWebixUi);\n\t\t\tsinon.assert.calledWith(spyWebixUi, target.ui);\n\n\t\t\t// Assert call _logic.hide once\n\t\t\tsinon.assert.calledOnce(spyLogicHide);\n\n\t\t});\n\n\t\tit('should set callbacks to _logic', () => {\n\t\t\tlet options = {\n\t\t\t\tonClick: function (action) {\n\t\t\t\t\tconsole.log(\"This is a test callback\");\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Call init\n\t\t\ttarget.init(options);\n\n\t\t\t// Assert onClick callback should be in _logic\n\t\t\tassert.equal(target._logic.callbacks.onClick, options.onClick);\n\t\t});\n\n\t});\n\n\tdescribe('Actions testing', () => {\n\t});\n\n\tdescribe('Logic testing', () => {\n\t\tit('should pass \"rename\" to callback when the rename item is clicked', () => {\n\t\t\tlet spyCallbacks = sandbox.spy(target._logic.callbacks, 'onClick');\n\t\t\tlet spyHide = sandbox.spy(target._logic, 'hide');\n\n\t\t\t// Assume menu item is clicked\n\t\t\tlet result = target._logic.onItemClick({ textContent: mockApp.labels.rename });\n\n\t\t\t// Should call onClick callback and pass \"rename\" to a parameter \n\t\t\tsinon.assert.calledOnce(spyCallbacks);\n\t\t\tsinon.assert.calledWith(spyCallbacks, 'rename');\n\n\t\t\t// Should hide this popup\n\t\t\tsinon.assert.calledOnce(spyHide);\n\n\t\t\t// Should return false to cancel a event of webix\n\t\t\tassert.equal(result, false);\n\n\t\t});\n\n\t\tit('should pass \"delete\" to callback when the delete item is clicked', () => {\n\t\t\tlet spyCallbacks = sandbox.spy(target._logic.callbacks, 'onClick');\n\t\t\tlet spyHide = sandbox.spy(target._logic, 'hide');\n\n\t\t\t// Assume menu item is clicked\n\t\t\tlet result = target._logic.onItemClick({ textContent: mockApp.labels['delete'] });\n\n\t\t\t// Should call onClick callback and pass \"delete\" to a parameter \n\t\t\tsinon.assert.calledOnce(spyCallbacks);\n\t\t\tsinon.assert.calledWith(spyCallbacks, 'delete');\n\n\t\t\t// Should hide this popup\n\t\t\tsinon.assert.calledOnce(spyHide);\n\n\t\t\t// Should return false to cancel a event of webix\n\t\t\tassert.equal(result, false);\n\n\t\t});\n\t\t// onItemClick\n\t\t// show\n\t\t// hide\n\t});\n\n\n\n});\n\n\n// WEBPACK FOOTER //\n// ./components/ab_work_object_list_popupEditMenu.js","webpackJsonp([0],[\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n// import OP from \"OP\"\n\n\n__webpack_require__(35);\n\nvar _ABObject = __webpack_require__(14);\n\nvar _ABObject2 = _interopRequireDefault(_ABObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _AllApplications = [];\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nfunction toDC(data) {\n\treturn new webix.DataCollection({\n\t\tdata: data\n\n\t});\n}\n\nfunction toArray(DC) {\n\tvar ary = [];\n\n\tvar id = DC.getFirstId();\n\twhile (id) {\n\t\tvar element = DC.getItem(id);\n\t\tary.push(element);\n\t\tid = DC.getNextId(id);\n\t}\n\n\treturn ary;\n}\n\nvar ABApplication = function () {\n\tfunction ABApplication(attributes) {\n\t\tvar _this = this;\n\n\t\t_classCallCheck(this, ABApplication);\n\n\t\t// ABApplication Attributes\n\t\tthis.id = attributes.id;\n\t\tthis.json = attributes.json;\n\t\tthis.name = attributes.name || this.json.name || \"\";\n\t\tthis.role = attributes.role;\n\n\t\t// multilingual fields: label, description\n\t\tOP.Multilingual.translate(this, this.json, ABApplication.fieldsMultilingual());\n\n\t\t// import all our ABObjects\n\t\tvar newObjects = [];\n\t\t(attributes.json.objects || []).forEach(function (obj) {\n\t\t\tnewObjects.push(new _ABObject2.default(obj, _this));\n\t\t});\n\t\tthis._objects = newObjects;\n\n\t\t// import all our ABViews\n\n\n\t\t// instance keeps a link to our Model for .save() and .destroy();\n\t\tthis.Model = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\tthis.Model.Models(ABApplication);\n\t}\n\n\t///\n\t/// Static Methods\n\t///\n\t/// Available to the Class level object.  These methods are not dependent\n\t/// on the instance values of the Application.\n\t///\n\n\n\t/**\n  * @function allApplications\n  *\n  * return a DataCollection that contains all the ABApplications this user\n  * can see (based upon server side permissions);\n  *\n  * NOTE: this manages the results in the _AllApplications dataCollection\n  * store.  Any future .create(), .destroy(), .updates() modify values in\n  * that collection.\n  *\n  * Any webix ui components synced to that collection will be automatically\n  * updated.\n  *\n  * @return {Promise}\n  */\n\n\n\t_createClass(ABApplication, [{\n\t\tkey: \"destroy\",\n\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\t/// ABApplication data methods\n\n\n\t\t/**\n   * @method destroy()\n   *\n   * destroy the current instance of ABApplication\n   *\n   * also remove it from our _AllApplications\n   *\n   * @return {Promise}\n   */\n\t\tvalue: function destroy() {\n\t\t\tvar _this2 = this;\n\n\t\t\tif (this.id) {\n\t\t\t\treturn this.Model.destroy(this.id).then(function () {\n\t\t\t\t\t_AllApplications.remove(_this2.id);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/**\n   * @method save()\n   *\n   * persist the current instance of ABApplication to the DB\n   *\n   * Also, keep the values in _AllApplications up to date.\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"save\",\n\t\tvalue: function save() {\n\t\t\tvar _this3 = this;\n\n\t\t\tvar values = this.toObj();\n\n\t\t\t// we already have an .id, so this must be an UPDATE\n\t\t\tif (values.id) {\n\n\t\t\t\treturn this.Model.update(values.id, values).then(function () {\n\t\t\t\t\t_AllApplications.updateItem(values.id, _this3);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\t// must be a CREATE:\n\t\t\t\treturn this.Model.create(values).then(function (data) {\n\t\t\t\t\t_this3.id = data.id;\n\t\t\t\t\t_AllApplications.add(_this3, 0);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\n\t}, {\n\t\tkey: \"toObj\",\n\t\tvalue: function toObj() {\n\n\t\t\tOP.Multilingual.unTranslate(this, this.json, ABApplication.fieldsMultilingual());\n\t\t\tthis.json.name = this.name;\n\n\t\t\t// for each Object: compile to json\n\t\t\tvar currObjects = [];\n\t\t\tthis._objects.forEach(function (obj) {\n\t\t\t\tcurrObjects.push(obj.toObj());\n\t\t\t});\n\t\t\tthis.json.objects = currObjects;\n\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tname: this.name,\n\t\t\t\tjson: this.json,\n\t\t\t\trole: this.role\n\t\t\t};\n\t\t}\n\n\t\t/// ABApplication Permission methods\n\n\n\t\t/**\n   * @method assignPermissions()\n   *\n   * Make sure the current ABApplication permissions match the given\n   * array of permissions.\n   *\n   * @param {array} permItems\tan array of role assignments that this\n   * \t\t\t\t\t\t\tABApplication should match.\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"assignPermissions\",\n\t\tvalue: function assignPermissions(permItems) {\n\t\t\tvar _this4 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tAD.comm.service.put({\n\t\t\t\t\turl: '/app_builder/' + _this4.id + '/role/assign',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\troles: permItems\n\t\t\t\t\t}\n\t\t\t\t}).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method getPermissions()\n   *\n   * Return an array of role assignments that are currently assigned to this\n   * ABApplication.\n   *\n   * @return {Promise} \tresolve(list) : list {array} Role assignments\n   */\n\n\t}, {\n\t\tkey: \"getPermissions\",\n\t\tvalue: function getPermissions() {\n\t\t\tvar _this5 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tAD.comm.service.get({ url: '/app_builder/' + _this5.id + '/role' }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method createPermission()\n   *\n   * Create a Role in the system after the name of the current ABApplication.\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"createPermission\",\n\t\tvalue: function createPermission() {\n\t\t\tvar _this6 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// TODO: need to take created role and store as : .json.applicationRole = role.id\n\n\t\t\t\tAD.comm.service.post({ url: '/app_builder/' + _this6.id + '/role' }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method deletePermission()\n   *\n   * Remove the Role in the system of the current ABApplication.\n   * (the one created by  .createPermission() )\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"deletePermission\",\n\t\tvalue: function deletePermission() {\n\t\t\tvar _this7 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// TODO: need to remove created role from : .json.applicationRole\n\t\t\t\tAD.comm.service.delete({ url: '/app_builder/' + _this7.id + '/role' }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\n\t\t///\n\t\t/// Objects\n\t\t///\n\n\n\t\t/**\n   * @method objects()\n   *\n   * return an array of all the ABObjects for this ABApplication.\n   *\n   * @param {fn} filter  \ta filter fn to return a set of ABObjects that this fn\n   *\t\t\t\t\t\treturns true for.\n   * @return {array} \tarray of ABObject\n   */\n\n\t}, {\n\t\tkey: \"objects\",\n\t\tvalue: function objects(filter) {\n\n\t\t\tfilter = filter || function () {\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\treturn this._objects.filter(filter);\n\t\t}\n\n\t\t/**\n   * @method objectNew()\n   *\n   * return an instance of a new (unsaved) ABObject that is tied to this\n   * ABApplication.\n   *\n   * NOTE: this new object is not included in our this.objects until a .save()\n   * is performed on the object.\n   *\n   * @return {ABObject}\n   */\n\n\t}, {\n\t\tkey: \"objectNew\",\n\t\tvalue: function objectNew(values) {\n\t\t\treturn new _ABObject2.default(values, this);\n\t\t}\n\n\t\t/**\n   * @method objectDestroy()\n   *\n   * remove the current ABObject from our list of ._objects.\n   *\n   * @param {ABObject} object\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"objectDestroy\",\n\t\tvalue: function objectDestroy(object) {\n\n\t\t\tvar remaininObjects = this.objects(function (o) {\n\t\t\t\treturn o.id != object.id;\n\t\t\t});\n\t\t\tthis._objects = remaininObjects;\n\t\t\treturn this.save();\n\n\t\t\t// var isIncluded = (this.objects(function(o){ return o.id == object.id }).length > 0);\n\t\t\t// if (!isIncluded) {\n\t\t\t// \tthis._objects.push(object);\n\t\t\t// }\n\n\t\t\t// return this.save();\n\t\t}\n\n\t\t/**\n   * @method objectSave()\n   *\n   * persist the current ABObject in our list of ._objects.\n   *\n   * @param {ABObject} object\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"objectSave\",\n\t\tvalue: function objectSave(object) {\n\t\t\tvar isIncluded = this.objects(function (o) {\n\t\t\t\treturn o.id == object.id;\n\t\t\t}).length > 0;\n\t\t\tif (!isIncluded) {\n\t\t\t\tthis._objects.push(object);\n\t\t\t}\n\n\t\t\treturn this.save();\n\t\t}\n\t}], [{\n\t\tkey: \"allApplications\",\n\t\tvalue: function allApplications() {\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar ModelApplication = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\t\t\tModelApplication.Models(ABApplication); // set the Models  setting.\n\n\t\t\t\tModelApplication.findAll().then(function (data) {\n\n\t\t\t\t\t// NOTE: data is already a DataCollection from .findAll()\n\t\t\t\t\t_AllApplications = data;\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @function create\n   *\n   * take the initial values and create an instance of ABApplication.\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"create\",\n\t\tvalue: function create(values) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar newApp = {};\n\t\t\t\tOP.Multilingual.unTranslate(values, newApp, ABApplication.fieldsMultilingual());\n\t\t\t\tvalues.json = newApp;\n\t\t\t\tnewApp.name = values.name;\n\n\t\t\t\tvar ModelApplication = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\t\t\tModelApplication.create(values).then(function (app) {\n\n\t\t\t\t\t// return an instance of ABApplication\n\t\t\t\t\tvar App = new ABApplication(app);\n\n\t\t\t\t\t_AllApplications.add(App, 0);\n\t\t\t\t\tresolve(App);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method fieldsMultilingual()\n   *\n   * return an array of fields that are considered Multilingual labels for\n   * an ABApplication\n   *\n   * @return {array}\n   */\n\n\t}, {\n\t\tkey: \"fieldsMultilingual\",\n\t\tvalue: function fieldsMultilingual() {\n\t\t\treturn ['label', 'description'];\n\t\t}\n\n\t\t//// TODO: Refactor isValid() to ignore op and not error if duplicateName is own .id\n\n\t}, {\n\t\tkey: \"isValid\",\n\t\tvalue: function isValid(op, values) {\n\n\t\t\tvar errors = null;\n\n\t\t\t// during an ADD operation\n\t\t\tif (op == 'add') {\n\n\t\t\t\t// label/name must be unique:\n\t\t\t\tvar arrayApplications = toArray(_AllApplications);\n\n\t\t\t\tvar nameMatch = values.label.trim().replace(/ /g, '_').toLowerCase();\n\t\t\t\tvar matchingApps = arrayApplications.filter(function (app) {\n\t\t\t\t\treturn app.name.trim().toLowerCase() == nameMatch;\n\t\t\t\t});\n\t\t\t\tif (matchingApps && matchingApps.length > 0) {\n\n\t\t\t\t\terrors = OP.Form.validationError({\n\t\t\t\t\t\tname: 'label',\n\t\t\t\t\t\tmessage: L('ab_form_application_duplicate_name', \"*Name (#name#) is already in use\").replace('#name#', nameMatch)\n\t\t\t\t\t}, errors);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check the common validations:\n\t\t\t// TODO:\n\t\t\t// if (!inputValidator.validate(values.label)) {\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\n\t\t\treturn errors;\n\t\t}\n\t}]);\n\n\treturn ABApplication;\n}();\n\nexports.default = ABApplication;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n * ABField\n *\n * An ABField defines a single unique Field/Column in a ABObject.\n *\n */\n\n// import OP from \"../../OP/OP\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABField = function () {\n\tfunction ABField(values, object, fieldDefaults) {\n\t\t_classCallCheck(this, ABField);\n\n\t\t// NOTE: setup this first so later we can use .fieldType(), .fieldIcon()\n\t\tthis.defaults = fieldDefaults;\n\n\t\t/*\n  {\n  id:'uuid',\t\t\t\t\t// uuid value for this obj\n  key:'fieldKey',\t\t\t\t// unique key for this Field\n  icon:'font',\t\t\t\t// fa-[icon] reference for an icon for this Field Type\n  label:'',\t\t\t\t\t// pulled from translation\n  columnName:'column_name',\t// a valid mysql table.column name \n  settings: {\t\t\t\t\t// unique settings for the type of field\n  showIcon:true/false,\t// only useful in Object Workspace DataTable\n  // specific for dataField\n  },\n  translations:[]\n  }\n  */\n\t\tthis.fromValues(values);\n\n\t\t// label is a multilingual value:\n\t\tOP.Multilingual.translate(this, this, ['label']);\n\n\t\tthis.object = object;\n\t}\n\n\t///\n\t/// Static Methods\n\t///\n\t/// Available to the Class level object.  These methods are not dependent\n\t/// on the instance values of the Application.\n\t///\n\n\t_createClass(ABField, [{\n\t\tkey: 'fieldKey',\n\n\n\t\t// unique key to reference this specific DataField\n\t\t// fieldName() {\n\t\t// \treturn this.defaults.name;\n\t\t// }\n\n\t\t// unique key to reference this specific DataField\n\t\tvalue: function fieldKey() {\n\t\t\treturn this.defaults.key;\n\t\t}\n\n\t\t// font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\n\t}, {\n\t\tkey: 'fieldIcon',\n\t\tvalue: function fieldIcon() {\n\t\t\treturn this.defaults.icon;\n\t\t}\n\n\t\t// the multilingual text for the name of this data field.\n\n\t}, {\n\t\tkey: 'fieldMenuName',\n\t\tvalue: function fieldMenuName() {\n\t\t\treturn this.defaults.menuName;\n\t\t}\n\n\t\t// the multilingual text for the name of this data field.\n\n\t}, {\n\t\tkey: 'fieldDescription',\n\t\tvalue: function fieldDescription() {\n\t\t\treturn this.defaults.description;\n\t\t}\n\n\t\t/*\n   * @method isValid\n   * check the current values to make sure they are valid.\n   * Here we check the default values provided by ABField.\n   *\n   * @return null or [{OP.Form.validationError()}] objects.\n   */\n\n\t}, {\n\t\tkey: 'isValid',\n\t\tvalue: function isValid() {\n\t\t\tvar _this = this;\n\n\t\t\tvar errors = null;\n\n\t\t\t// .columnName must be unique among fileds on the same object\n\t\t\tvar isNameUnique = this.object.fields(function (f) {\n\t\t\t\tvar isDifferent = f.id != _this.id;\n\t\t\t\treturn f.id != _this.id && f.columnName.toLowerCase() == _this.columnName.toLowerCase();\n\t\t\t}).length == 0;\n\t\t\tif (!isNameUnique) {\n\t\t\t\terrors = OP.Form.validationError({\n\t\t\t\t\tname: 'columnName',\n\t\t\t\t\tmessage: L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.columnName)\n\t\t\t\t}, errors);\n\t\t\t}\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\t/// ABApplication data methods\n\n\n\t\t/**\n   * @method destroy()\n   *\n   * destroy the current instance of ABApplication\n   *\n   * also remove it from our _AllApplications\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: 'destroy',\n\t\tvalue: function destroy() {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// verify we have been .save()d before:\n\t\t\t\tif (_this2.id) {\n\n\t\t\t\t\t_this2.object.fieldRemove(_this2).then(function () {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\n\t\t\t\t\tresolve(); // nothing to do really\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method save()\n   *\n   * persist this instance of ABField with it's parent ABObject\n   *\n   *\n   * @return {Promise}\n   *\t\t\t\t\t\t.resolve( {this} )\n   */\n\n\t}, {\n\t\tkey: 'save',\n\t\tvalue: function save() {\n\t\t\tvar _this3 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// if this is our initial save()\n\t\t\t\tif (!_this3.id) {\n\t\t\t\t\t_this3.id = OP.Util.uuid(); // setup default .id\n\t\t\t\t}\n\n\t\t\t\t_this3.object.fieldSave(_this3).then(function () {\n\t\t\t\t\tresolve(_this3);\n\t\t\t\t}).catch(function (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABField instance\n   * into the values needed for saving to the DB.\n   *\n   * @return {json}\n   */\n\n\t}, {\n\t\tkey: 'toObj',\n\t\tvalue: function toObj() {\n\n\t\t\t// store \"label\" in our translations\n\t\t\tOP.Multilingual.unTranslate(this, this, [\"label\"]);\n\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tkey: this.key,\n\t\t\t\ticon: this.icon,\n\t\t\t\tcolumnName: this.columnName,\n\t\t\t\tsettings: this.settings,\n\t\t\t\ttranslations: this.translations\n\t\t\t};\n\t\t}\n\t}, {\n\t\tkey: 'fromValues',\n\t\tvalue: function fromValues(values) {\n\n\t\t\tthis.id = values.id; // NOTE: only exists after .save()\n\t\t\tthis.key = values.key || this.fieldKey();\n\t\t\tthis.icon = values.icon || this.fieldIcon();\n\n\t\t\t// if this is being instantiated on a read from the Property UI,\n\t\t\t// .label is coming in under .settings.label\n\t\t\tthis.label = values.label || values.settings.label || '?label?';\n\n\t\t\tthis.columnName = values.columnName || '';\n\t\t\tthis.translations = values.translations || [];\n\n\t\t\tthis.settings = values.settings || {};\n\t\t\tthis.settings.showIcon = values.settings.showIcon + \"\" || \"1\";\n\n\t\t\t// convert from \"0\" => 0\n\t\t\tthis.settings.showIcon = parseInt(this.settings.showIcon);\n\t\t}\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t/*\n   * @function columnHeader\n   * Return the column header for a webix grid component for this specific \n   * data field.\n   * @param {bool} isObjectWorkspace is this being used in the Object \n   *\t\t\t\t\t\t\t\t   workspace.\n   * @return {obj}  configuration obj\n   */\n\n\t}, {\n\t\tkey: 'columnHeader',\n\t\tvalue: function columnHeader(isObjectWorkspace) {\n\n\t\t\tvar config = {\n\t\t\t\tid: this.id,\n\t\t\t\theader: this.label\n\t\t\t};\n\n\t\t\tif (isObjectWorkspace) {\n\t\t\t\tif (this.settings.showIcon) {\n\t\t\t\t\tconfig.header = '<span class=\"webix_icon fa-{icon}\"></span>'.replace('{icon}', this.fieldIcon()) + config.header;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn config;\n\t\t}\n\t}], [{\n\t\tkey: 'clearEditor',\n\t\tvalue: function clearEditor(ids) {\n\n\t\t\tvar defaultValues = {\n\t\t\t\tlabel: '',\n\t\t\t\tcolumnName: '',\n\t\t\t\tshowIcon: 1\n\t\t\t};\n\n\t\t\tfor (var f in defaultValues) {\n\t\t\t\tvar component = $$(ids[f]);\n\t\t\t\tcomponent.setValue(defaultValues[f]);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'editorPopulate',\n\t\tvalue: function editorPopulate(ids, field) {\n\n\t\t\t$$(ids.label).setValue(field.label);\n\t\t\t$$(ids.columnName).setValue(field.columnName);\n\t\t\t$$(ids.showIcon).setValue(field.settings.showIcon);\n\t\t}\n\n\t\t/**\n   * @function definitionEditor\n   *\n   * Many DataFields share some base information for their usage\n   * in the AppBuilder.  The UI Editors have a common header\n   * and footer format, and this function allows child DataFields\n   * to not have to define those over and over.\n   *\n   * The common layout header contains:\n   *\t\t[Menu Label]\n   *\t\t[textBox: labelName]\n   *\t\t[text:    description]\n   *\n   * The defined DataField UI will be added at the end of this.\n   *\n   * This routine actually updated the live DataField definition\n   * with the common header info.\n   *\n   * @param {DataField} field  The DataField object to work with.\n   */\n\n\t}, {\n\t\tkey: 'definitionEditor',\n\t\tvalue: function definitionEditor(App, ids, _logic, Field) {\n\n\t\t\t/// TODO: maybe just pass in onChange instead of _logic\n\t\t\t/// if not onChange, then use our default:\n\n\t\t\t// setup our default labelOnChange functionality:\n\t\t\tvar _onChange = function onChange(newVal, oldVal) {\n\n\t\t\t\toldVal = oldVal || '';\n\n\t\t\t\tif (newVal != oldVal && oldVal == $$(ids.columnName).getValue()) {\n\t\t\t\t\t$$(ids.columnName).setValue(newVal);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// if they provided a labelOnChange() override, use that:\n\t\t\tif (_logic.labelOnChange) {\n\t\t\t\t_onChange = _logic.labelOnChange;\n\t\t\t}\n\n\t\t\tvar _ui = {\n\t\t\t\t// id: ids.component,\n\t\t\t\trows: [{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: \"<span class='webix_icon fa-{0}'></span>{1}\".replace('{0}', Field.icon).replace('{1}', Field.menuName)\n\t\t\t\t}, {\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tid: ids.label,\n\t\t\t\t\tname: 'label',\n\t\t\t\t\tlabel: App.labels.dataFieldHeaderLabel,\n\t\t\t\t\tplaceholder: App.labels.dataFieldHeaderLabelPlaceholder,\n\t\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\t\tcss: 'ab-new-label-name',\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: function onChange(newVal, oldVal) {\n\t\t\t\t\t\t\t_onChange(newVal, oldVal);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tid: ids.columnName,\n\t\t\t\t\tname: 'columnName',\n\t\t\t\t\tlabel: App.labels.dataFieldColumnName, // 'Name',\n\t\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\t\tplaceholder: App.labels.dataFieldColumnNamePlaceholder }, {\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tid: ids.fieldDescription,\n\t\t\t\t\tlabel: Field.description,\n\t\t\t\t\talign: \"right\"\n\t\t\t\t}, {\n\t\t\t\t\tview: 'checkbox',\n\t\t\t\t\tid: ids.showIcon,\n\t\t\t\t\tname: 'showIcon',\n\t\t\t\t\tlabelRight: App.labels.dataFieldShowIcon, // 'Show icon',\n\t\t\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\t\t\tvalue: true\n\t\t\t\t}]\n\t\t\t};\n\n\t\t\treturn _ui;\n\t\t}\n\t}, {\n\t\tkey: 'editorValues',\n\t\tvalue: function editorValues(settings) {\n\n\t\t\tvar obj = {\n\t\t\t\tlabel: settings.label,\n\t\t\t\tcolumnName: settings.columnName,\n\t\t\t\tsettings: settings\n\t\t\t};\n\n\t\t\tdelete settings.label;\n\t\t\tdelete settings.columnName;\n\n\t\t\treturn obj;\n\t\t}\n\t}]);\n\n\treturn ABField;\n}();\n\nexports.default = ABField;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ABFieldComponent\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * An ABFieldComponent defines the UI component used by an ABField to display it's properties.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _ABField = __webpack_require__(1);\n\nvar _ABField2 = _interopRequireDefault(_ABField);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABFieldComponent = function () {\n\tfunction ABFieldComponent(options) {\n\t\t_classCallCheck(this, ABFieldComponent);\n\n\t\tthis.options = options;\n\n\t\tthis.fieldDefaults = options.fieldDefaults || {};\n\n\t\tthis.elements = options.elements || function (App) {\n\t\t\treturn [];\n\t\t};\n\n\t\tthis.defaultValues = options.defaultValues || {};\n\n\t\tthis.rules = options.rules || {};\n\n\t\tthis.logic = options.logic || {};\n\n\t\tthis.init = options.init || function () {};\n\n\t\tthis.idBase = this.fieldDefaults.name || '??fieldName??';\n\n\t\t// this.ids = options.ids || {};\n\t\tthis.ids = {};\n\t}\n\n\t///\n\t/// Static Methods\n\t///\n\t/// Available to the Class level object.  These methods are not dependent\n\t/// on the instance values of the Application.\n\t///\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\t_createClass(ABFieldComponent, [{\n\t\tkey: 'component',\n\t\tvalue: function component(App) {\n\t\t\tvar _this = this;\n\n\t\t\t// for each provided element: create an this.ids for it:\n\t\t\tvar elements = this.elements(App, this);\n\n\t\t\t////\n\t\t\t//// prepare our ids\n\t\t\t////\n\n\t\t\tvar ids = {\n\n\t\t\t\tcomponent: App.unique(this.idBase + '_component'),\n\n\t\t\t\t// the common property fields\n\t\t\t\tlabel: App.unique(this.idBase + '_label'),\n\t\t\t\tcolumnName: App.unique(this.idBase + '_columnName'),\n\t\t\t\tfieldDescription: App.unique(this.idBase + '_fieldDescription'),\n\t\t\t\tshowIcon: App.unique(this.idBase + '_showIcon')\n\t\t\t};\n\n\t\t\tthis.eachDeep(elements, function (e) {\n\t\t\t\tif (e.name) {\n\t\t\t\t\t// if element has an .id, then use it in our list as is\n\t\t\t\t\tif (e.id) {\n\t\t\t\t\t\tids[e.name] = e.id;\n\t\t\t\t\t}\n\n\t\t\t\t\t// otherwise create a new entry in our base list\n\t\t\t\t\t_this.ids[e.name] = e.name;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// convert the entries in our base list into a globally acceptable id\n\t\t\t// and use that in our ids list if it doesn't already exist\n\t\t\tfor (var i in this.ids) {\n\t\t\t\tif (!ids[i]) {\n\t\t\t\t\tids[i] = App.unique(this.idBase + '_' + i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// update our elements to include our ids as we have them now.\n\t\t\tthis.eachDeep(elements, function (e) {\n\t\t\t\tif (e.name) {\n\t\t\t\t\te.id = ids[e.name];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t////\n\t\t\t//// our UI definition:\n\t\t\t////\n\n\t\t\t// our base form:\n\t\t\tvar _ui = {\n\t\t\t\tview: 'form',\n\t\t\t\tid: ids.component,\n\t\t\t\tautoheight: true,\n\t\t\t\tborderless: true,\n\t\t\t\telements: [\n\t\t\t\t\t// {\n\t\t\t\t\t// \tview: \"text\",\n\t\t\t\t\t// \tid: ids.textDefault,\n\t\t\t\t\t// \tname:'textDefault',\n\t\t\t\t\t// \tplaceholder: labels.component.defaultText\n\t\t\t\t\t// },\n\t\t\t\t\t// {\n\t\t\t\t\t// \tview: \"checkbox\",\n\t\t\t\t\t// \tid: ids.supportMultilingual,\n\t\t\t\t\t// \tname:'supportMultilingual',\n\t\t\t\t\t// \tlabelRight: labels.component.supportMultilingual,\n\t\t\t\t\t// \tlabelWidth: 0,\n\t\t\t\t\t// \tvalue: true\n\t\t\t\t\t// }\n\t\t\t\t],\n\n\t\t\t\trules: {\n\t\t\t\t\t'label': webix.rules.isNotEmpty,\n\t\t\t\t\t'columnName': webix.rules.isNotEmpty\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar _init = function _init() {\n\n\t\t\t\t// call our provided .init() routine\n\t\t\t\tthis.init(ids);\n\t\t\t};\n\n\t\t\tvar _logic = {\n\n\t\t\t\t/*\n     * @function clear\n     *\n     * clear the form.\n     */\n\t\t\t\tclear: function clear() {\n\n\t\t\t\t\t_ABField2.default.clearEditor(ids);\n\n\t\t\t\t\tfor (var f in _this.defaultValues) {\n\t\t\t\t\t\tvar component = $$(ids[f]);\n\t\t\t\t\t\tif (component) {\n\t\t\t\t\t\t\tcomponent.setValue(_this.defaultValues[f]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn('!! could not find component for default value: name:' + f + ' id:' + ids[f]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$$(ids.component).clearValidation();\n\n\t\t\t\t\t// perform provided .clear()\n\t\t\t\t\tif (_this.logic.clear) {\n\t\t\t\t\t\t_this.logic.clear(ids);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function hide\n     *\n     * hide this component.\n     */\n\t\t\t\thide: function hide() {\n\t\t\t\t\t$$(ids.component).clearValidation();\n\t\t\t\t\t$$(ids.component).hide(false, false);\n\n\t\t\t\t\t// perform provided .hide()\n\t\t\t\t\tif (_this.logic.hide) {\n\t\t\t\t\t\t_this.logic.hide(ids);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function isValid\n     *\n     * checks the current values on the componet to see if they are Valid\n     */\n\t\t\t\tisValid: function isValid() {\n\n\t\t\t\t\tvar isValid = $$(ids.component).validate();\n\n\t\t\t\t\t// perform provided .isValid()\n\t\t\t\t\tif (_this.logic.isValid) {\n\t\t\t\t\t\tisValid = _this.logic.isValid(ids, isValid);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn isValid;\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function labelOnChange\n     *\n     * The ABField.definitionEditor implements a default operation\n     * to update the value of the .columnName with the current value of \n     * label.\n     * \n     * if you want to override that functionality, implement this fn()\n     *\n     * @param {string} newVal\tThe new value of label\n     * @param {string} oldVal\tThe previous value\n     */\n\t\t\t\t// labelOnChange: function (newVal, oldVal) {\n\n\t\t\t\t// \t// When the Label value changes, update our Column Name value \n\t\t\t\t// \t// to match.\n\n\t\t\t\t// \toldVal = oldVal || '';\n\t\t\t\t// \tif (newVal != oldVal &&\n\t\t\t\t// \t\toldVal == $$(ids.columnName).getValue()) {\n\t\t\t\t// \t\t$$(ids.columnName).setValue(newVal);\n\t\t\t\t// \t}\n\t\t\t\t// },\n\n\n\t\t\t\t/*\n     * @function populate\n     *\n     * populate the form with the given ABField instance provided.\n     *\n     * @param {ABField} field\n     */\n\t\t\t\tpopulate: function populate(field) {\n\n\t\t\t\t\t// populate the base ABField values:\n\t\t\t\t\t_ABField2.default.editorPopulate(ids, field);\n\n\t\t\t\t\t_this.eachDeep(elements, function (e) {\n\t\t\t\t\t\t$$(ids[e.name]).setValue(field.settings[e.name]);\n\t\t\t\t\t});\n\n\t\t\t\t\t// perform provided .populate()\n\t\t\t\t\tif (_this.logic.populate) {\n\t\t\t\t\t\t_this.logic.populate(ids, field);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function show\n     *\n     * show this component.\n     */\n\t\t\t\tshow: function show(a, b) {\n\t\t\t\t\t$$(ids.component).clearValidation();\n\t\t\t\t\t$$(ids.component).show(a, b);\n\n\t\t\t\t\t// perform provided .show()\n\t\t\t\t\tif (_this.logic.show) {\n\t\t\t\t\t\t_this.logic.show(ids);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function values\n     *\n     * return the values for this form.\n     * @return {obj}  \n     */\n\t\t\t\tvalues: function values() {\n\n\t\t\t\t\tvar settings = $$(ids.component).getValues();\n\t\t\t\t\tvar values = _ABField2.default.editorValues(settings);\n\n\t\t\t\t\tvalues.key = _this.fieldDefaults.key;\n\n\t\t\t\t\t// perform provided .values()\n\t\t\t\t\tif (_this.logic.values) {\n\t\t\t\t\t\tvalues = _this.logic.values(ids, values);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn values;\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\t// apply additional logic functions:\n\t\t\tfor (var l in this.logic) {\n\t\t\t\tif (!_logic[l]) _logic[l] = this.logic[l];\n\t\t\t}\n\n\t\t\t// make sure our given elements, have an id set:\n\n\n\t\t\t// get the common UI headers entries, and insert them above ours here:\n\t\t\t// NOTE: put this here so that _logic is defined.\n\t\t\tvar commonUI = _ABField2.default.definitionEditor(App, ids, _logic, this.fieldDefaults);\n\t\t\t_ui.elements = commonUI.rows.concat(elements);\n\n\t\t\tfor (var r in this.rules) {\n\t\t\t\t_ui.rules[r] = this.rules[r];\n\t\t\t}\n\n\t\t\t// return the current instance of this component:\n\t\t\treturn this._component = {\n\t\t\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\t\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\t\t\t// actions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t\t\t// DataField exposed actions:\n\t\t\t\tclear: _logic.clear,\n\t\t\t\thide: _logic.hide,\n\t\t\t\tisValid: _logic.isValid,\n\t\t\t\tpopulate: _logic.populate,\n\t\t\t\tshow: _logic.show,\n\t\t\t\tvalues: _logic.values,\n\n\t\t\t\t_logic: _logic // {obj} \tUnit Testing\n\t\t\t};\n\t\t}\n\n\t\t/**\n   * @function eachDeep\n   * a depth first fn to apply fn() to each element of our list.\n   * @param {array} list  array of webix elements to scan\n   * @param {fn} fn function to apply to each element.\n   */\n\n\t}, {\n\t\tkey: 'eachDeep',\n\t\tvalue: function eachDeep(list, fn) {\n\t\t\tvar _this2 = this;\n\n\t\t\tlist.forEach(function (e) {\n\n\t\t\t\t// process sub columns\n\t\t\t\tif (e.cols) {\n\t\t\t\t\t_this2.eachDeep(e.cols, fn);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// or rows\n\t\t\t\tif (e.rows) {\n\t\t\t\t\t_this2.eachDeep(e.rows, fn);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// or just process this element:\n\t\t\t\tfn(e);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'idsUnique',\n\t\tvalue: function idsUnique(ids, App) {\n\n\t\t\tfor (var i in ids) {\n\t\t\t\tif (ids[i] == '') {\n\t\t\t\t\tids[i] = App.unique(this.idBase + '_' + i);\n\t\t\t\t} else {\n\t\t\t\t\tids[i] = App.unique(this.idBase + '_' + ids[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ids;\n\t\t}\n\n\t\t// populate(field) {\n\t\t// \tthis._component.populate(field);\n\t\t// }\n\n\t}]);\n\n\treturn ABFieldComponent;\n}();\n\nexports.default = ABFieldComponent;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _ABFieldString = __webpack_require__(17);\n\nvar _ABFieldString2 = _interopRequireDefault(_ABFieldString);\n\nvar _ABFieldNumber = __webpack_require__(16);\n\nvar _ABFieldNumber2 = _interopRequireDefault(_ABFieldNumber);\n\nvar _ABFieldImage = __webpack_require__(15);\n\nvar _ABFieldImage2 = _interopRequireDefault(_ABFieldImage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* \n * Fields\n * A name => ABField  hash of the different ABFields available.\n */\nvar Fields = {}; /* \n                  * ABFieldManager\n                  * \n                  * An interface for managing the different ABFields available in our AppBuilder.\n                  *\n                  */\n\nFields[_ABFieldString2.default.defaults().key] = _ABFieldString2.default;\nFields[_ABFieldNumber2.default.defaults().key] = _ABFieldNumber2.default;\n\nFields[_ABFieldImage2.default.defaults().key] = _ABFieldImage2.default;\n\nexports.default = {\n\n\t/*\n  * @function allFields\n  * return all the currently defined ABFields in an array.\n  * @return [{ABField},...]\n  */\n\tallFields: function allFields() {\n\t\tvar fields = [];\n\t\tfor (var f in Fields) {\n\t\t\tfields.push(Fields[f]);\n\t\t}\n\t\treturn fields;\n\t},\n\n\t/*\n  * @function newField\n  * return an instance of an ABField based upon the values.type value.\n  * @return {ABField}\n  */\n\tnewField: function newField(values, object) {\n\n\t\tif (values.key) {\n\t\t\treturn new Fields[values.key](values, object);\n\t\t} else {\n\n\t\t\t//// TODO: what to do here?\n\t\t}\n\t}\n\n};\n\n/***/ }),\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(18);\n\n__webpack_require__(22);\n\nvar _edittree = __webpack_require__(37);\n\nvar _edittree2 = _interopRequireDefault(_edittree);\n\nvar _editlist = __webpack_require__(36);\n\nvar _editlist2 = _interopRequireDefault(_editlist);\n\nvar _AppBuilder = __webpack_require__(42);\n\nvar _AppBuilder2 = _interopRequireDefault(_AppBuilder);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nOP.Component.extend('ab', function (App) {\n\n\tfunction L(key, altText) {\n\t\treturn AD.lang.label.getLabel(key) || altText;\n\t}\n\n\t// setup the common labels for our AppBuilder Application.\n\tApp.labels = {\n\t\tadd: L('ab.common.add', \"*Add\"),\n\t\tcreate: L('ab.common.create', \"*Create\"),\n\t\t\"delete\": L('ab.common.delete', \"*Delete\"),\n\t\tedit: L('ab.common.edit', \"*Edit\"),\n\t\t\"export\": L('ab.common.export', \"*Export\"),\n\t\tformName: L('ab.common.form.name', \"*Name\"),\n\t\t\"import\": L('ab.common.import', \"*Import\"),\n\t\trename: L('ab.common.rename', \"*Rename\"),\n\t\tok: L('ab.common.ok', \"*Ok\"),\n\n\t\tcancel: L('ab.common.cancel', \"*Cancel\"),\n\t\tsave: L('ab.common.save', \"*Save\"),\n\n\t\tyes: L('ab.common.yes', \"*Yes\"),\n\t\tno: L('ab.common.no', \"*No\"),\n\n\t\tcreateErrorMessage: L('ab.common.create.error', \"*System could not create <b>{0}</b>.\"),\n\t\tcreateSuccessMessage: L('ab.common.create.success', \"*<b>{0}</b> is created.\"),\n\n\t\tupdateErrorMessage: L('ab.common.update.error', \"*System could not update <b>{0}</b>.\"),\n\t\tupdateSucessMessage: L('ab.common.update.success', \"*<b>{0}</b> is updated.\"),\n\n\t\tdeleteErrorMessage: L('ab.common.delete.error', \"*System could not delete <b>{0}</b>.\"),\n\t\tdeleteSuccessMessage: L('ab.common.delete.success', \"*<b>{0}</b> is deleted.\"),\n\n\t\trenameErrorMessage: L('ab.common.rename.error', \"*System could not rename <b>{0}</b>.\"),\n\t\trenameSuccessMessage: L('ab.common.rename.success', \"*<b>{0}</b> is renamed.\"),\n\n\t\t// Data Field  common Property labels:\n\t\tdataFieldHeaderLabel: L('ab.dataField.common.headerLabel', '*Label'),\n\t\tdataFieldHeaderLabelPlaceholder: L('ab.dataField.common.headerLabelPlaceholder', '*Header Name'),\n\n\t\tdataFieldColumnName: L('ab.dataField.common.columnName', '*Name'),\n\t\tdataFieldColumnNamePlaceholder: L('ab.dataField.common.columnNamePlaceholder', '*Column Name'),\n\n\t\tdataFieldShowIcon: L('ab.dataField.common.showIcon', '*show icon?')\n\t};\n\n\t// make instances of our Custom Components:\n\tOP.CustomComponent[_edittree2.default.key](App, 'edittree'); // ->  App.custom.edittree  now exists\n\tOP.CustomComponent[_editlist2.default.key](App, 'editlist'); // ->  App.custom.editlist  now exists\n\n\n\tvar ids = {\n\t\tcomponent: App.unique('app_builder_root')\n\t};\n\n\t// Define the external components used in this Component:\n\tvar AppChooser = OP.Component['ab_choose'](App);\n\tvar AppWorkspace = OP.Component['ab_work'](App);\n\n\t// This component's UI definition:\n\t// Application multi-views\n\tvar _ui = {\n\t\tid: ids.component,\n\t\tview: \"multiview\",\n\t\tborderless: true,\n\t\tanimate: false,\n\t\trows: [AppChooser.ui, AppWorkspace.ui]\n\t};\n\n\t// This component's init() definition:\n\tvar _init = function _init() {\n\n\t\tAppChooser.init();\n\t\tAppWorkspace.init();\n\n\t\t// start off only showing the App Chooser:\n\t\tApp.actions.transitionApplicationChooser();\n\n\t\t// perform an initial resize adjustment\n\t\t$$(ids.component).adjust();\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions // {ob}\t\thash of fn() to expose so other components can access.\n\t};\n});\n\n//// REFACTORING TODOs:\n// TODO: AppForm-> Permissions : refresh permission list, remove AppRole permission on Application.delete().\n\n\n// Import our Custom Components here:\n\n/*\n * AB\n *\n * The base AppBuilder component.  It manages these components:\n *   - ab_choose :  choose an application to work with\n *   - ab_work   :  load an application into the work area\n *\n */\n\n// import '../OP/OP'\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(9);\n\nAD.Control.OpsTool.extend('BuildApp', {\n\n\tinit: function init(element, options) {\n\t\tvar self = this;\n\n\t\toptions = AD.defaults({\n\t\t\ttemplateDOM: '/opstools/BuildApp/views/BuildApp/BuildApp.ejs',\n\t\t\tresize_notification: 'BuildApp.resize',\n\t\t\ttool: null // the parent opsPortal Tool() object\n\t\t}, options);\n\t\tself.options = options;\n\n\t\t// Call parent init\n\t\tself._super(element, options);\n\n\t\tself.data = {};\n\n\t\tself.webixUiId = {\n\t\t\tloadingScreen: 'ab-loading-screen',\n\t\t\tsyncButton: 'ab-sync-button'\n\t\t};\n\n\t\tself.initDOM(function () {\n\t\t\tself.initWebixUI();\n\t\t});\n\t},\n\n\tinitDOM: function initDOM(cb) {\n\t\tvar _this = this;\n\n\t\tcan.view(this.options.templateDOM, {}, function (fragment) {\n\t\t\t_this.element.html(fragment);\n\n\t\t\t// _this.element.find(\".ab-app-list\").show();\n\t\t\t// _this.element.find(\".ab-app-workspace\").hide();\n\n\t\t\tcb();\n\t\t});\n\t},\n\n\tinitWebixUI: function initWebixUI() {\n\n\t\t// get the AppBuilder (AB) Webix Component\n\t\tvar AppBuilder = OP.Component['ab']();\n\t\tvar ui = AppBuilder.ui;\n\n\t\t// tell the AppBuilder where to attach\n\t\tui.container = 'ab-main-container';\n\n\t\t// instantiate the UI first\n\t\tthis.AppBuilder = webix.ui(ui);\n\n\t\t// then perform the init()\n\t\tAppBuilder.init();\n\t},\n\n\tresize: function resize(height) {\n\t\tvar self = this;\n\n\t\theight = height.height || height;\n\n\t\tvar appListDom = $(self.element);\n\n\t\tif (appListDom) {\n\t\t\tvar width = appListDom.parent().css('width');\n\t\t\tif (width) {\n\t\t\t\twidth = parseInt(width.replace('px', ''));\n\t\t\t}\n\t\t\tappListDom.width(width);\n\n\t\t\t// Removed this because the 140 pixels was causing the list to not scroll to the bottom of the page\n\t\t\t// var computedHeight = height - 140;\n\n\t\t\tvar computedHeight = height;\n\t\t\tconsole.log(\"computed height: \" + computedHeight);\n\t\t\tvar mh = parseInt(appListDom.css('min-height').replace('px', ''));\n\t\t\tconsole.log(\"min-height: \" + mh);\n\t\t\tif (mh < computedHeight) {\n\t\t\t\tappListDom.height(computedHeight);\n\t\t\t\t$('#ab-main-container').height(computedHeight);\n\t\t\t} else {\n\t\t\t\tappListDom.height(mh);\n\t\t\t\t$('#ab-main-container').height(mh);\n\t\t\t}\n\n\t\t\tif (this.AppBuilder) {\n\t\t\t\t// this.AppBuilder.define('height', height - 140);\n\t\t\t\tthis.AppBuilder.adjust();\n\t\t\t}\n\t\t}\n\t}\n\n});\n// import 'OP';\n// import '../../../../../assets/js/webix/webix'\n\n/***/ }),\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n// import OP from \"OP\"\n\n\nvar _ABFieldManager = __webpack_require__(3);\n\nvar _ABFieldManager2 = _interopRequireDefault(_ABFieldManager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction toDC(data) {\n\treturn new webix.DataCollection({\n\t\tdata: data\n\n\t});\n}\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABObject = function () {\n\tfunction ABObject(attributes, application) {\n\t\tvar _this = this;\n\n\t\t_classCallCheck(this, ABObject);\n\n\t\t/*\n  {\n  \tid: uuid(),\n  \tname: 'name',\n  \tlabelFormat: 'xxxxx',\n  \tisImported: 1/0,\n  \turlPath:'string',\n  \timportFromObject: 'string', // JSON Schema style reference:  '#[ABApplication.id]/objects/[ABObject.id]'\n  \t\t\t\t\t\t\t\t// to get other object:  ABApplication.objectFromRef(obj.importFromObject);\n  \ttranslations:[\n  \t\t{}\n  \t],\n  \tfields:[\n  \t\t{ABDataField}\n  \t]\n  }\n  */\n\n\t\t// ABApplication Attributes\n\t\tthis.id = attributes.id;\n\t\tthis.name = attributes.name || \"\";\n\t\tthis.labelFormat = attributes.labelFormat || \"\";\n\t\tthis.isImported = attributes.isImported || 0;\n\t\tthis.urlPath = attributes.urlPath || \"\";\n\t\tthis.importFromObject = attributes.importFromObject || \"\";\n\t\tthis.translations = attributes.translations;\n\n\t\tthis.objectWorkspace = attributes.objectWorkspace || {\n\t\t\thiddenFields: [] };\n\n\t\t// multilingual fields: label, description\n\t\tOP.Multilingual.translate(this, this, ['label']);\n\n\t\t// import all our ABObjects\n\t\tvar newFields = [];\n\t\t(attributes.fields || []).forEach(function (field) {\n\t\t\tnewFields.push(_this.fieldNew(field));\n\t\t});\n\t\tthis._fields = newFields;\n\n\t\t// link me to my parent ABApplication\n\t\tthis.application = application;\n\t}\n\n\t///\n\t/// Static Methods\n\t///\n\t/// Available to the Class level object.  These methods are not dependent\n\t/// on the instance values of the Application.\n\t///\n\n\n\t//// TODO: Refactor isValid() to ignore op and not error if duplicateName is own .id\n\n\t_createClass(ABObject, [{\n\t\tkey: \"isValid\",\n\t\tvalue: function isValid() {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar errors = null;\n\n\t\t\t// label/name must be unique:\n\t\t\tvar isNameUnique = this.application.objects(function (o) {\n\t\t\t\treturn o.name.toLowerCase() == _this2.name.toLowerCase();\n\t\t\t}).length == 0;\n\t\t\tif (!isNameUnique) {\n\t\t\t\terrors = OP.Form.validationError({\n\t\t\t\t\tname: 'name',\n\t\t\t\t\tmessage: L('ab.validation.object.name.unique', 'Object name must be unique (#name# already used in this Application)').replace('#name#', this.name)\n\t\t\t\t}, errors);\n\t\t\t}\n\n\t\t\t// Check the common validations:\n\t\t\t// TODO:\n\t\t\t// if (!inputValidator.validate(values.label)) {\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\t/// ABApplication data methods\n\n\n\t\t/**\n   * @method destroy()\n   *\n   * destroy the current instance of ABApplication\n   *\n   * also remove it from our _AllApplications\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"destroy\",\n\t\tvalue: function destroy() {\n\n\t\t\treturn this.application.objectDestroy(this);\n\t\t}\n\n\t\t/**\n   * @method save()\n   *\n   * persist this instance of ABObject with it's parent ABApplication\n   *\n   *\n   * @return {Promise}\n   *\t\t\t\t\t\t.resolve( {this} )\n   */\n\n\t}, {\n\t\tkey: \"save\",\n\t\tvalue: function save() {\n\t\t\tvar _this3 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// if this is our initial save()\n\t\t\t\tif (!_this3.id) {\n\n\t\t\t\t\t_this3.id = OP.Util.uuid(); // setup default .id\n\t\t\t\t\t_this3.label = _this3.label || _this3.name;\n\t\t\t\t\t_this3.urlPath = _this3.urlPath || _this3.application.name + '/' + _this3.name;\n\t\t\t\t}\n\n\t\t\t\t_this3.application.objectSave(_this3).then(function () {\n\t\t\t\t\tresolve(_this3);\n\t\t\t\t}).catch(function (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\n\t}, {\n\t\tkey: \"toObj\",\n\t\tvalue: function toObj() {\n\n\t\t\tOP.Multilingual.unTranslate(this, this, [\"label\"]);\n\n\t\t\t// // for each Object: compile to json\n\t\t\tvar currFields = [];\n\t\t\tthis._fields.forEach(function (obj) {\n\t\t\t\tcurrFields.push(obj.toObj());\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tname: this.name,\n\t\t\t\tlabelFormat: this.labelFormat,\n\t\t\t\tisImported: this.isImported,\n\t\t\t\turlPath: this.urlPath,\n\t\t\t\timportFromObject: this.importFromObject,\n\t\t\t\tobjectWorkspace: this.objectWorkspace,\n\t\t\t\ttranslations: this.translations,\n\t\t\t\tfields: currFields\n\t\t\t};\n\t\t}\n\n\t\t///\n\t\t/// Fields\n\t\t///\n\n\n\t\t/**\n   * @method fields()\n   *\n   * return an array of all the ABFields for this ABObject.\n   *\n   * @return {array}\n   */\n\n\t}, {\n\t\tkey: \"fields\",\n\t\tvalue: function fields(filter) {\n\n\t\t\tfilter = filter || function () {\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\treturn this._fields.filter(filter);\n\t\t}\n\n\t\t/**\n   * @method fieldNew()\n   *\n   * return an instance of a new (unsaved) ABField that is tied to this\n   * ABObject.\n   *\n   * NOTE: this new field is not included in our this.fields until a .save()\n   * is performed on the field.\n   *\n   * @return {ABField}\n   */\n\n\t}, {\n\t\tkey: \"fieldNew\",\n\t\tvalue: function fieldNew(values) {\n\t\t\t// NOTE: ABFieldManager returns the proper ABFieldXXXX instance.\n\t\t\treturn _ABFieldManager2.default.newField(values, this);\n\t\t}\n\n\t\t/**\n   * @method fieldRemove()\n   *\n   * remove the given ABField from our ._fields array and persist the current\n   * values.\n   *\n   * @param {ABField} field The instance of the field to remove.\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"fieldRemove\",\n\t\tvalue: function fieldRemove(field) {\n\t\t\tthis._fields = this.fields(function (o) {\n\t\t\t\treturn o.id != field.id;\n\t\t\t});\n\n\t\t\treturn this.save();\n\t\t}\n\n\t\t/**\n   * @method fieldSave()\n   *\n   * save the given ABField in our ._fields array and persist the current\n   * values.\n   *\n   * @param {ABField} field The instance of the field to save.\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"fieldSave\",\n\t\tvalue: function fieldSave(field) {\n\t\t\tvar isIncluded = this.fields(function (o) {\n\t\t\t\treturn o.id == field.id;\n\t\t\t}).length > 0;\n\t\t\tif (!isIncluded) {\n\t\t\t\tthis._fields.push(field);\n\t\t\t}\n\n\t\t\treturn this.save();\n\t\t}\n\n\t\t///\n\t\t///\tObject Workspace Settings\n\t\t///\n\n\n\t}, {\n\t\tkey: \"columnHeaders\",\n\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t// return the column headers for this object\n\t\t// @param {bool} isObjectWorkspace  return the settings saved for the object workspace\n\t\tvalue: function columnHeaders(isObjectWorkspace) {\n\n\t\t\tvar headers = [];\n\t\t\tvar idLookup = {};\n\n\t\t\t// get the header for each of our fields:\n\t\t\tthis._fields.forEach(function (f) {\n\t\t\t\tvar header = f.columnHeader(isObjectWorkspace);\n\t\t\t\theaders.push(header);\n\t\t\t\tidLookup[header.id] = f.id; // name => id\n\t\t\t});\n\n\t\t\t// update our headers with any settings applied in the Object Workspace\n\t\t\tif (isObjectWorkspace) {\n\n\t\t\t\t// set column width to adjust:true by default;\n\t\t\t\theaders.forEach(function (h) {\n\t\t\t\t\th.adjust = true;\n\t\t\t\t});\n\n\t\t\t\t// hide any hiddenfields\n\t\t\t\tthis.workspaceHiddenFields.forEach(function (hfID) {\n\t\t\t\t\theaders.forEach(function (h) {\n\t\t\t\t\t\tif (idLookup[h.id] == hfID) {\n\t\t\t\t\t\t\th.hidden = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn headers;\n\t\t}\n\t}, {\n\t\tkey: \"workspaceHiddenFields\",\n\t\tget: function get() {\n\t\t\treturn this.objectWorkspace.hiddenFields;\n\t\t},\n\t\tset: function set(fields) {\n\t\t\tthis.objectWorkspace.hiddenFields = fields;\n\t\t}\n\t}]);\n\n\treturn ABObject;\n}();\n\nexports.default = ABObject;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _ABField2 = __webpack_require__(1);\n\nvar _ABField3 = _interopRequireDefault(_ABField2);\n\nvar _ABFieldComponent = __webpack_require__(2);\n\nvar _ABFieldComponent2 = _interopRequireDefault(_ABFieldComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ABFieldImage\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * An ABFieldImage defines a Image field type.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABFieldImageDefaults = {\n\tkey: 'image', // unique key to reference this specific DataField\n\t// type : 'string', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\ticon: 'file-image-o', // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName: L('ab.dataField.image.menuName', '*Image Attachment'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.image.description', '*Attach an image to this object.')\n};\n\nvar defaultValues = {\n\t'useWidth': 0,\n\t'imageWidth': '',\n\t'useHeight': 0,\n\t'imageHeight': ''\n};\n\n/**\n * ABFieldImageComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\nvar ABFieldImageComponent = new _ABFieldComponent2.default({\n\n\tfieldDefaults: ABFieldImageDefaults,\n\n\telements: function elements(App, field) {\n\n\t\tvar ids = {\n\t\t\timageWidth: '',\n\t\t\timageHeight: ''\n\t\t};\n\t\tids = field.idsUnique(ids, App);\n\n\t\treturn [{\n\t\t\tcols: [{\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname: \"useWidth\",\n\t\t\t\tlabelRight: L('ab.dataField.image.width', \"*width\"),\n\t\t\t\twidth: 80,\n\t\t\t\tlabelWidth: 0,\n\t\t\t\tvalue: 1,\n\t\t\t\tclick: function click() {\n\t\t\t\t\tif (this.getValue()) $$(ids.imageWidth).enable();else $$(ids.imageWidth).disable();\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tview: 'text',\n\t\t\t\tname: 'imageWidth',\n\t\t\t\tid: ids.imageWidth\n\t\t\t}]\n\t\t}, {\n\t\t\tcols: [{\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname: \"useHeight\",\n\t\t\t\t// id:componentIds.useHeight, \n\t\t\t\tlabelRight: L('ab.dataField.image.height', \"*height\"),\n\t\t\t\twidth: 80,\n\t\t\t\tlabelWidth: 0,\n\t\t\t\tvalue: 1,\n\t\t\t\tclick: function click() {\n\t\t\t\t\tif (this.getValue()) $$(ids.imageHeight).enable();else $$(ids.imageHeight).disable();\n\t\t\t\t}\n\n\t\t\t}, {\n\t\t\t\tview: 'text',\n\t\t\t\tname: 'imageHeight',\n\t\t\t\tid: ids.imageHeight\n\t\t\t}]\n\t\t}];\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules: {\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic: {},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit: function init(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n});\n\nvar ABFieldImage = function (_ABField) {\n\t_inherits(ABFieldImage, _ABField);\n\n\tfunction ABFieldImage(values, object) {\n\t\t_classCallCheck(this, ABFieldImage);\n\n\t\t/*\n  {\n  settings: {\n  'useWidth':0,\n  'imageWidth':'',\n  'useHeight': 0,\n  'imageHeight': ''\n  }\n  }\n  */\n\n\t\t// we're responsible for setting up our specific settings:\n\t\tvar _this = _possibleConstructorReturn(this, (ABFieldImage.__proto__ || Object.getPrototypeOf(ABFieldImage)).call(this, values, object, ABFieldImageDefaults));\n\n\t\tfor (var dv in defaultValues) {\n\t\t\t_this.settings[dv] = values.settings[dv] || defaultValues[dv];\n\t\t}\n\n\t\t// text to Int:\n\t\t_this.settings.useWidth = parseInt(_this.settings.useWidth);\n\t\t_this.settings.useHeight = parseInt(_this.settings.useHeight);\n\t\treturn _this;\n\t}\n\n\t// return the default values for this DataField\n\n\n\t_createClass(ABFieldImage, [{\n\t\tkey: \"isValid\",\n\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\tvalue: function isValid() {\n\n\t\t\tvar errors = _get(ABFieldImage.prototype.__proto__ || Object.getPrototypeOf(ABFieldImage.prototype), \"isValid\", this).call(this);\n\n\t\t\t// errors = OP.Form.validationError({\n\t\t\t// \tname:'columnName',\n\t\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t\t// }, errors);\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\t\t// toObj () {\n\n\t\t// \tvar obj = super.toObj();\n\n\t\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t\t// \treturn obj;\n\t\t// }\n\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t// return the grid column header definition for this instance of ABFieldImage\n\n\t}, {\n\t\tkey: \"columnHeader\",\n\t\tvalue: function columnHeader(isObjectWorkspace) {\n\t\t\tvar config = _get(ABFieldImage.prototype.__proto__ || Object.getPrototypeOf(ABFieldImage.prototype), \"columnHeader\", this).call(this, isObjectWorkspace);\n\n\t\t\tconfig.editor = 'text'; // '[edit_type]'   for your unique situation\n\t\t\tconfig.sort = 'string'; // '[sort_type]'   for your unique situation\n\n\t\t\treturn config;\n\t\t}\n\t}], [{\n\t\tkey: \"defaults\",\n\t\tvalue: function defaults() {\n\t\t\treturn ABFieldImageDefaults;\n\t\t}\n\n\t\t/*\n   * @function propertiesComponent\n   *\n   * return a UI Component that contains the property definitions for this Field.\n   *\n   * @param {App} App the UI App instance passed around the Components.\n   * @return {Component}\n   */\n\n\t}, {\n\t\tkey: \"propertiesComponent\",\n\t\tvalue: function propertiesComponent(App) {\n\t\t\treturn ABFieldImageComponent.component(App);\n\t\t}\n\t}]);\n\n\treturn ABFieldImage;\n}(_ABField3.default);\n\n//// NOTE: if you need a unique [edit_type] by your returned config.editor above:\n// webix.editors = {\n//   \"[edit_type]\": {\n//     focus: function () {...}\n//     getValue: function () {...},\n//     setValue: function (value) {...},\n//     render: function () {...}\n//   }\n// };\n\n\n//// NOTE: if you need a unique [sort_type] by your returned config.sort above:\n// webix.DataStore.prototype.sorting.as.[sort_type] = function(a,b){ \n//     return a > b ? 1 : -1; \n// }\n\n\nexports.default = ABFieldImage;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _ABField2 = __webpack_require__(1);\n\nvar _ABField3 = _interopRequireDefault(_ABField2);\n\nvar _ABFieldComponent = __webpack_require__(2);\n\nvar _ABFieldComponent2 = _interopRequireDefault(_ABFieldComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ABFieldNumber\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * An ABFieldNumber defines a Number field type.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABFieldNumberDefaults = {\n\tkey: 'number', // unique key to reference this specific DataField\n\ticon: 'slack', // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName: L('ab.dataField.number.menuName', '*Number'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.number.description', '*A Float or Integer Value')\n};\n\nvar formatList = [{ id: 'none', value: L('ab.dataField.number.none', \"*None\") }, { id: 'dollar', value: L('ab.dataField.number.format.dollar', \"$\"), sign: \"$\", position: \"prefix\" }, { id: 'pound', value: L('ab.dataField.number.format.pound', \"\"), sign: \"\", position: \"prefix\" }, { id: 'euroBefore', value: L('ab.dataField.number.format.euroBefore', \" (before)\"), sign: \"\", position: \"prefix\" }, { id: 'euroAfter', value: L('ab.dataField.number.format.euroAfter', \" (after)\"), sign: \"\", position: \"postfix\" }, { id: 'percent', value: L('ab.dataField.number.format.percent', \"%\"), sign: \"%\", position: \"postfix\" }];\n\nvar defaultValues = {\n\t'allowRequired': 0,\n\t'numberDefault': '',\n\t'typeFormat': 'none',\n\t'typeDecimals': 'none',\n\t'typeDecimalPlaces': 'none',\n\t'typeRounding': 'none',\n\t'typeThousands': 'none',\n\t'validation': 0,\n\t'validateMinimum': '',\n\t'validateMaximum': ''\n};\n\n/**\n * ABFieldNumberComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\nvar ABFieldNumberComponent = new _ABFieldComponent2.default({\n\n\tfieldDefaults: ABFieldNumberDefaults,\n\n\telements: function elements(App, field) {\n\n\t\t// var idBase = ABFieldNumberDefaults.type;\n\t\t// var ids = {\n\t\t// \ttypeDecimalPlaces: this.unique(App, '_typeDecimalPlaces'),  // App.unique(idBase +'_typeDecimalPlaces'),\n\t\t// \ttypeRounding: App.unique(idBase +'_typeRounding'),\n\t\t// \tvalidateMinimum: App.unique(idBase + '_validateMinimum'),\n\t\t// \tvalidateMaximum: App.unique(idBase + '_validateMaximum')\n\t\t// }\n\n\t\tvar ids = {\n\t\t\ttypeDecimalPlaces: '',\n\t\t\ttypeRounding: '',\n\t\t\tvalidateMinimum: '',\n\t\t\tvalidateMaximum: ''\n\t\t};\n\t\tids = field.idsUnique(ids, App);\n\n\t\treturn [\n\t\t// {\n\t\t// \tview: \"text\",\n\t\t// \tname:'textDefault',\n\t\t// \tlabelWidth: App.config.labelWidthLarge,\n\t\t// \tplaceholder: L('ab.dataField.string.default', '*Default text')\n\t\t// },\n\t\t{\n\t\t\tview: \"checkbox\",\n\t\t\t// id: componentIds.allowRequired,\n\t\t\tname: \"allowRequired\",\n\t\t\tlabelRight: L(\"ab.dataField.number.required\", \"*Required\"),\n\t\t\tinputWidth: 130,\n\t\t\tlabelWidth: 0\n\t\t}, {\n\t\t\tview: \"text\",\n\t\t\tlabel: L(\"ab.dataField.number.defaultValue\", \"*Default Value\"),\n\t\t\tlabelWidth: \"100\",\n\t\t\t// id: componentIds.numberDefault,\n\t\t\tname: \"numberDefault\",\n\t\t\tplaceholder: L('ab.dataField.number.defaultNumber', '*Default number'),\n\t\t\ton: {\n\t\t\t\tonChange: function onChange(newVal, oldVal) {\n\t\t\t\t\t// Validate number\n\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t// $$(componentIds.numberDefault).setValue(oldVal);\n\t\t\t\t\t\tthis.setValue(oldVal);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tview: \"richselect\",\n\t\t\t// id: componentIds.typeFormat,\n\t\t\tname: 'typeFormat',\n\t\t\tlabel: L('ab.dataField.number.format', \"*Format\"),\n\t\t\tvalue: 'none',\n\t\t\toptions: formatList\n\t\t}, {\n\t\t\tcols: [{\n\t\t\t\tview: \"richselect\",\n\t\t\t\t// id: componentIds.typeDecimals,\n\t\t\t\tname: 'typeDecimals',\n\t\t\t\tlabel: L('ab.dataField.number.decimals', \"*Decimals\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\toptions: [{ id: 'none', value: L('ab.dataField.number.none', \"*None\") }, { id: 'period', value: L('ab.dataField.number.period', \"*Period\") }, { id: 'comma', value: L('ab.dataField.number.comma', \"*Comma\") }],\n\t\t\t\ton: {\n\t\t\t\t\t'onChange': function onChange(newValue, oldValue) {\n\t\t\t\t\t\tif (newValue == 'none') {\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).disable();\n\t\t\t\t\t\t\t$$(ids.typeRounding).disable();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).enable();\n\t\t\t\t\t\t\t$$(ids.typeRounding).enable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tview: \"richselect\",\n\t\t\t\tid: ids.typeDecimalPlaces,\n\t\t\t\tname: 'typeDecimalPlaces',\n\t\t\t\tlabel: \"Places\",\n\t\t\t\tvalue: 'none',\n\t\t\t\tdisabled: true,\n\t\t\t\toptions: [{ id: 'none', value: \"0\" }, { id: 1, value: \"1\" }, { id: 2, value: \"2\" }, { id: 3, value: \"3\" }, { id: 4, value: \"4\" }, { id: 5, value: \"5\" }, { id: 10, value: \"10\" }]\n\t\t\t}]\n\t\t}, {\n\t\t\tview: \"radio\",\n\t\t\tid: ids.typeRounding,\n\t\t\tname: 'typeRounding',\n\t\t\tlabel: L('ab.dataField.number.rounding', \"*Rounding\"),\n\t\t\tvalue: 'none',\n\t\t\tvertical: true,\n\t\t\tdisabled: true,\n\t\t\toptions: [{ id: 'none', value: L('ab.dataField.number.default', \"*Default\") }, { id: 'roundUp', value: L('ab.dataField.number.roundUp', \"*Round Up\") }, { id: 'roundDown', value: L('ab.dataField.number.roundDown', \"*Round Down\") }]\n\t\t}, {\n\t\t\tview: \"radio\",\n\t\t\t// id: componentIds.typeThousands,\n\t\t\tname: 'typeThousands',\n\t\t\tlabel: L('ab.dataField.number.thousands', \"*Thousands\"),\n\t\t\tvalue: 'none',\n\t\t\tvertical: true,\n\t\t\toptions: [{ id: 'none', value: L('ab.dataField.number.none', \"*None\") }, { id: 'comma', value: L('ab.dataField.number.comma', \"*Comma\") }, { id: 'period', value: L('ab.dataField.number.period', \"*Period\") }, { id: 'space', value: L('ab.dataField.number.space', \"*Space\") }]\n\t\t}, {\n\t\t\tview: 'checkbox',\n\t\t\t// id: componentIds.validate,\n\t\t\tname: 'validation',\n\t\t\tlabelWidth: 0,\n\t\t\tlabelRight: L('ab.dataField.number.validation', \"*Validation\"),\n\t\t\ton: {\n\t\t\t\tonChange: function onChange(newVal) {\n\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\t$$(ids.validateMinimum).enable();\n\t\t\t\t\t\t$$(ids.validateMaximum).enable();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$$(ids.validateMinimum).disable();\n\t\t\t\t\t\t$$(ids.validateMaximum).disable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tview: 'text',\n\t\t\tid: ids.validateMinimum,\n\t\t\tname: 'validateMinimum',\n\t\t\tlabel: L('ab.dataField.number.minimum', \"*Minimum\"),\n\t\t\ton: {\n\t\t\t\tonChange: function onChange(newVal, oldVal) {\n\t\t\t\t\t// Validate number\n\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t$$(ids.validateMinimum).setValue(oldVal || '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tview: 'text',\n\t\t\tid: ids.validateMaximum,\n\t\t\tname: 'validateMaximum',\n\t\t\tlabel: L('ab.dataField.number.maximum', \"*Maximum\"),\n\t\t\ton: {\n\t\t\t\tonChange: function onChange(newVal, oldVal) {\n\t\t\t\t\t// Validate number\n\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t$$(ids.validateMaximum).setValue(oldVal || '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}];\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules: {\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic: {\n\n\t\tpopulate: function populate(ids, values) {\n\t\t\tif (values.settings.validation) {\n\t\t\t\t$$(ids.validateMinimum).enable();\n\t\t\t\t$$(ids.validateMaximum).enable();\n\t\t\t} else {\n\t\t\t\t$$(ids.validateMinimum).disable();\n\t\t\t\t$$(ids.validateMaximum).disable();\n\t\t\t}\n\t\t}\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit: function init(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n});\n\nvar ABFieldNumber = function (_ABField) {\n\t_inherits(ABFieldNumber, _ABField);\n\n\tfunction ABFieldNumber(values, object) {\n\t\t_classCallCheck(this, ABFieldNumber);\n\n\t\t/*\n  {\n  settings: {\n  'allowRequired':0,\n  'numberDefault':null,\n  'typeFormat': 'none',\n  'typeDecimals': 'none',\n  'typeDecimalPlaces': 'none',\n  'typeRounding' : 'none',\n  'typeThousands': 'none',\n  'validation':0,\n  'validateMinimum':null,\n  'validateMaximum':null\n  }\n  }\n  */\n\n\t\t// we're responsible for setting up our specific settings:\n\t\tvar _this = _possibleConstructorReturn(this, (ABFieldNumber.__proto__ || Object.getPrototypeOf(ABFieldNumber)).call(this, values, object, ABFieldNumberDefaults));\n\n\t\tfor (var dv in defaultValues) {\n\t\t\t_this.settings[dv] = values.settings[dv] || defaultValues[dv];\n\t\t}\n\n\t\t// text to Int:\n\t\t_this.settings.allowRequired = parseInt(_this.settings.allowRequired);\n\t\t_this.settings.validation = parseInt(_this.settings.validation);\n\n\t\treturn _this;\n\t}\n\n\t// return the default values for this DataField\n\n\n\t_createClass(ABFieldNumber, [{\n\t\tkey: \"isValid\",\n\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\tvalue: function isValid() {\n\n\t\t\tvar errors = _get(ABFieldNumber.prototype.__proto__ || Object.getPrototypeOf(ABFieldNumber.prototype), \"isValid\", this).call(this);\n\n\t\t\t// errors = OP.Form.validationError({\n\t\t\t// \tname:'columnName',\n\t\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t\t// }, errors);\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\t\t// toObj () {\n\n\t\t// \tvar obj = super.toObj();\n\n\t\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t\t// \treturn obj;\n\t\t// }\n\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t// return the grid column header definition for this instance of ABFieldNumber\n\n\t}, {\n\t\tkey: \"columnHeader\",\n\t\tvalue: function columnHeader(isObjectWorkspace) {\n\t\t\tvar config = _get(ABFieldNumber.prototype.__proto__ || Object.getPrototypeOf(ABFieldNumber.prototype), \"columnHeader\", this).call(this, isObjectWorkspace);\n\n\t\t\tconfig.editor = 'number'; // [edit_type] simple inline editing.\n\t\t\tconfig.sort = 'int'; // [sort_type]\n\n\t\t\treturn config;\n\t\t}\n\t}], [{\n\t\tkey: \"defaults\",\n\t\tvalue: function defaults() {\n\t\t\treturn ABFieldNumberDefaults;\n\t\t}\n\n\t\t/*\n   * @function propertiesComponent\n   *\n   * return a UI Component that contains the property definitions for this Field.\n   *\n   * @param {App} App the UI App instance passed around the Components.\n   * @return {Component}\n   */\n\n\t}, {\n\t\tkey: \"propertiesComponent\",\n\t\tvalue: function propertiesComponent(App) {\n\t\t\treturn ABFieldNumberComponent.component(App);\n\t\t}\n\t}]);\n\n\treturn ABFieldNumber;\n}(_ABField3.default);\n\n// NOTE: if you need a unique [edit_type] by your returned config.editor above:\n\n\nwebix.editors.number = webix.extend({\n\t// TODO : Validate number only\n}, webix.editors.text);\n\n//// NOTE: if you need a unique [sort_type] by your returned config.sort above:\n// webix.DataStore.prototype.sorting.as.[sort_type] = function(a,b){ \n//     return a > b ? 1 : -1; \n// }\n\nexports.default = ABFieldNumber;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _ABField2 = __webpack_require__(1);\n\nvar _ABField3 = _interopRequireDefault(_ABField2);\n\nvar _ABFieldComponent = __webpack_require__(2);\n\nvar _ABFieldComponent2 = _interopRequireDefault(_ABFieldComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ABFieldString\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * An ABFieldString defines a string field type.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABFieldStringDefaults = {\n\tkey: 'string', // unique key to reference this specific DataField\n\t// type : 'string', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\ticon: 'font', // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName: L('ab.dataField.string.menuName', '*Single line text'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.string.description', '*short string value')\n};\n\n/**\n * ABFieldStringComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n */\nvar ABFieldStringComponent = new _ABFieldComponent2.default({\n\n\tfieldDefaults: ABFieldStringDefaults,\n\n\telements: function elements(App) {\n\t\treturn [{\n\t\t\tview: \"text\",\n\t\t\tname: 'textDefault',\n\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\tplaceholder: L('ab.dataField.string.default', '*Default text')\n\t\t}, {\n\t\t\tview: \"checkbox\",\n\t\t\tname: 'supportMultilingual',\n\t\t\tlabelRight: L('ab.dataField.string.supportMultilingual', '*Support multilingual'),\n\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\tvalue: true\n\t\t}];\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: {\n\t\t'textDefault': '',\n\t\t'supportMultilingual': 1\n\t},\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules: {\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic: {},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit: function init(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n});\n\nvar ABFieldString = function (_ABField) {\n\t_inherits(ABFieldString, _ABField);\n\n\tfunction ABFieldString(values, object) {\n\t\t_classCallCheck(this, ABFieldString);\n\n\t\t/*\n  {\n  settings: {\n  textDefault: 'string',\n  supportMultilingual: true/false\n  }\n  }\n  */\n\n\t\t// we're responsible for setting up our specific settings:\n\t\tvar _this = _possibleConstructorReturn(this, (ABFieldString.__proto__ || Object.getPrototypeOf(ABFieldString)).call(this, values, object, ABFieldStringDefaults));\n\n\t\t_this.settings.textDefault = values.settings.textDefault || '';\n\t\t_this.settings.supportMultilingual = values.settings.supportMultilingual + \"\" || \"1\";\n\n\t\t// text to Int:\n\t\t_this.settings.supportMultilingual = parseInt(_this.settings.supportMultilingual);\n\n\t\treturn _this;\n\t}\n\n\t// return the default values for this DataField\n\n\n\t_createClass(ABFieldString, [{\n\t\tkey: \"isValid\",\n\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\tvalue: function isValid() {\n\n\t\t\tvar errors = _get(ABFieldString.prototype.__proto__ || Object.getPrototypeOf(ABFieldString.prototype), \"isValid\", this).call(this);\n\n\t\t\t// errors = OP.Form.validationError({\n\t\t\t// \tname:'columnName',\n\t\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t\t// }, errors);\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\t\t// toObj () {\n\n\t\t// \tvar obj = super.toObj();\n\n\t\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t\t// \treturn obj;\n\t\t// }\n\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t// return the grid column header definition for this instance of ABFieldString\n\n\t}, {\n\t\tkey: \"columnHeader\",\n\t\tvalue: function columnHeader(isObjectWorkspace) {\n\t\t\tvar config = _get(ABFieldString.prototype.__proto__ || Object.getPrototypeOf(ABFieldString.prototype), \"columnHeader\", this).call(this, isObjectWorkspace);\n\n\t\t\tconfig.editor = 'text';\n\t\t\tconfig.sort = 'string';\n\n\t\t\treturn config;\n\t\t}\n\t}], [{\n\t\tkey: \"defaults\",\n\t\tvalue: function defaults() {\n\t\t\treturn ABFieldStringDefaults;\n\t\t}\n\n\t\t/*\n   * @function propertiesComponent\n   *\n   * return a UI Component that contains the property definitions for this Field.\n   *\n   * @param {App} App the UI App instance passed around the Components.\n   * @return {Component}\n   */\n\n\t}, {\n\t\tkey: \"propertiesComponent\",\n\t\tvalue: function propertiesComponent(App) {\n\t\t\treturn ABFieldStringComponent.component(App);\n\t\t}\n\t}]);\n\n\treturn ABFieldString;\n}(_ABField3.default);\n\nexports.default = ABFieldString;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(20);\n\n__webpack_require__(19);\n\n/*\n * AB Choose\n *\n * When choosing an initial application to work with, we can\n *   - select an application from a list  :  ab_choose_list\n *   - create an application from a form  :  ab_choose_form\n *\n */\n\nvar idBase = 'ab_choose';\nOP.Component.extend(idBase, function (App) {\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\t};\n\n\t// Define the external components used in this Component:\n\tvar AppList = OP.Component['ab_choose_list'](App);\n\tvar AppForm = OP.Component['ab_choose_form'](App);\n\n\t// This component's UI definition:\n\t// Application multi-views\n\tvar _ui = {\n\t\tview: \"multiview\",\n\t\tanimate: false,\n\t\tid: ids.component,\n\t\tcells: [AppList.ui, AppForm.ui]\n\t};\n\n\t// This component's Init definition:\n\tvar _init = function _init() {\n\n\t\tAppList.init();\n\t\tAppForm.init();\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t/**\n   * @function transitionApplicationChooser\n   *\n   * Switch the AppBuilder UI to show the Application Chooser component.\n   */\n\t\ttransitionApplicationChooser: function transitionApplicationChooser() {\n\t\t\t$$(ids.component).show();\n\t\t}\n\n\t};\n\n\tvar _logic = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\t\tactions: _actions,\n\n\t\t_logic: _logic // Unit Testing\n\t};\n});\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * AB Choose Form\n *\n * Display the form for creating a new Application.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tformHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\tplaceholderName: L('ab.application.form.placeholderName', \"*Application name\"),\n\t\tplaceholderDescription: L('ab.application.form.placeholderDescription', \"*Application description\"),\n\t\tformDescription: L('ab.application.form.formDescription', \"*Description\"),\n\n\t\tsectionPermission: L('ab.application.form.sectionPermission', \"*Permission\"),\n\t\tpermissionHeader: L('ab.application.form.headerPermission', \"*Who can use this app?\"),\n\t\tcreateNewRole: L('ab.application.form.createNewRoleButton', \"*Create new roll\"),\n\n\t\tinvalidName: L('ab.application.invalidName', \"*This application name is invalid\"),\n\t\tduplicateName: L('ab.application.duplicateName', \"*Name must be unique.\")\n\n\t}\n};\n\nvar idBase = 'ab_choose_form';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tform: App.unique(idBase + '_form'),\n\t\tappFormPermissionList: App.unique(idBase + '_permission'),\n\t\tappFormCreateRoleButton: App.unique(idBase + '_createRole'),\n\n\t\tsaveButton: App.unique(idBase + '_buttonSave')\n\t};\n\n\tvar _ui = {\n\n\t\tid: ids.component,\n\t\tresponsive: \"hide\",\n\t\tcols: [{\n\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t}, {\n\t\t\tresponsiveCell: false,\n\t\t\trows: [{\n\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\thidden: App.config.hideMobile\n\t\t\t}, {\n\t\t\t\tview: \"toolbar\",\n\t\t\t\tcols: [{ view: \"label\", label: labels.component.formHeader, fillspace: true }]\n\t\t\t}, {\n\t\t\t\tview: \"form\",\n\t\t\t\tid: ids.form,\n\t\t\t\tautoheight: true,\n\t\t\t\tmargin: 0,\n\t\t\t\telements: [\n\t\t\t\t//{ type: \"section\", template: '<span class=\"webix_icon fa-edit\" style=\"max-width:32px;\"></span>Information', margin: 0 },\n\t\t\t\t{\n\t\t\t\t\tname: \"label\",\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tlabel: labels.common.formName,\n\t\t\t\t\trequired: true,\n\t\t\t\t\tplaceholder: labels.component.placeholderName,\n\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: function onChange(newValue, oldValue) {\n\t\t\t\t\t\t\t_logic.permissionRenameRole(newValue, oldValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, { height: App.config.smallSpacer }, {\n\t\t\t\t\tname: \"description\",\n\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t// label: labels.common.formDescription,\n\t\t\t\t\tlabel: \"Description\",\n\t\t\t\t\tlabelAlign: \"left\",\n\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\tplaceholder: labels.component.placeholderDescription,\n\t\t\t\t\theight: 100\n\t\t\t\t}, { height: App.config.smallSpacer }, {\n\t\t\t\t\tview: \"toolbar\",\n\t\t\t\t\tcss: \"ab-toolbar-submenu\",\n\t\t\t\t\tcols: [{\n\t\t\t\t\t\ttemplate: labels.component.permissionHeader,\n\t\t\t\t\t\ttype: 'header',\n\t\t\t\t\t\tborderless: true\n\t\t\t\t\t}, {\n\t\t\t\t\t\tview: \"toggle\",\n\t\t\t\t\t\tid: ids.appFormCreateRoleButton,\n\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\talign: \"right\",\n\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\tcss: \"ab-standard-button\",\n\t\t\t\t\t\toffIcon: \"square-o\",\n\t\t\t\t\t\tonIcon: \"check-square-o\",\n\t\t\t\t\t\tlabel: labels.component.createNewRole,\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonItemClick: function onItemClick(id, e) {\n\t\t\t\t\t\t\t\t_logic.createRoleButtonClick();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\tname: \"permissions\",\n\t\t\t\t\tid: ids.appFormPermissionList,\n\t\t\t\t\tview: \"list\",\n\t\t\t\t\t//height: 130,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tautoheight: true,\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tcss: \"ab-app-form-permission\",\n\t\t\t\t\ttemplate: \"{common.markCheckbox()} #name#\",\n\t\t\t\t\ttype: {\n\t\t\t\t\t\tmarkCheckbox: function markCheckbox(obj) {\n\t\t\t\t\t\t\treturn \"<span class='check webix_icon fa-\" + (obj.markCheckbox ? \"check-\" : \"\") + \"square-o'></span>\";\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonItemClick: function onItemClick(id, e, node) {\n\t\t\t\t\t\t\t_logic.permissionClick(id, e, node);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, { height: App.config.smallSpacer }, {\n\t\t\t\t\tmargin: 5,\n\t\t\t\t\tcols: [{ fillspace: true }, {\n\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\tvalue: labels.common.cancel,\n\t\t\t\t\t\twidth: App.config.buttonWidthSmall,\n\t\t\t\t\t\tcss: \"ab-cancel-button\",\n\t\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t\t_logic.cancel();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid: ids.saveButton,\n\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\tlabel: labels.common.save,\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\twidth: App.config.buttonWidthSmall,\n\t\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t\t_logic.buttonSaveClick();\n\t\t\t\t\t\t} // end click()\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t}, {\n\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\thidden: App.config.hideMobile\n\t\t\t}]\n\t\t}, {\n\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t}]\n\t};\n\n\tvar FormFields = ['label', 'description'];\n\n\tvar _init = function _init() {\n\t\twebix.extend($$(ids.form), webix.ProgressBar);\n\t\twebix.extend($$(ids.appFormPermissionList), webix.ProgressBar);\n\t};\n\n\tvar _logic = {\n\n\t\t/**\n   * @function applicationCreate\n   *\n   * Step through the process of creating an ABApplication with the\n   * current state of the Form.\n   *\n   * @param {obj} values \tcurrent value hash of the form values.\n   */\n\t\tapplicationCreate: function applicationCreate(values) {\n\n\t\t\tvar newApp = {\n\t\t\t\tname: values.label,\n\t\t\t\tlabel: values.label,\n\t\t\t\tdescription: values.description\n\t\t\t};\n\n\t\t\tasync.waterfall([function (cb) {\n\t\t\t\t// Create application data\n\t\t\t\t_ABApplication2.default.create(newApp).then(function (result) {\n\t\t\t\t\tcb(null, result);\n\t\t\t\t}).catch(cb);\n\t\t\t}, function (createdApp, cb) {\n\t\t\t\t_logic.permissionSave(createdApp).then(function () {\n\t\t\t\t\tcb();\n\t\t\t\t}).catch(cb);\n\t\t\t}], function (err) {\n\t\t\t\t_logic.formReady();\n\n\t\t\t\tif (err) {\n\t\t\t\t\twebix.message({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttext: labels.common.createErrorMessage.replace('{0}', values.label)\n\t\t\t\t\t});\n\n\t\t\t\t\tAD.error.log('App Builder : Error create application data', { error: err });\n\n\t\t\t\t\t_logic.buttonSaveEnable();\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tApp.actions.transitionApplicationList();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\ttext: labels.common.createSuccessMessage.replace('{0}', values.label)\n\t\t\t\t});\n\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function applicationUpdate\n   *\n   * Step through the process of updating an ABApplication with the\n   * current state of the Form.\n   *\n   * @param {ABApplication} application\n   */\n\t\tapplicationUpdate: function applicationUpdate(Application) {\n\t\t\tvar values = _logic.formValues();\n\n\t\t\tasync.waterfall([function (next) {\n\t\t\t\t_logic.permissionSave(Application).then(function (result) {\n\t\t\t\t\tnext(null, result);\n\t\t\t\t}).catch(next);\n\t\t\t}, function (app_role, next) {\n\t\t\t\t// Update application data\n\t\t\t\tApplication.label = values.label;\n\t\t\t\tApplication.description = values.description;\n\n\t\t\t\tif (app_role && app_role.id) Application.role = app_role.id;else Application.role = null;\n\n\t\t\t\tApplication.save().then(function () {\n\t\t\t\t\tnext();\n\t\t\t\t}).catch(next);\n\t\t\t}], function (err) {\n\n\t\t\t\t_logic.formReady();\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\tif (err) {\n\t\t\t\t\twebix.message({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttext: labels.common.updateErrorMessage.replace('{0}', Application.label)\n\t\t\t\t\t});\n\t\t\t\t\tAD.error.log('App Builder : Error update application data', { error: err });\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tApp.actions.transitionApplicationList();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\ttext: labels.common.updateSucessMessage.replace('{0}', Application.label)\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function buttonSaveClick\n   *\n   * Process the user clicking on the [Save] button.\n   */\n\t\tbuttonSaveClick: function buttonSaveClick() {\n\n\t\t\t_logic.buttonSaveDisable();\n\t\t\t_logic.formBusy();\n\n\t\t\t// if there is a selected Application, then this is an UPDATE\n\t\t\tvar updateApp = App.actions.getSelectedApplication();\n\t\t\tif (updateApp) {\n\n\t\t\t\tif (_logic.formValidate('update')) {\n\n\t\t\t\t\t_logic.applicationUpdate(updateApp);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// else this is a Create\n\t\t\t\tif (_logic.formValidate('add')) {\n\n\t\t\t\t\t_logic.applicationCreate(_logic.formValues());\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function buttonSaveDisable\n   *\n   * Disable the save button.\n   */\n\t\tbuttonSaveDisable: function buttonSaveDisable() {\n\t\t\t$$(ids.saveButton).disable();\n\t\t},\n\n\t\t/**\n   * @function buttonSaveEnable\n   *\n   * Re-enable the save button.\n   */\n\t\tbuttonSaveEnable: function buttonSaveEnable() {\n\t\t\t$$(ids.saveButton).enable();\n\t\t},\n\n\t\t/**\n   * @function cancel\n   *\n   * Cancel the current Form Operation and return us to the AppList.\n   */\n\t\tcancel: function cancel() {\n\n\t\t\t_logic.formReset();\n\t\t\tApp.actions.transitionApplicationList();\n\t\t},\n\n\t\t/**\n   * @function createRoleButtonClick\n   *\n   * The user clicked the [Create Role] button.  Update the UI and add a\n   * unique Application permission to our list.\n   */\n\t\tcreateRoleButtonClick: function createRoleButtonClick() {\n\n\t\t\tif ($$(ids.appFormCreateRoleButton).getValue()) {\n\n\t\t\t\t// TODO: if not called from anywhere else, then move the name gathering into .permissionAddNew()\n\t\t\t\t// Add new app role\n\t\t\t\tvar appName = $$(ids.form).elements[\"label\"].getValue();\n\t\t\t\t_logic.permissionAddNew(appName);\n\t\t\t} else {\n\t\t\t\t// Remove app role\n\t\t\t\t_logic.permissionRemoveNew();\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function formBusy\n   *\n   * Show the progress indicator to indicate a Form operation is in\n   * progress.\n   */\n\t\tformBusy: function formBusy() {\n\n\t\t\t$$(ids.form).showProgress({ type: 'icon' });\n\t\t},\n\n\t\t/**\n   * @function formPopulate()\n   *\n   * populate the form values from the given ABApplication\n   *\n   * @param {ABApplication} application  instance of the ABApplication\n   */\n\t\tformPopulate: function formPopulate(application) {\n\n\t\t\tvar Form = $$(ids.form);\n\n\t\t\t// Populate data to form\n\t\t\tif (application) {\n\t\t\t\tFormFields.forEach(function (f) {\n\t\t\t\t\tif (Form.elements[f]) {\n\t\t\t\t\t\tForm.elements[f].setValue(application[f]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// _logic.permissionPopulate(application);\n\t\t},\n\n\t\t/**\n   * @function formReady()\n   *\n   * remove the busy indicator from the form.\n   */\n\t\tformReady: function formReady() {\n\t\t\t$$(ids.form).hideProgress();\n\t\t},\n\n\t\t/**\n   * @function formReset()\n   *\n   * return the form to an empty state.\n   */\n\t\tformReset: function formReset() {\n\n\t\t\t$$(ids.form).clear();\n\t\t\t$$(ids.form).clearValidation();\n\t\t\t// $$(self.webixUiids.appFormPermissionList).clearValidation();\n\t\t\t// $$(self.webixUiids.appFormPermissionList).clearAll();\n\t\t\t// $$(self.webixUiids.appFormCreateRoleButton).setValue(0);\n\t\t},\n\n\t\t/**\n   * @function formValidate()\n   *\n   * validate the form values.\n   *\n   * @return {bool}  true if all values pass validation.  false otherwise.\n   */\n\t\tformValidate: function formValidate(op) {\n\t\t\t// op : ['add', 'update', 'destroy']\n\n\t\t\tvar Form = $$(ids.form);\n\t\t\tif (!Form.validate()) {\n\t\t\t\t// TODO : Error message\n\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar errors = _ABApplication2.default.isValid(op, Form.getValues());\n\t\t\tif (OP.Form.isValidationError(errors, Form)) {\n\t\t\t\t_logic.formReady();\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t///// TODO: \n\t\t\t// Implement common Form Input Validations\n\t\t\t// convert this to:  \n\t\t\t// app = ABApplication.newApplication(Form.getValues())\n\t\t\t// errors = app.inValid()\n\t\t\t// if (OP.Form.isValidationError(errors, Form)) { }\n\n\n\t\t\t// var appName = $$(ids.form).elements['label'].getValue(),\n\t\t\t// \tappDescription = $$(ids.form).elements['description'].getValue();\n\n\t\t\t// if (!inputValidator.validate(appName)) {\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\t\t\t// // Prevent duplicate application name\n\t\t\t// if (self.data.filter(function (app) { return app.name.trim().toLowerCase() == appName.trim().replace(/ /g, '_').toLowerCase(); }).length > 0) {\n\t\t\t// \tOP.Dialog.Alert({\n\t\t\t// \t\ttitle: labels.component.invalidName,\n\t\t\t// \t\ttext: labels.component.duplicateName.replace(\"#appName#\", appName),\n\t\t\t// \t\tok: labels.common.ok\n\t\t\t// \t});\n\n\t\t\t// \t$$(ids.form).elements['label'].focus();\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\t\t\treturn true;\n\t\t},\n\n\t\t/**\n   * @function formValues()\n   *\n   * return an object hash of name:value pairs of the current Form.\n   *\n   * @return {obj}\n   */\n\t\tformValues: function formValues() {\n\t\t\t// return the current values of the Form elements.\n\t\t\treturn $$(ids.form).getValues();\n\t\t},\n\n\t\t/**\n   * @function permissionAddNew\n   *\n   * create a new permission entry based upon the current Application.label\n   *\n   * This not only adds it to our Permission List, but also selects it.\n   *\n   * @param {string} appName\tThe Application.label of the current Application\n   */\n\t\tpermissionAddNew: function permissionAddNew(appName) {\n\n\t\t\t// add new role entry\n\t\t\t$$(ids.appFormPermissionList).add({\n\t\t\t\tid: 'newRole',\n\t\t\t\tname: _logic.permissionName(appName),\n\t\t\t\tisApplicationRole: true,\n\t\t\t\tmarkCheckbox: 1\n\t\t\t}, 0);\n\n\t\t\t// Select new role\n\t\t\tvar selectedIds = $$(ids.appFormPermissionList).getSelectedId(true);\n\t\t\tselectedIds.push('newRole');\n\t\t\t$$(ids.appFormPermissionList).select(selectedIds);\n\t\t},\n\n\t\t/**\n   * @function permissionClick\n   *\n   * Process when a permission entry in the list is clicked.\n   */\n\t\tpermissionClick: function permissionClick(id, e, node) {\n\n\t\t\tvar List = $$(ids.appFormPermissionList);\n\n\t\t\tvar item = List.getItem(id);\n\n\t\t\tif (List.getItem(id).isApplicationRole) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (List.isSelected(id)) {\n\t\t\t\titem.markCheckbox = 0;\n\t\t\t\tList.unselect(id);\n\t\t\t} else {\n\t\t\t\titem.markCheckbox = 1;\n\t\t\t\tvar selectedIds = List.getSelectedId();\n\n\t\t\t\tif (typeof selectedIds === 'string' || !isNaN(selectedIds)) {\n\t\t\t\t\tif (selectedIds) selectedIds = [selectedIds];else selectedIds = [];\n\t\t\t\t}\n\n\t\t\t\tselectedIds.push(id);\n\n\t\t\t\tList.select(selectedIds);\n\n\t\t\t\tList.updateItem(id, item);\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function permissionName\n   *\n   * returns a formatted name for a Permission Role based upon the provided Application.label\n   *\n   * @param {string} appName\tthe current value of the Application.label\n   * @return {string} \tPermission Role Name.\n   */\n\t\tpermissionName: function permissionName(appName) {\n\t\t\treturn appName + \" Application Role\";\n\t\t},\n\n\t\t/**\n   * @function permissionPopulate\n   *\n   * fill out the Permission list\n   *\n   * @param {ABApplication} application\tthe current ABApplication we are editing\n   */\n\t\tpermissionPopulate: function permissionPopulate(application) {\n\n\t\t\tvar PermForm = $$(ids.appFormPermissionList);\n\t\t\t// Get user's roles\n\t\t\tPermForm.showProgress({ type: 'icon' });\n\t\t\tasync.waterfall([function (next) {\n\t\t\t\tAD.comm.service.get({ url: '/app_builder/user/roles' }).fail(function (err) {\n\t\t\t\t\tnext(err);\n\t\t\t\t}).done(function (roles) {\n\n\t\t\t\t\t// scan the roles and determine if any of them have been created\n\t\t\t\t\t// after the current Application.name:\n\t\t\t\t\tvar parsedRoles = roles.map(function (r) {\n\t\t\t\t\t\tif (application) {\n\t\t\t\t\t\t\tif (r.name == _logic.permissionName(application.name.split('_').join(' '))) {\n\t\t\t\t\t\t\t\tr.isApplicationRole = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn r;\n\t\t\t\t\t});\n\t\t\t\t\tnext(null, parsedRoles);\n\t\t\t\t});\n\t\t\t}, function (available_roles, next) {\n\t\t\t\tif (application && application.id) {\n\t\t\t\t\tapplication.getPermissions().then(function (selected_role_ids) {\n\t\t\t\t\t\tnext(null, available_roles, selected_role_ids);\n\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\tnext(err);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tnext(null, available_roles, []);\n\t\t\t\t}\n\t\t\t}, function (available_roles, selected_role_ids, next) {\n\n\t\t\t\t// mark the role(s) in available_roles that is tied\n\t\t\t\t// this application:\n\t\t\t\tif (application && application.role) {\n\t\t\t\t\tavailable_roles.forEach(function (r) {\n\t\t\t\t\t\tif (r.id == (application.role.id || application.role)) {\n\t\t\t\t\t\t\tr.isApplicationRole = true;\n\t\t\t\t\t\t\tr.markCheckbox = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Sort permission list\n\t\t\t\tavailable_roles.sort(function (a, b) {\n\t\t\t\t\treturn a.isApplicationRole === b.isApplicationRole ? 0 : a.isApplicationRole ? -1 : 1;\n\t\t\t\t});\n\n\t\t\t\t// reload list from our available_roles\n\t\t\t\tPermForm.clearAll();\n\t\t\t\tPermForm.parse(available_roles);\n\n\t\t\t\t// mark which roles have already been selected\n\t\t\t\tif (selected_role_ids && selected_role_ids.length > 0) {\n\t\t\t\t\t// Select permissions\n\t\t\t\t\tPermForm.select(selected_role_ids);\n\t\t\t\t\tavailable_roles.forEach(function (r) {\n\t\t\t\t\t\tif (selected_role_ids.indexOf(r.id) > -1) {\n\t\t\t\t\t\t\tvar item = $$(ids.appFormPermissionList).getItem(r.id);\n\t\t\t\t\t\t\titem.markCheckbox = 1;\n\t\t\t\t\t\t\t$$(ids.appFormPermissionList).updateItem(r.id, item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Select create role application button\n\t\t\t\t\tvar markCreateButton = available_roles.filter(function (r) {\n\t\t\t\t\t\treturn r.isApplicationRole;\n\t\t\t\t\t}).length > 0 ? 1 : 0;\n\t\t\t\t\t$$(ids.appFormCreateRoleButton).setValue(markCreateButton);\n\t\t\t\t}\n\n\t\t\t\tnext();\n\t\t\t}], function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\twebix.message(err.message);\n\t\t\t\t}\n\n\t\t\t\tPermForm.hideProgress();\n\t\t\t});\n\n\t\t\t// return appName  + \" Application Role\";\n\t\t},\n\n\t\t/**\n   * @function permissionRemoveNew()\n   *\n   * Intended to be called when the USER unselects the option to create a Permission\n   * for this Application.\n   *\n   * We remove any Permission Role created for this Application.\n   */\n\t\tpermissionRemoveNew: function permissionRemoveNew() {\n\n\t\t\t// find any roles that are put here from our application form:\n\t\t\tvar appRoles = $$(ids.appFormPermissionList).find(function (perm) {\n\t\t\t\treturn perm.isApplicationRole;\n\t\t\t});\n\n\t\t\t// remove them:\n\t\t\tappRoles.forEach(function (r) {\n\t\t\t\t$$(ids.appFormPermissionList).remove(r.id);\n\t\t\t});\n\t\t},\n\n\t\t/*\n   * permissionRenameRole\n   *\n   * When the name of the Appliction changes, change the Name of the Permission as well.\n   *\n   * @param {string} newValue  the current name of the application\n   * @param {string} oldValue  the previous name of the application\n   */\n\t\tpermissionRenameRole: function permissionRenameRole(newValue, oldValue) {\n\n\t\t\tvar editRole = $$(ids.appFormPermissionList).find(function (d) {\n\t\t\t\treturn d.name === _logic.permissionName(oldValue);\n\t\t\t});\n\n\t\t\teditRole.forEach(function (r) {\n\t\t\t\tvar editItem = $$(ids.appFormPermissionList).getItem(r.id);\n\t\t\t\teditItem.name = _logic.permissionName(newValue);\n\n\t\t\t\t$$(ids.appFormPermissionList).updateItem(editItem.id, editItem);\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function permissionSave()\n   *\n   * step through saving the current Permission Settings and associating\n   * them with the current Application.\n   *\n   * @param {ABApplication} App  \tThe current Application we are working with.\n   * @return {Promise}\t\t\t.resolve( {Permission} ) if one is created for this App\n   */\n\t\tpermissionSave: function permissionSave(app) {\n\t\t\t//// REFACTOR:\n\t\t\t// this step implies that ab_choose_form understands the intracies of how\n\t\t\t// ABApplication and Permissions work.\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar saveRoleTasks = [],\n\t\t\t\t    appRole = null;\n\n\t\t\t\t//// Process the option to create a newRole For this Application:\n\n\t\t\t\t// if the button is set\n\t\t\t\tif ($$(ids.appFormCreateRoleButton).getValue()) {\n\n\t\t\t\t\t// check to see if we already have a permission that isApplicationRole\n\t\t\t\t\tvar selectedPerms = $$(ids.appFormPermissionList).getSelectedItem(true);\n\t\t\t\t\tselectedPerms = selectedPerms.filter(function (perm) {\n\t\t\t\t\t\treturn perm.isApplicationRole;\n\t\t\t\t\t});\n\n\t\t\t\t\t// if not, then create one:\n\t\t\t\t\tif (selectedPerms.length == 0) {\n\n\t\t\t\t\t\t// Create new role for application\n\t\t\t\t\t\tsaveRoleTasks.push(function (cb) {\n\t\t\t\t\t\t\tapp.createPermission().then(function (result) {\n\n\t\t\t\t\t\t\t\t// remember the Role we just created\n\t\t\t\t\t\t\t\tappRole = result;\n\t\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t\t}).catch(cb);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Delete any existing application roles\n\t\t\t\t\tsaveRoleTasks.push(function (cb) {\n\t\t\t\t\t\tapp.deletePermission().then(function () {\n\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t}).catch(cb);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//// Now process any additional roles:\n\n\t\t\t\t// get array of selected permissions that are not our newRole\n\t\t\t\tvar permItems = $$(ids.appFormPermissionList).getSelectedItem(true);\n\t\t\t\tpermItems = permItems.filter(function (item) {\n\t\t\t\t\treturn item.id !== 'newRole';\n\t\t\t\t}); // Remove new role item\n\n\n\t\t\t\t// Make sure Application is linked to selected permission items:\n\t\t\t\tsaveRoleTasks.push(function (cb) {\n\n\t\t\t\t\t// ok, so we removed the 'newRole' entry, but we might\n\t\t\t\t\t// have created an entry for it earlier, if so, add in\n\t\t\t\t\t// the created one here:\n\t\t\t\t\tif ($$(ids.appFormCreateRoleButton).getValue() && appRole) {\n\n\t\t\t\t\t\t// make sure it isn't already in there:\n\t\t\t\t\t\tvar appRoleItem = permItems.filter(function (item) {\n\t\t\t\t\t\t\treturn item.id == appRole.id;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!appRoleItem || appRoleItem.length < 1) {\n\n\t\t\t\t\t\t\t// if not, add it :\n\t\t\t\t\t\t\tpermItems.push({\n\t\t\t\t\t\t\t\tid: appRole.id,\n\t\t\t\t\t\t\t\tisApplicationRole: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Assign Role Permissions\n\t\t\t\t\tapp.assignPermissions(permItems).then(function () {\n\t\t\t\t\t\tcb();\n\t\t\t\t\t}).catch(cb);\n\t\t\t\t});\n\n\t\t\t\tasync.series(saveRoleTasks, function (err, results) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// we return the instance of the newly created Permission.\n\t\t\t\t\t\tresolve(appRole);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t//// REFACTOR QUESTION:\n\t\t\t// why are we updating the app.permissions with this data structure?\n\t\t\t// where is this data structure being used?\n\t\t\t// Earlier we are using another structure (permissionAddNew()) ... how is that related to this?\n\n\t\t\t// // Final task\n\t\t\t// saveRoleTasks.push(function (cb) {\n\t\t\t// \t// Update store app data\n\t\t\t// \tvar applicationData = self.data.filter(function (d) { return d.id == app.id; });\n\t\t\t// \tapplicationData.forEach(function (app) {\n\t\t\t// \t\tapp.attr('permissions', $.map(permItems, function (item) {\n\t\t\t// \t\t\treturn {\n\t\t\t// \t\t\t\tapplication: app.id,\n\t\t\t// \t\t\t\tpermission: item.id,\n\t\t\t// \t\t\t\tisApplicationRole: item.isApplicationRole\n\t\t\t// \t\t\t}\n\t\t\t// \t\t}));\n\t\t\t// \t});\n\n\t\t\t// \tq.resolve(appRole);\n\t\t\t// \tcb();\n\t\t\t// })\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show the Form Component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t// initiate a request to create a new Application\n\t\ttransitionApplicationForm: function transitionApplicationForm(application) {\n\n\t\t\t// if no application is given, then this should be a [create] operation,\n\n\t\t\t// so clear our AppList\n\t\t\tif ('undefined' == typeof application) {\n\t\t\t\tApp.actions.unselectApplication();\n\t\t\t}\n\n\t\t\t// now prepare our form:\n\t\t\t_logic.formReset();\n\t\t\tif (application) {\n\t\t\t\t// populate Form here:\n\t\t\t\t_logic.formPopulate(application);\n\t\t\t}\n\t\t\t_logic.permissionPopulate(application);\n\t\t\t_logic.show();\n\t\t}\n\n\t};\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\t\tactions: _actions,\n\n\t\t_logic: _logic\n\t};\n});\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(21);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * AB Choose List\n *\n * Display a list of Applications for the user to select.\n *\n */\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\ttitle: L('ab.application.application', '*Application'),\n\n\t\tcreateNew: L('ab.application.createNew', '*Add new application'),\n\t\tnoApplication: L('ab.application.noApplication', \"*There is no application data\")\n\t}\n};\n\nvar idBase = 'ab_choose_list';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tuploader: App.unique(idBase + '_uploader'),\n\t\tlist: App.unique(idBase + '_list'),\n\t\ttoolBar: App.unique(idBase + '_toolbar'),\n\t\tbuttonCreateNewApplication: App.unique(idBase + '_buttonNewApp')\n\t};\n\n\tvar MenuComponent = OP.Component['ab_choose_list_menu'](App);\n\tvar PopupMenu = webix.ui(MenuComponent.ui);\n\tPopupMenu.hide();\n\n\tvar _ui = {\n\n\t\tid: ids.component,\n\t\tresponsive: \"hide\",\n\n\t\tcols: [{\n\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t}, {\n\t\t\tresponsiveCell: false,\n\t\t\trows: [{\n\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\thidden: App.config.hideMobile\n\t\t\t},\n\t\t\t//\n\t\t\t// ToolBar\n\t\t\t//\n\t\t\t{\n\t\t\t\tview: \"toolbar\",\n\t\t\t\tid: ids.toolBar,\n\t\t\t\tcols: [{ view: \"label\", label: labels.component.title, fillspace: true }, {\n\t\t\t\t\tid: ids.buttonCreateNewApplication,\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tlabel: labels.component.createNew,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\ticon: \"plus\",\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t// Inform our Chooser we have a request to create an Application:\n\t\t\t\t\t\tApp.actions.transitionApplicationForm();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"uploader\",\n\t\t\t\t\tid: ids.uploader,\n\t\t\t\t\tlabel: labels.common.import,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tupload: '/app_builder/appJSON',\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\ticon: \"upload\",\n\t\t\t\t\tautosend: true,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonAfterFileAdd: function onAfterFileAdd() {\n\t\t\t\t\t\t\t_logic.onAfterFileAdd();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonFileUpload: function onFileUpload(item, response) {\n\t\t\t\t\t\t\t_logic.onFileUpload(item, response);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonFileUploadError: function onFileUploadError(details, response) {\n\t\t\t\t\t\t\t_logic.onFileUploadError(details, response);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t},\n\n\t\t\t//\n\t\t\t// The List of Applications\n\t\t\t//\n\t\t\t{\n\t\t\t\tid: ids.list,\n\t\t\t\tview: \"list\",\n\t\t\t\tcss: 'ab-app-select-list',\n\t\t\t\ttemplate: function template(obj, common) {\n\t\t\t\t\treturn _logic.templateListItem(obj, common);\n\t\t\t\t},\n\t\t\t\ttype: {\n\t\t\t\t\theight: App.config.appListRowHeight, // Defines item height\n\t\t\t\t\ticonGear: \"<span class='webix_icon fa-cog'></span>\"\n\t\t\t\t},\n\t\t\t\tselect: false,\n\t\t\t\tonClick: {\n\t\t\t\t\t\"ab-app-list-item\": function abAppListItem(ev, id, trg) {\n\t\t\t\t\t\treturn _logic.onClickListItem(ev, id, trg);\n\t\t\t\t\t},\n\t\t\t\t\t\"ab-app-list-edit\": function abAppListEdit(ev, id, trg) {\n\t\t\t\t\t\treturn _logic.onClickListEdit(ev, id, trg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\thidden: App.config.hideMobile\n\t\t\t}]\n\t\t}, {\n\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t}]\n\t};\n\n\tvar _data = {};\n\n\tvar _logic = {\n\n\t\t/**\n   * @function busy\n   *\n   * show a busy indicator on our App List\n   */\n\t\tbusy: function busy() {\n\t\t\tif ($$(ids.list).showProgress) $$(ids.list).showProgress({ icon: 'cursor' });\n\t\t},\n\n\t\t/**\n   * @function loadData\n   *\n   * Load all the ABApplications and display them in our App List\n   */\n\t\tloadData: function loadData() {\n\n\t\t\t// Get applications data from the server\n\t\t\t_logic.busy();\n\t\t\t_ABApplication2.default.allApplications().then(function (data) {\n\n\t\t\t\t_logic.ready();\n\n\t\t\t\t// make sure our overlay is updated when items are added/removed\n\t\t\t\t// from our data list.\n\t\t\t\tdata.attachEvent(\"onAfterAdd\", function (id, index) {\n\t\t\t\t\t_logic.refreshOverlay();\n\t\t\t\t});\n\n\t\t\t\tdata.attachEvent(\"onAfterDelete\", function (id) {\n\t\t\t\t\t_logic.refreshOverlay();\n\t\t\t\t});\n\n\t\t\t\t_data.listApplications = data;\n\n\t\t\t\t_logic.refreshList();\n\t\t\t}).catch(function (err) {\n\t\t\t\t_logic.ready();\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\ttext: err\n\t\t\t\t});\n\t\t\t\tAD.error.log('App Builder : Error loading application data', { error: err });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function onAfterFileAdd\n   *\n   * UI updates for when a file upload is initiated\n   */\n\t\tonAfterFileAdd: function onAfterFileAdd() {\n\t\t\t$$(ids.uploader).disable();\n\t\t\t_logic.busy();\n\t\t},\n\n\t\t/**\n   * @function onClickListEdit\n   *\n   * UI updates for when the edit gear is clicked\n   */\n\t\tonClickListEdit: function onClickListEdit(ev, id, trg) {\n\n\t\t\t// Show menu\n\t\t\tPopupMenu.show(trg);\n\t\t\t$$(ids.list).select(id);\n\n\t\t\treturn false; // block default behavior\n\t\t},\n\n\t\t/**\n   * @function onClickListItem\n   *\n   * An item in the list is selected. So update the workspace with that \n   * object.\n   */\n\t\tonClickListItem: function onClickListItem(ev, id, trg) {\n\n\t\t\t_logic.busy();\n\n\t\t\t$$(ids.list).select(id);\n\n\t\t\tvar selectedApp = $$(ids.list).getItem(id);\n\n\t\t\tif (selectedApp) {\n\n\t\t\t\t_logic.ready();\n\n\t\t\t\t// We've selected an Application to work with\n\t\t\t\tApp.actions.transitionWorkspace(selectedApp);\n\t\t\t}\n\n\t\t\treturn false; // block default behavior\n\t\t},\n\n\t\t/**\n   * @function onFileUpload\n   *\n   * The File Upload process finished.\n   */\n\t\tonFileUpload: function onFileUpload(item, response) {\n\t\t\t_logic.loadData(); // refresh app list\n\t\t\t$$(ids.uploader).enable();\n\t\t\t_logic.ready();\n\t\t},\n\n\t\t/**\n   * @function onFileUploadError\n   *\n   * The File Upload process exited with an error.\n   */\n\t\tonFileUploadError: function onFileUploadError(details, response) {\n\n\t\t\tvar errorMessage = 'Error: ' + (response && response.message);\n\t\t\tOP.Dialog.Alert({\n\t\t\t\ttext: errorMessage\n\t\t\t});\n\t\t\t// webix.message({\n\t\t\t// \ttype: 'error',\n\t\t\t// \ttext: errorMessage\n\t\t\t// });\n\t\t\t_logic.loadData(); // refresh app list\n\t\t\t$$(ids.uploader).enable();\n\t\t\t_logic.ready();\n\t\t},\n\n\t\t/**\n   * @function refreshOverlay\n   *\n   * If we have no items in our list, display a Message.\n   */\n\t\trefreshOverlay: function refreshOverlay() {\n\t\t\tvar appList = $$(ids.list);\n\n\t\t\tif (!appList.count()) //if no data is available\n\t\t\t\tappList.showOverlay(labels.component.noApplication);else appList.hideOverlay();\n\t\t},\n\n\t\t/**\n   * @function ready\n   *\n   * remove the busy indicator on our App List\n   */\n\t\tready: function ready() {\n\t\t\tif ($$(ids.list).hideProgress) $$(ids.list).hideProgress();\n\t\t},\n\n\t\t/**\n   * @function reset\n   *\n   * Return our App List to an unselected state.\n   */\n\t\treset: function reset() {\n\t\t\t$$(ids.list).unselectAll();\n\t\t},\n\n\t\t/**\n   * @function refreshList\n   *\n   * Apply our list of ABApplication data to our AppList\n   */\n\t\trefreshList: function refreshList() {\n\n\t\t\tvar appList = $$(ids.list);\n\n\t\t\tappList.clearAll();\n\t\t\tappList.data.unsync();\n\t\t\tappList.data.sync(_data.listApplications);\n\n\t\t\t_logic.refreshOverlay();\n\n\t\t\tappList.refresh();\n\n\t\t\t_logic.ready();\n\t\t},\n\n\t\t/**\n   * @function show\n   *\n   * Trigger our List component to show\n   */\n\t\tshow: function show() {\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\t\t/**\n   * @function templateListItem\n   *\n   * Defines the template for each row of our AppList.\n   *\n   * @param {obj} obj the current instance of ABApplication for the row.\n   * @param {?} common the webix.common icon data structure\n   * @return {string}\n   */\n\t\ttemplateListItem: function templateListItem(obj, common) {\n\t\t\treturn _templateListItem.replace('#label#', obj.label || '').replace('#description#', obj.description || '').replace('{common.iconGear}', common.iconGear);\n\t\t}\n\t};\n\n\t/*\n  * _templateListItem\n  *\n  * The AppList Row template definition.\n  */\n\tvar _templateListItem = [\"<div class='ab-app-list-item'>\", \"<div class='ab-app-list-info'>\", \"<div class='ab-app-list-name'>#label#</div>\", \"<div class='ab-app-list-description'>#description#</div>\", \"</div>\", \"<div class='ab-app-list-edit'>\", \"{common.iconGear}\", \"</div>\", \"</div>\"].join('');\n\n\t/*\n  * @function _init\n  *\n  * The init() that performs the necessary setup for our AppList chooser.\n  */\n\tvar _init = function _init() {\n\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t\twebix.extend($$(ids.list), webix.OverlayBox);\n\n\t\tMenuComponent.init();\n\n\t\t// start things off by loading the current list of Applications\n\t\t_logic.loadData();\n\t};\n\n\t/*\n  * {json} _actions\n  *\n  * The exported methods available to other Components.\n  */\n\tvar _actions = {\n\n\t\t/**\n   * @function unselectApplication\n   *\n   * resets the AppList to an unselected state.\n   */\n\t\tunselectApplication: function unselectApplication() {\n\t\t\t_logic.reset();\n\t\t},\n\n\t\t/**\n   * @function getSelectedApplication\n   *\n   * returns which ABApplication is currently selected.\n   * @return {ABApplication}  or {null} if nothing selected.\n   */\n\t\tgetSelectedApplication: function getSelectedApplication() {\n\t\t\treturn $$(ids.list).getSelectedItem();\n\t\t},\n\n\t\t/**\n   * @function deleteApplication\n   *\n   * deletes the given ABAppliction.\n   *\n   * NOTE: this assumes the component using this method has already\n   * provided the delete confirmation.\n   *\n   * @param {ABApplication} app  the ABAppliction to delete.\n   */\n\t\tdeleteApplication: function deleteApplication(app) {\n\n\t\t\tif (!app) return;\n\n\t\t\t// Delete application data\n\t\t\t_logic.busy();\n\n\t\t\tapp.destroy().then(function (result) {\n\t\t\t\t_logic.reset();\n\t\t\t\t_logic.ready();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\ttext: labels.common.deleteSuccessMessage.replace('{0}', app.label)\n\t\t\t\t});\n\t\t\t}).catch(function (err) {\n\t\t\t\t_logic.reset();\n\t\t\t\t_logic.ready();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\ttext: labels.common.deleteErrorMessage.replace(\"{0}\", app.label)\n\t\t\t\t});\n\n\t\t\t\tAD.error.log('App Builder : Error delete application data', { error: err });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function transitionApplicationList\n   *\n   * Trigger our List component to show\n   */\n\t\ttransitionApplicationList: function transitionApplicationList() {\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\t\tactions: _actions,\n\n\t\t_logic: _logic // exposed for Unit Testing\n\t};\n});\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n * AB Choose List\n *\n * Display a list of Applications for the user to select.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\tmenu: L('ab.application.menu', \"*Application Menu\"),\n\t\tconfirmDeleteTitle: L('ab.application.delete.title', \"*Delete application\"),\n\t\tconfirmDeleteMessage: L('ab.application.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\t}\n};\n\nvar idBase = 'ab_choose_list_menu';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\tvar ids = {\n\t\tmenu: App.unique(idBase + '_menu')\n\t};\n\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.menu,\n\t\thead: labels.component.menu,\n\t\twidth: 100,\n\t\tbody: {\n\t\t\tview: \"list\",\n\t\t\tborderless: true,\n\t\t\tdata: [{ command: labels.common.edit, icon: \"fa-pencil-square-o\" }, { command: labels.common.export, icon: \"fa-download\" }, { command: labels.common.delete, icon: \"fa-trash\" }],\n\t\t\tdatatype: \"json\",\n\n\t\t\ttemplate: \"<i class='fa #icon#' aria-hidden='true'></i> #command#\",\n\t\t\tautoheight: true,\n\t\t\tselect: false,\n\t\t\ton: {\n\t\t\t\t'onItemClick': function onItemClick(timestamp, e, trg) {\n\t\t\t\t\treturn _logic.onItemClick(timestamp, e, trg);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _data = {};\n\n\tvar _init = function _init() {};\n\n\tvar _logic = {\n\n\t\t/**\n   * @function onItemClick\n   * process which item in our popup was selected.\n   */\n\t\tonItemClick: function onItemClick(timestamp, e, trg) {\n\n\t\t\t// hide our popup before we trigger any other possible UI animation: (like .edit)\n\t\t\t// NOTE: if the UI is animating another component, and we do .hide()\n\t\t\t// while it is in progress, the UI will glitch and give the user whiplash.\n\t\t\t$$(ids.menu).hide();\n\n\t\t\tvar selectedApp = App.actions.getSelectedApplication();\n\n\t\t\tswitch (trg.textContent.trim()) {\n\t\t\t\tcase labels.common.edit:\n\t\t\t\t\tApp.actions.transitionApplicationForm(selectedApp);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase labels.common.delete:\n\t\t\t\t\tOP.Dialog.ConfirmDelete({\n\t\t\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t\t\t\ttext: labels.component.confirmDeleteMessage.replace('{0}', selectedApp.label),\n\t\t\t\t\t\tcallback: function callback(result) {\n\n\t\t\t\t\t\t\tif (!result) return;\n\n\t\t\t\t\t\t\tApp.actions.deleteApplication(selectedApp);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase labels.common.export:\n\t\t\t\t\t// Download the JSON file to disk\n\t\t\t\t\twindow.location.assign('/app_builder/appJSON/' + selectedApp.id + '?download=1');\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t};\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\n\t\t_logic: _logic // exposed for Unit Testing\n\t};\n});\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(24);\n\n__webpack_require__(23);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work\n *\n * Display the component for working with an ABApplication.\n *\n */\n\nvar labels = {\n\n\tapplication: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\tbackToApplication: L('ab.application.backToApplication', \"*Back to Applications page\"),\n\t\tsynchronize: L('ab.application.synchronize', \"*Synchronize\"),\n\t\tobjectTitle: L('ab.object.title', \"*Objects\"),\n\t\tinterfaceTitle: L('ab.interface.title', \"*Interface\")\n\t}\n};\n\nOP.Component.extend('ab_work', function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique('ab_work_component'),\n\t\ttoolBar: App.unique('ab_work_toolbar'),\n\t\tbuttonSync: App.unique('ab_work_button_sync'),\n\t\tlabelAppName: App.unique('ab_work_label_appname'),\n\t\ttabbar: App.unique('ab_work_tabbar'),\n\t\ttab_object: App.unique('ab_work_tab_object'),\n\t\ttab_interface: App.unique('ab_work_tab_interface'),\n\t\tworkspace: App.unique('ab_work_workspace')\n\t};\n\n\tvar AppObjectWorkspace = OP.Component['ab_work_object'](App);\n\tvar AppInterfaceWorkspace = OP.Component['ab_work_interface'](App);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\trows: [{\n\t\t\tview: \"toolbar\",\n\t\t\tid: ids.toolBar,\n\t\t\tautowidth: true,\n\t\t\tcols: [{\n\t\t\t\tview: \"button\",\n\t\t\t\tlabel: labels.application.backToApplication,\n\t\t\t\twidth: 200,\n\t\t\t\ttype: \"icon\",\n\t\t\t\ticon: \"arrow-left\",\n\t\t\t\talign: \"left\",\n\n\t\t\t\tclick: function click() {\n\t\t\t\t\tApp.actions.transitionApplicationChooser();\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tview: \"label\",\n\t\t\t\tid: ids.labelAppName,\n\t\t\t\talign: \"center\"\n\t\t\t}, {\n\t\t\t\tview: \"spacer\",\n\t\t\t\twidth: 200,\n\t\t\t\talrign: \"right\"\n\t\t\t}\n\t\t\t// {\n\t\t\t// \tid: ids.buttonSync,\n\t\t\t// \tview: \"button\",\n\t\t\t// \ttype: \"icon\",\n\t\t\t// \ticon: \"refresh\",\n\t\t\t// \tlabel: labels.application.synchronize,\n\t\t\t// \tautowidth: true,\n\t\t\t// \talign: \"right\",\n\t\t\t// \tclick: function () {\n\t\t\t// \t\t_logic.synchronize();\n\t\t\t// \t}\n\t\t\t// }\n\t\t\t]\n\t\t},\n\t\t//{ height: App.config.mediumSpacer },\n\t\t// {\n\t\t// \tview:\"segmented\",\n\t\t// \tid: ids.tabbar,\n\t\t// \tvalue: ids.tab_object,\n\t\t// \tmultiview: true,\n\t\t// \talign: \"center\",\n\t\t// \toptions:[\n\t\t// \t\t{\n\t\t// \t\t\tid: ids.tab_object,\n\t\t// \t\t\tvalue: labels.application.objectTitle,\n\t\t// \t\t\twidth: App.config.tabWidthMedium\n\t\t// \t\t},\n\t\t// \t\t{\n\t\t// \t\t\tid: ids.tab_interface,\n\t\t// \t\t\tvalue: labels.application.interfaceTitle,\n\t\t// \t\t\twidth: App.config.tabWidthMedium\n\t\t// \t\t}\n\t\t// \t],\n\t\t// \ton: {\n\t\t// \t\tonChange: function (idNew, idOld) {\n\t\t// \t\t\tif (idNew != idOld) {\n\t\t// \t\t\t\t_logic.tabSwitch(idNew, idOld);\n\t\t// \t\t\t}\n\t\t// \t\t}\n\t\t// \t}\n\t\t// },\n\t\t{ height: App.config.mediumSpacer }, {\n\t\t\tcols: [{\n\t\t\t\twidth: App.config.mediumSpacer\n\t\t\t}, {\n\t\t\t\trows: [{\n\t\t\t\t\tview: \"tabbar\",\n\t\t\t\t\tid: ids.tabbar,\n\t\t\t\t\tvalue: ids.tab_object,\n\t\t\t\t\tmultiview: true,\n\t\t\t\t\toptions: [{\n\t\t\t\t\t\tid: ids.tab_object,\n\t\t\t\t\t\tvalue: labels.application.objectTitle,\n\t\t\t\t\t\twidth: App.config.tabWidthMedium\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid: ids.tab_interface,\n\t\t\t\t\t\tvalue: labels.application.interfaceTitle,\n\t\t\t\t\t\twidth: App.config.tabWidthMedium\n\t\t\t\t\t}],\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: function onChange(idNew, idOld) {\n\t\t\t\t\t\t\tif (idNew != idOld) {\n\t\t\t\t\t\t\t\t_logic.tabSwitch(idNew, idOld);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tid: ids.workspace,\n\t\t\t\t\tcells: [AppObjectWorkspace.ui, AppInterfaceWorkspace.ui]\n\t\t\t\t}]\n\t\t\t}, {\n\t\t\t\twidth: App.config.mediumSpacer\n\t\t\t}]\n\t\t}, { height: App.config.mediumSpacer }]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {\n\n\t\tAppObjectWorkspace.init();\n\t\tAppInterfaceWorkspace.init();\n\n\t\t// initialize the Object Workspace to show first.\n\t\t_logic.tabSwitch(ids.tab_object);\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\tapplicationInit: function applicationInit(application) {\n\n\t\t\t// setup Application Label:\n\t\t\t$$(ids.labelAppName).define('label', application.label);\n\t\t\t$$(ids.labelAppName).refresh();\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\t\t/**\n   * @function synchronize\n   *\n   * Kick off the Synchronization process.\n   */\n\t\tsynchronize: function synchronize() {\n\n\t\t\t// self.element.trigger(self.options.synchronizeEvent, {\n\t\t\t// \tappID: AD.classes.AppBuilder.currApp.id\n\t\t\t// });\n\t\t\t//// Question: where should this logic go?  Here or in ab.js ?\n\n\t\t\tconsole.error('TODO: ab_work.logic.synchronize()!');\n\t\t},\n\n\t\t/**\n   * @function tabSwitch\n   *\n   * Every time a tab switch happens, decide which workspace to show.\n   *\n   * @param {string} idTab\tthe id of the tab that was changed to.\n   * @param {string} idOld\tthe previous tab id\n   */\n\t\ttabSwitch: function tabSwitch(idTab, idOld) {\n\n\t\t\tswitch (idTab) {\n\n\t\t\t\t// Object Workspace Tab\n\t\t\t\tcase ids.tab_object:\n\n\t\t\t\t\t// $$(ids.buttonSync).show();\n\t\t\t\t\tAppObjectWorkspace.show();\n\t\t\t\t\tbreak;\n\n\t\t\t\t// Interface Workspace Tab\n\t\t\t\tcase ids.tab_interface:\n\n\t\t\t\t\t// $$(ids.buttonSync).hide();\n\t\t\t\t\tAppInterfaceWorkspace.show();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t/**\n   * @function transitionWorkspace\n   *\n   * Switch the UI to view the App Workspace screen.\n   *\n   * @param {ABApplication} application\n   */\n\t\ttransitionWorkspace: function transitionWorkspace(application) {\n\n\t\t\t_logic.applicationInit(application);\n\t\t\tAppObjectWorkspace.applicationLoad(application);\n\t\t\tAppInterfaceWorkspace.applicationLoad(application);\n\n\t\t\t_logic.show();\n\t\t}\n\n\t};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_interface\n *\n * Display the Interface for designing Pages and Views in the App Builder.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\n\t}\n};\n\nvar idBase = 'ab_work_interface';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\t//scroll: true,\n\t\trows: [{\n\t\t\tview: \"label\",\n\t\t\tlabel: \"interface workspace\"\n\t\t}]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {}\n\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t// our internal business logic\n\t;var _logic = {\n\n\t\t/**\n   * @function applicationLoad\n   *\n   * Initialize the Object Workspace with the given ABApplication.\n   *\n   * @param {ABApplication} application \n   */\n\t\tapplicationLoad: function applicationLoad(application) {\n\t\t\tconsole.error('TODO: ab_work_interface.applicationLoad()');\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\tapplicationLoad: _logic.applicationLoad,\n\t\tshow: _logic.show,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(25);\n\n__webpack_require__(29);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object\n *\n * Display the Object Tab UI:\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\n\t}\n};\n\nvar idBase = 'ab_work_object';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\n\t};\n\n\tvar ObjectList = OP.Component['ab_work_object_list'](App);\n\tvar ObjectWorkspace = OP.Component['ab_work_object_workspace'](App);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\tautoheight: true,\n\t\tmargin: 20,\n\t\tcols: [ObjectList.ui, { view: \"resizer\" }, ObjectWorkspace.ui]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {\n\n\t\tObjectWorkspace.init();\n\t\tObjectList.init();\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\t/**\n   * @function applicationLoad\n   *\n   * Initialize the Object Workspace with the given ABApplication.\n   *\n   * @param {ABApplication} application \n   */\n\t\tapplicationLoad: function applicationLoad(application) {\n\t\t\tObjectList.applicationLoad(application);\n\t\t\tApp.actions.clearObjectWorkspace();\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\tapplicationLoad: _logic.applicationLoad,\n\t\tshow: _logic.show,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(26);\n\n__webpack_require__(28);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_list\n *\n * Manage the Object List\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\taddNew: L('ab.object.addNew', '*Add new object'),\n\n\t\tconfirmDeleteTitle: L('ab.object.delete.title', \"*Delete object\"),\n\t\tconfirmDeleteMessage: L('ab.object.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\n\t}\n};\n\nvar idBase = 'ab_work_object_list';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tlist: App.unique(idBase + '_editlist'),\n\t\tbuttonNew: App.unique(idBase + '_buttonNew')\n\n\t};\n\n\tvar ObjectEditPopup = OP.Component['ab_work_object_list_popupEditMenu'](App);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\trows: [{\n\t\t\tview: App.custom.editlist.view, // \"editlist\",\n\t\t\tid: ids.list,\n\t\t\twidth: 250,\n\n\t\t\theight: 800, // #Hack!\n\n\t\t\tselect: true,\n\t\t\teditaction: 'custom',\n\t\t\teditable: true,\n\t\t\teditor: \"text\",\n\t\t\teditValue: \"label\",\n\t\t\ttemplate: function template(obj, common) {\n\t\t\t\treturn _logic.templateListItem(obj, common);\n\t\t\t},\n\t\t\ttype: {\n\t\t\t\theight: \"auto\",\n\t\t\t\ticonGear: \"<div class='ab-object-list-edit'><span class='webix_icon fa-cog'></span></div>\"\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonAfterRender: function onAfterRender() {\n\t\t\t\t\t_logic.onAfterRender();\n\t\t\t\t},\n\t\t\t\tonAfterSelect: function onAfterSelect(id) {\n\t\t\t\t\t_logic.selectObject(id);\n\t\t\t\t},\n\t\t\t\tonBeforeEditStop: function onBeforeEditStop(state, editor) {\n\t\t\t\t\t_logic.onBeforeEditStop(state, editor);\n\t\t\t\t},\n\t\t\t\tonAfterEditStop: function onAfterEditStop(state, editor, ignoreUpdate) {\n\t\t\t\t\t_logic.onAfterEditStop(state, editor, ignoreUpdate);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\t\"ab-object-list-edit\": function abObjectListEdit(e, id, trg) {\n\t\t\t\t\t_logic.clickEditMenu(e, id, trg);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tview: 'button',\n\t\t\tid: ids.buttonNew,\n\t\t\tvalue: labels.component.addNew,\n\t\t\tclick: function click() {\n\t\t\t\t_logic.clickNewObject();\n\t\t\t}\n\t\t}]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {\n\n\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t\t$$(ids.component).adjust();\n\t\t$$(ids.list).adjust();\n\n\t\tObjectEditPopup.init({\n\t\t\tonClick: _logic.callbackObjectEditorMenu\n\t\t});\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\t/**\n   * @function applicationLoad\n   *\n   * Initialize the Object List from the provided ABApplication\n   *\n   * If no ABApplication is provided, then show an empty form. (create operation)\n   *\n   * @param {ABApplication} application  \t[optional] The current ABApplication\n   *\t\t\t\t\t\t\t\t\t\twe are working with.\n   */\n\t\tapplicationLoad: function applicationLoad(application) {\n\t\t\t_logic.listBusy();\n\n\t\t\tCurrentApplication = application;\n\n\t\t\t// get a DataCollection of all our objects\n\t\t\tobjectList = new webix.DataCollection({\n\t\t\t\tdata: application.objects()\n\t\t\t});\n\n\t\t\t// clear our list and display our objects:\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.clearAll();\n\t\t\tList.data.unsync();\n\t\t\tList.data.sync(objectList);\n\t\t\tList.refresh();\n\t\t\tList.unselectAll();\n\n\t\t\t//\n\t\t\t_logic.syncNumberRefresh();\n\t\t\t_logic.listReady();\n\n\t\t\t// prepare our Popup with the current Application\n\t\t\tPopupNewObjectComponent.applicationLoad(application);\n\t\t},\n\n\t\tclickEditMenu: function clickEditMenu(e, id, trg) {\n\t\t\t// Show menu\n\t\t\tObjectEditPopup.show(trg);\n\n\t\t\treturn false;\n\t\t},\n\n\t\tlistBusy: function listBusy() {\n\t\t\t$$(ids.list).showProgress({ type: \"icon\" });\n\t\t},\n\n\t\tlistReady: function listReady() {\n\t\t\t$$(ids.list).hideProgress();\n\t\t},\n\n\t\tonAfterRender: function onAfterRender() {\n\t\t\tconsole.error('!! todo: onAfterRender() editing');\n\t\t\t// webix.once(function () {\n\t\t\t// \t$$(self.webixUiId.objectList).data.each(function (d) {\n\t\t\t// \t\t$($$(self.webixUiId.objectList).getItemNode(d.id)).find('.ab-object-unsync-number').html(99);\n\t\t\t// \t});\n\t\t\t// });\n\n\t\t\t// // Show gear icon\n\t\t\t// if (this.getSelectedId(true).length > 0) {\n\t\t\t// \t$(this.getItemNode(this.getSelectedId(false))).find('.ab-object-list-edit').show();\n\t\t\t// \tself.refreshUnsyncNumber();\n\t\t\t// }\n\t\t},\n\n\t\tonAfterEditStop: function onAfterEditStop(state, editor, ignoreUpdate) {\n\n\t\t\t_logic.showGear(editor.id);\n\n\t\t\tif (state.value != state.old) {\n\t\t\t\t_logic.listBusy();\n\n\t\t\t\tvar selectedObject = $$(ids.list).getSelectedItem(false);\n\t\t\t\tselectedObject.label = state.value;\n\n\t\t\t\t// Call server to rename\n\t\t\t\tselectedObject.save().catch(function () {\n\t\t\t\t\t_logic.listReady();\n\n\t\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\t\ttext: labels.common.renameErrorMessage.replace(\"{0}\", state.old)\n\t\t\t\t\t});\n\t\t\t\t}).then(function () {\n\t\t\t\t\t_logic.listReady();\n\n\t\t\t\t\t// TODO : should use message box\n\t\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\t\ttext: labels.common.renameSuccessMessage.replace(\"{0}\", state.value)\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tonBeforeEditStop: function onBeforeEditStop(state, editor) {\n\t\t\tconsole.error('!! todo: onBeforeEditStop() editing');\n\t\t\t// if (!inputValidator.validateFormat(state.value)) {\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\t\t\t// // Validation - check duplicate\n\t\t\t// if (!inputValidator.rules.preventDuplicateObjectName(state.value, editor.id) && state.value != state.old) {\n\t\t\t// \twebix.alert({\n\t\t\t// \t\ttitle: self.labels.object.invalidName,\n\t\t\t// \t\tok: self.labels.common.ok,\n\t\t\t// \t\ttext: self.labels.object.duplicateName.replace(\"{0}\", state.value)\n\t\t\t// \t});\n\n\t\t\t// \treturn false;\n\t\t\t// }\n\t\t},\n\n\t\t/**\n   * @function selectObject()\n   *\n   * Perform these actions when an Object is selected in the List.\n   */\n\t\tselectObject: function selectObject(id) {\n\n\t\t\tvar object = $$(ids.list).getItem(id);\n\t\t\tApp.actions.populateObjectWorkspace(object);\n\n\t\t\t//// TODO: do we need these?\n\n\t\t\t// // Refresh unsync number\n\t\t\t// self.refreshUnsyncNumber();\n\n\t\t\t_logic.showGear(id);\n\t\t},\n\n\t\tshowGear: function showGear(id) {\n\t\t\tvar gearIcon = $$(ids.list).getItemNode(id).querySelector('.ab-object-list-edit');\n\t\t\tgearIcon.style.visibility = \"visible\";\n\t\t\tgearIcon.style.display = \"block\";\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\t\tsyncNumberRefresh: function syncNumberRefresh() {\n\n\t\t\t//// NOTE: I think we are removing Sync Numbers with the refactor.\n\t\t\t//// probably wont need this.\n\t\t\tconsole.error('TODO: syncNumRefresh()');\n\t\t\t// var self = this,\n\t\t\t// \tobjects = [];\n\n\t\t\t// objects = $$(self.webixUiId.objectList).data.find(function (d) {\n\t\t\t// \treturn objectName ? d.name == objectName : true;\n\t\t\t// }, false, true);\n\n\t\t\t// objects.forEach(function (obj) {\n\t\t\t// \tvar objectModel = modelCreator.getModel(AD.classes.AppBuilder.currApp, obj.name),\n\t\t\t// \t\tunsyncNumber = (objectModel && objectModel.Cached ? objectModel.Cached.count() : 0),\n\t\t\t// \t\thtmlItem = $($$(self.webixUiId.objectList).getItemNode(obj.id));\n\n\t\t\t// \tif (unsyncNumber > 0) {\n\t\t\t// \t\thtmlItem.find('.ab-object-unsync-number').html(unsyncNumber);\n\t\t\t// \t\thtmlItem.find('.ab-object-unsync').show();\n\t\t\t// \t}\n\t\t\t// \telse {\n\t\t\t// \t\thtmlItem.find('.ab-object-unsync').hide();\n\t\t\t// \t}\n\t\t\t// });\n\t\t},\n\n\t\t/**\n   * @function templateListItem\n   *\n   * Defines the template for each row of our ObjectList.\n   *\n   * @param {obj} obj the current instance of ABObject for the row.\n   * @param {?} common the webix.common icon data structure\n   * @return {string}\n   */\n\t\ttemplateListItem: function templateListItem(obj, common) {\n\t\t\treturn _templateListItem.replace('#label#', obj.label || '??label??').replace('{common.iconGear}', common.iconGear);\n\t\t},\n\n\t\t/**\n   * @function callbackNewObject\n   *\n   * Once a New Object was created in the Popup, follow up with it here.\n   */\n\t\tcallbackNewObject: function callbackNewObject(err, object) {\n\n\t\t\tif (err) {\n\t\t\t\tOP.Error.log('Error creating New Object', { error: err });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tobjectList.add(object, 0);\n\t\t\t$$(ids.list).select(newObject.id);\n\t\t},\n\n\t\t/**\n   * @function clickNewObject\n   *\n   * Manages initiating the transition to the new Object Popup window\n   */\n\t\tclickNewObject: function clickNewObject() {\n\n\t\t\t// show the new popup\n\t\t\tPopupNewObject.show();\n\t\t},\n\n\t\trename: function rename() {\n\t\t\tvar objectId = $$(ids.list).getSelectedId(false);\n\t\t\t$$(ids.list).edit(objectId);\n\t\t},\n\n\t\tremove: function remove() {\n\n\t\t\tvar selectedObject = $$(ids.list).getSelectedItem(false);\n\n\t\t\t// verify they mean to do this:\n\t\t\tOP.Dialog.Confirm({\n\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t\tmessage: labels.component.confirmDeleteMessage.replace('{0}', selectedObject.label),\n\t\t\t\tcallback: function callback(isOK) {\n\n\t\t\t\t\tif (isOK) {\n\t\t\t\t\t\t_logic.listBusy();\n\n\t\t\t\t\t\tselectedObject.destroy().then(function () {\n\t\t\t\t\t\t\t_logic.listReady();\n\n\t\t\t\t\t\t\t$$(ids.list).remove(selectedObject.id);\n\t\t\t\t\t\t\tApp.actions.clearObjectWorkspace();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tcallbackObjectEditorMenu: function callbackObjectEditorMenu(action) {\n\t\t\tswitch (action) {\n\t\t\t\tcase 'rename':\n\t\t\t\t\t_logic.rename();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'delete':\n\t\t\t\t\t_logic.remove();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n  * _templateListItem\n  *\n  * The Object Row template definition.\n  */\n\tvar _templateListItem = [\"<div class='ab-object-list-item'>\", \"#label#\",\n\t// \"{common.unsyncNumber}\",\n\t\"{common.iconGear}\", \"</div>\"].join('');\n\n\t// Note: put these here so _logic is defined:\n\t// There is a Popup for adding a new Object:\n\tvar PopupNewObjectComponent = OP.Component['ab_work_object_list_newObject'](App);\n\tvar PopupNewObject = webix.ui(PopupNewObjectComponent.ui);\n\tPopupNewObjectComponent.init({\n\t\tonDone: _logic.callbackNewObject\n\t});\n\n\tvar CurrentApplication = null;\n\tvar objectList = null;\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t/**\n   * @function getSelectedObject\n   *\n   * returns which ABObject is currently selected.\n   * @return {ABObject}  or {null} if nothing selected.\n   */\n\t\tgetSelectedObject: function getSelectedObject() {\n\t\t\treturn $$(ids.list).getSelectedItem();\n\t\t}\n\n\t};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tapplicationLoad: _logic.applicationLoad,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(27);\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_list_newObject\n *\n * Display the form for creating a new Object.  This Popup will manage several \n * different sub components for gathering Object data for saving.\n *\n * The sub components will gather the data for the object and do basic form \n * validations on their interface.  \n *\n * when ready, the sub component will call onSave(values, cb)  to allow this \n * component to manage the actual final object validation, and saving to this\n * application.  On success, cb(null) will be called.  on error cb(err) will\n * be called.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\taddNew: L('ab.object.addNew', '*Add new object')\n\n\t}\n};\n\nvar idBase = 'ab_work_object_list_newObject';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\t};\n\n\tvar BlankTab = OP.Component['ab_work_object_list_newObject_blank'](App);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"window\",\n\t\tid: ids.component,\n\t\twidth: 400,\n\t\tposition: \"center\",\n\t\tmodal: true,\n\t\thead: labels.component.addNew,\n\t\tselectNewObject: true,\n\t\tbody: {\n\t\t\tview: \"tabview\",\n\t\t\tcells: [BlankTab.ui]\n\t\t}\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\tvar ourCBs = {\n\t\t\tonCancel: _logic.hide,\n\t\t\tonSave: _logic.save\n\t\t};\n\n\t\tBlankTab.init(ourCBs);\n\t};\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\t/**\n   * @function applicationLoad()\n   *\n   * prepare ourself with the current application\n   */\n\t\tapplicationLoad: function applicationLoad(application) {\n\t\t\t// _logic.show();\n\t\t\tcurrentApplication = application; // remember our current Application.\n\t\t},\n\n\t\tcallbacks: {\n\t\t\tonDone: function onDone() {}\n\t\t},\n\n\t\t/**\n   * @function hide()\n   *\n   * remove the busy indicator from the form.\n   */\n\t\thide: function hide() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\t/**\n   * @function save\n   *\n   * take the data gathered by our child creation tabs, and \n   * add it to our current application.\n   *\n   * @param {obj} values  key=>value hash of model values.\n   * @param {fn}  cb \t\tnode style callback to indicate success/failure\n   */\n\t\tsave: function save(values, cb) {\n\n\t\t\t// must have an application set.\n\t\t\tif (!currentApplication) {\n\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\ttitle: 'Shoot!',\n\t\t\t\t\ttest: 'No Application Set!  Why?'\n\t\t\t\t});\n\t\t\t\tcb(true); // there was an error.\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// create a new (unsaved) instance of our object:\n\t\t\tvar newObject = currentApplication.objectNew(values);\n\n\t\t\t// have newObject validate it's values.\n\t\t\tvar validationErrors = newObject.isValid();\n\t\t\tif (validationErrors) {\n\t\t\t\tcb(validationErrors); // tell current Tab component the errors\n\t\t\t\treturn false; // stop here.\n\t\t\t}\n\n\t\t\t// if we get here, save the new Object\n\t\t\tnewObject.save().then(function (obj) {\n\n\t\t\t\t// successfully done:\n\t\t\t\tcb(); // tell current tab component save successful\n\t\t\t\t_logic.hide(); // hide our popup\n\t\t\t\t_logic.callbacks.onDone(null, obj); // tell parent component we're done\n\t\t\t}).catch(function (err) {\n\t\t\t\tcb(err); // tell current Tab component there was an error\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\tvar currentApplication = null;\n\t// var currentCallBack = null;\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tapplicationLoad: _logic.applicationLoad,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n * ab_work_object_list_newObject_blank\n *\n * Display the form for creating a new Application.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\tplaceholderName: L('ab.object.form.placeholderName', \"*Object name\")\n\t}\n};\n\nvar idBase = 'ab_work_object_list_newObject_blank';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tform: App.unique(idBase + '_blank'),\n\t\tbuttonSave: App.unique(idBase + '_save'),\n\t\tbuttonCancel: App.unique(idBase + '_cancel')\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\theader: labels.common.create,\n\t\tbody: {\n\t\t\tview: \"form\",\n\t\t\tid: ids.form,\n\t\t\twidth: 400,\n\t\t\trules: {\n\n\t\t\t\t// TODO:\n\t\t\t\t// name: inputValidator.rules.validateObjectName\n\t\t\t},\n\t\t\telements: [{ view: \"text\", label: labels.common.formName, name: \"name\", required: true, placeholder: labels.component.placeholderName, labelWidth: 70 }, {\n\t\t\t\tmargin: 5,\n\t\t\t\tcols: [{\n\t\t\t\t\tview: \"button\", id: ids.buttonCancel, value: labels.common.cancel,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.cancel();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"button\", id: ids.buttonSave, value: labels.common.add, type: \"form\",\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\treturn _logic.save();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\t\t}\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t\t// load up our callbacks.\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\t};\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\tcallbacks: {\n\t\t\tonCancel: function onCancel() {\n\t\t\t\tconsole.warn('NO onCancel()!');\n\t\t\t},\n\t\t\tonSave: function onSave(values, cb) {\n\t\t\t\tconsole.warn('NO onSave()!');\n\t\t\t}\n\t\t},\n\n\t\tcancel: function cancel() {\n\n\t\t\t_logic.formClear();\n\t\t\t_logic.callbacks.onCancel();\n\t\t},\n\n\t\tformClear: function formClear() {\n\t\t\t$$(ids.form).clearValidation();\n\t\t\t$$(ids.form).clear();\n\t\t},\n\n\t\t/**\n   * @function hide()\n   *\n   * hide this component.\n   */\n\t\thide: function hide() {\n\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\t/**\n   * @function save\n   *\n   * verify the current info is ok, package it, and return it to be \n   * added to the application.createModel() method.\n   */\n\t\tsave: function save() {\n\t\t\tvar saveButton = $$(ids.buttonSave);\n\t\t\tsaveButton.disable();\n\n\t\t\tvar Form = $$(ids.form);\n\n\t\t\tForm.clearValidation();\n\n\t\t\t// if it doesn't pass the basic form validation, return:\n\t\t\tif (!Form.validate()) {\n\t\t\t\tsaveButton.enable();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar values = Form.getValues();\n\n\t\t\t// now send data back to be added:\n\t\t\t_logic.callbacks.onSave(values, function (err) {\n\n\t\t\t\tif (err) {\n\t\t\t\t\tif (OP.Form.isValidationError(err, Form)) {}\n\t\t\t\t\t// do I do anything else here?\n\t\t\t\t\t// this auto updates the form\n\n\n\t\t\t\t\t// get notified if there was an error saving.\n\t\t\t\t\tsaveButton.enable();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// if there was no error, clear the form for the next\n\t\t\t\t// entry:\n\t\t\t\t_logic.formClear();\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {}\n\n\t/**\n  * @function populateApplicationForm()\n  *\n  * Initialze the Form with the values from the provided ABApplication.\n  *\n  * If no ABApplication is provided, then show an empty form. (create operation)\n  *\n  * @param {ABApplication} Application  \t[optional] The current ABApplication \n  *\t\t\t\t\t\t\t\t\t\twe are working with.\n  */\n\t// populateApplicationForm:function(Application){\n\n\t// \t_logic.formReset();\n\t// \tif (Application) {\n\t// \t\t// populate Form here:\n\t// \t\t_logic.formPopulate(Application);\n\t// \t}\n\t// \t_logic.permissionPopulate(Application);\n\t// \t_logic.show();\n\t// }\n\n\t// return the current instance of this component:\n\t;return {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n * Edit object popup \n *\n * .\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\tmenu: L('ab.application.menu', \"*Application Menu\"),\n\t\tconfirmDeleteTitle: L('ab.application.delete.title', \"*Delete application\"),\n\t\tconfirmDeleteMessage: L('ab.application.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\t}\n};\n\nvar idBase = 'ab_work_object_list_popupEditMenu';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\tvar ids = {\n\t\tmenu: App.unique(idBase + '_menu')\n\t};\n\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.menu,\n\t\thead: labels.component.menu,\n\t\twidth: 120,\n\t\tbody: {\n\t\t\tview: \"list\",\n\t\t\tborderless: true,\n\t\t\tdata: [{ command: labels.common.rename, icon: \"fa-pencil-square-o\" }, { command: labels.common.delete, icon: \"fa-trash\" }],\n\t\t\tdatatype: \"json\",\n\t\t\ttemplate: \"<i class='fa #icon#' aria-hidden='true'></i> #command#\",\n\t\t\tautoheight: true,\n\t\t\tselect: false,\n\t\t\ton: {\n\t\t\t\t'onItemClick': function onItemClick(timestamp, e, trg) {\n\t\t\t\t\treturn _logic.onItemClick(trg);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _data = {};\n\n\tvar _init = function _init(options) {\n\t\twebix.ui(_ui);\n\n\t\t_logic.hide();\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\tif (options && options[c]) {\n\t\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _logic = {\n\n\t\tcallbacks: {\n\t\t\tonClick: function onClick(action) {}\n\t\t},\n\n\t\t/**\n   * @function onItemClick\n   * process which item in our popup was selected.\n   */\n\t\tonItemClick: function onItemClick(itemNode) {\n\n\t\t\t// hide our popup before we trigger any other possible UI animation: (like .edit)\n\t\t\t// NOTE: if the UI is animating another component, and we do .hide()\n\t\t\t// while it is in progress, the UI will glitch and give the user whiplash.\n\n\t\t\tswitch (itemNode.textContent.trim()) {\n\t\t\t\tcase labels.common.rename:\n\t\t\t\t\tthis.callbacks.onClick('rename');\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.common['delete']:\n\t\t\t\t\tthis.callbacks.onClick('delete');\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.hide();\n\n\t\t\treturn false;\n\t\t},\n\n\t\tshow: function show(itemNode) {\n\t\t\tif ($$(ids.menu) && itemNode) $$(ids.menu).show(itemNode);\n\t\t},\n\n\t\thide: function hide() {\n\t\t\tif ($$(ids.menu)) $$(ids.menu).hide();\n\t\t}\n\n\t};\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\n\t\tshow: _logic.show,\n\n\t\t_logic: _logic // exposed for Unit Testing\n\t};\n});\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(30);\n\n__webpack_require__(31);\n\n__webpack_require__(33);\n\n__webpack_require__(34);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_workspace\n *\n * Manage the Object Workspace area.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\taddNewRow: L('ab.object.addNewRow', \"*Add new row\"),\n\n\t\tselectObject: L('ab.object.selectObject', \"*Select an object to work with.\"),\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\n\t\t// Toolbar:\n\t\thideFields: L('ab.object.toolbar.hideFields', \"*Hide fields\"),\n\t\tfilterFields: L('ab.object.toolbar.filterFields', \"*Add filters\"),\n\t\tsortFields: L('ab.object.toolbar.sortFields', \"*Apply sort\"),\n\t\tfrozenColumns: L('ab.object.toolbar.frozenColumns', \"*Frozen columns\"),\n\t\tdefineLabel: L('ab.object.toolbar.defineLabel', \"*Define label\"),\n\t\tpermission: L('ab.object.toolbar.permission', \"*Permission\"),\n\t\taddFields: L('ab.object.toolbar.addFields', \"*Add new column\"),\n\t\t\"export\": L('ab.object.toolbar.export', \"*Export\"),\n\n\t\tconfirmDeleteTitle: L('ab.object.delete.title', \"*Delete data field\"),\n\t\tconfirmDeleteMessage: L('ab.object.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tbuttonAddField: App.unique(idBase + '_buttonAddField'),\n\t\tbuttonExport: App.unique(idBase + '_buttonExport'),\n\t\tbuttonFieldsVisible: App.unique(idBase + '_buttonFieldsVisible'),\n\t\tbuttonFilter: App.unique(idBase + '_buttonFilter'),\n\t\tbuttonFrozen: App.unique(idBase + '_buttonFrozen'),\n\t\tbuttonLabel: App.unique(idBase + '_buttonLabel'),\n\t\tbuttonRowNew: App.unique(idBase + '_buttonRowNew'),\n\t\tbuttonSort: App.unique(idBase + '_buttonSort'),\n\n\t\tdatatable: App.unique(idBase + '_datatable'),\n\n\t\t// Toolbar:\n\t\ttoolbar: App.unique(idBase + '_toolbar'),\n\n\t\tnoSelection: App.unique(idBase + '_noSelection'),\n\t\tselectedObject: App.unique(idBase + '_selectedObject')\n\n\t};\n\n\t// The DataTable that displays our object:\n\tvar DataTable = OP.Component['ab_work_object_workspace_datatable'](App);\n\n\t// Various Popups on our page:\n\tvar PopupDefineLabelComponent = OP.Component['ab_work_object_workspace_popupDefineLabel'](App);\n\tvar PopupDefineLabel = webix.ui(PopupDefineLabelComponent.ui);\n\n\tvar PopupNewDataFieldComponent = OP.Component['ab_work_object_workspace_popupNewDataField'](App);\n\t// var PopupNewDataField = webix.ui(PopupNewDataFieldComponent.ui);\n\twebix.ui(PopupNewDataFieldComponent.ui);\n\n\tvar PopupHideFieldComponent = OP.Component['ab_work_object_workspace_popupHideFields'](App);\n\tvar PopupHideField = webix.ui(PopupHideFieldComponent.ui);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: 'multiview',\n\t\tid: ids.component,\n\t\trows: [{\n\t\t\tid: ids.noSelection,\n\t\t\trows: [{\n\t\t\t\tview: 'label',\n\t\t\t\tlabel: labels.component.selectObject\n\t\t\t}]\n\t\t}, {\n\t\t\tid: ids.selectedObject,\n\t\t\trows: [{\n\t\t\t\tview: 'toolbar',\n\t\t\t\tid: ids.toolbar,\n\t\t\t\thidden: true,\n\t\t\t\tcss: \"ab-data-toolbar\",\n\t\t\t\tcols: [{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tid: ids.buttonFieldsVisible,\n\t\t\t\t\tlabel: labels.component.hideFields,\n\t\t\t\t\t// popup: 'self.webixUiId.visibleFieldsPopup',\n\t\t\t\t\ticon: \"eye-slash\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 120,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tbadge: 0,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarFieldsVisible(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonFilter,\n\t\t\t\t\tlabel: labels.component.filterFields,\n\t\t\t\t\ticon: \"filter\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 120,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tbadge: 0,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarFilter(this);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonSort,\n\t\t\t\t\tlabel: labels.component.sortFields,\n\t\t\t\t\ticon: \"sort\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 120,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tbadge: 0,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarSort(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonFrozen,\n\t\t\t\t\tlabel: labels.component.frozenColumns,\n\t\t\t\t\ticon: \"thumb-tack\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tbadge: 0,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarFrozen(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonLabel,\n\t\t\t\t\tlabel: labels.component.defineLabel,\n\t\t\t\t\ticon: \"crosshairs\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 130,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarDefineLabel(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tlabel: labels.component.permission,\n\t\t\t\t\ticon: \"lock\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarPermission(this.$view);\n\t\t\t\t\t}\n\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonAddField,\n\t\t\t\t\tlabel: labels.component.addFields,\n\t\t\t\t\ticon: \"plus\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 150,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarAddFields(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonExport,\n\t\t\t\t\tlabel: labels.component.export,\n\t\t\t\t\ticon: \"download\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarButtonExport(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}, DataTable.ui, {\n\t\t\t\tcols: [{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tid: ids.buttonRowNew,\n\t\t\t\t\tvalue: labels.component.addNewRow,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t// TODO:\n\t\t\t\t\t\t_logic.rowAdd();\n\t\t\t\t\t\t// self.addNewRow({});\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\n\t\t}]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {\n\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t\tDataTable.init({\n\t\t\tonEditorMenu: _logic.callbackHeaderEditorMenu\n\t\t});\n\n\t\tPopupDefineLabelComponent.init({\n\t\t\tonChange: _logic.callbackDefineLabel // be notified when there is a change in the label\n\t\t});\n\n\t\tPopupNewDataFieldComponent.init({\n\t\t\tonSave: _logic.callbackAddFields // be notified when a new Field is created & saved\n\t\t});\n\n\t\tPopupHideFieldComponent.init({\n\t\t\tonChange: _logic.callbackFieldsVisible // be notified when there is a change in the hidden fields\n\t\t});\n\n\t\t$$(ids.noSelection).show();\n\t};\n\n\tvar CurrentObject = null;\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\t/**\n   * @function callbackDefineLabel\n   *\n   * call back for when the Define Label popup is finished.\n   */\n\t\tcallbackAddFields: function callbackAddFields(field) {\n\t\t\tDataTable.refresh();\n\t\t},\n\n\t\t/**\n   * @function callbackDefineLabel\n   *\n   * call back for when the Define Label popup is finished.\n   */\n\t\tcallbackDefineLabel: function callbackDefineLabel() {},\n\n\t\t/**\n   * @function callbackFieldsVisible\n   *\n   * call back for when the hidden fields have changed.\n   */\n\t\tcallbackFieldsVisible: function callbackFieldsVisible() {\n\n\t\t\tvar hiddenFields = CurrentObject.workspaceHiddenFields;\n\t\t\t$$(ids.buttonFieldsVisible).define('badge', hiddenFields.length);\n\t\t\t$$(ids.buttonFieldsVisible).refresh();\n\n\t\t\tDataTable.refresh();\n\t\t},\n\n\t\t/**\n   * @function callbackFieldsVisible\n   *\n   * call back for when an editor menu action has been selected.\n   * @param {string} action [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n   */\n\t\tcallbackHeaderEditorMenu: function callbackHeaderEditorMenu(action, field, node) {\n\n\t\t\tswitch (action) {\n\n\t\t\t\tcase 'hide':\n\t\t\t\tcase 'filter':\n\t\t\t\tcase 'sort':\n\t\t\t\t\tconsole.error('!! TODO: callbackHeaderEditorMenu():  unimplemented action:' + action);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'edit':\n\t\t\t\t\t// pass control on to our Popup:\n\t\t\t\t\tPopupNewDataFieldComponent.show(node, field);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'delete':\n\n\t\t\t\t\t// verify they mean to do this:\n\t\t\t\t\tOP.Dialog.Confirm({\n\t\t\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t\t\t\tmessage: labels.component.confirmDeleteMessage.replace('{0}', field.label),\n\t\t\t\t\t\tcallback: function callback(isOK) {\n\n\t\t\t\t\t\t\tif (isOK) {\n\n\t\t\t\t\t\t\t\tfield.destroy().then(function () {\n\t\t\t\t\t\t\t\t\tDataTable.refresh();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\t\t/**\n   * @function toolbarAddFields\n   *\n   * Show the popup to allow the user to create new fields for \n   * this object.\n   */\n\t\ttoolbarAddFields: function toolbarAddFields($view) {\n\t\t\tPopupNewDataFieldComponent.show($view);\n\t\t},\n\n\t\ttoolbarButtonExport: function toolbarButtonExport($view) {\n\t\t\tconsole.error('TODO: Button Export()');\n\t\t},\n\n\t\t/**\n   * @function toolbarDefineLabel\n   *\n   * Show the popup to allow the user to define the default label for \n   * this object.\n   */\n\t\ttoolbarDefineLabel: function toolbarDefineLabel($view) {\n\t\t\tPopupDefineLabel.show($view);\n\t\t},\n\n\t\t/**\n   * @function toolbarFieldsVisible\n   *\n   * Show the popup to allow the user to hide columns for this view.\n   */\n\t\ttoolbarFieldsVisible: function toolbarFieldsVisible($view) {\n\t\t\tPopupHideField.show($view);\n\t\t},\n\n\t\t/**\n   * @function toolbarFilter\n   *\n   * show the popup to add a filter to the datatable\n   */\n\t\ttoolbarFilter: function toolbarFilter($view) {\n\t\t\t// self.refreshPopupData();\n\t\t\t// $$(self.webixUiId.filterFieldsPopup).show($view);\n\t\t\tconsole.error('TODO: button filterFields()');\n\t\t},\n\n\t\t/**\n   * @function toolbarFrozen\n   *\n   * show the popup to freeze columns for the datatable\n   */\n\t\ttoolbarFrozen: function toolbarFrozen($view) {\n\t\t\tconsole.error('TODO: toolbarFrozen()');\n\t\t},\n\n\t\ttoolbarPermission: function toolbarPermission($view) {\n\t\t\tconsole.error('TODO: toolbarPermission()');\n\t\t},\n\n\t\t/**\n   * @function toolbarSort\n   *\n   * show the popup to sort the datatable\n   */\n\t\ttoolbarSort: function toolbarSort($view) {\n\t\t\t// self.refreshPopupData();\n\t\t\t// $$(self.webixUiId.sortFieldsPopup).show($view);\n\t\t\tconsole.error('TODO: toolbarSort()');\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t/**\n   * @function clearObjectWorkspace()\n   *\n   * Clear the object workspace. \n   */\n\t\tclearObjectWorkspace: function clearObjectWorkspace() {\n\n\t\t\t// NOTE: to clear a visual glitch when multiple views are updating\n\t\t\t// at one time ... stop the animation on this one:\n\t\t\t$$(ids.noSelection).show(false, false);\n\t\t},\n\n\t\t/**\n   * @function populateObjectWorkspace()\n   *\n   * Initialize the Object Workspace with the provided ABObject.\n   *\n   * @param {ABObject} object  \tcurrent ABObject instance we are working with.\n   */\n\t\tpopulateObjectWorkspace: function populateObjectWorkspace(object) {\n\n\t\t\t$$(ids.toolbar).show();\n\t\t\t$$(ids.selectedObject).show();\n\n\t\t\tCurrentObject = object;\n\n\t\t\tApp.actions.populateObjectPopupAddDataField(object);\n\n\t\t\t// update hiddenFields \n\t\t\t_logic.callbackFieldsVisible();\n\n\t\t\tPopupDefineLabelComponent.objectLoad(object);\n\t\t\tPopupHideFieldComponent.objectLoad(object);\n\t\t\tDataTable.objectLoad(object);\n\t\t}\n\n\t};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(32);\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_workspace\n *\n * Manage the Object Workspace area.\n *\n */\n\nvar labels = {\n\n\tcomponent: {}\n};\n\nvar idBase = 'ab_work_object_workspace_datatable';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"datatable\",\n\t\tid: ids.component,\n\t\tresizeColumn: true,\n\t\tresizeRow: true,\n\t\tprerender: false,\n\t\teditable: true,\n\t\tfixedRowHeight: false,\n\t\teditaction: \"custom\",\n\t\tselect: \"cell\",\n\t\tdragColumn: true,\n\t\t//height:800,  // #hack!\n\t\ton: {\n\t\t\tonBeforeSelect: function onBeforeSelect(data, preserve) {\n\t\t\t\tconsole.error('!! ToDo: onBeforeSelect()');\n\t\t\t\t// var itemNode = this.getItemNode({ row: data.row, column: data.column });\n\n\t\t\t\t// var column = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == data.column; });\n\t\t\t\t// if (!column || column.length < 1) {\n\t\t\t\t// \tconsole.log('System could not found this column data');\n\t\t\t\t// \treturn false;\n\t\t\t\t// } else\n\t\t\t\t// \tcolumn = column[0];\n\n\t\t\t\t// return dataFieldsManager.customEdit(AD.classes.AppBuilder.currApp, AD.classes.AppBuilder.currApp.currObj, column, data.row, itemNode);\n\t\t\t},\n\t\t\tonAfterSelect: function onAfterSelect(data, prevent) {\n\t\t\t\tconsole.error('!! todo: onAfterSelect()');\n\t\t\t\t// var columnConfig = $$(self.webixUiId.objectDatatable).getColumnConfig(data.column),\n\t\t\t\t// \tfieldData = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == data.column; });\n\n\t\t\t\t// if (!fieldData || fieldData.length < 1) {\n\t\t\t\t// \tconsole.log('System could not found this column data');\n\t\t\t\t// \treturn false;\n\t\t\t\t// } else\n\t\t\t\t// \tfieldData = fieldData[0];\n\n\t\t\t\t// // Custom update data\n\t\t\t\t// if (dataFieldsManager.hasCustomEdit(columnConfig.fieldName, fieldData))\n\t\t\t\t// \treturn false;\n\n\t\t\t\t// // Normal update data\n\t\t\t\t// this.editCell(data.row, data.column);\n\t\t\t},\n\t\t\tonCheck: function onCheck(row, col, val) {\n\t\t\t\t// Update checkbox data\n\t\t\t\tconsole.error('!! ToDo: onCheck()');\n\t\t\t\t// var item = $$(self.webixUiId.objectDatatable).getItem(row);\n\n\t\t\t\t// self.updateRowData({ value: (val > 0 ? true : false) }, { row: row, column: col }, false)\n\t\t\t\t// \t.fail(function (err) {\n\t\t\t\t// \t\t// Rollback\n\t\t\t\t// \t\titem[col] = !val;\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).updateItem(row, item);\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).refresh(row);\n\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t})\n\t\t\t\t// \t.then(function (result) {\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t});\n\t\t\t},\n\t\t\tonBeforeEditStop: function onBeforeEditStop(state, editor) {\n\t\t\t\tconsole.error('!! ToDo: onCheck()');\n\t\t\t\t// var column = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == editor.column; });\n\n\t\t\t\t// if (!column || column.length < 1) return true;\n\t\t\t\t// column = column[0];\n\n\t\t\t\t// var passValidate = dataFieldsManager.validate(column, state.value);\n\n\t\t\t\t// if (!passValidate) {\n\t\t\t\t// \t$$(self.webixUiId.objectDatatable).editCancel();\n\t\t\t\t// }\n\n\t\t\t\t// return passValidate;\n\t\t\t},\n\t\t\tonAfterEditStop: function onAfterEditStop(state, editor, ignoreUpdate) {\n\t\t\t\tconsole.error('!! ToDo: onAfterEditStop()');\n\t\t\t\t// var item = $$(self.webixUiId.objectDatatable).getItem(editor.row);\n\n\t\t\t\t// self.updateRowData(state, editor, ignoreUpdate)\n\t\t\t\t// \t.fail(function (err) { // Cached\n\t\t\t\t// \t\titem[editor.column] = state.old;\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).updateItem(editor.row, item);\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).refresh(editor.row);\n\n\t\t\t\t// \t\t// TODO : Message\n\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t})\n\t\t\t\t// \t.then(function (result) {\n\t\t\t\t// \t\tif (item) {\n\t\t\t\t// \t\t\titem[editor.column] = state.value;\n\n\t\t\t\t// \t\t\tif (result && result.constructor.name === 'Cached' && result.isUnsync())\n\t\t\t\t// \t\t\t\titem.isUnsync = true;\n\n\t\t\t\t// \t\t\t$$(self.webixUiId.objectDatatable).updateItem(editor.row, item);\n\t\t\t\t// \t\t}\n\n\t\t\t\t// \t\t// TODO : Message\n\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t});\n\t\t\t},\n\t\t\tonColumnResize: function onColumnResize(id, newWidth, oldWidth, user_action) {\n\t\t\t\tconsole.error('!! ToDo: onColumnResize()');\n\t\t\t\t// var columnConfig = $$(self.webixUiId.objectDatatable).getColumnConfig(id);\n\t\t\t\t// var column = self.data.columns.filter(function (col) { return col.id == columnConfig.dataId; });\n\t\t\t\t// if (column && column[0])\n\t\t\t\t// \tcolumn[0].setWidth(newWidth);\n\n\t\t\t\t// // if (typeof columnConfig.template !== 'undefined' && columnConfig.template !== null) {\n\t\t\t\t// // \t// For calculate/refresh row height\n\t\t\t\t// // \t$$(self.webixUiId.objectDatatable).render();\n\t\t\t\t// // }\n\t\t\t},\n\t\t\tonBeforeColumnDrag: function onBeforeColumnDrag(sourceId, event) {\n\t\t\t\tconsole.error('!! ToDo: onBeforeColumnDrag()');\n\t\t\t\t// if (sourceId === 'appbuilder_trash') // Remove column\n\t\t\t\t// \treturn false;\n\t\t\t\t// else\n\t\t\t\t// \treturn true;\n\t\t\t},\n\t\t\tonBeforeColumnDrop: function onBeforeColumnDrop(sourceId, targetId, event) {\n\t\t\t\tconsole.error('!! ToDo: onBeforeColumnDrag()');\n\t\t\t\t// if (targetId === 'appbuilder_trash') // Remove column\n\t\t\t\t// \treturn false;\n\n\t\t\t\t// if ($$(self.webixUiId.visibleButton).config.badge > 0) {\n\t\t\t\t// \twebix.alert({\n\t\t\t\t// \t\ttitle: self.labels.object.couldNotReorderField,\n\t\t\t\t// \t\tok: self.labels.common.ok,\n\t\t\t\t// \t\ttext: self.labels.object.couldNotReorderFieldDetail\n\t\t\t\t// \t});\n\n\t\t\t\t// \treturn false;\n\t\t\t\t// }\n\t\t\t},\n\t\t\tonAfterColumnDrop: function onAfterColumnDrop(sourceId, targetId, event) {\n\t\t\t\tconsole.error('!! ToDo: onAfterColumnDrop()');\n\t\t\t\t// self.reorderColumns();\n\t\t\t},\n\t\t\tonAfterColumnShow: function onAfterColumnShow(id) {\n\t\t\t\tconsole.error('!! ToDo: onAfterColumnShow()');\n\t\t\t\t// $$(self.webixUiId.visibleFieldsPopup).showField(id);\n\t\t\t},\n\t\t\tonAfterColumnHide: function onAfterColumnHide(id) {\n\t\t\t\tconsole.error('!! ToDo: onAfterColumnHide()');\n\t\t\t\t// $$(self.webixUiId.visibleFieldsPopup).hideField(id);\n\t\t\t},\n\n\t\t\tonHeaderClick: function onHeaderClick(id, e, node) {\n\t\t\t\t_logic.onHeaderClick(id, e, node);\n\t\t\t}\n\t\t}\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\t};\n\n\tvar CurrentObject = null; // current ABObject being displayed\n\tvar EditField = null; // which field (column header) is popup editor for\n\tvar EditNode = null; // which html node (column header) is popup editor for\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\tcallbacks: {\n\n\t\t\t/**\n    * @function onEditorMenu\n    * report back which menu action was clicked.\n    * We get the info from our popupHeaderEditor component, but all the \n    * logic to respond to those options are in our parent. So we pass it \n    * on ...\n    * \n    * @param {string} action [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n    * @param {ABField} field  the field to which the action is to be applied\n    * @param {dom} node  the optional html node for this header item.\n    */\n\t\t\tonEditorMenu: function onEditorMenu(action, field) {}\n\t\t},\n\n\t\t/**\n   * @function callbackHeaderEdit\n   *\n   * call back for when an item in the Header Edit Menu has been selected.\n   * @param {string} action the action requested for this field:\n   */\n\t\tcallbackHeaderEdit: function callbackHeaderEdit(action) {\n\n\t\t\tPopupHeaderEdit.hide();\n\t\t\t_logic.callbacks.onEditorMenu(action, EditField, EditNode);\n\t\t},\n\n\t\t/**\n   * @function onHeaderClick\n   * \n   * process the user clicking on the header for one of our columns.\n   */\n\t\tonHeaderClick: function onHeaderClick(id, e, node) {\n\n\t\t\t// Ignore system columns\n\t\t\tif (id.column == 'appbuilder_trash') return false;\n\n\t\t\t// save our EditNode & EditField:\n\t\t\tEditNode = node;\n\n\t\t\tEditField = CurrentObject.fields(function (f) {\n\t\t\t\treturn f.id == id.column;\n\t\t\t})[0];\n\t\t\tif (EditField) {\n\n\t\t\t\t// show the popup\n\t\t\t\tPopupHeaderEdit.show(node);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\tobjectLoad: function objectLoad(object) {\n\n\t\t\tCurrentObject = object;\n\n\t\t\tPopupHeaderEditComponent.objectLoad(object);\n\n\t\t\t_logic.refresh();\n\t\t},\n\n\t\t// rebuild the data table view:\n\t\trefresh: function refresh() {\n\n\t\t\t// wait until we have an Object defined:\n\t\t\tif (CurrentObject) {\n\n\t\t\t\tvar DataTable = $$(ids.component);\n\t\t\t\tDataTable.clearAll();\n\n\t\t\t\t// update DataTable structure:\n\t\t\t\tvar columnHeaders = CurrentObject.columnHeaders(true);\n\t\t\t\tDataTable.refreshColumns(columnHeaders);\n\n\t\t\t\t// update DataTable Content\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\n\t};\n\n\t//// NOTE: declare these after _logic  for the callbacks:\n\n\tvar PopupHeaderEditComponent = OP.Component['ab_work_object_workspace_popupHeaderEditMenu'](App);\n\tvar PopupHeaderEdit = webix.ui(PopupHeaderEditComponent.ui);\n\tPopupHeaderEditComponent.init({\n\t\tonClick: _logic.callbackHeaderEdit // be notified when there is a change in the hidden fields\n\t});\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tobjectLoad: _logic.objectLoad,\n\t\trefresh: _logic.refresh,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n * ab_work_object_workspace_popupDefineLabel\n *\n * Manage the Add New Data Field popup.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tlabelFormat: L('ab.define_label.labelFormat', \"*Label format\"),\n\t\tselectFieldToGenerate: L('ab.define_label.selectFieldToGenerate', \"*Select field item to generate format.\"),\n\t\tlabelFields: L('ab.define_label.labelFields', \"*Fields\")\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace_popupDefineLabel';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t\tformat: App.unique(idBase + '_format'),\n\t\tlist: App.unique(idBase + '_list'),\n\n\t\tbuttonSave: App.unique(idBase + '_buttonSave')\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.component,\n\t\tmodal: true,\n\t\tautoheight: true,\n\t\t// maxHeight: 420,\n\n\t\twidth: 500,\n\t\tbody: {\n\t\t\trows: [{\n\t\t\t\tview: \"label\",\n\t\t\t\tlabel: \"<b>{0}</b>\".replace(\"{0}\", labels.component.labelFormat)\n\t\t\t}, {\n\t\t\t\tview: \"textarea\",\n\t\t\t\tid: ids.format,\n\t\t\t\theight: 100\n\t\t\t}, {\n\t\t\t\tview: \"label\",\n\t\t\t\tlabel: labels.component.selectFieldToGenerate\n\t\t\t}, {\n\t\t\t\tview: \"label\",\n\t\t\t\tlabel: \"<b>{0}</b>\".replace(\"{0}\", labels.component.labelFields)\n\t\t\t}, {\n\t\t\t\tview: 'list',\n\t\t\t\tid: ids.list,\n\t\t\t\twidth: 500,\n\t\t\t\tmaxHeight: 180,\n\t\t\t\tselect: false,\n\t\t\t\ttemplate: '#label#',\n\t\t\t\ton: {\n\t\t\t\t\tonItemClick: function onItemClick(id, e, node) {\n\t\t\t\t\t\t_logic.onItemClick(id, e, node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\theight: 10\n\t\t\t}, {\n\t\t\t\tcols: [{\n\t\t\t\t\tview: \"button\", value: labels.common.cancel, width: 100,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.buttonCancel();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"button\", id: ids.buttonSave, label: labels.common.save, type: \"form\", width: 120,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.buttonSave();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\ton: {\n\t\t\tonShow: function onShow() {\n\t\t\t\t_logic.onShow();\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _currentObject = null;\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t};\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\tbuttonCancel: function buttonCancel() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\tbuttonSave: function buttonSave() {\n\n\t\t\t// disable our save button\n\t\t\tvar ButtonSave = $$(ids.buttonSave);\n\t\t\tButtonSave.disable();\n\n\t\t\t// get our current labelFormt\n\t\t\tvar labelFormat = $$(ids.format).getValue();\n\n\t\t\t// start our spinner\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.showProgress({ type: 'icon' });\n\n\t\t\t// convert from our User Friendly {Label} format to our \n\t\t\t// object friendly {Name} format\n\t\t\tList.data.each(function (d) {\n\t\t\t\tlabelFormat = labelFormat.replace(new RegExp('{' + d.label + '}', 'g'), '{' + d.id + '}');\n\t\t\t});\n\n\t\t\t// save the value\n\t\t\t_currentObject.labelFormat = labelFormat;\n\t\t\t_currentObject.save().then(function () {\n\n\t\t\t\t// all good, so\n\t\t\t\tList.hideProgress(); // hide the spinner\n\t\t\t\tButtonSave.enable(); // enable the save button\n\t\t\t\t_logic.hide(); // hide the popup\n\n\t\t\t\t// alert our parent component we are done with our changes:\n\t\t\t\t_logic.callbacks.onSave();\n\t\t\t}).catch(function (err) {\n\t\t\t\tList.hideProgress(); // hide the spinner\n\t\t\t\tButtonSave.enable(); // enable the save button\n\n\t\t\t\t// display some error to the user:\n\t\t\t\tOP.Error.log('Error trying to save our Object', { error: err });\n\t\t\t});\n\t\t},\n\n\t\tcallbacks: {\n\t\t\tonCancel: function onCancel() {\n\t\t\t\tconsole.warn('NO onCancel()!');\n\t\t\t},\n\t\t\tonSave: function onSave(field) {\n\t\t\t\tconsole.warn('NO onSave()!');\n\t\t\t}\n\t\t},\n\n\t\thide: function hide() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\tobjectLoad: function objectLoad(object) {\n\t\t\t_currentObject = object;\n\n\t\t\t// clear our list\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.clearAll();\n\n\t\t\t// refresh list with new set of fields\n\t\t\tvar allFields = _currentObject.fields();\n\t\t\tvar listFields = [];\n\t\t\tallFields.forEach(function (f) {\n\t\t\t\tlistFields.push({\n\t\t\t\t\tid: f.name,\n\t\t\t\t\tlabel: f.label\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tList.parse(allFields);\n\t\t},\n\n\t\tonItemClick: function onItemClick(id, e, node) {\n\n\t\t\tvar selectedItem = $$(ids.list).getItem(id);\n\n\t\t\tvar labelFormat = $$(ids.format).getValue();\n\t\t\tlabelFormat += '{{0}}'.replace('{0}', selectedItem.label);\n\n\t\t\t$$(ids.format).setValue(labelFormat);\n\t\t},\n\n\t\tonShow: function onShow() {\n\n\t\t\tvar labelFormat = _currentObject.labelFormat;\n\n\t\t\tvar Format = $$(ids.format);\n\t\t\tvar List = $$(ids.list);\n\n\t\t\tFormat.setValue('');\n\n\t\t\tFormat.enable();\n\t\t\tList.enable();\n\t\t\t$$(ids.buttonSave).enable();\n\n\t\t\t// our labelFormat should be in a computer friendly {name} format\n\t\t\t// here we want to convert it to a user friendly {label} format\n\t\t\t// to use in our popup:\n\t\t\tif (labelFormat) {\n\t\t\t\tif (List.data && List.data.count() > 0) {\n\t\t\t\t\tList.data.each(function (d) {\n\t\t\t\t\t\tlabelFormat = labelFormat.replace('{' + d.id + '}', '{' + d.label + '}');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// no label format:\n\t\t\t\t// Default to first field\n\t\t\t\tif (List.data && List.data.count() > 0) {\n\t\t\t\t\tvar field = List.getItem(List.getFirstId());\n\t\t\t\t\tlabelFormat = '{' + field.label + '}';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tFormat.setValue(labelFormat || '');\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   * @param {obj} $view  the webix.$view to hover the popup around.\n   */\n\t\tshow: function show($view) {\n\n\t\t\t$$(ids.component).show($view);\n\t\t}\n\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t// interface methods for parent component:\n\t\tobjectLoad: _logic.objectLoad,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n * ab_work_object_workspace_popupHeaderEditMenu\n *\n * Manage the Add New Data Field popup.\n *\n */\n\n// import ABApplication from \"../classes/ABApplication\"\n// import ABFieldManager from \"../classes/ABFieldManager\"\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\n\t\thideField: L('ab.object.hideField', \"*Hide field\"),\n\t\tfilterField: L('ab.object.filterField', \"*Filter field\"),\n\t\tsortField: L('ab.object.sortField', \"*Sort field\"),\n\t\teditField: L('ab.object.editField', \"*Edit field\"),\n\t\tdeleteField: L('ab.object.deleteField', \"*Delete field\")\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace_popupHeaderEditMenu';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tlist: App.unique(idBase + '_list')\n\t};\n\n\t// the list of options shown in the popup menu:\n\tvar menuItems = {\n\n\t\t// Normally all items are available\n\t\t'default': [{ command: labels.component.hideField, icon: \"fa-columns\" }, { command: labels.component.filterField, icon: \"fa-filter\" }, { command: labels.component.sortField, icon: \"fa-sort\" }, { command: labels.component.editField, icon: \"fa-pencil-square-o\" }, { command: labels.component.deleteField, icon: \"fa-trash\" }],\n\t\t// But for imported objects, edit & delete are disabled\n\t\t'imported': [{ command: labels.component.hideField, icon: \"fa-columns\" }, { command: labels.component.filterField, icon: \"fa-filter\" }, { command: labels.component.sortField, icon: \"fa-sort\" }]\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.component,\n\t\tmodal: false,\n\t\tautoheight: true,\n\n\t\twidth: 180,\n\t\tbody: {\n\t\t\tid: ids.list,\n\t\t\tview: 'list',\n\t\t\tdatatype: \"json\",\n\t\t\tautoheight: true,\n\t\t\tselect: false,\n\t\t\ttemplate: \"<i class='fa #icon#' aria-hidden='true'></i> #command#\",\n\t\t\tdata: menuItems['default'], // start with the default set:\n\t\t\ton: {\n\t\t\t\t'onItemClick': function onItemClick(timestamp, e, node) {\n\t\t\t\t\t_logic.onItemClick(timestamp, e, node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar CurrentObject = null;\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\t// $$(ids.editDefinitions).cells() // define the edit Definitions here.\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\tcallbacks: {\n\t\t\t/**\n    * @function onClick\n    * report back which menu action was clicked.\n    * possible actions: [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n    */\n\t\t\tonClick: function onClick(action) {}\n\t\t},\n\n\t\thide: function hide() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\t/**\n   * @function objectLoad\n   * Ready the Popup according to the current object\n   * @param {ABObject} object  the currently selected object.\n   */\n\t\tobjectLoad: function objectLoad(object) {\n\t\t\tCurrentObject = object;\n\n\t\t\t// TODO:\n\t\t\t// check if object is imported, if so, then switch the shown fields to the imported menu:\n\n\t\t\tvar listItems = menuItems['default'];\n\t\t\t// if (object.isImported) {\n\t\t\t// \tlistItems = menuItems['imported'];\n\t\t\t// }\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.clearAll();\n\t\t\tList.parse(listItems);\n\t\t},\n\n\t\t/**\n   * @function onItemClick\n   * when an entry in our popup menu is selected, make sure our parent component is\n   * alerted to the action requested.\n   *\n   * possible return action values: [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n   *\n   */\n\t\tonItemClick: function onItemClick(timestamp, e, node) {\n\n\t\t\tvar action = null;\n\t\t\tvar menu = node.textContent.trim();\n\t\t\tswitch (menu) {\n\t\t\t\tcase labels.component.hideField:\n\t\t\t\t\taction = 'hide';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.filterField:\n\t\t\t\t\taction = 'filter';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.sortField:\n\t\t\t\t\taction = 'sort';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.editField:\n\t\t\t\t\taction = 'edit';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.deleteField:\n\t\t\t\t\taction = 'delete';\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t_logic.callbacks.onClick(action);\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   * @param {obj} $view  the webix.$view to hover the popup around.\n   */\n\t\tshow: function show($view) {\n\n\t\t\t$$(ids.component).show($view);\n\t\t}\n\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {}\n\n\t// populateObjectPopupAddDataField: function(object) {\n\t// \t_currentObject = object;\n\t// }\n\n\t// return the current instance of this component:\n\t;return {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\thide: _logic.hide,\n\t\tobjectLoad: _logic.objectLoad,\n\t\tshow: _logic.show, // function($view, field_id) \n\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_workspace_popupHideFields\n *\n * Manage the Hide Fields popup.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tshowAll: L('ab.visible_fields.showAll', \"*Show All\"),\n\t\thideAll: L('ab.visible_fields.hideAll', \"*Hide All\")\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace_popupHideFields';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t\tlist: App.unique(idBase + \"_list\")\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.component,\n\t\t// modal: true,\n\t\tautoheight: true,\n\t\tbody: {\n\t\t\trows: [{\n\t\t\t\tcols: [{\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tvalue: labels.component.showAll,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.clickShowAll();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tvalue: labels.component.hideAll,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.clickHideAll();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}, {\n\t\t\t\tview: 'list',\n\t\t\t\tid: ids.list,\n\t\t\t\tautoheight: true,\n\t\t\t\tselect: false,\n\t\t\t\ttemplate: '<span style=\"min-width: 18px; display: inline-block;\"><i class=\"fa fa-circle ab-visible-field-icon\"></i>&nbsp;</span> #label#',\n\t\t\t\ton: {\n\t\t\t\t\tonItemClick: function onItemClick(id, e, node) {\n\t\t\t\t\t\t_logic.listItemClick(id, e, node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]\n\t\t},\n\t\ton: {\n\t\t\tonShow: function onShow() {\n\t\t\t\t_logic.iconsReset();\n\t\t\t}\n\t\t}\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\t};\n\n\tvar CurrentObject = null;\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\tcallbacks: {\n\n\t\t\t/**\n    * @function onChange\n    * called when we have made changes to the hidden field settings \n    * of our Current Object.\n    *\n    * this is meant to alert our parent component to respond to the \n    * change.\n    */\n\t\t\tonChange: function onChange() {}\n\t\t},\n\n\t\t/**\n   * @function clickHideAll\n   * the user clicked the [hide all] option.  So hide all our fields.\n   */\n\t\tclickHideAll: function clickHideAll() {\n\n\t\t\t// create an array of all our field.id's:\n\t\t\tvar allFields = CurrentObject.fields();\n\t\t\tvar newHidden = [];\n\t\t\tallFields.forEach(function (f) {\n\t\t\t\tnewHidden.push(f.id);\n\t\t\t});\n\n\t\t\t// store that\n\t\t\tCurrentObject.workspaceHiddenFields = newHidden;\n\t\t\tCurrentObject.save().then(function () {\n\t\t\t\t_logic.iconsReset();\n\t\t\t\t_logic.callbacks.onChange();\n\t\t\t}).catch(function (err) {\n\t\t\t\tOP.Error.log('Error trying to save workspaceHiddenFields', { error: err, fields: newHidden });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function clickShowAll\n   * the user clicked the [show all] option.  So show all our fields.\n   */\n\t\tclickShowAll: function clickShowAll() {\n\n\t\t\t// store an empty array of hidden fields\n\t\t\tCurrentObject.workspaceHiddenFields = [];\n\t\t\tCurrentObject.save().then(function () {\n\t\t\t\t_logic.iconsReset();\n\t\t\t\t_logic.callbacks.onChange();\n\t\t\t}).catch(function (err) {\n\t\t\t\tOP.Error.log('Error trying to save workspaceHiddenFields', { error: err, fields: newHidden });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function listItemClick\n   * update the clicked field setting.\n   */\n\t\tlistItemClick: function listItemClick(id, e, node) {\n\t\t\tvar newFields = [];\n\t\t\tvar isHidden = CurrentObject.workspaceHiddenFields.filter(function (fID) {\n\t\t\t\treturn fID == id;\n\t\t\t}).length > 0;\n\t\t\tif (isHidden) {\n\t\t\t\t// unhide this field\n\n\t\t\t\t// get remaining fields \n\t\t\t\tnewFields = CurrentObject.workspaceHiddenFields.filter(function (fID) {\n\t\t\t\t\treturn fID != id;\n\t\t\t\t});\n\n\t\t\t\t// find the icon and display it:\n\t\t\t\t_logic.iconShow(node);\n\t\t\t} else {\n\t\t\t\tnewFields = CurrentObject.workspaceHiddenFields;\n\t\t\t\tnewFields.push(id);\n\n\t\t\t\t_logic.iconHide(node);\n\t\t\t}\n\n\t\t\t// update our Object with current hidden fields\n\t\t\tCurrentObject.workspaceHiddenFields = newFields;\n\t\t\tCurrentObject.save().then(function () {\n\t\t\t\t_logic.callbacks.onChange();\n\t\t\t}).catch(function (err) {\n\t\t\t\tOP.Error.log('Error trying to save workspaceHiddenFields', { error: err, fields: newFields });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function iconHide\n   * Hide the icon for the given node\n   * @param {DOM} node  the html dom node of the element that contains our icon\n   */\n\t\ticonHide: function iconHide(node) {\n\t\t\tif (node) {\n\t\t\t\tnode.querySelector('.ab-visible-field-icon').style.visibility = \"hidden\";\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function iconShow\n   * Show the icon for the given node\n   * @param {DOM} node  the html dom node of the element that contains our icon\n   */\n\t\ticonShow: function iconShow(node) {\n\t\t\tif (node) {\n\t\t\t\tnode.querySelector('.ab-visible-field-icon').style.visibility = \"visible\";\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function iconsReset\n   * Reset the icon displays according to the current values in our Object\n   */\n\t\ticonsReset: function iconsReset() {\n\n\t\t\tvar List = $$(ids.list);\n\n\t\t\t// for each item in the List\n\t\t\tvar id = List.getFirstId();\n\t\t\twhile (id) {\n\n\t\t\t\t// find it's HTML Node\n\t\t\t\tvar node = List.getItemNode(id);\n\n\t\t\t\t// if this item is not hidden, show it.\n\t\t\t\tif (CurrentObject.workspaceHiddenFields.indexOf(id) == -1) {\n\t\t\t\t\t_logic.iconShow(node);\n\t\t\t\t} else {\n\t\t\t\t\t// else hide it\n\t\t\t\t\t_logic.iconHide(node);\n\t\t\t\t}\n\n\t\t\t\t// next item\n\t\t\t\tid = List.getNextId(id);\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function objectLoad\n   * Ready the Popup according to the current object\n   * @param {ABObject} object  the currently selected object.\n   */\n\t\tobjectLoad: function objectLoad(object) {\n\t\t\tCurrentObject = object;\n\n\t\t\t// refresh list\n\t\t\tvar allFields = CurrentObject.fields();\n\t\t\tvar listFields = [];\n\t\t\tallFields.forEach(function (f) {\n\t\t\t\tlistFields.push({\n\t\t\t\t\tid: f.id,\n\t\t\t\t\tlabel: f.label\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$$(ids.list).parse(allFields);\n\t\t}\n\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t// interface methods for parent component:\n\t\tobjectLoad: _logic.objectLoad,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\nvar _ABFieldManager = __webpack_require__(3);\n\nvar _ABFieldManager2 = _interopRequireDefault(_ABFieldManager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * ab_work_object_workspace_popupNewDataField\n *\n * Manage the Add New Data Field popup.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tchooseType: L('ab.add_fields.chooseType', \"*Choose field type...\"),\n\t\tlabel: L('ab.add_fields.label', \"*Label\"),\n\t\taddNewField: L('ab.add_fields.addNewField', \"*Add Column\")\n\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace_popupNewDataField';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t\ttypes: App.unique(idBase + '_types'),\n\t\teditDefinitions: App.unique(idBase + '_editDefinitions'),\n\n\t\tbuttonSave: App.unique(idBase + '_buttonSave'),\n\t\tbuttonCancel: App.unique(idBase + '_buttonCancel')\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.component,\n\t\tmodal: true,\n\t\tautoheight: true,\n\t\t// maxHeight: 420,\n\n\t\t// ready: function () {\n\t\t// \tconsole.error('ready() called!!!')\n\t\t// \t_logic.resetState();\n\t\t// },\n\n\t\tbody: {\n\t\t\tcss: 'ab-add-fields-popup',\n\t\t\tborderless: true,\n\t\t\trows: [{\n\t\t\t\tview: \"menu\",\n\t\t\t\tid: ids.types,\n\t\t\t\tdata: [{\n\t\t\t\t\tvalue: labels.component.chooseType,\n\t\t\t\t\tsubmenu: ['dataFieldsManager', '.getFieldMenuList()']\n\t\t\t\t}],\n\t\t\t\tclick: function click(id, ev, node) {\n\t\t\t\t\t_logic.typeClick();\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t},\n\t\t\t\ton: {\n\t\t\t\t\tonMenuItemClick: function onMenuItemClick(id, ev, node) {\n\t\t\t\t\t\t_logic.onMenuItemClick(id);\n\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tview: 'multiview',\n\t\t\t\tid: ids.editDefinitions,\n\t\t\t\t// NOTE: can't leave this an empty []. We redefine this value later.\n\t\t\t\tcells: [{ id: 'del_me', view: 'label', label: 'edit definition here' }]\n\t\t\t}, { height: 10 }, {\n\t\t\t\tcols: [{ fillspace: true }, {\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tvalue: labels.common.cancel,\n\t\t\t\t\tcss: \"ab-cancel-button\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.buttonCancel();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tid: ids.buttonSave,\n\t\t\t\t\tlabel: labels.component.addNewField,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\ttype: \"form\",\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.buttonSave();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\ton: {\n\t\t\tonBeforeShow: function onBeforeShow() {\n\t\t\t\t_logic.resetState();\n\t\t\t},\n\t\t\tonShow: function onShow() {\n\t\t\t\t_logic.onShow();\n\t\t\t},\n\t\t\tonHide: function onHide() {\n\t\t\t\t_logic.resetState();\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _objectHash = {}; // 'name' => ABFieldXXX object\n\tvar _componentHash = {}; // 'name' => ABFieldXXX ui component\n\tvar _componentsByType = {}; // 'type' => ABFieldXXX ui component\n\tvar _currentEditor = null;\n\tvar _currentObject = null;\n\n\tvar defaultEditorComponent = null; // the default editor.\n\n\tvar _editField = null; // field instance being edited\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\tvar Fields = _ABFieldManager2.default.allFields();\n\n\t\t//// we need to load a submenu entry and an editor definition for each\n\t\t//// of our Fields\n\n\n\t\tvar submenus = []; // Create the submenus for our Data Fields:\n\t\tvar newEditorList = {\n\t\t\tview: 'multiview',\n\t\t\tid: ids.editDefinitions,\n\t\t\trows: []\n\t\t};\n\n\t\tFields.forEach(function (F) {\n\n\t\t\tvar menuName = F.defaults().menuName;\n\t\t\tvar type = F.defaults().type;\n\n\t\t\t// add a submenu for the fields multilingual key\n\t\t\tsubmenus.push(menuName);\n\n\t\t\t// Add the Field's definition editor here:\n\t\t\tvar editorComponent = F.propertiesComponent(App);\n\t\t\tif (!defaultEditorComponent) {\n\t\t\t\tdefaultEditorComponent = editorComponent;\n\t\t\t}\n\t\t\tnewEditorList.rows.push(editorComponent.ui);\n\n\t\t\t_objectHash[menuName] = F;\n\t\t\t_componentHash[menuName] = editorComponent;\n\t\t\t_componentsByType[type] = editorComponent;\n\t\t});\n\n\t\t// the submenu button has a placeholder we need to remove and update\n\t\t// with one that has all our submenus in it.\n\t\tvar firstID = $$(ids.types).getFirstId();\n\t\t$$(ids.types).updateItem(firstID, {\n\t\t\tvalue: labels.component.chooseType,\n\t\t\tsubmenu: submenus\n\t\t});\n\n\t\t// now remove the 'del_me' definition editor placeholder.\n\t\twebix.ui(newEditorList, $$(ids.editDefinitions));\n\n\t\t// hide all the unused editors:\n\t\tfor (var c in _componentHash) {\n\t\t\t_componentHash[c].hide();\n\t\t}\n\n\t\tdefaultEditorComponent.show(); // show the default editor\n\t\t_currentEditor = defaultEditorComponent;\n\n\t\t// $$(ids.editDefinitions).show();\n\n\t\t// $$(ids.editDefinitions).cells() // define the edit Definitions here.\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\tbuttonCancel: function buttonCancel() {\n\n\t\t\t_logic.resetState();\n\n\t\t\t// clear all editors:\n\t\t\tfor (var c in _componentHash) {\n\t\t\t\t_componentHash[c].clear();\n\t\t\t}\n\n\t\t\t// hide this popup.\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\tbuttonSave: function buttonSave() {\n\n\t\t\t$$(ids.buttonSave).disable();\n\n\t\t\tvar editor = _currentEditor;\n\t\t\tif (editor) {\n\n\t\t\t\t// the editor can define some basic form validations.\n\t\t\t\tif (editor.isValid()) {\n\n\t\t\t\t\tvar values = editor.values();\n\n\t\t\t\t\tvar field = null;\n\t\t\t\t\tvar oldData = null;\n\n\t\t\t\t\t// if this is an ADD operation, (_editField will be undefined)\n\t\t\t\t\tif (!_editField) {\n\n\t\t\t\t\t\t// get a new instance of a field:\n\t\t\t\t\t\tfield = _currentObject.fieldNew(values);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// use our _editField, backup our oldData\n\t\t\t\t\t\toldData = _editField.toObj();\n\t\t\t\t\t\t_editField.fromValues(values);\n\n\t\t\t\t\t\tfield = _editField;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar errors = field.isValid();\n\t\t\t\t\tif (errors) {\n\t\t\t\t\t\tOP.Form.isValidationError(errors, $$(editor.ui.id));\n\n\t\t\t\t\t\t// keep our old data\n\t\t\t\t\t\tif (oldData) {\n\t\t\t\t\t\t\tfield.fromValues(oldData);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfield.save().then(function () {\n\n\t\t\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t\t\t\t_logic.hide();\n\t\t\t\t\t\t\t_currentEditor.clear();\n\t\t\t\t\t\t\t_logic.callbacks.onSave(field);\n\t\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\ttitle: '! Could not find the current editor.',\n\t\t\t\t\ttext: 'go tell a developer about this.'\n\t\t\t\t});\n\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t}\n\n\t\t\t// if (!inputValidator.validateFormat(fieldInfo.name)) {\n\t\t\t// \tself.enable();\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\t// // Validate duplicate field name\n\t\t\t// var existsColumn = $.grep(dataTable.config.columns, function (c) { return c.id == fieldInfo.name.replace(/ /g, '_'); });\n\t\t\t// if (existsColumn && existsColumn.length > 0 && !data.editFieldId) {\n\t\t\t// \twebix.alert({\n\t\t\t// \t\ttitle: labels.add_fields.duplicateFieldTitle,\n\t\t\t// \t\ttext: labels.add_fields.duplicateFieldDescription,\n\t\t\t// \t\tok: labels.common.ok\n\t\t\t// \t});\n\t\t\t// \tthis.enable();\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\t// if (fieldInfo.weight == null)\n\t\t\t// \tfieldInfo.weight = dataTable.config.columns.length;\n\n\t\t\t// // Call callback function\n\t\t\t// if (base.saveFieldCallback && base.fieldName) {\n\t\t\t// \tbase.saveFieldCallback(base.fieldName, fieldInfo)\n\t\t\t// \t\t.then(function () {\n\t\t\t// \t\t\tself.enable();\n\t\t\t// \t\t\tbase.resetState();\n\t\t\t// \t\t\tbase.hide();\n\t\t\t// \t\t});\n\t\t\t// }\n\n\t\t},\n\n\t\tcallbacks: {\n\t\t\tonCancel: function onCancel() {\n\t\t\t\tconsole.warn('NO onCancel()!');\n\t\t\t},\n\t\t\tonSave: function onSave(field) {\n\t\t\t\tconsole.warn('NO onSave()!');\n\t\t\t}\n\t\t},\n\n\t\thide: function hide() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\tmodeAdd: function modeAdd() {\n\n\t\t\t// show default editor:\n\t\t\tdefaultEditorComponent.show(false, false);\n\t\t\t_currentEditor = defaultEditorComponent;\n\n\t\t\t// show the ability to switch data types\n\t\t\t$$(ids.types).show();\n\n\t\t\t// change button text to 'add'\n\t\t\t$$(ids.buttonSave).define('label', labels.component.addNewField);\n\t\t\t$$(ids.buttonSave).refresh();\n\t\t},\n\n\t\tmodeEdit: function modeEdit(field) {\n\n\t\t\tif (_currentEditor) _currentEditor.hide();\n\n\t\t\t// switch to this field's editor:\n\t\t\t// hide the rest\n\t\t\tfor (var c in _componentsByType) {\n\t\t\t\tif (c == field.type) {\n\t\t\t\t\t_componentsByType[c].populate(field);\n\t\t\t\t\t_componentsByType[c].show(false, false);\n\t\t\t\t\t_currentEditor = _componentsByType[c];\n\t\t\t\t} else {\n\t\t\t\t\t_componentsByType[c].hide();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// hide the ability to switch data types\n\t\t\t$$(ids.types).hide();\n\n\t\t\t// change button text to 'save'\n\t\t\t$$(ids.buttonSave).define('label', labels.common.save);\n\t\t\t$$(ids.buttonSave).refresh();\n\t\t},\n\n\t\t/**\n   * @function onMenuItemClick\n   * swap the editor view to match the data field selected in the menu.\n   *\n   * @param {string} name  the menuName() of the submenu that was selected.\n   */\n\t\tonMenuItemClick: function onMenuItemClick(name) {\n\n\t\t\t// note, the submenu returns the Field.menuName() values.\n\t\t\t// we use that to lookup the Field here:\n\t\t\tvar editor = _componentHash[name];\n\t\t\tif (editor) {\n\t\t\t\teditor.show();\n\t\t\t\t_currentEditor = editor;\n\t\t\t} else {\n\n\t\t\t\t// most likely they clicked on the menu button itself.\n\t\t\t\t// do nothing.\n\n\t\t\t\t// OP.Error.log(\"App Builder:Workspace:Object:NewDataField: could not find editor for submenu item:\"+name, { name:name });\n\t\t\t}\n\t\t},\n\n\t\tonShow: function onShow() {\n\t\t\t// if (!AD.comm.isServerReady()) {\n\t\t\t// \tthis.getTopParentView().hide();\n\n\t\t\t// \twebix.alert({\n\t\t\t// \t\ttitle: labels.add_fields.cannotUpdateFields,\n\t\t\t// \t\ttext: labels.add_fields.waitRestructureObjects,\n\t\t\t// \t\tok: labels.common.ok\n\t\t\t// \t});\n\t\t\t// }\n\t\t\t// else { // Set default field type\n\t\t\t// \tthis.showFieldData('string');\n\t\t\t// }\n\t\t\tconsole.error('TODO: onShow();');\n\t\t},\n\n\t\tresetState: function resetState() {\n\n\t\t\t// add mode :  change button text to 'Add'\n\t\t\t// show the default editor\n\t\t\tconsole.error('TODO: resetState()');\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   * @param {obj} $view  the webix.$view to hover the popup around.\n   * @param {ABField} field the ABField to edit.  If not provided, then\n   *\t\t\t\t\t\t  this is an ADD operation.\n   */\n\t\tshow: function show($view, field) {\n\n\t\t\t_editField = field;\n\n\t\t\tif (_editField) {\n\n\t\t\t\t_logic.modeEdit(field);\n\t\t\t} else {\n\n\t\t\t\t_logic.modeAdd();\n\t\t\t}\n\n\t\t\t$$(ids.component).show($view);\n\t\t},\n\n\t\ttypeClick: function typeClick() {\n\t\t\t// NOTE: for functional testing we need a way to display the submenu\n\t\t\t// (functional tests don't do .hover very well)\n\t\t\t// so this routine is to enable .click() to show the submenu.\n\n\t\t\tvar subMenuId = $$(ids.types).config.data[0].submenu;\n\n\t\t\t// #HACK Sub-menu popup does not render on initial\n\t\t\t// Force it to render popup by use .getSubMenu()\n\t\t\tif (typeof subMenuId != 'string') {\n\t\t\t\t$$(ids.types).getSubMenu($$(ids.types).config.data[0].id);\n\t\t\t\tsubMenuId = $$(ids.types).config.data[0].submenu;\n\t\t\t}\n\n\t\t\tif ($$(subMenuId)) $$(subMenuId).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\tpopulateObjectPopupAddDataField: function populateObjectPopupAddDataField(object) {\n\t\t\t_currentObject = object;\n\t\t}\n\n\t};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\tshow: _logic.show, // {fn} \tfn(node, ABField)\n\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//\n// REFACTORING:\n//\n// Our goal here is to create a Model object that will interact with Sails' blueprints and \n// return native Webix DataCollections.\n//\n// We also want to listen for updates on Sails Sockets and notify the DataCollections.\n//\n// Until we have the refactoring in place, we will reuse the AD.Model.extent() objects,\n// and convert the results to DataCollections.\n//\n\n\n// Namespacing conventions:\n// OP.Model.extend('[application].[Model]', {static}, {instance} );  --> Object\nOP.Model.extend('opstools.BuildApp.ABApplication', {\n\tuseSockets: true,\n\trestURL: '/app_builder/abapplication'\n}, {\n\t// instance Methods\n});\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n/*\n * custom_editlist\n *\n * Create a custom webix component.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t}\n};\n\nvar ComponentKey = 'ab_custom_editlist';\nOP.CustomComponent.extend(ComponentKey, function (App, componentKey) {\n\t// App \t{obj}\tour application instance object.\n\t// componentKey {string}\tthe destination key in App.custom[componentKey] for the instance of this component:\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique('custom_editlist_component')\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tname: App.unique(\"custom_editlist\") // keep this unique for this App instance.\n\t};\n\n\t// our internal business logic \n\tvar _logic = {};\n\n\t// Tell Webix to create an INSTANCE of our custom component:\n\twebix.protoUI(_ui, webix.EditAbility, webix.ui.list);\n\n\t// current definition of our Component \n\tvar Component = {\n\t\tview: _ui.name, // {string} the webix.view value for this custom component\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n\n\t// Save our definition into App.custom.[key]\n\tApp.custom = App.custom || {};\n\tApp.custom[componentKey] = Component;\n\n\t// return the current definition of this component:\n\treturn Component;\n});\n\n// After importing this custom component, you get back the .key to use to \n// lookup the OP.Component[] to create an application instance of \nexports.default = { key: ComponentKey };\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n/*\n * custom_edittree\n *\n * Create a custom webix component.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t}\n};\n\nvar ComponentKey = 'ab_custom_edittree';\nOP.CustomComponent.extend(ComponentKey, function (App, componentKey) {\n\t// App \t{obj}\tour application instance object.\n\t// componentKey {string}\tthe destination key in App.custom[componentKey] for the instance of this component:\n\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique('custom_edittree_component')\n\n\t};\n\n\t// Our webix Prototype definition:\n\tvar _ui = {\n\t\tname: App.unique(\"custom_edittree\") // keep this unique for this App instance.\n\t};\n\n\t// our internal business logic \n\tvar _logic = {};\n\n\t// Tell Webix to create an INSTANCE of our custom component:\n\twebix.protoUI(_ui, webix.EditAbility, webix.ui.tree);\n\n\t// current definition of our Component \n\tvar Component = {\n\t\tview: _ui.name, // {string} the webix.view value for this custom component\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n\n\t// Save our definition into App.custom.[key]\n\tApp.custom = App.custom || {};\n\tApp.custom[componentKey] = Component;\n\n\t// return the current definition of this component:\n\treturn Component;\n});\n\n// After importing this custom component, you get back the .key to use to \n// lookup the OP.Component[] to create an application instance of \nexports.default = { key: ComponentKey };\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif (item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function (modules, mediaQuery) {\n\t\tif (typeof modules === \"string\") modules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif (typeof id === \"number\") alreadyImportedModules[id] = true;\n\t\t}\n\t\tfor (i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif (typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif (mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if (mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n\t// get current location\n\tvar location = typeof window !== \"undefined\" && window.location;\n\n\tif (!location) {\n\t\tthrow new Error(\"fixUrls requires window.location\");\n\t}\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t\treturn css;\n\t}\n\n\tvar baseUrl = location.protocol + \"//\" + location.host;\n\tvar currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n This regular expression is just a way to recursively match brackets within\n a string.\n \t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n    (  = Start a capturing group\n      (?:  = Start a non-capturing group\n          [^)(]  = Match anything that isn't a parentheses\n          |  = OR\n          \\(  = Match a start parentheses\n              (?:  = Start another non-capturing groups\n                  [^)(]+  = Match anything that isn't a parentheses\n                  |  = OR\n                  \\(  = Match a start parentheses\n                      [^)(]*  = Match anything that isn't a parentheses\n                  \\)  = Match a end parentheses\n              )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n  \\)  = Match a close parens\n \t /gi  = Get all matches, not the first.  Be case insensitive.\n  */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function (fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl.trim().replace(/^\"(.*)\"$/, function (o, $1) {\n\t\t\treturn $1;\n\t\t}).replace(/^'(.*)'$/, function (o, $1) {\n\t\t\treturn $1;\n\t\t});\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t\treturn fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t\t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(38)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".webix_view, .webix_el_colorpicker input, .webix_el_combo input, .webix_el_datepicker input, .webix_el_search input, .webix_el_text input, .webix_control button, .webix_control input, .webix_control textarea, .webix_el_label, .webix_inp_bottom_label, .webix_inp_label, .webix_inp_top_label {\\n\\tfont-family: \\\"Helvetica Neue\\\",Helvetica,Arial,sans-serif !important;\\n}\\n.ab-generated-page {\\n\\toverflow-y: auto;\\n}\\n.ab-main-container {\\n\\tposition: relative;\\n\\tdisplay: block;\\n\\twidth: 100%;\\n\\tbackground: -moz-linear-gradient(top, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0) 100%); /* FF3.6-15 */\\n\\tbackground: -webkit-linear-gradient(top, rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 100%); /* Chrome10-25,Safari5.1-6 */\\n\\tbackground: linear-gradient(to bottom, rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\\n}\\n.ab-main-container .pointer {\\n\\tcursor: pointer;\\n}\\n.ab-main-container .right {\\n\\ttext-align: right;\\n}\\n.ab-main-container .center {\\n\\ttext-align: center;\\n}\\n.ab-main-container .left {\\n\\ttext-align: left;\\n}\\n.ab-text-bold {\\n\\tfont-weight: bold !important;\\n}\\n.ab-scroll-y {\\n\\toverflow-y: auto !important;\\n}\\n.ab-ellipses-text, .ab-ellipses-text > div {\\n\\toverflow: hidden;\\n\\twhite-space: nowrap;\\n\\ttext-overflow: ellipsis;\\n}\\n.float-left {\\n\\tfloat: left;\\n}\\n.float-right {\\n\\tfloat: right;\\n}\\n\\n/* Webix icon */\\n.ab-main-container .webix_icon {\\n\\tline-height: inherit;\\n}\\n\\n/* Fix overflow-x */\\n.ab-generated-page .webix_scroll_cont {\\n\\toverflow: auto !important;\\n}\\n\\n/* == Webix datatable == */\\n/* Checkbox column */\\n.ab-main-container .webix_hcell.center input[type=checkbox] {\\n\\twidth:20px;\\n\\theight:20px;\\n\\tmargin-top:12px;\\n  }\\n.ab-main-container .webix_table_checkbox {\\n\\twidth:20px;\\n\\theight:20px;\\n\\tmargin-top:5px;\\n}\\n/* Last column */\\n.ab-main-container .webix_column.webix_last > div,\\n.ab-main-container .webix_hs_center td.webix_last,\\n.ab-main-container .ab-app-list-descriptionwebix_hs_right td.webix_last {\\n\\tborder-right-width: 1px !important;\\n}\\n/* No padding/margin column */\\n.ab-column-no-padding div {\\n\\tpadding: 0px !important;\\n\\tmargin: 0px !important;\\n}\\n.ab-main-container .ab-cell-warn {\\n\\tbackground-color: #F5AE0F !important;\\n}\\n\\n/* Webix selected item */\\n.webix_list_item.webix_selected,\\n.webix_column>div.webix_cell_select,\\n.webix_column>div.webix_column_select,\\n.webix_column>div.webix_row_select {\\n\\tbackground-color: #3498db !important;\\n}\\n\\n/* Webix message */\\n.webix_success {\\n  background-color: #BFF2BF;\\n}\\n.webix_success div {\\n  background-color: #BFF2BF;\\n  border: 1px solid #007A00;\\n  color: #000;\\n}\\n\\n/* Webix list */\\n.ab-main-container .webix_list_item .webix_selected,\\n.ab-main-container .webix_tree_item.webix_selected {\\n\\tcolor: #fff !important;\\n\\tbackground-color: #3498db !important;\\n}\\n.ab-app-form-permission .webix_selected {\\n\\tcolor: #333 !important;\\n\\tbackground-color: transparent !important;\\n}\\n\\n/* Webix toolbar */\\n.ab-toolbar-submenu, .ab-toolbar-submenu .webix_header>div {\\n\\tbackground: #EEE !important;\\n\\tcolor: #666 !important;\\n\\tfont-size: 15px !important;\\n\\tfont-weight: bold !important;\\n\\tborder-bottom: 0px !important;\\n}\\n\\n/* Webix segmented */\\n.ab-form-component-item .webix_segment_0.webix_selected,\\n.ab-form-component-item .webix_segment_1.webix_selected,\\n.ab-form-component-item .webix_segment_N.webix_selected,\\n.ab-component-view-edit-field .webix_segment_0.webix_selected,\\n.ab-component-view-edit-field .webix_segment_1.webix_selected,\\n.ab-component-view-edit-field .webix_segment_N.webix_selected {\\n\\tcolor: #fff !important;\\n\\tbackground-color: #3498db !important;\\n}\\n\\n.ab-form-component-item .webix_segment_0,\\n.ab-form-component-item .webix_segment_1,\\n.ab-form-component-item .webix_segment_N,\\n.ab-component-view-edit-field .webix_segment_0,\\n.ab-component-view-edit-field .webix_segment_1,\\n.ab-component-view-edit-field .webix_segment_N {\\n\\tcolor: #3498db;\\n\\tbackground: #fff;\\n}\\n\\n/* Add new columns popup */\\n.ab-add-fields-popup {\\n\\toverflow-y: auto;\\n}\\n\\n/* Application list */\\n.ab-app-list {\\n/*\\n\\tmin-height: 300px;\\n\\tpadding: 40px 100px;\\n*/\\n}\\n.ab-app-select-list .webix_selected {\\n\\tbackground-color: #FFF !important;\\n\\tcolor: #333 !important;\\n}\\n.ab-app-select-list .webix_list_item:hover {\\n\\tbackground: #ebebeb;\\n}\\n.ab-app-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n\\tmargin: -2px -10px;\\n\\tpadding: 15px;\\n\\tline-height: 20px;\\n}\\ndiv[view_id='ab-app-list'] div.webix_list_item:hover,\\ndiv[view_id='ab-object-list'] div.webix_list_item:hover,\\ndiv[view_id='ab-object-list-menu'] div.webix_list_item:hover,\\ndiv[view_id='ab-new-connectObject-list-item'] div.webix_list_item:hover,\\ndiv[view_id='ab-edit-header-items'] div.webix_list_item:hover,\\ndiv[view_id='ab-frozen-field-list'] div.webix_list_item:hover {\\n\\tbackground-color: #eee;\\n}\\n.ab-app-list-name {\\n\\tfont-size: large;\\n}\\n.ab-app-list-description {\\n\\tcolor: #999;\\n\\tfont-size: small;\\n}\\n.ab-app-list-info {\\n\\twidth: 95%;\\n\\tdisplay: inline-block;\\n}\\n.ab-app-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tright: 10px;\\n\\topacity: 0.4;\\n\\tline-height: 70px;\\n\\theight: 70px;\\n}\\n.ab-app-list-edit:hover {\\n\\topacity: 1;\\n}\\n\\n/* Application workspace */\\n.ab-app-workspace {\\n\\t/*min-height: 100px;*/\\n}\\n.ab-unsync-data-warning {\\n\\tcursor: pointer;\\n    color: #fff;\\n    background-color: #F5962F;\\n    border: #fff dotted 1px !important;\\n    padding-left: 2px;\\n}\\n.ab-unsync-data-popup .webix_win_head {\\n\\tbackground-color: #F5962F;\\n}\\n.ab-unsync-data-popup .webix_win_head .header {\\n\\tpadding-left: 5px;\\n\\tfont-weight: bold;\\n    color: #fff;\\n}\\n.ab-unsync-data-status {\\n\\tpadding: 3px;\\n}\\n.ab-unsync-data-in-progress {\\n\\tbackground-color: #F5AE0F;\\n}\\n.ab-unsync-data-done {\\n\\tbackground-color: #3AB349;\\n}\\n.ab-unsync-data-error {\\n\\tbackground-color: #EC2F2F;\\n}\\n\\n/* Object list */\\n.ab-object-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n}\\n.ab-object-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0px;\\n\\tright: 5px;\\n\\tdisplay: none;\\n}\\n.ab-object-unsync {\\n\\tbackground-color: #d2e3ef;\\n\\tcolor: #4a4a4a;\\n\\tposition: absolute;\\n\\ttop: 4px;\\n\\tright: 30px;\\n\\tfont-size: 12px;\\n\\tborder-radius: 6px;\\n\\tpadding: 0px 4px;\\n\\theight: 20px;\\n\\tline-height: 20px;\\n\\tdisplay: none;\\n}\\n\\n/* Interface list */\\n.ab-page-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n}\\n.ab-page-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0px;\\n\\tright: 5px;\\n\\tdisplay: none;\\n\\tcursor: pointer;\\n}\\n\\n/* Object datatable */\\n.ab-object-data-header {\\n\\tposition: relative;\\n}\\n.ab-object-data-new-header {\\n\\tbackground-color: #cfd9e0;\\n}\\n\\n.ab-object-data-header-edit {\\n\\tdisplay: none;\\n\\tposition: absolute;\\n\\ttop: 15px;\\n\\tright: 10px;\\n}\\n.ab-object-data-header:hover .ab-object-data-header-edit {\\n\\tdisplay: block;\\n}\\n.ab-object-unsync-data {\\n\\tbackground-color: #dae6fb;\\n}\\n.ab-object-view-column {\\n\\tcolor: #3498db;\\n\\tfont-weight: bold;\\n\\ttext-align: center;\\n\\tcursor: pointer;\\n}\\n\\n/* Connect object data */\\n.ab-connect-data-info {\\n\\tdisplay: inline-block;\\n\\twidth: 90px;\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n}\\n\\n.ab-connect-data-disable {\\n\\tbackground-color: #aaa;\\n}\\n\\n/* Custom selectivity */\\n.ab-main-container .selectivity-multiple-input-container {\\n\\tbackground: none !important;\\n\\tpadding: 0px !important;\\n\\toverflow: hidden !important;\\n\\tmax-height: 100% !important;\\n}\\n.ab-main-container .selectivity-multiple-selected-item {\\n\\tbackground: #3498db !important;\\n\\tpadding-right: 5px;\\n\\t/*max-width: 100px !important;*/\\n}\\n\\n/* Interface tree view */\\n.ab-main-container .webix_tree_item.webix_selected span {\\n\\tpadding: 0px;\\n\\tbackground: #3498db !important;\\n}\\n\\n/* Interface new page popup */\\n.ab-interface-new-quick-page {\\n    overflow: scroll !important;\\n\\toverflow-x: hidden !important;\\n\\toverflow-y: auto !important;\\n}\\n\\n.ab-interface-new-quick-page .webix_inp_checkbox_border label {\\n\\tfont-weight: normal; /* Override bootstrap*/\\n}\\n\\n/* Interface page layout */\\n.ab-component-drop-area {\\n\\tmargin-right: 2px;\\n\\tborder: 1px dashed #000 !important;\\n\\tbackground-color: #D3E9EF;\\n\\tbackground-image:url(\\\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='30px' width='90px'><text x='20' y='20' fill='#95CBEF' font-size='15'>Drop Here</text></svg>\\\");\\n}\\n\\ndiv[view_id='ab-interface-layout-page'] .webix_list_item,\\n.ab-component-in-page {\\n\\twidth: 100%;\\n\\tposition: relative;\\n\\tbackground-color: #fff;\\n\\tclear: both;\\n}\\n\\n.ab-component-item-name {\\n\\tfloat: left;\\n\\tfont-size: 18px;\\n\\tborder-right: 1px solid #ebebeb;\\n\\tvertical-align: top;\\n\\tpadding-top: 10px;\\n\\twidth: 90px;\\n\\tmargin-bottom: -500em; /* CSS hack: equal height of right float */\\n\\tpadding-bottom: 500em;\\n}\\n\\n.ab-component-item-display {\\n\\tfloat: right;\\n\\tvertical-align: top;\\n\\tpadding: 10px;\\n\\twidth: 87%;\\n\\tline-height: 100%;\\n\\toverflow-x: auto;\\n}\\n\\n.ab-component-remove {\\n\\tposition: absolute;\\n\\ttop: 5px;\\n\\tright: 1px;\\n}\\n\\n.ab-component-link {\\n\\tcolor: #003B7E;\\n\\ttext-decoration: underline;\\n\\tcursor: pointer;\\n}\\n\\n/* Interface component list */\\n.ab-component-item-drag {\\n\\tborder: 1px dotted #000 !important;\\n\\tfont-size: 35px;\\n\\tbackground-color: #fff;\\n}\\n\\n/* Header component */\\n.ab-component-header {\\n\\tfont-size: 25px;\\n\\tfont-weight: bold;\\n\\tmargin: 0px;\\n\\tpadding: 0px;\\n}\\n.ab-component-description {\\n\\tfont-size: 14px;\\n\\tpadding: 0px;\\n}\\n\\n/* Menu component */\\n.ab-page-list-item .webix_tree_checkbox {\\n\\tmargin: 0px !important;\\n}\\n\\n/* Object toolbar */\\n.ab-data-toolbar {\\n\\tbackground: #aaa !important;\\n}\\n.ab-data-toolbar button {\\n\\ttext-align: center;\\n\\tfont-size: 14px;\\n}\\n.ab-data-toolbar button:hover, .ab-data-toolbar button:active {\\n\\tbackground: #aaa !important;\\n}\\n.ab-data-toolbar button .webix_icon_btn {\\n\\topacity: 0.6;\\n\\tfont-size: 15px;\\n}\\n.ab-data-toolbar button:hover .webix_icon_btn {\\n\\topacity: 1;\\n}\\n\\n/* Grid component */\\n.ab-page-grid-column-item .column-checkbox {\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\ttop: -5px;\\n\\twidth: 30px;\\n}\\n\\n.ab-page-grid-column-item .column-empty-checkbox {\\n\\tposition: relative;\\n\\twidth: 50px;\\n\\theight: 38px;\\n}\\n\\n.ab-page-grid-column-item .column-name {\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\ttop: -18px;\\n}\\n\\n/* Form component */\\n.ab-standard-button button, .ab-standard-button button:hover, .ab-standard-button button:active, .ab-standard-button .webix_icon_btn {\\n\\tbackground: transparent !important;\\n\\tborder-color: transparent !important;\\n\\tcolor: #666 !important;\\n\\tbox-shadow: none !important;\\n}\\n.ab-cancel-button button {\\n\\tbackground: transparent !important;\\n\\tcolor: #AAA;\\n\\tborder-color: transparent;\\n}\\n.ab-cancel-button button:hover {\\n\\ttext-decoration: underline;\\n}\\n.ab-cancel-button button:active {\\n\\tbox-shadow: none;\\n}\\n.ab-form-connect-data {\\n\\tfloat: left;\\n\\tborder: #CCC solid 1px;\\n\\tpadding: 0px 5px;\\n\\tmin-width: 70%;\\n\\tborder-radius: 6px;\\n}\\n\\n.ab-main-container .webix_layout_form {\\n\\tbackground-color: #fff !important;\\n}\\n\\n/* Loading Screen */\\n.ab-loading-screen {\\n\\tbackground: #000;\\n\\topacity: 0.7;\\n\\tposition: absolute !important;\\n}\\n.ab-loading-body {\\n\\tbackground: #000;\\n\\tborder-width: 0px !important;\\n}\\n.ab-loading-message {\\n\\tcolor: #fff !important;\\n\\tbackground: #000 !important;\\n\\tfont-size: 30px !important;\\n\\ttext-align: center;\\n\\tvertical-align: middle;\\n\\tborder-width: 0px !important;\\n\\tpadding-top: 20% !important;\\n\\theight: 100px !important;\\n}\\n.ab-loading-button {\\n\\ttext-align: center;\\n}\\n.ab-loading-button button {\\n\\tbackground-color: #003B7E;\\n\\twidth: 200px;\\n}\\n.ab-loading-cancel-button {\\n\\ttext-align: center;\\n\\tbackground: transparent;\\n}\\n.ab-loading-cancel-button a {\\n\\tcolor: #fff !important;\\n}\\n.ab-loading-screen .webix_progress_bottom {\\n\\theight: 40px !important;\\n\\topacity: 1;\\n}\\n.ab-loading-screen .webix_progress_bottom .webix_progress_state {\\n\\theight: 40px !important;\\n}\\n\\n/* Dynamic DataTable */\\n.dynamic-datatable-view .webix_badge {\\n\\tmargin: 0 !important;\\n}\\n\\n/* Number data field */\\n.ab-number-format-show {\\n\\twhite-space: nowrap;\\n}\\n\\n/* Icon Picker */\\n.ab-main-container .iconpicker .iconpicker-items {\\n\\tcolor: #000;\\n}\\n\\n/* Webix Tabs */\\ndiv.webix_item_tab {\\n\\tfont-size: 16px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\t// Test for IE <= 9 as proposed by Browserhacks\n\t\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t\t// Tests for existence of standard globals is to allow style-loader \n\t\t// to operate correctly into non-standard environments\n\t\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\t\treturn window && document && document.all && !window.atob;\n\t}),\n\tgetElement = (function(fn) {\n\t\tvar memo = {};\n\t\treturn function(selector) {\n\t\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t\t}\n\t\t\treturn memo[selector]\n\t\t};\n\t})(function (styleTarget) {\n\t\treturn document.querySelector(styleTarget)\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [],\n\tfixUrls = __webpack_require__(39);\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (typeof options.insertInto === \"undefined\") options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar styleTarget = getElement(options.insertInto)\n\tif (!styleTarget) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\tstyleTarget.insertBefore(styleElement, styleTarget.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\tstyleTarget.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\tstyleTarget.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\tstyleTarget.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\toptions.attrs.type = \"text/css\";\n\n\tattachTagAttrs(styleElement, options.attrs);\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\tattachTagAttrs(linkElement, options.attrs);\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction attachTagAttrs(element, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\telement.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement, options);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/* If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls){\n\t\tcss = fixUrls(css);\n\t}\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(40);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(41)(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!./AppBuilder.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!./AppBuilder.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ })\n],[10]);\n//# sourceMappingURL=BuildApp.js.map\n\n\n// WEBPACK FOOTER //\n// /home/pong/Desktop/AppBuilder/~/app_builder/assets/opstools/BuildApp/BuildApp.js","/******/ (function(modules) { // webpackBootstrap\n/******/ \t// install a JSONP callback for chunk loading\n/******/ \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n/******/ \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {\n/******/ \t\t// add \"moreModules\" to the modules object,\n/******/ \t\t// then flag all \"chunkIds\" as loaded and fire callback\n/******/ \t\tvar moduleId, chunkId, i = 0, resolves = [], result;\n/******/ \t\tfor(;i < chunkIds.length; i++) {\n/******/ \t\t\tchunkId = chunkIds[i];\n/******/ \t\t\tif(installedChunks[chunkId]) {\n/******/ \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n/******/ \t\t\t}\n/******/ \t\t\tinstalledChunks[chunkId] = 0;\n/******/ \t\t}\n/******/ \t\tfor(moduleId in moreModules) {\n/******/ \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n/******/ \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);\n/******/ \t\twhile(resolves.length) {\n/******/ \t\t\tresolves.shift()();\n/******/ \t\t}\n/******/ \t\tif(executeModules) {\n/******/ \t\t\tfor(i=0; i < executeModules.length; i++) {\n/******/ \t\t\t\tresult = __webpack_require__(__webpack_require__.s = executeModules[i]);\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t\treturn result;\n/******/ \t};\n/******/\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// objects to store loaded and loading chunks\n/******/ \tvar installedChunks = {\n/******/ \t\t1: 0\n/******/ \t};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/ \t// This file contains only the entry chunk.\n/******/ \t// The chunk loading function for additional chunks\n/******/ \t__webpack_require__.e = function requireEnsure(chunkId) {\n/******/ \t\tif(installedChunks[chunkId] === 0) {\n/******/ \t\t\treturn Promise.resolve();\n/******/ \t\t}\n/******/\n/******/ \t\t// a Promise means \"currently loading\".\n/******/ \t\tif(installedChunks[chunkId]) {\n/******/ \t\t\treturn installedChunks[chunkId][2];\n/******/ \t\t}\n/******/\n/******/ \t\t// setup Promise in chunk cache\n/******/ \t\tvar promise = new Promise(function(resolve, reject) {\n/******/ \t\t\tinstalledChunks[chunkId] = [resolve, reject];\n/******/ \t\t});\n/******/ \t\tinstalledChunks[chunkId][2] = promise;\n/******/\n/******/ \t\t// start chunk loading\n/******/ \t\tvar head = document.getElementsByTagName('head')[0];\n/******/ \t\tvar script = document.createElement('script');\n/******/ \t\tscript.type = 'text/javascript';\n/******/ \t\tscript.charset = 'utf-8';\n/******/ \t\tscript.async = true;\n/******/ \t\tscript.timeout = 120000;\n/******/\n/******/ \t\tif (__webpack_require__.nc) {\n/******/ \t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n/******/ \t\t}\n/******/ \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".js\";\n/******/ \t\tvar timeout = setTimeout(onScriptComplete, 120000);\n/******/ \t\tscript.onerror = script.onload = onScriptComplete;\n/******/ \t\tfunction onScriptComplete() {\n/******/ \t\t\t// avoid mem leaks in IE.\n/******/ \t\t\tscript.onerror = script.onload = null;\n/******/ \t\t\tclearTimeout(timeout);\n/******/ \t\t\tvar chunk = installedChunks[chunkId];\n/******/ \t\t\tif(chunk !== 0) {\n/******/ \t\t\t\tif(chunk) {\n/******/ \t\t\t\t\tchunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));\n/******/ \t\t\t\t}\n/******/ \t\t\t\tinstalledChunks[chunkId] = undefined;\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t\thead.appendChild(script);\n/******/\n/******/ \t\treturn promise;\n/******/ \t};\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// on error function for async loading\n/******/ \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 11);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _configDesktop = __webpack_require__(12);\n\nvar _configDesktop2 = _interopRequireDefault(_configDesktop);\n\nvar _configMobile = __webpack_require__(13);\n\nvar _configMobile2 = _interopRequireDefault(_configMobile);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @class config\n *\n * Manage our configuration settings.\n */\n\nexports.default = {\n\tconfig: function config() {\n\n\t\t// TODO: decide which config file to return here:\n\t\tif (window.innerWidth < 768) {\n\t\t\treturn _configMobile2.default;\n\t\t}\n\t\treturn _configDesktop2.default;\n\t}\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = {\n\n\t/**\n  * @function OP.Form.validationError\n  *\n  * creates an error object that can be used in OP.Form.isValidationError()\n  * to update a webix form with error validation messages.\n  *\n  * @param {json} error \tan error object\n  *\t\t\t\terror.name\t{string} the attribute name (Form.element[error.name])\n  *\t\t\t\terror.message {string} the message to display for the error\n  *\n  * @return {obj} an error object.\n  */\n\tvalidationError: function validationError(error, errorObj) {\n\n\t\terrorObj = errorObj || {\n\t\t\terror: 'E_VALIDATION',\n\t\t\tinvalidAttributes: {}\n\t\t};\n\n\t\tvar attr = errorObj.invalidAttributes;\n\t\tattr[error.name] = attr[error.name] || [];\n\n\t\tattr[error.name].push(error);\n\n\t\treturn errorObj;\n\t},\n\n\t/**\n  * @function OP.Form.isValidationError\n  *\n  * scans the given error to see if it is a sails' respone about an invalid\n  * value from one of the form elements.\n  *\n  * @codestart\n  * var form = $$('formID');\n  * var values = form.getValues();\n  * model.attr(values);\n  * model.save()\n  * .fail(function(err){\n  *     if (!OP.Form.isValidationError(err, form)) {\n  *         OP.error.log('Error saving current model ()', {error:err, values:values});\n  *     }\n  * })\n  * .then(function(newData){\n  * \n  * });\n  * @codeend\n  *\n  * @param {obj} error  the error response object\n  * @param {obj} form   the webix form instance (or reference)\n  * @return {bool}      true if error was about a form element.  false otherwise.\n  */\n\tisValidationError: function isValidationError(error, form) {\n\n\t\t// {bool} have we set focus to form component?\n\t\tvar hasFocused = false;\n\n\t\t// if we have an error object:\n\t\tif (error) {\n\n\t\t\t//// if the error obj is provided by Sails response, \n\t\t\t//// do some clean up on the error object:\n\n\n\t\t\t// dig down to sails provided error object:\n\t\t\tif (error.error && error.error == 'E_UNKNOWN' && error.raw && error.raw.length > 0) {\n\n\t\t\t\terror = error.raw[0];\n\t\t\t}\n\n\t\t\t// drill down to the embedded .err object if it exists\n\t\t\tif (error.err) {\n\t\t\t\terror = error.err;\n\t\t\t}\n\n\t\t\t//// Now process the error object\n\t\t\t//// \n\t\t\tif (error.error && error.error == 'E_VALIDATION' || error.code && error.code == 'E_VALIDATION') {\n\n\t\t\t\tvar attrs = error.invalidAttributes;\n\t\t\t\tif (attrs) {\n\n\t\t\t\t\tvar wasForm = false;\n\t\t\t\t\tfor (var attr in attrs) {\n\n\t\t\t\t\t\t// if this is a field in the form:\n\t\t\t\t\t\tif (form.elements[attr]) {\n\n\t\t\t\t\t\t\tvar errors = attrs[attr];\n\t\t\t\t\t\t\tvar msg = [];\n\t\t\t\t\t\t\terrors.forEach(function (err) {\n\t\t\t\t\t\t\t\tmsg.push(err.message);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// set the invalid error message\n\t\t\t\t\t\t\tform.markInvalid(attr, msg.join(', '));\n\n\t\t\t\t\t\t\t// set focus to the 1st form element we mark:\n\t\t\t\t\t\t\tif (!hasFocused) {\n\t\t\t\t\t\t\t\tform.elements[attr].focus();\n\t\t\t\t\t\t\t\thasFocused = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\twasForm = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (wasForm) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// if we missed updating our form with an error\n\t\t// this was not a validation error so return false\n\t\treturn false;\n\t}\n\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _restURLs = {\n\tfindAll: 'GET #url#',\n\tfindOne: 'GET #url#/{id}',\n\tcreate: 'POST #url#',\n\tupdate: 'PUT #url#/{id}',\n\tdestroy: 'DELETE #url#/{id}'\n};\n\nvar _Models = {};\n\nvar OPModel = function () {\n\tfunction OPModel(key, staticData, instanceData) {\n\t\t_classCallCheck(this, OPModel);\n\n\t\tthis.key = key;\n\t\tthis.staticData = staticData;\n\t\tthis.instanceData = instanceData;\n\t\tthis.Model = staticData.Model;\n\n\t\tthis.url = {};\n\t\tfor (var r in _restURLs) {\n\t\t\tthis.url[r] = staticData[r];\n\t\t}\n\t}\n\n\t_createClass(OPModel, [{\n\t\tkey: 'Models',\n\t\tvalue: function Models(Model) {\n\t\t\tthis.Model = Model;\n\t\t}\n\t}, {\n\t\tkey: 'findAll',\n\t\tvalue: function findAll(cond) {\n\t\t\tvar _this = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// NOTE: currently reusing AD.Model\n\n\t\t\t\t// var Model = AD.Model.get(this.key);\n\t\t\t\t// Model.findAll(cond)\n\n\t\t\t\tvar service = _this.service('findAll');\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: cond }).fail(reject).done(function (data) {\n\n\t\t\t\t\tdata = data.data || data;\n\n\t\t\t\t\t// our findAll() should return an array of items.\n\t\t\t\t\tif (!Array.isArray(data)) {\n\t\t\t\t\t\tdata = [data];\n\t\t\t\t\t}\n\n\t\t\t\t\t// return instances of this.Model if provided:\n\t\t\t\t\tif (_this.Model) {\n\t\t\t\t\t\tvar newList = []; // Model.List();\n\t\t\t\t\t\tdata.forEach(function (l) {\n\t\t\t\t\t\t\tif (l) {\n\t\t\t\t\t\t\t\tnewList.push(new _this.Model(l));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdata = newList;\n\t\t\t\t\t}\n\n\t\t\t\t\t// convert to a WebixDataCollection:\n\t\t\t\t\tvar dc = new webix.DataCollection({\n\t\t\t\t\t\tdata: data,\n\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonAfterDelete: function onAfterDelete(id) {}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// dc._toArray = function() {\n\t\t\t\t\t// \tvar data = [];\n\t\t\t\t\t// \tvar id = this.getFirstId();\n\t\t\t\t\t// \twhile(id) {\n\t\t\t\t\t// \t\tdata.push(this.getItem(id));\n\t\t\t\t\t// \t\tid = this.getNextId(id);\n\t\t\t\t\t// \t}\n\t\t\t\t\t// \treturn data;\n\t\t\t\t\t// }\n\n\n\t\t\t\t\tresolve(dc);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'findOne',\n\t\tvalue: function findOne(cond) {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar service = _this2.service('findOne');\n\n\t\t\t\tvar nURI = service.url;\n\t\t\t\tfor (var k in cond) {\n\t\t\t\t\tvar oURI = nURI;\n\t\t\t\t\tnURI = AD.util.string.replaceAll(nURI, \"{\" + k + \"}\", cond[k]);\n\n\t\t\t\t\t// if there was a change, remove k from cond:\n\t\t\t\t\tif (oURI != nURI) {\n\t\t\t\t\t\tdelete cond[k];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tservice.url = nURI;\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: cond }).fail(reject).done(function (item) {\n\t\t\t\t\tif (item.translate) item.translate();\n\n\t\t\t\t\tresolve(item.attr ? item.attr() : item);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'create',\n\t\tvalue: function create(attr) {\n\t\t\tvar _this3 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar service = _this3.service('create');\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: attr }).fail(reject).done(function (item) {\n\t\t\t\t\tif (item.translate) item.translate();\n\n\t\t\t\t\tresolve(item.attr ? item.attr() : item);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update(id, attr) {\n\t\t\tvar _this4 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar service = _this4.service('update', id);\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: attr }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'destroy',\n\t\tvalue: function destroy(id) {\n\t\t\tvar _this5 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar service = _this5.service('destroy', id);\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: {} }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'service',\n\t\tvalue: function service(key, id) {\n\t\t\tvar parts = this.url[key].split(' ');\n\t\t\tvar verb = parts[0].toLowerCase();\n\t\t\tvar uri = parts.pop();\n\n\t\t\tif (id) {\n\t\t\t\tvar key = '{id}';\n\t\t\t\turi = AD.util.string.replaceAll(uri, key, id);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tverb: verb,\n\t\t\t\turl: uri\n\t\t\t};\n\t\t}\n\t}]);\n\n\treturn OPModel;\n}();\n\nexports.default = {\n\n\textend: function extend(key, staticData, instance) {\n\n\t\t//\n\t\t// Create the AD.Model from this definition\n\t\t//\n\n\t\tif (staticData.restURL) {\n\t\t\tfor (var u in _restURLs) {\n\t\t\t\tstaticData[u] = _restURLs[u].replace('#url#', staticData.restURL);\n\t\t\t}\n\t\t}\n\n\t\t// var alreadyThere = AD.Model.get(key);\n\t\t// if (!alreadyThere) {\n\n\t\t// \tAD.Model.Base.extend(key, staticData, instance);\n\t\t// \tAD.Model.extend(key, staticData, instance);\n\t\t// }\n\n\t\t//\n\t\t// Now create our OP.Model:\n\t\t//\n\t\tvar curr = nameSpace(_Models, key);\n\t\tvar modelName = objectName(key);\n\n\t\tcurr[modelName] = new OPModel(key, staticData, instance);\n\t},\n\n\tget: function get(key) {\n\t\treturn findObject(_Models, key);\n\t}\n};\n\n/*\n * @function findObject\n *\n * Return the object specified by the given name space:\n *\n * @param {object} baseObj  The base object to search on\n *                          usually AD.models or AD.models_base\n *\n * @param {string} name   The provided namespace to parse and search for\n *                        The name can be spaced using '.' \n *                        eg.  'coolTool.Resource1' => AD.models.coolTool.Resource1\n *                             'coolerApp.tool1.Resource1' => AD.models.coolerApp.tool1.Resource1\n *\n * @returns {object}  the object resolved by the namespaced base \n *                    eg:  findObject(AD.models, 'Resource') => return AD.models.Resource\n *                         findObject(AD.models, 'coolTool.Resource1') => AD.models.coolTool.Resource1\n *\n *                    if an object is not found, null is returned.\n */\n\nvar findObject = function findObject(baseObj, name) {\n\n\t// first lets figure out our namespacing:\n\tvar nameList = name.split('.');\n\n\t// for each remaining name segments, make sure we have a \n\t// namespace container for it:\n\tvar curr = baseObj;\n\tnameList.forEach(function (name) {\n\n\t\tif (curr == null) {\n\t\t\tvar whoops = true;\n\t\t\tconsole.error('! current name segment is null.  Check your given name to make sure it is properly given: ', name);\n\t\t}\n\t\tif (curr) {\n\t\t\tif (typeof curr[name] == 'undefined') {\n\t\t\t\tcurr = null;\n\t\t\t}\n\t\t\tif (curr) curr = curr[name];\n\t\t}\n\t});\n\n\treturn curr;\n};\n\n/*\n * @function objectName\n *\n * parse the name and return the name of the object we will create.\n *\n * @param {string} name   The provided namespace to parse \n *                        The name can be spaced using '.' \n *\n * @returns {string}  the name of the model object \n *                    eg:  objectName('Resource') => return 'Resource'\n *                         objectName('coolTool.Resource1') => 'Resource1'\n */\nvar objectName = function objectName(name) {\n\n\t// first lets figure out our namespacing:\n\tvar nameList = name.split('.');\n\tvar objName = nameList.pop(); // remove the last one.\n\n\treturn objName;\n};\n\n/*\n * @function nameSpace\n *\n * Make sure the proper name space is created on the given base.\n *\n * @param {object} baseObj  The base object to create the namespace on\n *                          usually AD.models or AD.models_base\n *\n * @param {string} name   The provided namespace to parse and create\n *                        The name can be spaced using '.' \n *                        eg.  'coolTool.Resource1' => AD.models.coolTool.Resource1\n *                             'coolerApp.tool1.Resource1' => AD.models.coolerApp.tool1.Resource1\n *\n * @returns {object}  the object that represents the namespaced base \n *                    that the Model is to be created on.\n *                    eg:  nameSpace(AD.models, 'Resource') => return AD.models\n *                         nameSpace(AD.models, 'coolTool.Resource1') => AD.models.coolTool\n */\nvar nameSpace = function nameSpace(baseObj, name) {\n\n\t// first lets figure out our namespacing:\n\tvar nameList = name.split('.');\n\tvar controlName = nameList.pop(); // remove the last one.\n\n\t// for each remaining name segments, make sure we have a \n\t// namespace container for it:\n\tvar curr = baseObj;\n\tnameList.forEach(function (name) {\n\n\t\tif (typeof curr[name] == 'undefined') {\n\t\t\tcurr[name] = {};\n\t\t}\n\t\tcurr = curr[name];\n\t});\n\n\treturn curr;\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/*\n * OP.Multilingual\n *\n * A set of helpers for Multilingual Data.\n *\n */\n\nexports.default = {\n\n\t/**\n  * @function OP.Multilingual.translate\n  *\n  * Given a set of json data, pull out any multilingual translations\n  * and flatten those values to the base object.\n  *\n  * @param {obj} obj  The instance of the object being translated\n  * @param {json} json The json data being used for translation.\n  *\t\t\t\t\t\tThere should be json.translations = [ {transEntry}, ...]\n  *\t\t\t\t\t\twhere transEntry = {\n  *\t\t\t\t\t\t\tlanguage_code:'en',\n  *\t\t\t\t\t\t\tfield1:'value',\n  *\t\t\t\t\t\t\t...\n  *\t\t\t\t\t\t}\n  * @param {array} fields an Array of multilingual fields to pull to \n  *\t\t\t\t\t\t the obj[field] value.\n  *\n  */\n\ttranslate: function translate(obj, json, fields) {\n\n\t\tif (!json.translations) {\n\t\t\tjson.translations = [];\n\t\t}\n\n\t\tvar currLanguage = AD.lang.currentLanguage || 'en';\n\n\t\tif (fields && fields.length > 0) {\n\n\t\t\tjson.translations.forEach(function (t) {\n\t\t\t\t// find the translation for the current language code\n\t\t\t\tif (t.language_code == currLanguage) {\n\n\t\t\t\t\t// copy each field to the root object\n\t\t\t\t\tfields.forEach(function (f) {\n\t\t\t\t\t\tobj[f] = t[f] || ''; // default to '' if not found. \n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n  * @function OP.Multilingual.unTranslate\n  *\n  * Take the multilingual information in the base obj, and push that \n  * down into the json.translations data.\n  *\n  * @param {obj} obj  The instance of the object with the translation\n  * @param {json} json The json data being used for translation.\n  *\t\t\t\t\t\tThere should be json.translations = [ {transEntry}, ...]\n  *\t\t\t\t\t\twhere transEntry = {\n  *\t\t\t\t\t\t\tlanguage_code:'en',\n  *\t\t\t\t\t\t\tfield1:'value',\n  *\t\t\t\t\t\t\t...\n  *\t\t\t\t\t\t}\n  * @param {array} fields an Array of multilingual fields to pull from \n  *\t\t\t\t\t\t the obj[field] value.\n  *\n  */\n\tunTranslate: function unTranslate(obj, json, fields) {\n\n\t\tjson = json || {};\n\t\tfields = fields || [];\n\n\t\tif (!json.translations) {\n\t\t\tjson.translations = [];\n\t\t}\n\n\t\tvar currLanguage = AD.lang.currentLanguage || 'en';\n\n\t\tif (fields && fields.length > 0) {\n\n\t\t\tvar foundOne = false;\n\n\t\t\tjson.translations.forEach(function (t) {\n\t\t\t\t// find the translation for the current language code\n\t\t\t\tif (t.language_code == currLanguage) {\n\n\t\t\t\t\t// copy each field to the root object\n\t\t\t\t\tfields.forEach(function (f) {\n\t\t\t\t\t\tt[f] = obj[f];\n\t\t\t\t\t});\n\n\t\t\t\t\tfoundOne = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// if we didn't update an existing translation\n\t\t\tif (!foundOne) {\n\n\t\t\t\t// create a translation entry:\n\t\t\t\tvar trans = {};\n\n\t\t\t\t// assume current languageCode:\n\t\t\t\ttrans.language_code = currLanguage;\n\n\t\t\t\tfields.forEach(function (field) {\n\t\t\t\t\tif (obj[field] != null) {\n\t\t\t\t\t\ttrans[field] = obj[field];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tjson.translations.push(trans);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = {\n\n\tuuid: AD.util.uuid\n\n};\n\n/***/ }),\n/* 9 */,\n/* 10 */,\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _form = __webpack_require__(5);\n\nvar _form2 = _interopRequireDefault(_form);\n\nvar _multilingual = __webpack_require__(7);\n\nvar _multilingual2 = _interopRequireDefault(_multilingual);\n\nvar _model = __webpack_require__(6);\n\nvar _model2 = _interopRequireDefault(_model);\n\nvar _util = __webpack_require__(8);\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _config = __webpack_require__(4);\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.OP = {};\n\n// OP.xxxx      These properties hold the defined Class/Controller/Model definitions\n//              for our loaded projects.\n// OP.UI = {};    \t\t// webix UI definitions\n// OP.Logic = {}; \t\t// logic references for webix application\n\n/**\n * @class AD_Client\n * @parent index 4\n *\n * ###Client side global OpsPortal (OP) namespace.\n *\n * This file defines standard functions and calls for OpsPortal\n * objects on the client side.\n */\n\n// Create our OP  Namespace only if it hasn't been created already\n\n//// TODO: how to disable 'use strict'?  or perform this check without an error\n//// in 'use strict' ?\n\n// if (!window.OP) {\nOP.Component = {}; // our defined components\n\nOP.CustomComponent = {}; // separate holder for Webix Custom Components\n\n\n// OP.UI.extend = function(key, definition) {\n// \tOP.UI[key] = definition;\n// }\n\nOP.Component.extend = function (key, fn) {\n\tOP.Component[key] = function (App) {\n\n\t\t//// TODO: verify App has proper structure:\n\t\tif (!App) {\n\t\t\tApp = OP.Component._newApp();\n\t\t}\n\n\t\t// make an instance of the component.\n\t\tvar component = fn(App);\n\n\t\t// transfer to App, any actions in the component:\n\t\tif (component.actions) {\n\t\t\tfor (var a in component.actions) {\n\t\t\t\tApp.actions[a] = component.actions[a];\n\t\t\t}\n\t\t}\n\n\t\treturn component;\n\t};\n};\n\nOP.Component._newApp = function () {\n\treturn {\n\n\t\tuuid: webix.uid(),\n\n\t\t/*\n   * actions:\n   * a hash of exposed application methods that are shared among our\n   * components, so one component can invoke an action that updates\n   * another component.\n   */\n\t\tactions: {},\n\n\t\t/*\n   * config\n   * webix configuration settings for our current browser\n   */\n\t\tconfig: _config2.default.config(),\n\n\t\t/*\n   * custom\n   * a collection of custom components for this App Instance.\n   */\n\t\tcustom: {},\n\n\t\t/*\n   * labels\n   * a collection of labels that are common for the Application.\n   */\n\t\tlabels: {},\n\n\t\t/*\n   * unique()\n   * A function that returns a globally unique Key.\n   * @param {string} key   The key to modify and return.\n   * @return {string}\n   */\n\t\tunique: function unique(key) {\n\t\t\treturn key + this.uuid;\n\t\t}\n\n\t};\n};\n\nOP.CustomComponent.extend = function (key, fn) {\n\tOP.CustomComponent[key] = function (App, key) {\n\n\t\tif (!App) {\n\t\t\tApp = OP.Component._newApp();\n\t\t}\n\n\t\t// make an instance of the component.\n\t\treturn fn(App, key);\n\t};\n};\n\nOP.Dialog = AD.op.Dialog;\n\nOP.Error = AD.error;\n\nOP.Form = _form2.default;\n\nOP.Multilingual = _multilingual2.default;\nOP.Model = _model2.default;\n\nOP.Util = _util2.default;\n\nexports.default = OP;\n// }\n\n\n// import \"./model.js\"\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n/**\n * @class configDesktop\n *\n * Manage our configuration settings for Desktop styles.\n\n */\n\nexports.default = {\n\n\t// Application List\n\tappListRowHeight: 70,\n\n\t// button types\n\tbuttonWidthLarge: 200,\n\tbuttonWidthMedium: 150,\n\tbuttonWidthSmall: 100,\n\tbuttonWidthExtraSmall: 50,\n\n\t// tab types\n\ttabWidthLarge: 200,\n\ttabWidthMedium: 120,\n\ttabWidthSmall: 100,\n\ttabWidthExtraSmall: 50,\n\n\t// column types\n\n\n\t// spacers\n\tsmallSpacer: 10,\n\tmediumSpacer: 25,\n\tlargeSpacer: 50,\n\tappListSpacerRowHeight: 100,\n\tappListSpacerColMinWidth: 100,\n\tappListSpacerColMaxWidth: 200,\n\tobjectWorkspaceColWidth: 20,\n\n\t// labels\n\tlabelWidthSmall: 50,\n\tlabelWidthMedium: 80,\n\tlabelWidthLarge: 150,\n\tlabelWidthCheckbox: 0,\n\n\t// show elements on desktop\n\thideMobile: false\n\n};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n/**\n * @class configMobile\n *\n * Manage our configuration settings for mobile styles.\n\n */\n\nexports.default = {\n\n\t// Application List\n\tappListRowHeight: 70,\n\n\t// button types\n\tbuttonWidthLarge: 200,\n\n\t// column types\n\n\n\t// spacers\n\tsmallSpacer: 1,\n\tmediumSpacer: 10,\n\tlargeSpacer: 20,\n\tappListSpacerRowHeight: 10,\n\tappListSpacerColMinWidth: 1,\n\tappListSpacerColMaxWidth: 1,\n\tobjectWorkspaceColWidth: 1,\n\n\t// labels\n\tlabelWidthSmall: 50,\n\tlabelWidthMedium: 80,\n\tlabelWidthLarge: 120,\n\tlabelWidthCheckbox: 0,\n\n\t// hide elements for mobile\n\thideMobile: true\n\n};\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=OP_Bundle.js.map\n\n\n// WEBPACK FOOTER //\n// /home/pong/Desktop/AppBuilder/~/app_builder/assets/opstools/BuildApp/OP_Bundle.js","// Import App builder dependencies\nimport '../../BuildApp/OP_Bundle'\nimport '../../BuildApp/BuildApp'\n\n// Import component test cases\nimport './components/ab_work_object_list_popupEditMenu'\n\n\n// WEBPACK FOOTER //\n// ./test_app_builder.js"],"sourceRoot":""}