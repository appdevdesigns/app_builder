{"version":3,"sources":["webpack:///webpack/bootstrap 4c28d35c1c1d858da77e","webpack:///../classes/dataFields/ABField.js","webpack:///../classes/dataFields/ABFieldComponent.js","webpack:///./components/ab_work_object_list_newObject.js","webpack:///./components/ab_work_object_list_popupEditMenu.js","webpack:///../classes/ABApplication.js","webpack:///../classes/ABFieldManager.js","webpack:///../classes/ABModel.js","webpack:///../classes/ABObject.js","webpack:///../classes/dataFields/ABFieldDate.js","webpack:///../classes/dataFields/ABFieldImage.js","webpack:///../classes/dataFields/ABFieldNumber.js","webpack:///../classes/dataFields/ABFieldString.js","webpack:///../data/ABApplication.js","webpack:///./test_app_builder.js"],"names":["L","key","altText","AD","lang","label","getLabel","ABField","values","object","fieldDefaults","defaults","fromValues","OP","Multilingual","translate","icon","menuName","description","errors","isNameUnique","fields","f","isDifferent","id","columnName","toLowerCase","length","Form","validationError","name","message","replace","Promise","resolve","reject","migrateDrop","then","fieldRemove","catch","isAdd","Util","uuid","fieldSave","migrateCreate","err","unTranslate","settings","translations","fieldKey","fieldIcon","showIcon","parseInt","url","application","Comm","Service","post","isObjectWorkspace","config","header","ids","defaultValues","component","$$","setValue","field","App","_logic","Field","onChange","newVal","oldVal","getValue","labelOnChange","_ui","rows","view","labels","dataFieldHeaderLabel","placeholder","dataFieldHeaderLabelPlaceholder","labelWidth","labelWidthMedium","css","on","dataFieldColumnName","dataFieldColumnNamePlaceholder","fieldDescription","align","labelRight","dataFieldShowIcon","labelWidthCheckbox","value","obj","ABFieldComponent","options","elements","rules","logic","init","idBase","unique","eachDeep","e","i","autoheight","borderless","webix","isNotEmpty","_init","clear","clearEditor","console","warn","clearValidation","hide","isValid","validate","populate","editorPopulate","show","a","b","getValues","editorValues","l","commonUI","definitionEditor","concat","r","_component","ui","list","fn","forEach","cols","describe","sandbox","componentName","mockApp","target","before","Component","_newApp","beforeEach","sinon","create","afterEach","restore","it","assert","isDefined","equal","spyWebixUi","spy","callbacks","onDone","calledOnce","calledWith","applicationLoad","stubAlert","stub","Dialog","newObjectValues","callback","result","save","isFalse","sampleApp","json","spyObjectNew","sampleObject","isNull","menuItems","body","data","labelRename","rename","labelDelete","command","itemClickFn","onItemClick","spyLogicItemClick","itemClickParam","textContent","spyLogicHide","onClick","action","log","spyCallbacks","spyHide","_AllApplications","toDC","DataCollection","toArray","DC","ary","getFirstId","element","getItem","push","getNextId","ABApplication","attributes","role","fieldsMultilingual","newObjects","objects","_objects","Model","get","Models","destroy","remove","toObj","update","updateItem","add","currObjects","permItems","comm","service","put","roles","fail","done","delete","filter","remaininObjects","o","isIncluded","ModelApplication","findAll","newApp","app","op","arrayApplications","nameMatch","trim","matchingApps","Fields","allFields","newField","ABModel","_where","_skip","_limit","cond","newCond","where","modelURL","params","mlFields","multilingualFields","d","DT","define","attachEvent","start","count","limit","skip","parse","refresh","error","ABObject","labelFormat","isImported","urlPath","importFromObject","objectWorkspace","hiddenFields","frozenColumnID","newFields","fieldNew","_fields","fieldDrops","all","objectDestroy","objectSave","currFields","found","isMultilingual","headers","idLookup","columnHeader","h","adjust","workspaceHiddenFields","hfID","hidden","ABFieldDateDefaults","default","currentToDefault","dateDisplay","dayOrder","monthOrder","yearOrder","dayFormat","monthFormat","yearFormat","dayDelimiter","monthDelimiter","yearDelimiter","delimiterList","sign","getDelimiterSign","text","delimiterItem","item","getDateFormat","setting","momentFormat","moment","Date","format","refreshDateDisplay","dateFormat","ABFieldDateComponent","timepicker","disabled","disable","enable","multi","collapsed","newValue","oldValue","vertical","ABFieldDate","editor","sort","ABFieldImageDefaults","ABFieldImageComponent","imageWidth","imageHeight","idsUnique","width","click","ABFieldImage","dv","useWidth","useHeight","removeExistingData","Confirm","title","Alert","ABFieldNumberDefaults","formatList","position","ABFieldNumberComponent","typeDecimalPlaces","typeRounding","validateMinimum","validateMaximum","labelWidthLarge","RegExp","test","validation","ABFieldNumber","allowRequired","editors","number","extend","ABFieldStringDefaults","ABFieldStringComponent","ABFieldString","textDefault","supportMultilingual","useSockets","restURL"],"mappings":"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","file":"test_app_builder.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4c28d35c1c1d858da77e","/*\n * ABField\n *\n * An ABField defines a single unique Field/Column in a ABObject.\n *\n */\n\n// import OP from \"../../OP/OP\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nexport default class ABField {\n\n    constructor(values, object, fieldDefaults) {\n\n    \t// NOTE: setup this first so later we can use .fieldType(), .fieldIcon()\n    \tthis.defaults = fieldDefaults;\n\n\n    \t/*\n  \t\t{\n  \t\t\tid:'uuid',\t\t\t\t\t// uuid value for this obj\n  \t\t\tkey:'fieldKey',\t\t\t\t// unique key for this Field\n  \t\t\ticon:'font',\t\t\t\t// fa-[icon] reference for an icon for this Field Type\n  \t\t\tlabel:'',\t\t\t\t\t// pulled from translation\n\t\t\tcolumnName:'column_name',\t// a valid mysql table.column name\n\t\t\tsettings: {\t\t\t\t\t// unique settings for the type of field\n\t\t\t\tshowIcon:true/false,\t// only useful in Object Workspace DataTable\n\n\t\t\t\t// specific for dataField\n\t\t\t},\n\t\t\ttranslations:[]\n  \t\t}\n  \t\t*/\n  \t\tthis.fromValues(values);\n\n\n\n    \t// label is a multilingual value:\n    \tOP.Multilingual.translate(this, this, ['label']);\n\n\n    \tthis.object = object;\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n  \tstatic clearEditor( ids) {\n\n  \t\tvar defaultValues = {\n  \t\t\tlabel: '',\n  \t\t\tcolumnName:'',\n  \t\t\tshowIcon:1\n  \t\t}\n\n  \t\tfor(var f in defaultValues) {\n\t\t\tvar component = $$(ids[f]);\n\t\t\tcomponent.setValue(defaultValues[f]);\n\t\t}\n  \t}\n\n\n  \tstatic editorPopulate( ids, field ) {\n\n  \t\t$$(ids.label).setValue(field.label);\n  \t\t$$(ids.columnName).setValue(field.columnName);\n  \t\t$$(ids.showIcon).setValue(field.settings.showIcon);\n\n  \t}\n\n\n\t/**\n\t * @function definitionEditor\n\t *\n\t * Many DataFields share some base information for their usage\n\t * in the AppBuilder.  The UI Editors have a common header\n\t * and footer format, and this function allows child DataFields\n\t * to not have to define those over and over.\n\t *\n\t * The common layout header contains:\n\t *\t\t[Menu Label]\n\t *\t\t[textBox: labelName]\n\t *\t\t[text:    description]\n\t *\n\t * The defined DataField UI will be added at the end of this.\n\t *\n\t * This routine actually updated the live DataField definition\n\t * with the common header info.\n\t *\n\t * @param {DataField} field  The DataField object to work with.\n\t */\n  \tstatic definitionEditor( App, ids, _logic, Field ) {\n\n/// TODO: maybe just pass in onChange instead of _logic\n/// if not onChange, then use our default:\n\n  \t\t// setup our default labelOnChange functionality:\n  \t\tvar onChange = function (newVal, oldVal) {\n\n  \t\t\toldVal = oldVal || '';\n\n\t\t\tif (newVal != oldVal &&\n\t\t\t\toldVal == $$(ids.columnName).getValue()) {\n\t\t\t\t$$(ids.columnName).setValue(newVal);\n\t\t\t}\n\t\t}\n\n\t\t// if they provided a labelOnChange() override, use that:\n\t\tif (_logic.labelOnChange) {\n\t\t\tonChange = _logic.labelOnChange;\n\t\t}\n\n\n  \t\tvar _ui = {\n\t\t\t// id: ids.component,\n\t\t\trows: [\n\t\t\t\t// {\n\t\t\t\t// \tview: \"label\",\n\t\t\t\t// \tlabel: \"<span class='webix_icon fa-{0}'></span>{1}\".replace('{0}', Field.icon).replace('{1}', Field.menuName)\n\t\t\t\t// },\n\t\t\t\t{\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tid: ids.label,\n\t\t\t\t\tname:'label',\n\t\t\t\t\tlabel: App.labels.dataFieldHeaderLabel,\n\t\t\t\t\tplaceholder: App.labels.dataFieldHeaderLabelPlaceholder,\n\t\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\t\tcss: 'ab-new-label-name',\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\t\tonChange(newVal, oldVal);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tid: ids.columnName,\n\t\t\t\t\tname:'columnName',\n\t\t\t\t\tlabel: App.labels.dataFieldColumnName, // 'Name',\n\t\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\t\tplaceholder: App.labels.dataFieldColumnNamePlaceholder, // 'Column name',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tid: ids.fieldDescription,\n\t\t\t\t\tlabel: Field.description,\n\t\t\t\t\talign: \"right\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: 'checkbox',\n\t\t\t\t\tid: ids.showIcon,\n\t\t\t\t\tname:'showIcon',\n\t\t\t\t\tlabelRight: App.labels.dataFieldShowIcon, // 'Show icon',\n\t\t\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\t\t\tvalue:true\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\n  \t\treturn _ui;\n  \t}\n\n\n  \tstatic editorValues (settings) {\n\n  \t\tvar obj = {\n  \t\t\tlabel: settings.label,\n  \t\t\tcolumnName: settings.columnName,\n  \t\t\tsettings:settings\n  \t\t}\n\n  \t\tdelete settings.label;\n  \t\tdelete settings.columnName;\n\n  \t\treturn obj;\n  \t}\n\n\n  \t// unique key to reference this specific DataField\n  \tfieldKey() {\n  \t\treturn this.defaults.key;\n  \t}\n\n  \t// font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\n  \tfieldIcon() {\n  \t\treturn this.defaults.icon;\n  \t}\n\n  \t// the multilingual text for the name of this data field.\n  \tfieldMenuName() {\n  \t\treturn this.defaults.menuName;\n  \t}\n\n  \t// the multilingual text for the name of this data field.\n  \tfieldDescription() {\n  \t\treturn this.defaults.description;\n  \t}\n\n\n\n  \t/*\n  \t * @method isValid\n  \t * check the current values to make sure they are valid.\n  \t * Here we check the default values provided by ABField.\n  \t *\n  \t * @return null or [{OP.Form.validationError()}] objects.\n  \t */\n\tisValid() {\n\n\t\tvar errors = null;\n\n\t\t// .columnName must be unique among fileds on the same object\n\t\tvar isNameUnique = (this.object.fields((f)=>{\n\t\t\tvar isDifferent = (f.id != this.id);\n\t\t\treturn (f.id != this.id)\n\t\t\t\t\t&& (f.columnName.toLowerCase() == this.columnName.toLowerCase() );\n\t\t}).length == 0);\n\t\tif (!isNameUnique) {\n\t\t\terrors = OP.Form.validationError({\n\t\t\t\tname:'columnName',\n\t\t\t\tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.columnName),\n\t\t\t}, errors);\n\t\t}\n\n\t\treturn errors;\n\t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\t/// ABApplication data methods\n\n\n\t/**\n\t * @method destroy()\n\t *\n\t * destroy the current instance of ABApplication\n\t *\n\t * also remove it from our _AllApplications\n\t *\n\t * @return {Promise}\n\t */\n\tdestroy () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\t// verify we have been .save()d before:\n\t\t\t\tif (this.id) {\n\n\t\t\t\t\t// NOTE: our .migrateXXX() routines expect the object to currently exist\n\t\t\t\t\t// in the DB before we perform the DB operations.  So we need to\n\t\t\t\t\t// .migrateDrop()  before we actually .objectDestroy() this.\n\t\t\t\t\tthis.migrateDrop()\n\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\treturn this.object.fieldRemove(this);\n\t\t\t\t\t})\n\t\t\t\t\t.then(resolve)\n\t\t\t\t\t.catch(reject)\n\n\t\t\t\t} else {\n\n\t\t\t\t\tresolve();  // nothing to do really\n\t\t\t\t}\n\n\t\t\t}\n\t\t)\n\n\t}\n\n\n\t/**\n\t * @method save()\n\t *\n\t * persist this instance of ABField with it's parent ABObject\n\t *\n\t *\n\t * @return {Promise}\n\t *\t\t\t\t\t\t.resolve( {this} )\n\t */\n\tsave () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar isAdd = false;\n\t\t\t\t// if this is our initial save()\n\t\t\t\tif (!this.id) {\n\t\t\t\t\tisAdd = true;\n\t\t\t\t\tthis.id = OP.Util.uuid();\t// setup default .id\n\t\t\t\t}\n\n\n\t\t\t\tthis.object.fieldSave(this)\n\t\t\t\t.then(() => {\n\n\t\t\t\t\tif (isAdd) {\n\n\t\t\t\t\t\tthis.migrateCreate()\n\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\tresolve(this);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(reject);\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(this);\n\t\t\t\t\t}\n\n\t\t\t\t})\n\t\t\t\t.catch(function(err){\n\t\t\t\t\treject(err);\n\t\t\t\t})\n\t\t\t}\n\t\t)\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABField instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * @return {json}\n\t */\n\ttoObj () {\n\n\t\t// store \"label\" in our translations\n\t\tOP.Multilingual.unTranslate(this, this, [\"label\"]);\n\n\t\treturn {\n\t\t\tid : this.id,\n\t\t\tkey : this.key,\n\t\t\ticon : this.icon,\n\t\t\tcolumnName: this.columnName,\n\t\t\tsettings: this.settings,\n\t\t\ttranslations:this.translations\n\t\t}\n\t}\n\n\n\t/**\n\t * @method fromValues()\n\t *\n\t * initialze this object with the given set of values.\n\t * @param {obj} values\n\t */\n\tfromValues (values) {\n\n \t\tthis.id = values.id;\t\t\t// NOTE: only exists after .save()\n    \tthis.key = values.key || this.fieldKey();\n    \tthis.icon = values.icon || this.fieldIcon();\n\n    \t// if this is being instantiated on a read from the Property UI,\n    \t// .label is coming in under .settings.label\n    \tthis.label = values.label || values.settings.label || '?label?';\n\n    \tthis.columnName = values.columnName || '';\n    \tthis.translations = values.translations || [];\n\n    \tthis.settings = values.settings || {};\n    \tthis.settings.showIcon = values.settings.showIcon+\"\" || \"1\";\n\n\n    \t// convert from \"0\" => 0\n    \tthis.settings.showIcon = parseInt(this.settings.showIcon);\n\t}\n\n\n\n\t///\n\t/// DB Migrations\n\t///\n\n\tmigrateCreate() {\n\t\tvar url = '/app_builder/migrate/application/#appID#/object/#objID#/field/#fieldID#'\n\t\t\t.replace('#appID#', this.object.application.id)\n\t\t\t.replace('#objID#', this.object.id)\n\t\t\t.replace('#fieldID#', this.id)\n\n\t\treturn OP.Comm.Service.post({\n\t\t\turl: url\n\t\t})\n\t}\n\n\n\tmigrateDrop() {\n\t\tvar url = '/app_builder/migrate/application/#appID#/object/#objID#/field/#fieldID#'\n\t\t\t.replace('#appID#', this.object.application.id)\n\t\t\t.replace('#objID#', this.object.id)\n\t\t\t.replace('#fieldID#', this.id)\n\n\t\treturn OP.Comm.Service['delete']({\n\t\t\turl: url\n\t\t})\n\t}\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t/*\n\t * @function columnHeader\n\t * Return the column header for a webix grid component for this specific\n\t * data field.\n\t * @param {bool} isObjectWorkspace is this being used in the Object\n\t *\t\t\t\t\t\t\t\t   workspace.\n\t * @return {obj}  configuration obj\n\t */\n\tcolumnHeader (isObjectWorkspace) {\n\n\t\tvar config = {\n\t\t\tid: this.columnName, // this.id,\n\t\t\theader: this.label,\n\t\t}\n\n\t\tif (isObjectWorkspace) {\n\t\t\tif (this.settings.showIcon) {\n\t\t\t\tconfig.header = '<span class=\"webix_icon fa-{icon}\"></span>'.replace('{icon}', this.fieldIcon() ) + config.header;\n\t\t\t}\n\t\t}\n\n\t\treturn config;\n\t}\n\n\n\n\t/*\n\t * @function isMultilingual\n\t * does this field represent multilingual data?\n\t * @return {bool}\n\t */\n\tisMultilingual() {\n\t\treturn false;\n\t}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ../classes/dataFields/ABField.js","/* \n * ABFieldComponent\n * \n * An ABFieldComponent defines the UI component used by an ABField to display it's properties.\n *\n */\n\nimport ABField from \"./ABField\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nexport default class ABFieldComponent {\n\n\n    constructor(options) {\n\n    \tthis.options = options;\n\n    \tthis.fieldDefaults = options.fieldDefaults || {};\n\n    \tthis.elements = options.elements || function (App) { return []; } ;\n\n    \tthis.defaultValues = options.defaultValues || {};\n\n    \tthis.rules = options.rules || {};\n\n    \tthis.logic = options.logic || {};\n\n    \tthis.init = options.init || function() {};\n\n\n\n    \tthis.idBase = this.fieldDefaults.key || '??fieldKey??';\n\n    \t// this.ids = options.ids || {};\n    \tthis.ids = {};\n\n    \t\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\tcomponent (App) {\n\n\t\t// for each provided element: create an this.ids for it:\n    \tvar elements = this.elements(App, this);\n\n\n    \t////\n    \t//// prepare our ids\n    \t////\n\n\t\tvar ids = {\n\n\t\t\tcomponent: App.unique(this.idBase+'_component'),\n\n\t\t\t// the common property fields\n\t\t\tlabel: App.unique(this.idBase+'_label'),\n\t\t\tcolumnName: App.unique(this.idBase+'_columnName'),\n\t\t\tfieldDescription: App.unique(this.idBase+'_fieldDescription'),\n\t\t\tshowIcon: App.unique(this.idBase+'_showIcon'),\n\t\t}\n\n    \tthis.eachDeep(elements, (e) => {\n    \t\tif (e.name) {\n    \t\t\t// if element has an .id, then use it in our list as is\n    \t\t\tif (e.id) {\n    \t\t\t\tids[e.name] = e.id;\n    \t\t\t}\n\n    \t\t\t// otherwise create a new entry in our base list\n    \t\t\tthis.ids[e.name] = e.name;\n    \t\t}\n    \t})\n\n\n\t\t// convert the entries in our base list into a globally acceptable id\n\t\t// and use that in our ids list if it doesn't already exist\n\t\tfor (var i in this.ids) {\n\t\t\tif (!ids[i]) {\n\t\t\t\tids[i] = App.unique(this.idBase+'_'+i);\n\t\t\t}\n\t\t}\n\n\t\t// update our elements to include our ids as we have them now.\n\t\tthis.eachDeep(elements, (e) => {\n    \t\tif (e.name) {\n    \t\t\te.id = ids[e.name];\n    \t\t}\n    \t})\n\n\n\t\t////\n\t\t//// our UI definition:\n\t\t////\n\n\t\t// our base form:\n\t\tvar _ui = {\n\t\t\tview:'form',\n\t\t\tid: ids.component,\n\t\t\tautoheight:true,\n\t\t\tborderless:true,\n\t\t\telements: [\n\t\t\t\t// {\n\t\t\t\t// \tview: \"text\",\n\t\t\t\t// \tid: ids.textDefault,\n\t\t\t\t// \tname:'textDefault',\n\t\t\t\t// \tplaceholder: labels.component.defaultText\n\t\t\t\t// },\n\t\t\t\t// {\n\t\t\t\t// \tview: \"checkbox\",\n\t\t\t\t// \tid: ids.supportMultilingual,\n\t\t\t\t// \tname:'supportMultilingual',\n\t\t\t\t// \tlabelRight: labels.component.supportMultilingual,\n\t\t\t\t// \tlabelWidth: 0,\n\t\t\t\t// \tvalue: true\n\t\t\t\t// }\n\t\t\t],\n\n\t\t\trules:{\n\t\t\t\t'label':webix.rules.isNotEmpty,\n\t\t\t\t'columnName':webix.rules.isNotEmpty\n\t\t\t}\n\t\t}\n\n\n\n\t\tvar _init = function() {\n\n\t\t\t// call our provided .init() routine\n\t\t\tthis.init(ids);\n\t\t}\n\n\n\n\t\tvar _logic = {\n\n\t\t\t/*\n\t\t\t * @function clear\n\t\t\t *\n\t\t\t * clear the form.\n\t\t\t */\n\t\t\tclear: () => {\n\n\t\t\t\tABField.clearEditor( ids );\n\n\t\t\t\tfor(var f in this.defaultValues) { \n\t\t\t\t\tvar component = $$(ids[f]);\n\t\t\t\t\tif(component) {\n\t\t\t\t\t\tcomponent.setValue(this.defaultValues[f]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn('!! could not find component for default value: name:'+f+' id:'+ids[f]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$$(ids.component).clearValidation();\n\n\n\t\t\t\t// perform provided .clear()\n\t\t\t\tif (this.logic.clear) {\n\t\t\t\t\tthis.logic.clear(ids);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function hide\n\t\t\t *\n\t\t\t * hide this component.\n\t\t\t */\n\t\t\thide: () => {\n\t\t\t\t$$(ids.component).clearValidation();\n\t\t\t\t$$(ids.component).hide( false, false);\n\n\t\t\t\t// perform provided .hide()\n\t\t\t\tif (this.logic.hide) {\n\t\t\t\t\tthis.logic.hide(ids)\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function isValid\n\t\t\t *\n\t\t\t * checks the current values on the componet to see if they are Valid\n\t\t\t */\n\t\t\tisValid: () => {\n\n\t\t\t\tvar isValid = $$(ids.component).validate();\n\n\t\t\t\t// perform provided .isValid()\n\t\t\t\tif (this.logic.isValid) {\n\t\t\t\t\tisValid = this.logic.isValid(ids, isValid);\n\t\t\t\t}\n\n\t\t\t\treturn isValid;\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function labelOnChange\n\t\t\t *\n\t\t\t * The ABField.definitionEditor implements a default operation\n\t\t\t * to update the value of the .columnName with the current value of \n\t\t\t * label.\n\t\t\t * \n\t\t\t * if you want to override that functionality, implement this fn()\n\t\t\t *\n\t\t\t * @param {string} newVal\tThe new value of label\n\t\t\t * @param {string} oldVal\tThe previous value\n\t\t\t */\n\t\t\t// labelOnChange: function (newVal, oldVal) {\n\n\t\t\t// \t// When the Label value changes, update our Column Name value \n\t\t\t// \t// to match.\n\n\t\t\t// \toldVal = oldVal || '';\n\t\t\t// \tif (newVal != oldVal &&\n\t\t\t// \t\toldVal == $$(ids.columnName).getValue()) {\n\t\t\t// \t\t$$(ids.columnName).setValue(newVal);\n\t\t\t// \t}\n\t\t\t// },\n\n\n\t\t\t/*\n\t\t\t * @function populate\n\t\t\t *\n\t\t\t * populate the form with the given ABField instance provided.\n\t\t\t *\n\t\t\t * @param {ABField} field\n\t\t\t */\n\t\t\tpopulate: (field) => {\n\n\t\t\t\t// populate the base ABField values:\n\t\t\t\tABField.editorPopulate(ids, field);\n\n\t\t\t\tthis.eachDeep(elements, function(e){\n\t\t\t\t\tif (e.name != null) {\n\t\t\t\t\t\t$$(ids[e.name]).setValue(field.settings[e.name]);\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\t// perform provided .populate()\n\t\t\t\tif (this.logic.populate) {\n\t\t\t\t\tthis.logic.populate(ids, field);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function show\n\t\t\t *\n\t\t\t * show this component.\n\t\t\t */\n\t\t\tshow: (a, b) => {\n\t\t\t\t$$(ids.component).clearValidation();\n\t\t\t\t$$(ids.component).show(a, b);\n\n\t\t\t\t// perform provided .show()\n\t\t\t\tif (this.logic.show) {\n\t\t\t\t\tthis.logic.show(ids)\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * @function values\n\t\t\t *\n\t\t\t * return the values for this form.\n\t\t\t * @return {obj}  \n\t\t\t */\n\t\t\tvalues: () => {\n\n\t\t\t\tvar settings = $$(ids.component).getValues();\n\t\t\t\tvar values = ABField.editorValues(settings);\n\n\t\t\t\tvalues.key = this.fieldDefaults.key;\n\t\t\n\t\t\t\t// perform provided .values()\n\t\t\t\tif (this.logic.values) {\n\t\t\t\t\tvalues = this.logic.values(ids, values)\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t}\n\n\t\t}\n\n\t\t// apply additional logic functions:\n\t\tfor (var l in this.logic) {\n\t\t\tif (!_logic[l]) _logic[l] = this.logic[l];\n\t\t}\n\n\n\t\t// make sure our given elements, have an id set:\n\n\n\t\t// get the common UI headers entries, and insert them above ours here:\n\t\t// NOTE: put this here so that _logic is defined.\n\t\tvar commonUI = ABField.definitionEditor(App, ids, _logic, this.fieldDefaults);\n\t\t_ui.elements = commonUI.rows.concat(elements);\n\n\t\tfor (var r in this.rules) {\n\t\t\t_ui.rules[r] = this.rules[r];\n\t\t}\n\n\n\t\t// return the current instance of this component:\n\t\treturn this._component = {\n\t\t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n\t\t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component  \n\t\t\t// actions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t\t// DataField exposed actions:\n\t\t\tclear: _logic.clear,\n\t\t\thide: _logic.hide,\n\t\t\tisValid:_logic.isValid,\n\t\t\tpopulate: _logic.populate,\n\t\t\tshow: _logic.show,\n\t\t\tvalues: _logic.values,\n\n\n\t\t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n\t\t}\n\t}\n\n\n\n\t/**\n\t * @function eachDeep\n\t * a depth first fn to apply fn() to each element of our list.\n\t * @param {array} list  array of webix elements to scan\n\t * @param {fn} fn function to apply to each element.\n\t */\n\teachDeep(list, fn) {\n\t\tlist.forEach((e) => {\n\n\t\t\t// process sub columns\n\t\t\tif (e.cols) {\n\t\t\t\tthis.eachDeep(e.cols, fn);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// or rows\n\t\t\tif (e.rows) {\n\t\t\t\tthis.eachDeep(e.rows, fn);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// or just process this element:\n\t\t\tfn(e)\n\t\t})\n\t}\n\n\n\tidsUnique(ids, App) {\n\n\t\tfor (var i in ids) {\n\t\t\tif (ids[i] == '') {\n\t\t\t\tids[i] = App.unique(this.idBase+'_'+i)\n\t\t\t} else {\n\t\t\t\tids[i] = App.unique(this.idBase+'_'+ids[i])\n\t\t\t}\n\t\t}\n\t\treturn ids;\n\t}\n\n\t// populate(field) {\n\t// \tthis._component.populate(field);\n\t// }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ../classes/dataFields/ABFieldComponent.js","import ABApplication from \"../../classes/ABApplication\"\n\ndescribe('ab_work_object_list_newObject component', () => {\n\n\tvar sandbox;\n\n\tvar componentName = 'ab_work_object_list_newObject';\n\tvar mockApp;\n\tvar target;\n\n\tbefore(() => {\n\t\tmockApp = OP.Component._newApp();\n\n\t\tOP.Component['ab'](mockApp);\n\n\t\ttarget = OP.Component[componentName](mockApp);\n\t});\n\n\tbeforeEach(function () {\n\t\tsandbox = sinon.sandbox.create();\n\t});\n\n\tafterEach(function () {\n\t\tsandbox.restore();\n\t});\n\n\tit('should exist component', () => {\n\t\tassert.isDefined(target);\n\t});\n\n\t// UI test cases\n\tdescribe('UI testing', () => {\n\n\t\tit('should have ui setting', () => {\n\t\t\tassert.isDefined(target.ui, \"should have a ui property\");\n\t\t});\n\n\t\tit(\"should be webix's window\", () => {\n\t\t\tassert.equal(target.ui.view, \"window\");\n\t\t});\n\n\t});\n\n\n\t// Init test cases\n\tdescribe('Init testing', () => {\n\t\tit(\"should exist init property\", () => {\n\t\t\tassert.isDefined(target.init, \"should have a init property\");\n\t\t});\n\n\t\tit(\"should create webix ui\", () => {\n\t\t\tlet spyWebixUi = sandbox.spy(webix, 'ui');\n\n\t\t\t// Call init\n\t\t\tlet callbacks = { onDone: function () { } };\n\t\t\ttarget.init(callbacks);\n\n\t\t\t// Assert call webix.ui once and pass .ui of this component to webix.ui()\n\t\t\tsinon.assert.calledOnce(spyWebixUi);\n\t\t\tsinon.assert.calledWith(spyWebixUi, target.ui);\n\t\t});\n\n\n\t});\n\n\n\t// Actions test cases\n\tdescribe('Actions testing', () => {\n\t});\n\n\n\t// Logic test cases\n\tdescribe('Logic testing', () => {\n\t\tit('.applicationLoad: should exist', () => {\n\t\t\tassert.isDefined(target.applicationLoad);\n\t\t\tassert.equal(target.applicationLoad, target._logic.applicationLoad);\n\t\t});\n\n\t\tit('.show: should exist', () => {\n\t\t\tassert.isDefined(target.show);\n\t\t\tassert.equal(target.show, target._logic.show);\n\t\t});\n\n\t\tit('.hide: should exist', () => {\n\t\t\tassert.isDefined(target._logic.hide);\n\t\t});\n\n\t\tit('.save: should show a alert box when currentApplication is null', () => {\n\t\t\t// Use stub instead of spy to avoid show alert popup\n\t\t\tlet stubAlert = sinon.stub(OP.Dialog, 'Alert', function () { });\n\n\t\t\tlet newObjectValues = {};\n\t\t\tlet callback = function (err) {\n\t\t\t\t// Assert it should return error in callback\n\t\t\t\tassert.isDefined(err);\n\t\t\t};\n\n\t\t\t// Call save object\n\t\t\tlet result = target._logic.save(newObjectValues, callback);\n\n\t\t\tassert.isFalse(result);\n\t\t\tsinon.assert.calledOnce(stubAlert);\n\t\t});\n\n\t\tit('.save: should create a new object to current application', () => {\n\t\t\tvar sampleApp = new ABApplication({\n\t\t\t\tid: 999,\n\t\t\t\tname: \"Test Application\",\n\t\t\t\tjson: {}\n\t\t\t});\n\n\t\t\t// Load a example application to component\n\t\t\ttarget.applicationLoad(sampleApp);\n\n\t\t\tlet spyObjectNew = sinon.spy(sampleApp, \"objectNew\");\n\t\t\tlet sampleObject = {};\n\t\t\tlet callback = function (err) {\n\t\t\t\t// Assert it should not return any error in callback\n\t\t\t\tassert.isNull(err);\n\t\t\t};\n\t\t\tlet result = target._logic.save(sampleObject, callback)\n\n\t\t\tsinon.assert.calledOnce(spyObjectNew);\n\t\t});\n\t});\n\n\n});\n\n\n// WEBPACK FOOTER //\n// ./components/ab_work_object_list_newObject.js","describe('ab_work_object_list_popupEditMenu component', () => {\n\n\tvar sandbox;\n\n\tvar mockApp = OP.Component._newApp();\n\tvar componentName = 'ab_work_object_list_popupEditMenu';\n\tvar target;\n\n\tbefore(() => {\n\n\t\tOP.Component['ab'](mockApp);\n\n\t\ttarget = OP.Component[componentName](mockApp);\n\n\t\t// TODO: render UI function\n\t\t// buildHTML();\n\n\t\t// TODO: mock up parent dependencies\n\t});\n\n\t/*\n\t** sinon.js is a test tool that allow us create spies, stubs and mocks to replace a function \n\t** after run a test case, then they should be restored function back.\n\t**\n\t** sinon.sandbox it helps to create spies, stubs and mocks in a test case scope\n\t*/\n\tbeforeEach(function () {\n\t\tsandbox = sinon.sandbox.create();\n\t});\n\n\tafterEach(function () {\n\t\tsandbox.restore();\n\t});\n\n\n\n\n\tit('should exist component', () => {\n\t\tassert.isDefined(target);\n\t});\n\n\t// UI test cases\n\tdescribe('UI testing', () => {\n\n\t\tit('should have ui setting', () => {\n\t\t\tassert.isDefined(target.ui, \"should have a ui property\");\n\t\t});\n\n\t\tit(\"should be webix's popup\", () => {\n\t\t\tassert.equal(target.ui.view, \"popup\");\n\t\t});\n\n\t\tit('should have 2 menu items', () => {\n\t\t\tlet menuItems = target.ui.body.data;\n\n\t\t\tlet labelRename = mockApp.labels.rename;\n\t\t\tlet labelDelete = mockApp.labels['delete'];\n\n\t\t\tassert.equal(menuItems.length, 2);\n\t\t\tassert.equal(menuItems[0].command, labelRename, 'first menu item should be rename');\n\t\t\tassert.equal(menuItems[1].command, labelDelete, 'second menu item should be delete');\n\t\t});\n\n\t\tit('should have item click event', () => {\n\t\t\tlet itemClickFn = target.ui.body.on.onItemClick;\n\n\t\t\tassert.isDefined(itemClickFn, 'should have item click event');\n\t\t});\n\n\t\tit('should call _logic.onItemClick when a menu item is clicked', () => {\n\t\t\tlet itemClickFn = target.ui.body.on.onItemClick,\n\t\t\t\tspyLogicItemClick = sandbox.spy(target._logic, 'onItemClick'),\n\t\t\t\titemClickParam = { textContent: 'rename' };\n\n\t\t\t// Assume a menu item is clicked\n\t\t\titemClickFn(null, null, itemClickParam);\n\n\t\t\t// Assert _logic.onItemClick should be called in onItemClick of menu\n\t\t\tsinon.assert.calledOnce(spyLogicItemClick);\n\n\t\t\t// Assert pass a correct parameter to _logic.onItemClick\n\t\t\tsinon.assert.calledWith(spyLogicItemClick, itemClickParam);\n\t\t});\n\n\t});\n\n\n\tdescribe('Init testing', () => {\n\t\tit('should have init function', () => {\n\t\t\tassert.isDefined(target.init, \"should have a init property\");\n\t\t});\n\n\t\tit('should create webix ui', () => {\n\t\t\tlet spyWebixUi = sandbox.spy(webix, 'ui'),\n\t\t\t\tspyLogicHide = sandbox.spy(target._logic, 'hide');\n\n\t\t\t// Call init\n\t\t\ttarget.init();\n\n\t\t\t// Assert call webix.ui once and pass .ui of this component to webix.ui()\n\t\t\tsinon.assert.calledOnce(spyWebixUi);\n\t\t\tsinon.assert.calledWith(spyWebixUi, target.ui);\n\n\t\t\t// Assert call _logic.hide once\n\t\t\tsinon.assert.calledOnce(spyLogicHide);\n\n\t\t});\n\n\t\tit('should set callbacks to _logic', () => {\n\t\t\tlet options = {\n\t\t\t\tonClick: function (action) {\n\t\t\t\t\tconsole.log(\"This is a test callback\");\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Call init\n\t\t\ttarget.init(options);\n\n\t\t\t// Assert onClick callback should be in _logic\n\t\t\tassert.equal(target._logic.callbacks.onClick, options.onClick);\n\t\t});\n\n\t});\n\n\tdescribe('Actions testing', () => {\n\t});\n\n\tdescribe('Logic testing', () => {\n\t\tit('should pass \"rename\" to callback when the rename item is clicked', () => {\n\t\t\tlet spyCallbacks = sandbox.spy(target._logic.callbacks, 'onClick');\n\t\t\tlet spyHide = sandbox.spy(target._logic, 'hide');\n\n\t\t\t// Assume menu item is clicked\n\t\t\tlet result = target._logic.onItemClick({ textContent: mockApp.labels.rename });\n\n\t\t\t// Should call onClick callback and pass \"rename\" to a parameter \n\t\t\tsinon.assert.calledOnce(spyCallbacks);\n\t\t\tsinon.assert.calledWith(spyCallbacks, 'rename');\n\n\t\t\t// Should hide this popup\n\t\t\tsinon.assert.calledOnce(spyHide);\n\n\t\t\t// Should return false to cancel a event of webix\n\t\t\tassert.equal(result, false);\n\n\t\t});\n\n\t\tit('should pass \"delete\" to callback when the delete item is clicked', () => {\n\t\t\tlet spyCallbacks = sandbox.spy(target._logic.callbacks, 'onClick');\n\t\t\tlet spyHide = sandbox.spy(target._logic, 'hide');\n\n\t\t\t// Assume menu item is clicked\n\t\t\tlet result = target._logic.onItemClick({ textContent: mockApp.labels['delete'] });\n\n\t\t\t// Should call onClick callback and pass \"delete\" to a parameter \n\t\t\tsinon.assert.calledOnce(spyCallbacks);\n\t\t\tsinon.assert.calledWith(spyCallbacks, 'delete');\n\n\t\t\t// Should hide this popup\n\t\t\tsinon.assert.calledOnce(spyHide);\n\n\t\t\t// Should return false to cancel a event of webix\n\t\t\tassert.equal(result, false);\n\n\t\t});\n\n\t\tit('should exist .show', () => {\n\t\t\tassert.isDefined(target._logic.show);\n\t\t});\n\n\t\tit('should exist .hide', () => {\n\t\t\tassert.isDefined(target._logic.hide);\n\t\t});\n\n\t});\n\n\n\n});\n\n\n// WEBPACK FOOTER //\n// ./components/ab_work_object_list_popupEditMenu.js","\n// import OP from \"OP\"\nimport \"../data/ABApplication\"\n\nimport ABObject from \"./ABObject\"\n\n\nvar _AllApplications = [];\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nfunction toDC( data ) {\n\treturn new webix.DataCollection({\n\t\tdata: data,\n\n\t\t// on: {\n\t\t// \tonAfterDelete: function(id) {\n\n\t\t// \t}\n\t\t// }\n\t});\n}\n\nfunction toArray(DC) {\n\tvar ary = [];\n\n\tvar id = DC.getFirstId();\n\twhile(id) {\n\t\tvar element = DC.getItem(id);\n\t\tary.push(element);\n\t\tid = DC.getNextId(id);\n\t}\n\n\treturn ary;\n}\n\nexport default class ABApplication {\n\n    constructor(attributes) {\n\n    \t// ABApplication Attributes\n    \tthis.id    = attributes.id;\n    \tthis.json  = attributes.json;\n    \tthis.name  = attributes.name || this.json.name || \"\";\n    \tthis.role  = attributes.role;\n\n    \t// multilingual fields: label, description\n    \tOP.Multilingual.translate(this, this.json, ABApplication.fieldsMultilingual());\n\n\n\t  \t// import all our ABObjects\n\t  \tvar newObjects = [];\n\t  \t(attributes.json.objects || []).forEach((obj) => {\n\t  \t\tnewObjects.push( new ABObject(obj, this) );\n\t  \t})\n\t  \tthis._objects = newObjects;\n\n\n\t  \t// import all our ABViews\n\n\n\n\t  \t// instance keeps a link to our Model for .save() and .destroy();\n\t  \tthis.Model = OP.Model.get('opstools.BuildApp.ABApplication');\n\t  \tthis.Model.Models(ABApplication);\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n  \t/**\n  \t * @function allApplications\n  \t *\n  \t * return a DataCollection that contains all the ABApplications this user\n  \t * can see (based upon server side permissions);\n  \t *\n  \t * NOTE: this manages the results in the _AllApplications dataCollection\n  \t * store.  Any future .create(), .destroy(), .updates() modify values in\n  \t * that collection.\n  \t *\n  \t * Any webix ui components synced to that collection will be automatically\n  \t * updated.\n  \t *\n  \t * @return {Promise}\n  \t */\n\tstatic allApplications() {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar ModelApplication = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\t\t\tModelApplication.Models(ABApplication); // set the Models  setting.\n\n\t\t\t\tModelApplication.findAll()\n\t\t\t\t\t.then(function(data){\n\n\t\t\t\t\t\t// NOTE: data is already a DataCollection from .findAll()\n\t\t\t\t\t\t_AllApplications = data;\n\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(reject);\n\n\t\t\t}\n\t\t)\n\t}\n\n\n  \t/**\n  \t * @function create\n  \t *\n  \t * take the initial values and create an instance of ABApplication.\n  \t *\n  \t * @return {Promise}\n  \t */\n\tstatic create(values) {\n\t\treturn new Promise(\n\t\t\tfunction(resolve, reject) {\n\n\t\t\t\tvar newApp = {}\n\t\t\t\tOP.Multilingual.unTranslate(values, newApp, ABApplication.fieldsMultilingual());\n\t\t\t\tvalues.json = newApp;\n\t\t\t\tnewApp.name = values.name;\n\n\t\t\t\tvar ModelApplication = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\t\t\tModelApplication.create(values)\n\t\t\t\t.then(function(app){\n\n\t\t\t\t\t// return an instance of ABApplication\n\t\t\t\t\tvar App = new ABApplication(app);\n\n\t\t\t\t\t_AllApplications.add(App,0);\n\t\t\t\t\tresolve(App);\n\t\t\t\t})\n\t\t\t\t.catch(reject)\n\t\t\t}\n\t\t)\n\t}\n\n\n\t/**\n\t * @method fieldsMultilingual()\n\t *\n\t * return an array of fields that are considered Multilingual labels for\n\t * an ABApplication\n\t *\n\t * @return {array}\n\t */\n\tstatic fieldsMultilingual() {\n\t\treturn ['label', 'description'];\n\t}\n\n\n\n//// TODO: Refactor isValid() to ignore op and not error if duplicateName is own .id\n\n\tstatic isValid(op, values) {\n\n\t\t\tvar errors = null;\n\n\t\t\t// during an ADD operation\n\t\t\tif (op == 'add') {\n\n\t\t\t\t// label/name must be unique:\n\t\t\t\tvar arrayApplications = toArray(_AllApplications);\n\n\t\t\t\tvar nameMatch = values.label.trim().replace(/ /g, '_').toLowerCase();\n\t\t\t\tvar matchingApps = arrayApplications.filter(function (app) {\n\t\t\t\t\treturn app.name.trim().toLowerCase() == nameMatch;\n\t\t\t\t})\n\t\t\t\tif (matchingApps && matchingApps.length > 0) {\n\n\t\t\t\t\terrors = OP.Form.validationError({\n\t\t\t\t\t\tname:'label',\n\t\t\t\t\t\tmessage:L('ab_form_application_duplicate_name', \"*Name (#name#) is already in use\").replace('#name#', nameMatch),\n\t\t\t\t\t}, errors);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// Check the common validations:\n// TODO:\n// if (!inputValidator.validate(values.label)) {\n// \t_logic.buttonSaveEnable();\n// \treturn false;\n// }\n\n\n\t\t\treturn errors;\n\t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\t/// ABApplication data methods\n\n\n\t/**\n\t * @method destroy()\n\t *\n\t * destroy the current instance of ABApplication\n\t *\n\t * also remove it from our _AllApplications\n\t *\n\t * @return {Promise}\n\t */\n\tdestroy () {\n\t\tif (this.id) {\n\t\t\treturn this.Model.destroy(this.id)\n\t\t\t\t.then(()=>{\n\t\t\t\t\t_AllApplications.remove(this.id);\n\t\t\t\t});\n\t\t}\n\t}\n\n\n\t/**\n\t * @method save()\n\t *\n\t * persist the current instance of ABApplication to the DB\n\t *\n\t * Also, keep the values in _AllApplications up to date.\n\t *\n\t * @return {Promise}\n\t */\n\tsave () {\n\n\t\tvar values = this.toObj();\n\n\t\t// we already have an .id, so this must be an UPDATE\n\t\tif (values.id) {\n\n\t\t\treturn this.Model.update(values.id, values)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t_AllApplications.updateItem(values.id, this);\n\t\t\t\t\t});\n\n\t\t} else {\n\n\t\t\t// must be a CREATE:\n\t\t\treturn this.Model.create(values)\n\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\tthis.id = data.id;\n\t\t\t\t\t\t_AllApplications.add(this, 0);\n\t\t\t\t\t});\n\t\t}\n\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\ttoObj () {\n\n\t\tOP.Multilingual.unTranslate(this, this.json, ABApplication.fieldsMultilingual());\n\t\tthis.json.name = this.name;\n\n\t\t// for each Object: compile to json\n\t\tvar currObjects = [];\n\t\tthis._objects.forEach((obj) => {\n\t\t\tcurrObjects.push(obj.toObj())\n\t\t})\n\t\tthis.json.objects = currObjects;\n\n\t\treturn {\n\t\t\tid:this.id,\n\t\t\tname:this.name,\n\t\t\tjson:this.json,\n\t\t\trole:this.role\n\t\t}\n\t}\n\n\n\n\t/// ABApplication Permission methods\n\n\n\t/**\n\t * @method assignPermissions()\n\t *\n\t * Make sure the current ABApplication permissions match the given\n\t * array of permissions.\n\t *\n\t * @param {array} permItems\tan array of role assignments that this\n\t * \t\t\t\t\t\t\tABApplication should match.\n\t * @return {Promise}\n\t */\n\tassignPermissions (permItems) {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\t\t\t\tAD.comm.service.put({\n\t\t\t\t\turl: '/app_builder/' + this.id + '/role/assign',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\troles: permItems\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve);\n\t\t\t}\n\t\t)\n\t}\n\n\n\t/**\n\t * @method getPermissions()\n\t *\n\t * Return an array of role assignments that are currently assigned to this\n\t * ABApplication.\n\t *\n\t * @return {Promise} \tresolve(list) : list {array} Role assignments\n\t */\n\tgetPermissions () {\n\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tAD.comm.service.get({ url: '/app_builder/' + this.id + '/role' })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve)\n\t\t\t}\n\t\t);\n\t}\n\n\n\t/**\n\t * @method createPermission()\n\t *\n\t * Create a Role in the system after the name of the current ABApplication.\n\t *\n\t * @return {Promise}\n\t */\n\tcreatePermission () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n// TODO: need to take created role and store as : .json.applicationRole = role.id\n\n\t\t\t\tAD.comm.service.post({ url: '/app_builder/' + this.id + '/role' })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve)\n\n\t\t\t}\n\t\t);\n\t}\n\n\n\t/**\n\t * @method deletePermission()\n\t *\n\t * Remove the Role in the system of the current ABApplication.\n\t * (the one created by  .createPermission() )\n\t *\n\t * @return {Promise}\n\t */\n\tdeletePermission () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n// TODO: need to remove created role from : .json.applicationRole\n\t\t\t\tAD.comm.service.delete({ url: '/app_builder/' + this.id + '/role' })\n\t\t\t\t.fail(reject)\n\t\t\t\t.done(resolve)\n\n\t\t\t}\n\t\t);\n\t}\n\n\n\n\n\t///\n\t/// Objects\n\t///\n\n\n\n\n\t/**\n\t * @method objects()\n\t *\n\t * return an array of all the ABObjects for this ABApplication.\n\t *\n\t * @param {fn} filter  \ta filter fn to return a set of ABObjects that this fn\n\t *\t\t\t\t\t\treturns true for.\n\t * @return {array} \tarray of ABObject\n\t */\n\tobjects (filter) {\n\n\t\tfilter = filter || function() {return true; };\n\n\t\treturn this._objects.filter(filter);\n\n\t}\n\n\n\n\t/**\n\t * @method objectNew()\n\t *\n\t * return an instance of a new (unsaved) ABObject that is tied to this\n\t * ABApplication.\n\t *\n\t * NOTE: this new object is not included in our this.objects until a .save()\n\t * is performed on the object.\n\t *\n\t * @return {ABObject}\n\t */\n\tobjectNew( values ) {\n\t\treturn new ABObject(values, this);\n\t}\n\n\n\n\t/**\n\t * @method objectDestroy()\n\t *\n\t * remove the current ABObject from our list of ._objects.\n\t *\n\t * @param {ABObject} object\n\t * @return {Promise}\n\t */\n\tobjectDestroy( object ) {\n\n\t\tvar remaininObjects = this.objects(function(o) { return o.id != object.id;})\n\t\tthis._objects = remaininObjects;\n\t\treturn this.save();\n\t\t\n\t\t// var isIncluded = (this.objects(function(o){ return o.id == object.id }).length > 0);\n\t\t// if (!isIncluded) {\n\t\t// \tthis._objects.push(object);\n\t\t// }\n\n\t\t// return this.save();\n\t}\n\n\n\n\t/**\n\t * @method objectSave()\n\t *\n\t * persist the current ABObject in our list of ._objects.\n\t *\n\t * @param {ABObject} object\n\t * @return {Promise}\n\t */\n\tobjectSave( object ) {\n\t\tvar isIncluded = (this.objects(function(o){ return o.id == object.id }).length > 0);\n\t\tif (!isIncluded) {\n\t\t\tthis._objects.push(object);\n\t\t}\n\n\t\treturn this.save();\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ../classes/ABApplication.js","/* \n * ABFieldManager\n * \n * An interface for managing the different ABFields available in our AppBuilder.\n *\n */\n\n\nimport ABFieldString from \"./dataFields/ABFieldString\"\nimport ABFieldNumber from \"./dataFields/ABFieldNumber\"\nimport ABFieldDate from \"./dataFields/ABFieldDate\"\n\n\nimport ABFieldImage from \"./dataFields/ABFieldImage\"\n\n/* \n * Fields\n * A name => ABField  hash of the different ABFields available.\n */\nvar Fields = {};\nFields[ABFieldString.defaults().key] = ABFieldString;\nFields[ABFieldNumber.defaults().key] = ABFieldNumber;\nFields[ABFieldDate.defaults().key] = ABFieldDate;\n\n\nFields[ABFieldImage.defaults().key] = ABFieldImage;\n\n\n\nexport default  {\n\n\n\t/*\n\t * @function allFields\n\t * return all the currently defined ABFields in an array.\n\t * @return [{ABField},...]\n\t */\n\tallFields: function() {\n\t\tvar fields = [];\n\t\tfor (var f in Fields) {\n\t\t\tfields.push(Fields[f]);\n\t\t}\n\t\treturn fields;\n\t},\n\n\n\t/*\n\t * @function newField\n\t * return an instance of an ABField based upon the values.type value.\n\t * @return {ABField}\n\t */\n\tnewField: function (values, object) {\n\n\t\tif (values.key) {\n\t\t\treturn new Fields[values.key](values, object);\n\t\t} else {\n\n//// TODO: what to do here?\n\t\t}\n\n\t}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ../classes/ABFieldManager.js","//\n// ABModel\n//\n// Represents the Data interface for an ABObject data.\n//\n// 2 ways to use an ABModel to load a DataTable:\n// \tMethod 1:  \n// \tgather all the data externally and send to the DataTable\n//\t\tModel.findAll()\n//\t\t.then((data)=>{\n//\t\t\tDataTable.parse(data);\n//\t\t})\n//\n// \tMethod 2: \n// \tSet the Model object with a condition / skip / limit, then \n// \tuse it to load the DataTable:\n//\t\tModel.where({})\n//\t\t.skip(XX)\n//\t\t.limit(XX)\n//\t\t.loadInto(DataTable);\n\n\n\nfunction toDC( data ) {\n\treturn new webix.DataCollection({\n\t\tdata: data,\n\n\t\t// on: {\n\t\t// \tonAfterDelete: function(id) {\n\n\t\t// \t}\n\t\t// }\n\t});\n}\n\n\nexport default class ABModel {\n\n    constructor(object) {\n\n\t  \t// link me to my parent ABApplication\n\t  \tthis.object = object;\n\n\t  \tthis._where = null;\n\t  \tthis._skip = null;\n\t  \tthis._limit = null;\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\tmodelURL () {\n\t\treturn '/app_builder/model/application/#appID#/object/#objID#'\n\t\t.replace('#appID#', this.object.application.id)\n\t\t.replace('#objID#', this.object.id)\n\t}\n\n\n\t/**\n\t * @method findAll\n\t * performs a data find with the provided condition.\n\t */\n\tfindAll(cond) {\n\n\t\tcond = cond || {};\n\n\n\t\t// prepare our condition:\n\t\tvar newCond = {};\n\n\t\t// if the provided cond looks like our { where:{}, skip:xx, limit:xx } format,\n\t\t// just use this one.\n\t\tif (cond.where) {\n\t\t\tnewCond = cond;\n\t\t} else {\n\n\t\t\t// else, assume the provided condition is the .where clause.\n\t\t\tnewCond.where = cond;\n\t\t}\n\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tOP.Comm.Service.get({\n\t\t\t\t\turl:this.modelURL(),\n\t\t\t\t\tparams:newCond\n\t\t\t\t})\n\t\t\t\t.then((data)=>{\n\n\t\t\t\t\t// if this object has some multilingual fields, translate the data:\n\t\t\t\t\tvar mlFields = this.object.multilingualFields();\n\t\t\t\t\tif (mlFields.length) {\n\n\t\t\t\t\t\tdata.data.forEach((d)=>{\n\t\t\t\t\t\t\tOP.Multilingual.translate(d,d, mlFields);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t})\n\t\t\t\t.catch(reject);\n\n\t\t\t}\n\t\t)\n\n\t}\n\n\n\t/**\n\t * @method loadInto\n\t * loads the current values into the provided Webix DataTable\n\t * @param {DataTable} DT  A Webix component that can dynamically load data.\n\t */\n\tloadInto( DT ) {\n\t\t\n\t\t// if a limit was applied, then this component should be loading dynamically\n\t\tif (this._limit) {\n\n\t\t\tDT.define('datafetch', this._limit);\n\t\t\tDT.define('datathrottle',  500 );  // 5 sec\n\t\t\n\n\t\t\t// catch the event where data is requested:\n\t\t\t// here we will do our own findAll() so we can persist\n\t\t\t// the provided .where condition.\n\t\t\tDT.attachEvent(\"onDataRequest\", (start, count) => {\n\t\t\t\t\n\t\t\t\tvar cond = {\n\t\t\t\t\twhere:this._where,\n\t\t\t\t\tlimit:count,\n\t\t\t\t\tskip:start\n\t\t\t\t}\n\n\t\t\t\tthis.findAll(cond)\n\t\t\t\t.then((data) => {\n\t\t\t\t\tDT.parse(data);\n\t\t\t\t})\n\t\t\t  \n\t\t\t\treturn false;\t// <-- prevent the default \"onDataRequest\"\n\t\t\t});\n\n\n\t\t\tDT.refresh();\n\t\t}\n\n\n\t\t// else just load it all at once:\n\t\tvar cond = {};\n\t\tif (this._where) cond.where = this._where;\n\t\tif (this._limit != null) cond.limit = this._limit;\n\t\tif (this._skip  != null) cond.skip  = this._skip;\n\n\t\tthis.findAll(cond)\n\t\t.then((data)=>{\n\t\t\tDT.parse(data);\n\t\t})\n\t\t.catch((err)=>{\nconsole.error('!!!!!', err);\n\t\t})\n\n\n\t}\n\n\n\t/**\n\t * @method limit\n\t * set the limit value for this set of data\n\t * @param {integer} limit  the number or elements to return in this call\n\t * @return {ABModel} this object that is chainable.\n\t */\n\tlimit(limit) {\n\t\tthis._limit = limit;\n\t\treturn this;\n\t}\n\n\n\t/**\n\t * @method skip\n\t * set the skip value for this set of data\n\t * @param {integer} skip  the number or elements to skip\n\t * @return {ABModel} this object that is chainable.\n\t */\n\tskip(skip) {\n\t\tthis._skip = skip;\n\t\treturn this;\n\t}\n\n\n\t/**\n\t * @method where\n\t * set the where condition for the data being loaded.\n\t * @param {json} cond  the json condition statement.\n\t * @return {ABModel} this object that is chainable.\n\t */\n\twhere(cond) {\n\t\tthis._where = cond;\n\t\treturn this;\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ../classes/ABModel.js","\n// import OP from \"OP\"\nimport ABFieldManager from \"./ABFieldManager\"\nimport ABModel from \"./ABModel\"\n\n\nfunction toDC( data ) {\n\treturn new webix.DataCollection({\n\t\tdata: data,\n\n\t\t// on: {\n\t\t// \tonAfterDelete: function(id) {\n\n\t\t// \t}\n\t\t// }\n\t});\n}\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nexport default class ABObject {\n\n    constructor(attributes, application) {\n/*\n{\n\tid: uuid(),\n\tname: 'name',\n\tlabelFormat: 'xxxxx',\n\tisImported: 1/0,\n\turlPath:'string',\n\timportFromObject: 'string', // JSON Schema style reference:  '#[ABApplication.id]/objects/[ABObject.id]'\n\t\t\t\t\t\t\t\t// to get other object:  ABApplication.objectFromRef(obj.importFromObject);\n\ttranslations:[\n\t\t{}\n\t],\n\tfields:[\n\t\t{ABDataField}\n\t]\n}\n*/\n\n    \t// ABApplication Attributes\n    \tthis.id    = attributes.id;\n    \tthis.name  = attributes.name || \"\";\n    \tthis.labelFormat = attributes.labelFormat || \"\";\n    \tthis.isImported  = attributes.isImported  || 0;\n    \tthis.urlPath\t = attributes.urlPath     || \"\";\n    \tthis.importFromObject = attributes.importFromObject || \"\";\n    \tthis.translations = attributes.translations;\n\n\t\tif (typeof(attributes.objectWorkspace) != \"undefined\") {\n\t\t\tif (typeof(attributes.objectWorkspace.hiddenFields) == \"undefined\") attributes.objectWorkspace.hiddenFields = [];\n\t\t\tif (typeof(attributes.objectWorkspace.frozenColumnID) == \"undefined\") attributes.objectWorkspace.frozenColumnID = \"\";\n\t\t}\n\n    \tthis.objectWorkspace = attributes.objectWorkspace || {\n    \t\thiddenFields:[], \t// array of [ids] to add hidden:true to\n\t\t\tfrozenColumnID:\"\", // id of column you want to stop freezing\n    \t};\n\n    \t// multilingual fields: label, description\n    \tOP.Multilingual.translate(this, this, ['label']);\n\n\n\t  \t// import all our ABObjects\n\t  \tvar newFields = [];\n\t  \t(attributes.fields || []).forEach((field) => {\n\t  \t\tnewFields.push( this.fieldNew(field) );\n\t  \t})\n\t  \tthis._fields = newFields;\n\n\n\t  \t// link me to my parent ABApplication\n\t  \tthis.application = application;\n  \t}\n\n\n\n  \t///\n  \t/// Static Methods\n  \t///\n  \t/// Available to the Class level object.  These methods are not dependent\n  \t/// on the instance values of the Application.\n  \t///\n\n\n\n//// TODO: Refactor isValid() to ignore op and not error if duplicateName is own .id\n\n\tisValid() {\n\n\t\tvar errors = null;\n\n\n\t\t// label/name must be unique:\n\t\tvar isNameUnique = (this.application.objects((o) => { return o.name.toLowerCase() == this.name.toLowerCase(); }).length == 0);\n\t\tif (!isNameUnique) {\n\t\t\terrors = OP.Form.validationError({\n\t\t\t\t\tname:'name',\n\t\t\t\t\tmessage:L('ab.validation.object.name.unique', 'Object name must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t\t\t}, errors);\n\t\t}\n\n\n\t\t\t// Check the common validations:\n// TODO:\n// if (!inputValidator.validate(values.label)) {\n// \t_logic.buttonSaveEnable();\n// \treturn false;\n// }\n\n\n\t\treturn errors;\n\t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\t/// ABApplication data methods\n\n\n\t/**\n\t * @method destroy()\n\t *\n\t * destroy the current instance of ABApplication\n\t *\n\t * also remove it from our _AllApplications\n\t *\n\t * @return {Promise}\n\t */\n\tdestroy () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\t// OK, some of our Fields have special follow up actions that need to be\n\t\t\t\t// considered when they no longer exist, so before we simply drop this\n\t\t\t\t// object/table, drop each of our fields and give them a chance to clean up\n\t\t\t\t// what needs cleaning up.\n\n\t\t\t\t// ==> More work, but safer.\n\t\t\t\tvar fieldDrops = [];\n\t\t\t\tthis.fields().forEach((f)=>{\n\t\t\t\t\tfieldDrops.push(f.destroy());\n\t\t\t\t})\n\n\t\t\t\tPromise.all(fieldDrops)\n\t\t\t\t.then(()=>{\n\n\t\t\t\t\t// now drop our table\n\t\t\t\t\t// NOTE: our .migrateXXX() routines expect the object to currently exist\n\t\t\t\t\t// in the DB before we perform the DB operations.  So we need to\n\t\t\t\t\t// .migrateDrop()  before we actually .objectDestroy() this.\n\t\t\t\t\tthis.migrateDrop()\n\t\t\t\t\t.then(()=>{\n\n\t\t\t\t\t\t// finally remove us from the application storage\n\t\t\t\t\t\treturn this.application.objectDestroy(this);\n\n\t\t\t\t\t})\n\t\t\t\t\t.then(resolve)\n\t\t\t\t\t.catch(reject);\n\n\t\t\t\t})\n\t\t\t\t.catch(reject);\n\n\t\t\t}\n\t\t);\n\t}\n\n\n\t/**\n\t * @method save()\n\t *\n\t * persist this instance of ABObject with it's parent ABApplication\n\t *\n\t *\n\t * @return {Promise}\n\t *\t\t\t\t\t\t.resolve( {this} )\n\t */\n\tsave () {\n\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\tvar isAdd = false;\n\n\t\t\t\t// if this is our initial save()\n\t\t\t\tif (!this.id) {\n\n\t\t\t\t\tthis.id = OP.Util.uuid();\t// setup default .id\n\t\t\t\t\tthis.label = this.label || this.name;\n\t\t\t\t\tthis.urlPath = this.urlPath || this.application.name + '/' + this.name;\n\t\t\t\t\tisAdd = true;\n\t\t\t\t}\n\n\t\t\t\tthis.application.objectSave(this)\n\t\t\t\t.then(() => {\n\n\t\t\t\t\tif (isAdd) {\n\n\t\t\t\t\t\t// on a Create: trigger a migrateCreate object\n\t\t\t\t\t\tthis.migrateCreate()\n\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\tresolve(this);\n\t\t\t\t\t\t}, reject);\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(this);\n\t\t\t\t\t}\n\n\t\t\t\t})\n\t\t\t\t.catch(function(err){\n\t\t\t\t\treject(err);\n\t\t\t\t})\n\t\t\t}\n\t\t)\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\ttoObj () {\n\n\t\tOP.Multilingual.unTranslate(this, this, [\"label\"]);\n\n\t\t// // for each Object: compile to json\n\t\tvar currFields = [];\n\t\tthis._fields.forEach((obj) => {\n\t\t\tcurrFields.push(obj.toObj())\n\t\t})\n\n\n\t\treturn {\n\t\t\tid: \t\t\tthis.id,\n\t\t\tname: \t\t\tthis.name,\n    \t\tlabelFormat: \tthis.labelFormat,\n    \t\tisImported:  \tthis.isImported,\n    \t\turlPath: \t\tthis.urlPath,\n    \t\timportFromObject: this.importFromObject,\n    \t\tobjectWorkspace:  this.objectWorkspace,\n    \t\ttranslations: \tthis.translations,\n    \t\tfields: \t \tcurrFields\n\t\t}\n\t}\n\n\n\n\n\t///\n\t/// DB Migrations\n\t///\n\n\tmigrateCreate() {\n\t\tvar url = '/app_builder/migrate/application/#appID#/object/#objID#'\n\t\t\t.replace('#appID#', this.application.id)\n\t\t\t.replace('#objID#', this.id);\n\n\t\treturn OP.Comm.Service.post({\n\t\t\turl: url\n\t\t})\n\t}\n\n\n\tmigrateDrop() {\n\t\tvar url = '/app_builder/migrate/application/#appID#/object/#objID#'\n\t\t\t.replace('#appID#', this.application.id)\n\t\t\t.replace('#objID#', this.id);\n\n\t\treturn OP.Comm.Service['delete']({\n\t\t\turl: url\n\t\t})\n\t}\n\n\n\t///\n\t/// Fields\n\t///\n\n\n\n\n\t/**\n\t * @method fields()\n\t *\n\t * return an array of all the ABFields for this ABObject.\n\t *\n\t * @return {array}\n\t */\n\tfields (filter) {\n\n\t\tfilter = filter || function() {return true; };\n\n\t\treturn this._fields.filter(filter);\n\t}\n\n\n\n\t/**\n\t * @method fieldNew()\n\t *\n\t * return an instance of a new (unsaved) ABField that is tied to this\n\t * ABObject.\n\t *\n\t * NOTE: this new field is not included in our this.fields until a .save()\n\t * is performed on the field.\n\t *\n\t * @return {ABField}\n\t */\n\tfieldNew ( values ) {\n\t\t// NOTE: ABFieldManager returns the proper ABFieldXXXX instance.\n\t\treturn ABFieldManager.newField( values, this );\n\t}\n\n\n\n\t/**\n\t * @method fieldRemove()\n\t *\n\t * remove the given ABField from our ._fields array and persist the current\n\t * values.\n\t *\n\t * @param {ABField} field The instance of the field to remove.\n\t * @return {Promise}\n\t */\n\tfieldRemove( field ) {\n\t\tthis._fields = this.fields(function(o){ return o.id != field.id });\n\n\t\treturn this.save();\n\t}\n\n\n\n\t/**\n\t * @method fieldSave()\n\t *\n\t * save the given ABField in our ._fields array and persist the current\n\t * values.\n\t *\n\t * @param {ABField} field The instance of the field to save.\n\t * @return {Promise}\n\t */\n\tfieldSave( field ) {\n\t\tvar isIncluded = (this.fields(function(o){ return o.id == field.id }).length > 0);\n\t\tif (!isIncluded) {\n\t\t\tthis._fields.push(field);\n\t\t}\n\n\t\treturn this.save();\n\t}\n\n\n\n\tmultilingualFields() {\n\t\tvar fields = [];\n\n\t\tvar found = this.fields(function(f){ return f.isMultilingual(); });\n\t\tfound.forEach((f)=>{ \n\t\t\tfields.push(f.columnName);\n\t\t})\n\n\t\treturn fields;\n\t}\n\n\n\n\n\t///\n\t///\tObject Workspace Settings\n\t///\n\n\n\tget workspaceHiddenFields() {\n\t\treturn this.objectWorkspace.hiddenFields;\n\t}\n\n\tset workspaceHiddenFields( fields ) {\n\t\tthis.objectWorkspace.hiddenFields = fields;\n\t}\n\n\tget workspaceFrozenColumnID() {\n\t\treturn this.objectWorkspace.frozenColumnID;\n\t}\n\n\tset workspaceFrozenColumnID( id ) {\n\t\tthis.objectWorkspace.frozenColumnID = id;\n\t}\n\n\n\n\n\t///\n\t/// Working with Client Components:\n\t///\n\n\n\t// return the column headers for this object\n\t// @param {bool} isObjectWorkspace  return the settings saved for the object workspace\n\tcolumnHeaders (isObjectWorkspace) {\n\n\t\tvar headers = [];\n\t\tvar idLookup = {};\n\n\t\t// get the header for each of our fields:\n\t\tthis._fields.forEach(function(f){\n\t\t\tvar header = f.columnHeader(isObjectWorkspace);\n\t\t\theaders.push(header);\n\t\t\tidLookup[header.id] = f.id;\t// name => id\n\t\t})\n\n\n\t\t// update our headers with any settings applied in the Object Workspace\n\t\tif (isObjectWorkspace) {\n\n\t\t\t// set column width to adjust:true by default;\n\t\t\theaders.forEach((h) => { h.adjust = true; });\n\n\t\t\t// hide any hiddenfields\n\t\t\tif (this.workspaceHiddenFields.length > 0) {\n\t\t\t\tthis.workspaceHiddenFields.forEach((hfID)=>{\n\t\t\t\t\theaders.forEach((h)=> {\n\t\t\t\t\t\tif (idLookup[h.id] == hfID){\n\t\t\t\t\t\t\th.hidden = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn headers;\n\t}\n\n\n\t///\n\t/// Working with data from server\n\t///\n\n\t/**\n\t * @method model\n\t * return a Model object that will allow you to interact with the data for\n\t * this ABObject.\n\t */\n\tmodel() {\n\t\treturn new ABModel(this);\n\t}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ../classes/ABObject.js","/*\n * ABFieldDate\n *\n * An ABFieldDate defines a date/datetime field type.\n *\n */\n\nimport ABField from \"./ABField\"\nimport ABFieldComponent from \"./ABFieldComponent\"\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\n\nvar ABFieldDateDefaults = {\n\tkey: 'date', // unique key to reference this specific DataField\n\n\ticon: 'calendar',   // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName: L('ab.dataField.date.menuName', '*Date'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.date.description', '*Pick one from a calendar.')\n}\n\nvar defaultValues = {\n\t\"includeTime\": 0,\n\t\"defaultCurrentDate\": 0,\n\t\"defaultDate\": \"\",\n\t\"dayFormat\": \"DD\",\n\t\"dayOrder\": 1,\n\t\"dayDelimiter\": \"slash\",\n\t\"monthFormat\": \"MM\",\n\t\"monthOrder\": 2,\n\t\"monthDelimiter\": \"slash\",\n\t\"yearFormat\": \"YYYY\",\n\t\"yearOrder\": 3,\n\t\"yearDelimiter\": \"slash\"\n}\n\nvar ids = {\n\tdefault: 'ab-date-default',\n\tcurrentToDefault: 'ab-date-current-to-default',\n\n\tdateDisplay: 'ab-date-display',\n\n\tdayOrder: 'ab-date-day-order',\n\tmonthOrder: 'ab-date-month-order',\n\tyearOrder: 'ab-date-year-order',\n\tdayFormat: 'ab-date-day-format',\n\tmonthFormat: 'ab-date-month-format',\n\tyearFormat: 'ab-date-year-format',\n\tdayDelimiter: 'ab-date-day-delimiter',\n\tmonthDelimiter: 'ab-date-month-delimiter',\n\tyearDelimiter: 'ab-date-year-delimiter'\n};\n\nvar delimiterList = [\n\t{ id: 'comma', value: \"Comma\", sign: \",\" },\n\t{ id: 'slash', value: \"Slash\", sign: \"/\" },\n\t{ id: 'space', value: \"Space\", sign: \" \" },\n\t{ id: 'dash', value: \"Dash\", sign: \"-\" }\n];\n\n\n/** Private methods **/\nfunction getDelimiterSign(text) {\n\tvar delimiterItem = delimiterList.filter(function (item) {\n\t\treturn item.id = text;\n\t})[0];\n\n\treturn delimiterItem ? delimiterItem.sign : null;\n}\n\nfunction getDateFormat(setting) {\n\tvar momentFormat = \"\";\n\n\tfor (var i = 1; i <= 3; i++) {\n\t\tif (setting.dayOrder == i) {\n\t\t\tmomentFormat += setting.dayFormat;\n\t\t\tmomentFormat += (i != 3) ? setting.dayDelimiter : '';\n\t\t}\n\t\tif (setting.monthOrder == i) {\n\t\t\tmomentFormat += setting.monthFormat;\n\t\t\tmomentFormat += (i != 3) ? setting.monthDelimiter : '';\n\t\t}\n\t\tif (setting.yearOrder == i) {\n\t\t\tmomentFormat += setting.yearFormat;\n\t\t\tmomentFormat += (i != 3) ? setting.yearDelimiter : '';\n\t\t}\n\t}\n\n\treturn moment(new Date()).format(momentFormat);\n}\n\nfunction refreshDateDisplay() {\n\tvar dateFormat = getDateFormat({\n\t\tdayOrder: $$(ids.dayOrder).getValue(),\n\t\tmonthOrder: $$(ids.monthOrder).getValue(),\n\t\tyearOrder: $$(ids.yearOrder).getValue(),\n\t\tdayFormat: $$(ids.dayFormat).getValue(),\n\t\tmonthFormat: $$(ids.monthFormat).getValue(),\n\t\tyearFormat: $$(ids.yearFormat).getValue(),\n\t\tdayDelimiter: getDelimiterSign($$(ids.dayDelimiter).getValue()),\n\t\tmonthDelimiter: getDelimiterSign($$(ids.monthDelimiter).getValue()),\n\t\tyearDelimiter: getDelimiterSign($$(ids.yearDelimiter).getValue()),\n\t});\n\n\t$$(ids.dateDisplay).setValue(dateFormat);\n}\n\n\n/**\n * ABFieldDateComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n */\nvar ABFieldDateComponent = new ABFieldComponent({\n\tfieldDefaults: ABFieldDateDefaults,\n\n\telements: function (App) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname: \"includeTime\",\n\t\t\t\tlabelRight: \"Include time\",\n\t\t\t\tlabelWidth: 0,\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\t// Re-render default date picker\n\t\t\t\t\t\twebix.ui({\n\t\t\t\t\t\t\tview: 'datepicker',\n\t\t\t\t\t\t\tlabel: \"Default\",\n\t\t\t\t\t\t\tid: ids.default,\n\t\t\t\t\t\t\ttimepicker: newVal ? true : false,\n\t\t\t\t\t\t\tdisabled: $$(ids.currentToDefault).getValue() == true\n\t\t\t\t\t\t}, $$(ids.default));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: 'checkbox',\n\t\t\t\tid: ids.currentToDefault,\n\t\t\t\tname: \"defaultCurrentDate\",\n\t\t\t\tlabelRight: 'Set current date to default value',\n\t\t\t\tlabelWidth: 0,\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\t\t$$(ids.default).disable();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$$(ids.default).enable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: 'datepicker',\n\t\t\t\tid: ids.default,\n\t\t\t\tlabel: \"Default\",\n\t\t\t\tname: 'defaultDate',\n\t\t\t\ttimepicker: false\n\t\t\t},\n\t\t\t{\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview: 'label',\n\t\t\t\t\t\tlabel: 'Display',\n\t\t\t\t\t\tcss: 'ab-text-bold'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: 'label',\n\t\t\t\t\t\tid: ids.dateDisplay,\n\t\t\t\t\t\tlabel: ''\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\n\t\t\t// Display date format\n\t\t\t{\n\t\t\t\tview: \"accordion\",\n\t\t\t\tmulti: false,\n\t\t\t\tcollapsed: true,\n\t\t\t\trows: [\n\t\t\t\t\t// Day format\n\t\t\t\t\t{\n\t\t\t\t\t\theader: \"Day\",\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\trows: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"dayFormat\",\n\t\t\t\t\t\t\t\t\tid: ids.dayFormat,\n\t\t\t\t\t\t\t\t\tlabel: \"Format\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: 'D', value: \"1 2 ... 30 31\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 'Do', value: \"1st 2nd ... 30th 31st\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 'DD', value: \"01 02 ... 30 31\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 'dd', value: \"Su Mo ... Fr Sa\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 'ddd', value: \"Sun Mon ... Fri Sat\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 'dddd', value: \"Sunday Monday ... Friday Saturday\" },\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"dayOrder\",\n\t\t\t\t\t\t\t\t\tid: ids.dayOrder,\n\t\t\t\t\t\t\t\t\tlabel: \"Places\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: 1, value: \"1\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 2, value: \"2\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 3, value: \"3\" }\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"radio\",\n\t\t\t\t\t\t\t\t\tname: \"dayDelimiter\",\n\t\t\t\t\t\t\t\t\tid: ids.dayDelimiter,\n\t\t\t\t\t\t\t\t\tlabel: \"Delimiter\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvertical: true,\n\t\t\t\t\t\t\t\t\toptions: delimiterList,\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\t// Month format\n\t\t\t\t\t{\n\t\t\t\t\t\theader: \"Month\",\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\trows: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"monthFormat\",\n\t\t\t\t\t\t\t\t\tid: ids.monthFormat,\n\t\t\t\t\t\t\t\t\tlabel: \"Format\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: 'M', value: \"1 2 ... 11 12\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 'Mo', value: \"1st 2nd ... 11th 12th\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 'MM', value: \"01 02 ... 11 12\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 'MMM', value: \"Jan Feb ... Nov Dec\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 'MMMM', value: \"January February ... November December\" }\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"monthOrder\",\n\t\t\t\t\t\t\t\t\tid: ids.monthOrder,\n\t\t\t\t\t\t\t\t\tlabel: \"Places\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: 1, value: \"1\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 2, value: \"2\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 3, value: \"3\" },\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"radio\",\n\t\t\t\t\t\t\t\t\tname: \"monthDelimiter\",\n\t\t\t\t\t\t\t\t\tid: ids.monthDelimiter,\n\t\t\t\t\t\t\t\t\tlabel: \"Delimiter\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvertical: true,\n\t\t\t\t\t\t\t\t\toptions: delimiterList,\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\t// Year format\n\t\t\t\t\t{\n\t\t\t\t\t\theader: \"Year\",\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\trows: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"yearFormat\",\n\t\t\t\t\t\t\t\t\tid: ids.yearFormat,\n\t\t\t\t\t\t\t\t\tlabel: \"Format\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: 'YY', value: \"70 71 ... 29 30\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 'YYYY', value: \"1970 1971 ... 2029 2030\" },\n\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\tname: \"yearOrder\",\n\t\t\t\t\t\t\t\t\tid: ids.yearOrder,\n\t\t\t\t\t\t\t\t\tlabel: \"Places\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{ id: 1, value: \"1\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 2, value: \"2\" },\n\t\t\t\t\t\t\t\t\t\t{ id: 3, value: \"3\" },\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"radio\",\n\t\t\t\t\t\t\t\t\tname: \"yearDelimiter\",\n\t\t\t\t\t\t\t\t\tid: ids.yearDelimiter,\n\t\t\t\t\t\t\t\t\tlabel: \"Delimiter\",\n\t\t\t\t\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\t\t\t\t\tvertical: true,\n\t\t\t\t\t\t\t\t\toptions: delimiterList,\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\t\t\t\t\t\trefreshDateDisplay();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t]\n\t\t\t},\n\n\t\t\t// // Validator\n\t\t\t// {\n\t\t\t// \tview: 'label',\n\t\t\t// \tlabel: 'Validation criteria',\n\t\t\t// \tcss: 'ab-text-bold'\n\t\t\t// },\n\t\t\t// {\n\t\t\t// \t// id: componentIds.validateCondition,\n\t\t\t// \tview: \"select\",\n\t\t\t// \tname: \"validateCondition\",\n\t\t\t// \tlabel: \"Condition\",\n\t\t\t// \tvalue: 'none',\n\t\t\t// \toptions: [\n\t\t\t// \t\t{ id: 'none', value: '[Condition]' },\n\t\t\t// \t\t{ id: 'dateRange', value: 'Range' },\n\t\t\t// \t\t{ id: 'between', value: 'Between' },\n\t\t\t// \t\t{ id: 'notBetween', value: 'Not between' },\n\t\t\t// \t\t{ id: '=', value: 'Equal to' },\n\t\t\t// \t\t{ id: '<>', value: 'Not equal to' },\n\t\t\t// \t\t{ id: '>', value: 'Greater than' },\n\t\t\t// \t\t{ id: '<', value: 'Less than' },\n\t\t\t// \t\t{ id: '>=', value: 'Greater than or Equal to' },\n\t\t\t// \t\t{ id: '<=', value: 'Less than or Equal to' }\n\t\t\t// \t],\n\t\t\t// \ton: {\n\t\t\t// \t\tonChange: function (newVal, oldVal) {\n\t\t\t// \t\t\t// switch (newVal) {\n\t\t\t// \t\t\t// \tcase 'none':\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateRange).hide();\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateLeft).hide();\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateRight).hide();\n\t\t\t// \t\t\t// \t\tbreak;\n\t\t\t// \t\t\t// \tcase 'dateRange':\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateRange).show();\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateLeft).hide();\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateRight).hide();\n\t\t\t// \t\t\t// \t\tbreak;\n\t\t\t// \t\t\t// \tcase 'between':\n\t\t\t// \t\t\t// \tcase 'notBetween':\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateRange).hide();\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateLeft).define('label', 'Start Date');\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateLeft).refresh();\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateLeft).show();\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateRight).show();\n\t\t\t// \t\t\t// \t\tbreak;\n\t\t\t// \t\t\t// \tcase '=':\n\t\t\t// \t\t\t// \tcase '<>':\n\t\t\t// \t\t\t// \tcase '>':\n\t\t\t// \t\t\t// \tcase '<':\n\t\t\t// \t\t\t// \tcase '>=':\n\t\t\t// \t\t\t// \tcase '<=':\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateRange).hide();\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateLeft).define('label', 'Date');\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateLeft).refresh();\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateLeft).show();\n\t\t\t// \t\t\t// \t\t$$(componentIds.validateRight).hide();\n\t\t\t// \t\t\t// \t\tbreak;\n\t\t\t// \t\t\t// }\n\t\t\t// \t\t}\n\t\t\t// \t}\n\t\t\t// },\n\t\t\t// {\n\t\t\t// \t// id: componentIds.validateRange,\n\t\t\t// \trows: [\n\t\t\t// \t\t{\n\t\t\t// \t\t\t// id: componentIds.validateRangeUnit,\n\t\t\t// \t\t\tview: \"select\",\n\t\t\t// \t\t\tname: \"validateRangeUnit\",\n\t\t\t// \t\t\tlabel: 'Unit',\n\t\t\t// \t\t\toptions: [\n\t\t\t// \t\t\t\t{ id: 'days', value: 'Days' },\n\t\t\t// \t\t\t\t{ id: 'months', value: 'Months' },\n\t\t\t// \t\t\t\t{ id: 'years', value: 'Years' }\n\t\t\t// \t\t\t],\n\t\t\t// \t\t\ton: {\n\t\t\t// \t\t\t\tonChange: function (newVal) {\n\t\t\t// \t\t\t\t\t// $$(componentIds.validateRangeBeforeLabel).refresh();\n\t\t\t// \t\t\t\t\t// $$(componentIds.validateRangeAfterLabel).refresh();\n\t\t\t// \t\t\t\t}\n\t\t\t// \t\t\t}\n\t\t\t// \t\t},\n\t\t\t// \t\t{\n\t\t\t// \t\t\tcols: [\n\t\t\t// \t\t\t\t{\n\t\t\t// \t\t\t\t\t// id: componentIds.validateRangeBeforeLabel,\n\t\t\t// \t\t\t\t\tview: 'template',\n\t\t\t// \t\t\t\t\talign: 'left',\n\t\t\t// \t\t\t\t\twidth: 125,\n\t\t\t// \t\t\t\t\tborderless: true,\n\t\t\t// \t\t\t\t\t// template: function () {\n\t\t\t// \t\t\t\t\t// \tvar beforeLabel = 'Before #number# #unit#'\n\t\t\t// \t\t\t\t\t// \t\t.replace('#number#', $$(componentIds.validateRangeBefore).getValue())\n\t\t\t// \t\t\t\t\t// \t\t.replace('#unit#', $$(componentIds.validateRangeUnit).getValue());\n\n\t\t\t// \t\t\t\t\t// \treturn beforeLabel;\n\t\t\t// \t\t\t\t\t// }\n\t\t\t// \t\t\t\t},\n\t\t\t// \t\t\t\t{\n\t\t\t// \t\t\t\t\tview: 'label',\n\t\t\t// \t\t\t\t\tlabel: '[Current date]',\n\t\t\t// \t\t\t\t\talign: 'center'\n\t\t\t// \t\t\t\t},\n\t\t\t// \t\t\t\t{\n\t\t\t// \t\t\t\t\t// id: componentIds.validateRangeAfterLabel,\n\t\t\t// \t\t\t\t\tview: 'template',\n\t\t\t// \t\t\t\t\talign: 'right',\n\t\t\t// \t\t\t\t\tborderless: true,\n\t\t\t// \t\t\t\t\t// template: function () {\n\t\t\t// \t\t\t\t\t// \tvar afterLabel = 'After #number# #unit#'\n\t\t\t// \t\t\t\t\t// \t\t.replace('#number#', $$(componentIds.validateRangeAfter).getValue())\n\t\t\t// \t\t\t\t\t// \t\t.replace('#unit#', $$(componentIds.validateRangeUnit).getValue());\n\n\t\t\t// \t\t\t\t\t// \treturn afterLabel;\n\t\t\t// \t\t\t\t\t// }\n\t\t\t// \t\t\t\t}\n\t\t\t// \t\t\t]\n\t\t\t// \t\t},\n\t\t\t// \t\t{\n\t\t\t// \t\t\tcols: [\n\t\t\t// \t\t\t\t{\n\t\t\t// \t\t\t\t\t// id: componentIds.validateRangeBefore,\n\t\t\t// \t\t\t\t\tview: 'slider',\n\t\t\t// \t\t\t\t\tname: \"validateRangeBefore\",\n\t\t\t// \t\t\t\t\ton: {\n\t\t\t// \t\t\t\t\t\tonChange: function (newVal, oldValue) {\n\t\t\t// \t\t\t\t\t\t\t// $$(componentIds.validateRangeBeforeLabel).refresh();\n\t\t\t// \t\t\t\t\t\t}\n\t\t\t// \t\t\t\t\t}\n\t\t\t// \t\t\t\t},\n\t\t\t// \t\t\t\t{\n\t\t\t// \t\t\t\t\t// id: componentIds.validateRangeAfter,\n\t\t\t// \t\t\t\t\tview: 'slider',\n\t\t\t// \t\t\t\t\tname: \"validateRangeAfter\",\n\t\t\t// \t\t\t\t\ton: {\n\t\t\t// \t\t\t\t\t\tonChange: function (newVal, oldValue) {\n\t\t\t// \t\t\t\t\t\t\t// $$(componentIds.validateRangeAfterLabel).refresh();\n\t\t\t// \t\t\t\t\t\t}\n\t\t\t// \t\t\t\t\t}\n\t\t\t// \t\t\t\t}\n\t\t\t// \t\t\t]\n\t\t\t// \t\t}\n\t\t\t// \t]\n\t\t\t// },\n\t\t\t// {\n\t\t\t// \t// id: componentIds.validateLeft,\n\t\t\t// \tname: \"validateStartDate\",\n\t\t\t// \tview: 'datepicker',\n\t\t\t// \tlabel: 'Start Date',\n\t\t\t// },\n\t\t\t// {\n\t\t\t// \t// id: componentIds.validateRight,\n\t\t\t// \tname: \"validateEndDate\",\n\t\t\t// \tview: 'datepicker',\n\t\t\t// \tlabel: 'End Date'\n\t\t\t// }\n\n\t\t]\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules: {},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these:\n\tlogic: {\n\n\t\t// populate: function (ids, values) {\n\t\t// \tif (values.settings.validation) {\n\t\t// \t\t$$(ids.validateMinimum).enable();\n\t\t// \t\t$$(ids.validateMaximum).enable();\n\t\t// \t} else {\n\t\t// \t\t$$(ids.validateMinimum).disable();\n\t\t// \t\t$$(ids.validateMaximum).disable();\n\t\t// \t}\n\t\t// }\n\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit: function (ids) {\n\t\trefreshDateDisplay();\n\t}\n\n\n});\n\n\nclass ABFieldDate extends ABField {\n\tconstructor(values, object) {\n\t\tsuper(values, object, ABFieldDateDefaults);\n\n\t\t/*\n\t\t{\n\t\t\tsettings: {\n\t\t\t\ttextDefault: 'string',\n\t\t\t\tsupportMultilingual: true/false\n\t\t\t}\n\t\t}\n\t\t*/\n\n\t}\n\n\t// return the default values for this DataField\n\tstatic defaults() {\n\t\treturn ABFieldDateDefaults;\n\t}\n\n\t/*\n\t* @function propertiesComponent\n\t*\n\t* return a UI Component that contains the property definitions for this Field.\n\t*\n\t* @param {App} App the UI App instance passed around the Components.\n\t* @return {Component}\n\t*/\n\tstatic propertiesComponent(App) {\n\t\treturn ABFieldDateComponent.component(App);\n\t}\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\tisValid() {\n\n\t\tvar errors = super.isValid();\n\n\t\t// errors = OP.Form.validationError({\n\t\t// \tname:'columnName',\n\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t// }, errors);\n\n\t\treturn errors;\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\t// toObj () {\n\n\t// \tvar obj = super.toObj();\n\n\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t// \treturn obj;\n\t// }\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t// return the grid column header definition for this instance of ABFieldDate\n\tcolumnHeader(isObjectWorkspace) {\n\t\tvar config = super.columnHeader(isObjectWorkspace);\n\n\t\tconfig.editor = 'text';\n\t\tconfig.sort = 'string'\n\n\t\treturn config;\n\t}\n\n}\n\n\nexport default ABFieldDate;\n\n\n// WEBPACK FOOTER //\n// ../classes/dataFields/ABFieldDate.js","/*\n * ABFieldImage\n *\n * An ABFieldImage defines a Image field type.\n *\n */\n\nimport ABField from \"./ABField\"\nimport ABFieldComponent from \"./ABFieldComponent\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\n\nvar ABFieldImageDefaults = {\n\tkey : 'image', // unique key to reference this specific DataField\n\t// type : 'string', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\ticon : 'file-image-o',   // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\t\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName : L('ab.dataField.image.menuName', '*Image Attachment'),\n\t\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.image.description', '*Attach an image to this object.')\n}\n\n\n\nvar defaultValues = {\n\t'useWidth':0,\n\t'imageWidth':'',\n\t'useHeight': 0,\n\t'imageHeight': '',\n\t'removeExistingData': 0\n}\n\n\n\n/**\n * ABFieldImageComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\nvar ABFieldImageComponent = new ABFieldComponent({\n\n\tfieldDefaults: ABFieldImageDefaults,\n\n\telements:(App, field) => {\n\n\t\tvar ids = {\n\t\t\timageWidth: '',\n\t\t\timageHeight: ''\n\t\t}\n\t\tids = field.idsUnique(ids, App);\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"checkbox\",\n\t\t\t\t\t\tname:\"useWidth\", \n\t\t\t\t\t\tlabelRight:L('ab.dataField.image.width', \"*width\"), \n\t\t\t            width: 80,\n\t\t\t            labelWidth: 0,\n\t\t\t\t\t\tvalue:1,\n\t\t\t            click: function() {\n\t\t\t\t\t\t\tif (this.getValue())\n\t\t\t\t\t\t\t\t$$(ids.imageWidth).enable()\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t$$(ids.imageWidth).disable();\n\t\t\t            }\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: 'text',\n\t\t\t\t\t\tname:'imageWidth',\n\t\t\t\t\t\tid: ids.imageWidth\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"checkbox\",\n\t\t\t\t\t\tname:\"useHeight\",\n// id:componentIds.useHeight, \n\t\t\t\t\t\tlabelRight:L('ab.dataField.image.height', \"*height\"), \n\t\t\t          \twidth: 80,\n\t\t\t            labelWidth: 0,\n\t\t\t\t\t\tvalue:1,\n\t\t\t            click: function() {\n\t\t\t\t\t\t\tif (this.getValue())\n\t\t\t\t\t\t\t\t$$(ids.imageHeight).enable()\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t$$(ids.imageHeight).disable();\n\t\t\t            }\n\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: 'text',\n\t\t\t\t\t\tname: 'imageHeight',\n\t\t\t          \tid: ids.imageHeight\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules:{\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic:{\n\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit:function(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n})\n\n\n\n\n\nclass ABFieldImage extends ABField {\n\n    constructor(values, object) {\n    \tsuper(values, object, ABFieldImageDefaults);\n\n    \t/*\n    \t{\n\t\t\tsettings: {\n\t\t\t\t'useWidth':0,\n\t\t\t\t'imageWidth':'',\n\t\t\t\t'useHeight': 0,\n\t\t\t\t'imageHeight': '',\n\t\t\t\t'removeExistingData': 0\n\t\t\t}\n    \t}\n    \t*/\n\n    \t// we're responsible for setting up our specific settings:\n    \tfor (var dv in defaultValues) {\n    \t\tthis.settings[dv] = values.settings[dv] || defaultValues[dv];\n    \t}\n\n\n    \t// text to Int:\n    \tthis.settings.useWidth = parseInt(this.settings.useWidth);\n    \tthis.settings.useHeight = parseInt(this.settings.useHeight);\n    \tthis.settings.removeExistingData = parseInt(this.settings.removeExistingData);\n  \t}\n\n\n  \t// return the default values for this DataField\n  \tstatic defaults() {\n  \t\treturn ABFieldImageDefaults;\n  \t}\n\n\n\n\t/*\n\t * @function propertiesComponent\n\t *\n\t * return a UI Component that contains the property definitions for this Field.\n\t *\n\t * @param {App} App the UI App instance passed around the Components.\n\t * @return {Component}\n\t */\n  \tstatic propertiesComponent(App) {\n  \t\treturn ABFieldImageComponent.component(App);\n  \t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\tisValid() {\n\n\t\tvar errors = super.isValid();\n\n\t\t// errors = OP.Form.validationError({\n\t\t// \tname:'columnName',\n\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t// }, errors);\n\n\t\treturn errors;\n\t}\n\n\n\n\t/**\n\t * @function destroy\n\t * On a destroy operation, ask if the user wants to keep the related images.\n\t */\n\tdestroy () {\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => {\n\n\t\t\t\t// verify we have been .save()d before:\n\t\t\t\tif (this.id) {\n\n\t\t\t\t\t// Ask the user what to do about the existing images:\n\t\t\t\t\tOP.Dialog.Confirm({\n\t\t\t\t\t\ttitle: L('ab.dataField.image.keepImages', '*Keep Images?'),\n\t\t\t\t\t\tmessage: L('ab.dataField.image.keepImagesDescription', '*Do you want to keep the images referenced by #label#?').replace('#label#', this.label),\n\t\t\t\t\t\tcallback: (result) => {\n\n\t\t\t\t\t\t\t// update this setting so the server can respond correctly in\n\t\t\t\t\t\t\t// ABFieldImage.migrateDrop()\n\t\t\t\t\t\t\tthis.settings.removeExistingData = result ? 0: 1;\n\t\t\t\t\t\t\tthis.save()\n\t\t\t\t\t\t\t.then(()=>{\n\n// TODO: a reminder that you still got alot on the server to do!\nOP.Dialog.Alert({\n\ttitle:'!! TODO !!',\n\ttext:'Tell a Developer to actually pay attention to this!'\n})\n\t\t\t\t\t\t\t\t// now the default .destroy() \n\t\t\t\t\t\t\t\tsuper.destroy()\n\t\t\t\t\t\t\t\t.then(resolve)\n\t\t\t\t\t\t\t\t.catch(reject);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t} else {\n\t\t\t\t\tresolve();  // nothing to do really\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t)\n\t}\n\n\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\t// toObj () {\n\n\t// \tvar obj = super.toObj();\n\n\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t// \treturn obj;\n\t// }\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t// return the grid column header definition for this instance of ABFieldImage\n\tcolumnHeader (isObjectWorkspace) {\n\t\tvar config = super.columnHeader(isObjectWorkspace);\n\n\t\tconfig.editor = 'text';  // '[edit_type]'   for your unique situation\n\t\tconfig.sort   = 'string' // '[sort_type]'   for your unique situation\n\n\t\treturn config;\n\t}\n\n}\n\n\n\n//// NOTE: if you need a unique [edit_type] by your returned config.editor above:\n// webix.editors = {\n//   \"[edit_type]\": {\n//     focus: function () {...}\n//     getValue: function () {...},\n//     setValue: function (value) {...},\n//     render: function () {...}\n//   }\n// };\n\n\n//// NOTE: if you need a unique [sort_type] by your returned config.sort above:\n// webix.DataStore.prototype.sorting.as.[sort_type] = function(a,b){ \n//     return a > b ? 1 : -1; \n// }\n\n\nexport default ABFieldImage;\n\n\n\n// WEBPACK FOOTER //\n// ../classes/dataFields/ABFieldImage.js","/*\n * ABFieldNumber\n *\n * An ABFieldNumber defines a Number field type.\n *\n */\n\nimport ABField from \"./ABField\"\nimport ABFieldComponent from \"./ABFieldComponent\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\n\nvar ABFieldNumberDefaults = {\n\tkey : 'number', // unique key to reference this specific DataField\n\ticon : 'slack',   // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName : L('ab.dataField.number.menuName', '*Number'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.number.description', '*A Float or Integer Value')\n}\n\n\n\nvar formatList = [\n\t{ id: 'none', value: L('ab.dataField.number.none', \"*None\") },\n\t{ id: 'dollar', value: L('ab.dataField.number.format.dollar', \"$\"), sign: \"$\", position: \"prefix\" },\n\t{ id: 'pound', value: L('ab.dataField.number.format.pound', \"\"), sign: \"\", position: \"prefix\" },\n\t{ id: 'euroBefore', value: L('ab.dataField.number.format.euroBefore', \" (before)\"), sign: \"\", position: \"prefix\" },\n\t{ id: 'euroAfter', value: L('ab.dataField.number.format.euroAfter', \" (after)\"), sign: \"\", position: \"postfix\" },\n\t{ id: 'percent', value: L('ab.dataField.number.format.percent', \"%\"), sign: \"%\", position: \"postfix\" },\n];\n\nvar defaultValues = {\n\t'allowRequired':0,\n\t'numberDefault':'',\n\t'typeFormat': 'none',\n\t'typeDecimals': 'none',\n\t'typeDecimalPlaces': 'none',\n\t'typeRounding' : 'none',\n\t'typeThousands': 'none',\n\t'validation':0,\n\t'validateMinimum':'',\n\t'validateMaximum':''\n}\n\n/**\n * ABFieldNumberComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\nvar ABFieldNumberComponent = new ABFieldComponent({\n\n\tfieldDefaults: ABFieldNumberDefaults,\n\n\telements:(App, field) => {\n\n\n\n\t\t// var idBase = ABFieldNumberDefaults.type;\n\t\t// var ids = {\n\t\t// \ttypeDecimalPlaces: this.unique(App, '_typeDecimalPlaces'),  // App.unique(idBase +'_typeDecimalPlaces'),\n\t\t// \ttypeRounding: App.unique(idBase +'_typeRounding'),\n\t\t// \tvalidateMinimum: App.unique(idBase + '_validateMinimum'),\n\t\t// \tvalidateMaximum: App.unique(idBase + '_validateMaximum')\n\t\t// }\n\n\t\tvar ids = {\n\t\t\ttypeDecimalPlaces \t: '',\n\t\t\ttypeRounding \t\t: '',\n\t\t\tvalidateMinimum \t: '',\n\t\t\tvalidateMaximum \t: ''\n\t\t}\n\t\tids = field.idsUnique(ids, App);\n\n\t\treturn [\n\t\t\t// {\n\t\t\t// \tview: \"text\",\n\t\t\t// \tname:'textDefault',\n\t\t\t// \tlabelWidth: App.config.labelWidthLarge,\n\t\t\t// \tplaceholder: L('ab.dataField.string.default', '*Default text')\n\t\t\t// },\n\t\t\t{\n\t\t\t\tview: \"checkbox\",\n// id: componentIds.allowRequired,\n\t\t\t\tname:\"allowRequired\",\n\t\t\t\tlabelRight: L(\"ab.dataField.number.required\", \"*Required\"),\n\t\t\t\t// inputWidth: 130,\n\t\t\t\tlabelWidth: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"text\",\n\t\t\t\tlabel: L(\"ab.dataField.number.defaultValue\", \"*Default Value\"),\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n// id: componentIds.numberDefault,\n\t\t\t\tname:\"numberDefault\",\n\t\t\t\tplaceholder: L('ab.dataField.number.defaultNumber', '*Default number'),\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\t// Validate number\n\t\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t\t// $$(componentIds.numberDefault).setValue(oldVal);\n\t\t\t\t\t\t\tthis.setValue(oldVal);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"richselect\",\n// id: componentIds.typeFormat,\n\t\t\t\tname:'typeFormat',\n\t\t\t\tlabel: L('ab.dataField.number.format', \"*Format\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\toptions: formatList\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"richselect\",\n// id: componentIds.typeDecimals,\n\t\t\t\tname:'typeDecimals',\n\t\t\t\tlabel: L('ab.dataField.number.decimals', \"*Decimals\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\toptions: [\n\t\t\t\t\t{ id: 'none', value: L('ab.dataField.number.none', \"*None\") },\n\t\t\t\t\t{ id: 'period', value: L('ab.dataField.number.period', \"*Period\") },\n\t\t\t\t\t{ id: 'comma', value: L('ab.dataField.number.comma', \"*Comma\") }\n\t\t\t\t],\n\t\t\t\ton: {\n\t\t\t\t\t'onChange': function (newValue, oldValue) {\n\t\t\t\t\t\tif (newValue == 'none') {\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).disable();\n\t\t\t\t\t\t\t$$(ids.typeRounding).disable();\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).hide();\n\t\t\t\t\t\t\t$$(ids.typeRounding).hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).enable();\n\t\t\t\t\t\t\t$$(ids.typeRounding).enable();\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).show();\n\t\t\t\t\t\t\t$$(ids.typeRounding).show();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"richselect\",\n\t\t\t\tid: ids.typeDecimalPlaces,\n\t\t\t\tname:'typeDecimalPlaces',\n\t\t\t\tlabel: \"Places\",\n\t\t\t\tvalue: 'none',\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\tdisabled: true,\n\t\t\t\thidden: true,\n\t\t\t\toptions: [\n\t\t\t\t\t{ id: 'none', value: \"0\" },\n\t\t\t\t\t{ id: 1, value: \"1\" },\n\t\t\t\t\t{ id: 2, value: \"2\" },\n\t\t\t\t\t{ id: 3, value: \"3\" },\n\t\t\t\t\t{ id: 4, value: \"4\" },\n\t\t\t\t\t{ id: 5, value: \"5\" },\n\t\t\t\t\t{ id: 10, value: \"10\" }\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"richselect\",\n\t\t\t\tid: ids.typeRounding,\n\t\t\t\tname:'typeRounding',\n\t\t\t\tlabel: L('ab.dataField.number.rounding', \"*Rounding\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\tvertical: true,\n\t\t\t\tdisabled: true,\n\t\t\t\thidden: true,\n\t\t\t\toptions: [\n\t\t\t\t\t{ id: 'none', value: L('ab.dataField.number.default', \"*Default\") },\n\t\t\t\t\t{ id: 'roundUp', value: L('ab.dataField.number.roundUp', \"*Round Up\") },\n\t\t\t\t\t{ id: 'roundDown', value: L('ab.dataField.number.roundDown', \"*Round Down\") }\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"richselect\",\n// id: componentIds.typeThousands,\n\t\t\t\tname:'typeThousands',\n\t\t\t\tlabel: L('ab.dataField.number.thousands', \"*Thousands\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\tvertical: true,\n\t\t\t\toptions: [\n\t\t\t\t\t{ id: 'none', value: L('ab.dataField.number.none', \"*None\") },\n\t\t\t\t\t{ id: 'comma', value: L('ab.dataField.number.comma', \"*Comma\") },\n\t\t\t\t\t{ id: 'period', value: L('ab.dataField.number.period', \"*Period\") },\n\t\t\t\t\t{ id: 'space', value: L('ab.dataField.number.space', \"*Space\") }\n\t\t\t\t]\n\t\t\t},\n\n\n\n\t\t\t{\n\t\t\t\tview: 'checkbox',\n// id: componentIds.validate,\n\t\t\t\tname:'validation',\n\t\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\t\tlabelRight: L('ab.dataField.number.validation', \"*Validation\"),\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal) {\n\t\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\t\t$$(ids.validateMinimum).enable();\n\t\t\t\t\t\t\t$$(ids.validateMaximum).enable();\n\t\t\t\t\t\t\t$$(ids.validateMinimum).show();\n\t\t\t\t\t\t\t$$(ids.validateMaximum).show();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$$(ids.validateMinimum).disable();\n\t\t\t\t\t\t\t$$(ids.validateMaximum).disable();\n\t\t\t\t\t\t\t$$(ids.validateMinimum).hide();\n\t\t\t\t\t\t\t$$(ids.validateMaximum).hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: 'text',\n\t\t\t\tid: ids.validateMinimum,\n\t\t\t\tname:'validateMinimum',\n\t\t\t\tlabel: L('ab.dataField.number.minimum', \"*Minimum\"),\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\tdisabled: true,\n\t\t\t\thidden: true,\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function(newVal, oldVal) {\n\t\t\t\t\t\t// Validate number\n\t\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t\t$$(ids.validateMinimum).setValue(oldVal || '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: 'text',\n\t\t\t\tid: ids.validateMaximum,\n\t\t\t\tname:'validateMaximum',\n\t\t\t\tlabel: L('ab.dataField.number.maximum', \"*Maximum\"),\n\t\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\t\tdisabled: true,\n\t\t\t\thidden: true,\n\t\t\t\ton: {\n\t\t\t\t\tonChange: function (newVal, oldVal) {\n\t\t\t\t\t\t// Validate number\n\t\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t\t$$(ids.validateMaximum).setValue(oldVal || '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t]\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues:defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules:{\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these:\n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your\n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic:{\n\n\t\tpopulate:function(ids, values) {\n\t\t\tif (values.settings.validation) {\n\t\t\t\t$$(ids.validateMinimum).enable();\n\t\t\t\t$$(ids.validateMaximum).enable();\n\t\t\t} else {\n\t\t\t\t$$(ids.validateMinimum).disable();\n\t\t\t\t$$(ids.validateMaximum).disable();\n\t\t\t}\n\t\t}\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit:function(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n})\n\n\n\n\n\nclass ABFieldNumber extends ABField {\n\n    constructor(values, object) {\n    \tsuper(values, object, ABFieldNumberDefaults);\n\n    \t/*\n    \t{\n\t\t\tsettings: {\n\t\t\t\t'allowRequired':0,\n\t\t\t\t'numberDefault':null,\n\t\t\t\t'typeFormat': 'none',\n\t\t\t\t'typeDecimals': 'none',\n\t\t\t\t'typeDecimalPlaces': 'none',\n\t\t\t\t'typeRounding' : 'none',\n\t\t\t\t'typeThousands': 'none',\n\t\t\t\t'validation':0,\n\t\t\t\t'validateMinimum':null,\n\t\t\t\t'validateMaximum':null\n\t\t\t}\n    \t}\n    \t*/\n\n    \t// we're responsible for setting up our specific settings:\n    \tfor (var dv in defaultValues) {\n    \t\tthis.settings[dv] = values.settings[dv] || defaultValues[dv];\n    \t}\n\n\n    \t// text to Int:\n    \tthis.settings.allowRequired = parseInt(this.settings.allowRequired);\n    \tthis.settings.validation = parseInt(this.settings.validation);\n\n  \t}\n\n\n  \t// return the default values for this DataField\n  \tstatic defaults() {\n  \t\treturn ABFieldNumberDefaults;\n  \t}\n\n\n\n\t/*\n\t * @function propertiesComponent\n\t *\n\t * return a UI Component that contains the property definitions for this Field.\n\t *\n\t * @param {App} App the UI App instance passed around the Components.\n\t * @return {Component}\n\t */\n  \tstatic propertiesComponent(App) {\n  \t\treturn ABFieldNumberComponent.component(App);\n  \t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\tisValid() {\n\n\t\tvar errors = super.isValid();\n\n\t\t// errors = OP.Form.validationError({\n\t\t// \tname:'columnName',\n\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t// }, errors);\n\n\t\treturn errors;\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\t// toObj () {\n\n\t// \tvar obj = super.toObj();\n\n\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t// \treturn obj;\n\t// }\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t// return the grid column header definition for this instance of ABFieldNumber\n\tcolumnHeader (isObjectWorkspace) {\n\t\tvar config = super.columnHeader(isObjectWorkspace);\n\n\t\tconfig.editor = 'number';\t\t// [edit_type] simple inline editing.\n\t\tconfig.sort   = 'int';\t\t\t// [sort_type]\n\n\t\treturn config;\n\t}\n\n}\n\n\n\t// NOTE: if you need a unique [edit_type] by your returned config.editor above:\n    webix.editors.number = webix.extend({\n// TODO : Validate number only\n    }, webix.editors.text);\n\n\n//// NOTE: if you need a unique [sort_type] by your returned config.sort above:\n// webix.DataStore.prototype.sorting.as.[sort_type] = function(a,b){\n//     return a > b ? 1 : -1;\n// }\n\nexport default ABFieldNumber;\n\n\n\n// WEBPACK FOOTER //\n// ../classes/dataFields/ABFieldNumber.js","/*\n * ABFieldString\n *\n * An ABFieldString defines a string field type.\n *\n */\n\nimport ABField from \"./ABField\"\nimport ABFieldComponent from \"./ABFieldComponent\"\n\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\n\nvar ABFieldStringDefaults = {\n\tkey : 'string', // unique key to reference this specific DataField\n\t// type : 'string', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\ticon : 'font',   // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName : L('ab.dataField.string.menuName', '*Single line text'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.string.description', '*short string value')\n}\n\n\n\n\n/**\n * ABFieldStringComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n */\nvar ABFieldStringComponent = new ABFieldComponent({\n\n\tfieldDefaults: ABFieldStringDefaults,\n\n\telements:function(App) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tview: \"text\",\n\t\t\t\tname:'textDefault',\n\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\tlabel: L('ab.dataField.string.defaultLabel', '*Default'),\n\t\t\t\tplaceholder: L('ab.dataField.string.default', '*Enter default value')\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname:'supportMultilingual',\n\t\t\t\tlabelRight: L('ab.dataField.string.supportMultilingual', '*Support multilingual'),\n\t\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\t\tvalue: true\n\t\t\t}\n\t\t]\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues:{\n\t\t'textDefault': '',\n\t\t'supportMultilingual':1\n\t},\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules:{\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these:\n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your\n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic:{\n\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit:function(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n})\n\n\n\n\n\nclass ABFieldString extends ABField {\n\n    constructor(values, object) {\n    \tsuper(values, object, ABFieldStringDefaults);\n\n    \t/*\n    \t{\n\t\t\tsettings: {\n\t\t\t\ttextDefault: 'string',\n\t\t\t\tsupportMultilingual: true/false\n\t\t\t}\n    \t}\n    \t*/\n\n    \t// we're responsible for setting up our specific settings:\n    \tthis.settings.textDefault = values.settings.textDefault || '';\n    \tthis.settings.supportMultilingual = values.settings.supportMultilingual+\"\" || \"1\";\n\n    \t// text to Int:\n    \tthis.settings.supportMultilingual = parseInt(this.settings.supportMultilingual);\n\n  \t}\n\n\n  \t// return the default values for this DataField\n  \tstatic defaults() {\n  \t\treturn ABFieldStringDefaults;\n  \t}\n\n\n\n\t/*\n\t * @function propertiesComponent\n\t *\n\t * return a UI Component that contains the property definitions for this Field.\n\t *\n\t * @param {App} App the UI App instance passed around the Components.\n\t * @return {Component}\n\t */\n  \tstatic propertiesComponent(App) {\n  \t\treturn ABFieldStringComponent.component(App);\n  \t}\n\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\n\tisValid() {\n\n\t\tvar errors = super.isValid();\n\n\t\t// errors = OP.Form.validationError({\n\t\t// \tname:'columnName',\n\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t// }, errors);\n\n\t\treturn errors;\n\t}\n\n\n\t/**\n\t * @method toObj()\n\t *\n\t * properly compile the current state of this ABApplication instance\n\t * into the values needed for saving to the DB.\n\t *\n\t * Most of the instance data is stored in .json field, so be sure to\n\t * update that from all the current values of our child fields.\n\t *\n\t * @return {json}\n\t */\n\t// toObj () {\n\n\t// \tvar obj = super.toObj();\n\n\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t// \treturn obj;\n\t// }\n\n\n\n\n\t///\n\t/// Working with Actual Object Values:\n\t///\n\n\t// return the grid column header definition for this instance of ABFieldString\n\tcolumnHeader (isObjectWorkspace) {\n\t\tvar config = super.columnHeader(isObjectWorkspace);\n\n\t\tconfig.editor = 'text';\n\t\tconfig.sort   = 'string'\n\n\t\treturn config;\n\t}\n\n\n\n\t/*\n\t * @function isMultilingual\n\t * does this field represent multilingual data?\n\t * @return {bool}\n\t */\n\tisMultilingual() {\n\t\treturn this.settings.supportMultilingual == 1;\n\t}\n\n\n\n}\n\n\n\nexport default ABFieldString;\n\n\n\n// WEBPACK FOOTER //\n// ../classes/dataFields/ABFieldString.js","//\n// REFACTORING:\n//\n// Our goal here is to create a Model object that will interact with Sails' blueprints and \n// return native Webix DataCollections.\n//\n// We also want to listen for updates on Sails Sockets and notify the DataCollections.\n//\n// Until we have the refactoring in place, we will reuse the AD.Model.extent() objects,\n// and convert the results to DataCollections.\n//\n\n\n\n// Namespacing conventions:\n// OP.Model.extend('[application].[Model]', {static}, {instance} );  --> Object\nOP.Model.extend('opstools.BuildApp.ABApplication',\n\t{\n\t\tuseSockets: true,\n\t\trestURL: '/app_builder/abapplication'\n\t},\n\t{\n\t\t// instance Methods\n\t}\n);\n\t\t\n\t\t\n\n\n// WEBPACK FOOTER //\n// ../data/ABApplication.js","\n// Import component test cases\nimport './components/ab_work_object_list_popupEditMenu'\nimport './components/ab_work_object_list_newObject'\n\n\n// WEBPACK FOOTER //\n// ./test_app_builder.js"],"sourceRoot":""}