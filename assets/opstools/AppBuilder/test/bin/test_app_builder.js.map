{"version":3,"sources":["webpack:///webpack/bootstrap e5808b2d79879ab4e2ad","webpack:///./components/ab_work_object_list_popupEditMenu.js","webpack:////home/pong/Desktop/AppBuilder/~/app_builder/assets/opstools/BuildApp/BuildApp.js","webpack:////home/pong/Desktop/AppBuilder/~/app_builder/assets/opstools/BuildApp/OP_Bundle.js","webpack:///./test_app_builder.js"],"names":["describe","mockApp","OP","Component","_newApp","componentName","componentTarget","before","it","assert","isNotNull","ui","equal","view","menuItems","body","data","labelRename","labels","rename","labelDelete","length","command","itemClickFn","on","onItemClick","spyLogicItemClick","chai","spy","_logic","textContent","expect","to","have","been","called","init","skip","spyWebixUi","webix","with","webpackJsonp","module","exports","__webpack_require__","Object","defineProperty","value","_createClass","defineProperties","target","props","i","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_ABObject","_ABObject2","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","TypeError","_AllApplications","L","altText","AD","lang","label","getLabel","toDC","DataCollection","toArray","DC","ary","id","getFirstId","element","getItem","push","getNextId","ABApplication","attributes","_this","json","name","role","Multilingual","translate","fieldsMultilingual","newObjects","objects","forEach","_objects","Model","get","Models","destroy","_this2","then","remove","save","_this3","values","toObj","update","updateItem","create","add","unTranslate","currObjects","assignPermissions","permItems","_this4","Promise","resolve","reject","comm","service","put","url","roles","fail","done","getPermissions","_this5","createPermission","_this6","post","deletePermission","_this7","delete","filter","objectNew","objectDestroy","object","remaininObjects","o","objectSave","isIncluded","allApplications","ModelApplication","findAll","catch","newApp","app","App","isValid","op","errors","arrayApplications","nameMatch","trim","replace","toLowerCase","matchingApps","Form","validationError","message","ABField","fieldDefaults","defaults","fromValues","fieldName","fieldType","type","fieldIcon","icon","fieldMenuName","menuName","fieldDescription","description","isNameUnique","fields","f","isDifferent","columnName","fieldRemove","err","Util","uuid","fieldSave","settings","translations","showIcon","parseInt","columnHeader","isObjectWorkspace","config","header","clearEditor","ids","defaultValues","component","$$","setValue","editorPopulate","field","definitionEditor","Field","_onChange","onChange","newVal","oldVal","getValue","labelOnChange","_ui","rows","dataFieldHeaderLabel","placeholder","dataFieldHeaderLabelPlaceholder","labelWidth","labelWidthMedium","css","dataFieldColumnName","dataFieldColumnNamePlaceholder","align","labelRight","dataFieldShowIcon","labelWidthCheckbox","editorValues","_ABField","_ABField2","ABFieldComponent","options","elements","rules","logic","idBase","unique","eachDeep","e","autoheight","borderless","isNotEmpty","_init","clear","console","warn","clearValidation","hide","validate","populate","error","show","a","b","getValues","l","commonUI","concat","r","_component","list","fn","cols","idsUnique","_ABFieldString","_ABFieldString2","_ABFieldNumber","_ABFieldNumber2","_ABFieldImage","_ABFieldImage2","Fields","allFields","newField","_edittree","_edittree2","_editlist","_editlist2","_AppBuilder","_AppBuilder2","extend","edit","formName","ok","cancel","yes","no","createErrorMessage","createSuccessMessage","updateErrorMessage","updateSucessMessage","deleteErrorMessage","deleteSuccessMessage","renameErrorMessage","renameSuccessMessage","CustomComponent","AppChooser","AppWorkspace","animate","actions","transitionApplicationChooser","adjust","_actions","Control","OpsTool","self","templateDOM","resize_notification","tool","_super","webixUiId","loadingScreen","syncButton","initDOM","initWebixUI","cb","can","fragment","html","AppBuilder","container","resize","height","appListDom","$","width","parent","computedHeight","log","mh","_ABFieldManager","_ABFieldManager2","ABObject","application","labelFormat","isImported","urlPath","importFromObject","objectWorkspace","hiddenFields","newFields","fieldNew","_fields","currFields","columnHeaders","headers","idLookup","h","workspaceHiddenFields","hfID","hidden","set","_get","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","getPrototypeOf","getter","call","_ABField3","_ABFieldComponent","_ABFieldComponent2","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","constructor","setPrototypeOf","__proto__","ABFieldImageDefaults","ABFieldImageComponent","imageWidth","imageHeight","click","enable","disable","ABFieldImage","dv","useWidth","useHeight","editor","sort","propertiesComponent","ABFieldNumberDefaults","formatList","sign","position","ABFieldNumberComponent","typeDecimalPlaces","typeRounding","validateMinimum","validateMaximum","inputWidth","RegExp","test","newValue","oldValue","disabled","vertical","validation","ABFieldNumber","allowRequired","editors","number","text","ABFieldStringDefaults","ABFieldStringComponent","labelWidthLarge","ABFieldString","textDefault","supportMultilingual","AppList","AppForm","cells","_ABApplication","_ABApplication2","formHeader","placeholderName","placeholderDescription","formDescription","sectionPermission","permissionHeader","createNewRole","invalidName","duplicateName","common","form","appFormPermissionList","appFormCreateRoleButton","saveButton","responsive","maxWidth","appListSpacerColMaxWidth","minWidth","appListSpacerColMinWidth","responsiveCell","maxHeight","appListSpacerRowHeight","hideMobile","fillspace","margin","required","permissionRenameRole","smallSpacer","labelAlign","template","autowidth","offIcon","onIcon","createRoleButtonClick","markCheckbox","node","permissionClick","buttonWidthSmall","buttonSaveClick","FormFields","ProgressBar","applicationCreate","async","waterfall","result","createdApp","permissionSave","formReady","buttonSaveEnable","transitionApplicationList","applicationUpdate","Application","formValues","next","app_role","buttonSaveDisable","formBusy","updateApp","getSelectedApplication","formValidate","formReset","appName","permissionAddNew","permissionRemoveNew","showProgress","formPopulate","hideProgress","isValidationError","permissionName","isApplicationRole","selectedIds","getSelectedId","select","List","item","isSelected","unselect","isNaN","permissionPopulate","PermForm","parsedRoles","map","split","join","available_roles","selected_role_ids","clearAll","parse","indexOf","markCreateButton","appRoles","find","perm","editRole","d","editItem","saveRoleTasks","appRole","selectedPerms","getSelectedItem","appRoleItem","series","results","transitionApplicationForm","unselectApplication","title","createNew","noApplication","uploader","toolBar","buttonCreateNewApplication","MenuComponent","PopupMenu","import","upload","multiple","autosend","onAfterFileAdd","onFileUpload","response","onFileUploadError","details","templateListItem","appListRowHeight","iconGear","onClick","abAppListItem","ev","trg","onClickListItem","abAppListEdit","onClickListEdit","_data","busy","loadData","ready","attachEvent","index","refreshOverlay","listApplications","refreshList","selectedApp","transitionWorkspace","errorMessage","Dialog","Alert","appList","count","showOverlay","hideOverlay","reset","unselectAll","unsync","sync","refresh","_templateListItem","OverlayBox","deleteApplication","menu","confirmDeleteTitle","confirmDeleteMessage","head","export","datatype","timestamp","ConfirmDelete","callback","window","location","assign","backToApplication","synchronize","objectTitle","interfaceTitle","buttonSync","labelAppName","tabbar","tab_object","tab_interface","workspace","AppObjectWorkspace","AppInterfaceWorkspace","alrign","mediumSpacer","multiview","tabWidthMedium","idNew","idOld","tabSwitch","applicationInit","define","idTab","applicationLoad","ObjectList","ObjectWorkspace","clearObjectWorkspace","addNew","buttonNew","ObjectEditPopup","custom","editlist","editaction","editable","editValue","onAfterRender","onAfterSelect","selectObject","onBeforeEditStop","state","onAfterEditStop","ignoreUpdate","abObjectListEdit","clickEditMenu","clickNewObject","callbackObjectEditorMenu","listBusy","CurrentApplication","objectList","syncNumberRefresh","listReady","PopupNewObjectComponent","showGear","old","selectedObject","populateObjectWorkspace","gearIcon","getItemNode","querySelector","style","visibility","display","callbackNewObject","Error","newObject","PopupNewObject","objectId","Confirm","isOK","action","onDone","getSelectedObject","BlankTab","modal","selectNewObject","c","callbacks","ourCBs","onCancel","onSave","currentApplication","validationErrors","buttonSave","buttonCancel","formClear","itemNode","addNewRow","hideFields","filterFields","sortFields","frozenColumns","defineLabel","permission","addFields","buttonAddField","buttonExport","buttonFieldsVisible","buttonFilter","buttonFrozen","buttonLabel","buttonRowNew","buttonSort","datatable","toolbar","noSelection","DataTable","PopupDefineLabelComponent","PopupDefineLabel","PopupNewDataFieldComponent","PopupHideFieldComponent","PopupHideField","badge","toolbarFieldsVisible","$view","toolbarFilter","toolbarSort","toolbarFrozen","toolbarDefineLabel","toolbarPermission","toolbarAddFields","toolbarButtonExport","rowAdd","onEditorMenu","callbackHeaderEditorMenu","callbackDefineLabel","callbackAddFields","callbackFieldsVisible","CurrentObject","populateObjectPopupAddDataField","objectLoad","resizeColumn","resizeRow","prerender","fixedRowHeight","dragColumn","onBeforeSelect","preserve","prevent","onCheck","row","col","val","onColumnResize","newWidth","oldWidth","user_action","onBeforeColumnDrag","sourceId","event","onBeforeColumnDrop","targetId","onAfterColumnDrop","onAfterColumnShow","onAfterColumnHide","onHeaderClick","EditField","EditNode","callbackHeaderEdit","PopupHeaderEdit","column","PopupHeaderEditComponent","refreshColumns","selectFieldToGenerate","labelFields","format","onShow","_currentObject","ButtonSave","each","listFields","selectedItem","Format","hideField","filterField","sortField","editField","deleteField","listItems","showAll","hideAll","clickShowAll","clickHideAll","listItemClick","iconsReset","newHidden","isHidden","fID","iconShow","iconHide","chooseType","addNewField","types","editDefinitions","submenu","typeClick","preventDefault","onMenuItemClick","onBeforeShow","resetState","onHide","_objectHash","_componentHash","_componentsByType","_currentEditor","defaultEditorComponent","_editField","submenus","newEditorList","F","editorComponent","firstID","oldData","modeAdd","modeEdit","subMenuId","getSubMenu","useSockets","restURL","ComponentKey","componentKey","protoUI","EditAbility","tree","useSourceMap","toString","content","cssWithMappingToString","modules","mediaQuery","alreadyImportedModules","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","baseUrl","protocol","host","currentDir","pathname","fixedCss","fullMatch","origUrl","unquotedOrigUrl","$1","newUrl","stylesInDom","memoize","memo","apply","arguments","isOldIE","document","all","atob","getElement","selector","styleTarget","singletonElement","singletonCounter","styleElementsInsertedAtTop","fixUrls","DEBUG","attrs","singleton","insertInto","insertAt","styles","listToStyles","addStylesToDom","newList","mayRemove","domStyle","refs","newStyles","j","parts","addStyle","media","part","insertStyleElement","styleElement","lastStyleElementInsertedAtTop","insertBefore","firstChild","nextSibling","appendChild","removeStyleElement","parentNode","removeChild","idx","splice","createStyleElement","createElement","attachTagAttrs","createLinkElement","linkElement","rel","keys","setAttribute","styleIndex","applyToSingletonTag","bind","URL","createObjectURL","revokeObjectURL","Blob","updateLink","href","applyToTag","updateStyle","newObj","replaceText","textStore","replacement","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","locals","hot","accept","newContent","require","dispose","parentJsonpFunction","webpackJsonpCallback","chunkIds","moreModules","executeModules","moduleId","chunkId","resolves","installedChunks","hasOwnProperty","shift","s","installedModules","requireEnsure","promise","getElementsByTagName","script","charset","timeout","nc","src","p","setTimeout","onScriptComplete","onerror","onload","clearTimeout","chunk","m","n","getDefault","getModuleExports","oe","_configDesktop","_configDesktop2","_configMobile","_configMobile2","innerWidth","errorObj","invalidAttributes","attr","hasFocused","raw","code","wasForm","msg","markInvalid","focus","_restURLs","findOne","_Models","OPModel","staticData","instanceData","cond","verb","params","Array","isArray","dc","onAfterDelete","nURI","k","oURI","util","string","replaceAll","uri","pop","u","curr","nameSpace","modelName","objectName","findObject","baseObj","nameList","whoops","objName","controlName","currLanguage","currentLanguage","t","language_code","foundOne","trans","_form","_form2","_multilingual","_multilingual2","_model","_model2","_util","_util2","_config","_config2","uid","buttonWidthLarge","buttonWidthMedium","buttonWidthExtraSmall","tabWidthLarge","tabWidthSmall","tabWidthExtraSmall","largeSpacer","objectWorkspaceColWidth","labelWidthSmall"],"mappings":"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","file":"test_app_builder.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e5808b2d79879ab4e2ad","describe('ab_work_object_list_popupEditMenu component', () => {\n\n\tvar mockApp = OP.Component._newApp();\n\tvar componentName = 'ab_work_object_list_popupEditMenu';\n\tvar componentTarget;\n\n\tbefore(() => {\n\t\tOP.Component['ab'](mockApp);\n\n\t\tcomponentTarget = OP.Component[componentName](mockApp);\n\n\t\t// TODO: render UI function\n\t\t// buildHTML();\n\n\t\t// TODO: mock up parent dependencies\n\t});\n\n\tit('should exist component', () => {\n\t\tassert.isNotNull(componentTarget);\n\t});\n\n\t// UI test cases\n\tdescribe('UI testing', () => {\n\n\t\tit('should have ui setting', () => {\n\t\t\tassert.isNotNull(componentTarget.ui, \"should have a ui property\");\n\t\t});\n\n\t\tit(\"should be webix's popup\", () => {\n\t\t\tassert.equal(componentTarget.ui.view, \"popup\");\n\t\t});\n\n\t\tit('should have 2 menu items', () => {\n\t\t\tlet menuItems = componentTarget.ui.body.data;\n\n\t\t\tlet labelRename = mockApp.labels.rename;\n\t\t\tlet labelDelete = mockApp.labels['delete'];\n\n\t\t\tassert.equal(menuItems.length, 2);\n\t\t\tassert.equal(menuItems[0].command, labelRename, 'first menu item should be rename');\n\t\t\tassert.equal(menuItems[1].command, labelDelete, 'second menu item should be delete');\n\t\t});\n\n\t\tit('should have item click event', () => {\n\t\t\tvar itemClickFn = componentTarget.ui.body.on.onItemClick;\n\n\t\t\tassert.isNotNull(itemClickFn, 'should have item click event');\n\t\t});\n\n\t\tit('should call _logic.onItemClick when a menu item is clicked', () => {\n\t\t\tvar itemClickFn = componentTarget.ui.body.on.onItemClick;\n\t\t\tvar spyLogicItemClick = chai.spy(componentTarget._logic.onItemClick);\n\n\t\t\t// Assume a menu item is clicked\n\t\t\titemClickFn(null, null, { textContent: '' });\n\n\t\t\t// Assert _logic.onItemClick should be called in onItemClick of menu\n\t\t\texpect(spyLogicItemClick).to.have.been.called;\n\t\t});\n\n\t});\n\n\n\tdescribe('Init testing', () => {\n\t\tit('should have init function', () => {\n\t\t\tassert.isNotNull(componentTarget.init, \"should have a init property\");\n\t\t});\n\n\t\tit.skip('should create webix ui', () => {\n\t\t\tvar spyWebixUi = chai.spy(webix.ui);\n\n\t\t\t// Call init\n\t\t\tcomponentTarget.init();\n\n\t\t\t// Should pass .ui to a parameter of webix.ui\n\t\t\texpect(spyWebixUi).to.have.been.called.with(componentTarget.ui, 'Should pass .ui to a parameter of webix.ui');\n\t\t});\n\n\t});\n\n\tdescribe('Actions testing', () => {\n\t});\n\n\tdescribe('Logic testing', () => {\n\t});\n\n\n\n});\n\n\n// WEBPACK FOOTER //\n// ./components/ab_work_object_list_popupEditMenu.js","webpackJsonp([0],[\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n// import OP from \"OP\"\n\n\n__webpack_require__(35);\n\nvar _ABObject = __webpack_require__(14);\n\nvar _ABObject2 = _interopRequireDefault(_ABObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _AllApplications = [];\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nfunction toDC(data) {\n\treturn new webix.DataCollection({\n\t\tdata: data\n\n\t});\n}\n\nfunction toArray(DC) {\n\tvar ary = [];\n\n\tvar id = DC.getFirstId();\n\twhile (id) {\n\t\tvar element = DC.getItem(id);\n\t\tary.push(element);\n\t\tid = DC.getNextId(id);\n\t}\n\n\treturn ary;\n}\n\nvar ABApplication = function () {\n\tfunction ABApplication(attributes) {\n\t\tvar _this = this;\n\n\t\t_classCallCheck(this, ABApplication);\n\n\t\t// ABApplication Attributes\n\t\tthis.id = attributes.id;\n\t\tthis.json = attributes.json;\n\t\tthis.name = attributes.name || this.json.name || \"\";\n\t\tthis.role = attributes.role;\n\n\t\t// multilingual fields: label, description\n\t\tOP.Multilingual.translate(this, this.json, ABApplication.fieldsMultilingual());\n\n\t\t// import all our ABObjects\n\t\tvar newObjects = [];\n\t\t(attributes.json.objects || []).forEach(function (obj) {\n\t\t\tnewObjects.push(new _ABObject2.default(obj, _this));\n\t\t});\n\t\tthis._objects = newObjects;\n\n\t\t// import all our ABViews\n\n\n\t\t// instance keeps a link to our Model for .save() and .destroy();\n\t\tthis.Model = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\tthis.Model.Models(ABApplication);\n\t}\n\n\t///\n\t/// Static Methods\n\t///\n\t/// Available to the Class level object.  These methods are not dependent\n\t/// on the instance values of the Application.\n\t///\n\n\n\t/**\n  * @function allApplications\n  *\n  * return a DataCollection that contains all the ABApplications this user\n  * can see (based upon server side permissions);\n  *\n  * NOTE: this manages the results in the _AllApplications dataCollection\n  * store.  Any future .create(), .destroy(), .updates() modify values in\n  * that collection.\n  *\n  * Any webix ui components synced to that collection will be automatically\n  * updated.\n  *\n  * @return {Promise}\n  */\n\n\n\t_createClass(ABApplication, [{\n\t\tkey: \"destroy\",\n\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\t/// ABApplication data methods\n\n\n\t\t/**\n   * @method destroy()\n   *\n   * destroy the current instance of ABApplication\n   *\n   * also remove it from our _AllApplications\n   *\n   * @return {Promise}\n   */\n\t\tvalue: function destroy() {\n\t\t\tvar _this2 = this;\n\n\t\t\tif (this.id) {\n\t\t\t\treturn this.Model.destroy(this.id).then(function () {\n\t\t\t\t\t_AllApplications.remove(_this2.id);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/**\n   * @method save()\n   *\n   * persist the current instance of ABApplication to the DB\n   *\n   * Also, keep the values in _AllApplications up to date.\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"save\",\n\t\tvalue: function save() {\n\t\t\tvar _this3 = this;\n\n\t\t\tvar values = this.toObj();\n\n\t\t\t// we already have an .id, so this must be an UPDATE\n\t\t\tif (values.id) {\n\n\t\t\t\treturn this.Model.update(values.id, values).then(function () {\n\t\t\t\t\t_AllApplications.updateItem(values.id, _this3);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\t// must be a CREATE:\n\t\t\t\treturn this.Model.create(values).then(function (data) {\n\t\t\t\t\t_this3.id = data.id;\n\t\t\t\t\t_AllApplications.add(_this3, 0);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\n\t}, {\n\t\tkey: \"toObj\",\n\t\tvalue: function toObj() {\n\n\t\t\tOP.Multilingual.unTranslate(this, this.json, ABApplication.fieldsMultilingual());\n\t\t\tthis.json.name = this.name;\n\n\t\t\t// for each Object: compile to json\n\t\t\tvar currObjects = [];\n\t\t\tthis._objects.forEach(function (obj) {\n\t\t\t\tcurrObjects.push(obj.toObj());\n\t\t\t});\n\t\t\tthis.json.objects = currObjects;\n\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tname: this.name,\n\t\t\t\tjson: this.json,\n\t\t\t\trole: this.role\n\t\t\t};\n\t\t}\n\n\t\t/// ABApplication Permission methods\n\n\n\t\t/**\n   * @method assignPermissions()\n   *\n   * Make sure the current ABApplication permissions match the given\n   * array of permissions.\n   *\n   * @param {array} permItems\tan array of role assignments that this\n   * \t\t\t\t\t\t\tABApplication should match.\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"assignPermissions\",\n\t\tvalue: function assignPermissions(permItems) {\n\t\t\tvar _this4 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tAD.comm.service.put({\n\t\t\t\t\turl: '/app_builder/' + _this4.id + '/role/assign',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\troles: permItems\n\t\t\t\t\t}\n\t\t\t\t}).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method getPermissions()\n   *\n   * Return an array of role assignments that are currently assigned to this\n   * ABApplication.\n   *\n   * @return {Promise} \tresolve(list) : list {array} Role assignments\n   */\n\n\t}, {\n\t\tkey: \"getPermissions\",\n\t\tvalue: function getPermissions() {\n\t\t\tvar _this5 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tAD.comm.service.get({ url: '/app_builder/' + _this5.id + '/role' }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method createPermission()\n   *\n   * Create a Role in the system after the name of the current ABApplication.\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"createPermission\",\n\t\tvalue: function createPermission() {\n\t\t\tvar _this6 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// TODO: need to take created role and store as : .json.applicationRole = role.id\n\n\t\t\t\tAD.comm.service.post({ url: '/app_builder/' + _this6.id + '/role' }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method deletePermission()\n   *\n   * Remove the Role in the system of the current ABApplication.\n   * (the one created by  .createPermission() )\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"deletePermission\",\n\t\tvalue: function deletePermission() {\n\t\t\tvar _this7 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// TODO: need to remove created role from : .json.applicationRole\n\t\t\t\tAD.comm.service.delete({ url: '/app_builder/' + _this7.id + '/role' }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\n\t\t///\n\t\t/// Objects\n\t\t///\n\n\n\t\t/**\n   * @method objects()\n   *\n   * return an array of all the ABObjects for this ABApplication.\n   *\n   * @param {fn} filter  \ta filter fn to return a set of ABObjects that this fn\n   *\t\t\t\t\t\treturns true for.\n   * @return {array} \tarray of ABObject\n   */\n\n\t}, {\n\t\tkey: \"objects\",\n\t\tvalue: function objects(filter) {\n\n\t\t\tfilter = filter || function () {\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\treturn this._objects.filter(filter);\n\t\t}\n\n\t\t/**\n   * @method objectNew()\n   *\n   * return an instance of a new (unsaved) ABObject that is tied to this\n   * ABApplication.\n   *\n   * NOTE: this new object is not included in our this.objects until a .save()\n   * is performed on the object.\n   *\n   * @return {ABObject}\n   */\n\n\t}, {\n\t\tkey: \"objectNew\",\n\t\tvalue: function objectNew(values) {\n\t\t\treturn new _ABObject2.default(values, this);\n\t\t}\n\n\t\t/**\n   * @method objectDestroy()\n   *\n   * remove the current ABObject from our list of ._objects.\n   *\n   * @param {ABObject} object\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"objectDestroy\",\n\t\tvalue: function objectDestroy(object) {\n\n\t\t\tvar remaininObjects = this.objects(function (o) {\n\t\t\t\treturn o.id != object.id;\n\t\t\t});\n\t\t\tthis._objects = remaininObjects;\n\t\t\treturn this.save();\n\n\t\t\t// var isIncluded = (this.objects(function(o){ return o.id == object.id }).length > 0);\n\t\t\t// if (!isIncluded) {\n\t\t\t// \tthis._objects.push(object);\n\t\t\t// }\n\n\t\t\t// return this.save();\n\t\t}\n\n\t\t/**\n   * @method objectSave()\n   *\n   * persist the current ABObject in our list of ._objects.\n   *\n   * @param {ABObject} object\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"objectSave\",\n\t\tvalue: function objectSave(object) {\n\t\t\tvar isIncluded = this.objects(function (o) {\n\t\t\t\treturn o.id == object.id;\n\t\t\t}).length > 0;\n\t\t\tif (!isIncluded) {\n\t\t\t\tthis._objects.push(object);\n\t\t\t}\n\n\t\t\treturn this.save();\n\t\t}\n\t}], [{\n\t\tkey: \"allApplications\",\n\t\tvalue: function allApplications() {\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar ModelApplication = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\t\t\tModelApplication.Models(ABApplication); // set the Models  setting.\n\n\t\t\t\tModelApplication.findAll().then(function (data) {\n\n\t\t\t\t\t// NOTE: data is already a DataCollection from .findAll()\n\t\t\t\t\t_AllApplications = data;\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @function create\n   *\n   * take the initial values and create an instance of ABApplication.\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"create\",\n\t\tvalue: function create(values) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar newApp = {};\n\t\t\t\tOP.Multilingual.unTranslate(values, newApp, ABApplication.fieldsMultilingual());\n\t\t\t\tvalues.json = newApp;\n\t\t\t\tnewApp.name = values.name;\n\n\t\t\t\tvar ModelApplication = OP.Model.get('opstools.BuildApp.ABApplication');\n\t\t\t\tModelApplication.create(values).then(function (app) {\n\n\t\t\t\t\t// return an instance of ABApplication\n\t\t\t\t\tvar App = new ABApplication(app);\n\n\t\t\t\t\t_AllApplications.add(App, 0);\n\t\t\t\t\tresolve(App);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method fieldsMultilingual()\n   *\n   * return an array of fields that are considered Multilingual labels for\n   * an ABApplication\n   *\n   * @return {array}\n   */\n\n\t}, {\n\t\tkey: \"fieldsMultilingual\",\n\t\tvalue: function fieldsMultilingual() {\n\t\t\treturn ['label', 'description'];\n\t\t}\n\n\t\t//// TODO: Refactor isValid() to ignore op and not error if duplicateName is own .id\n\n\t}, {\n\t\tkey: \"isValid\",\n\t\tvalue: function isValid(op, values) {\n\n\t\t\tvar errors = null;\n\n\t\t\t// during an ADD operation\n\t\t\tif (op == 'add') {\n\n\t\t\t\t// label/name must be unique:\n\t\t\t\tvar arrayApplications = toArray(_AllApplications);\n\n\t\t\t\tvar nameMatch = values.label.trim().replace(/ /g, '_').toLowerCase();\n\t\t\t\tvar matchingApps = arrayApplications.filter(function (app) {\n\t\t\t\t\treturn app.name.trim().toLowerCase() == nameMatch;\n\t\t\t\t});\n\t\t\t\tif (matchingApps && matchingApps.length > 0) {\n\n\t\t\t\t\terrors = OP.Form.validationError({\n\t\t\t\t\t\tname: 'label',\n\t\t\t\t\t\tmessage: L('ab_form_application_duplicate_name', \"*Name (#name#) is already in use\").replace('#name#', nameMatch)\n\t\t\t\t\t}, errors);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check the common validations:\n\t\t\t// TODO:\n\t\t\t// if (!inputValidator.validate(values.label)) {\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\n\t\t\treturn errors;\n\t\t}\n\t}]);\n\n\treturn ABApplication;\n}();\n\nexports.default = ABApplication;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n * ABField\n *\n * An ABField defines a single unique Field/Column in a ABObject.\n *\n */\n\n// import OP from \"../../OP/OP\"\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABField = function () {\n\tfunction ABField(values, object, fieldDefaults) {\n\t\t_classCallCheck(this, ABField);\n\n\t\t// NOTE: setup this first so later we can use .fieldType(), .fieldIcon()\n\t\tthis.defaults = fieldDefaults;\n\n\t\t/*\n  {\n  id:'uuid',\t\t\t\t\t// uuid value for this obj\n  type:'fieldType',\t\t\t// unique key for this Field\n  icon:'font',\t\t\t\t// fa-[icon] reference for an icon for this Field Type\n  label:'',\t\t\t\t\t// pulled from translation\n  columnName:'column_name',\t// a valid mysql table.column name \n  settings: {\t\t\t\t\t// unique settings for the type of field\n  showIcon:true/false,\t// only useful in Object Workspace DataTable\n  // specific for dataField\n  },\n  translations:[]\n  }\n  */\n\t\tthis.fromValues(values);\n\n\t\t// label is a multilingual value:\n\t\tOP.Multilingual.translate(this, this, ['label']);\n\n\t\tthis.object = object;\n\t}\n\n\t///\n\t/// Static Methods\n\t///\n\t/// Available to the Class level object.  These methods are not dependent\n\t/// on the instance values of the Application.\n\t///\n\n\t_createClass(ABField, [{\n\t\tkey: 'fieldName',\n\n\n\t\t// unique key to reference this specific DataField\n\t\tvalue: function fieldName() {\n\t\t\treturn this.defaults.name;\n\t\t}\n\n\t\t// http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\n\t}, {\n\t\tkey: 'fieldType',\n\t\tvalue: function fieldType() {\n\t\t\treturn this.defaults.type;\n\t\t}\n\n\t\t// font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\n\t}, {\n\t\tkey: 'fieldIcon',\n\t\tvalue: function fieldIcon() {\n\t\t\treturn this.defaults.icon;\n\t\t}\n\n\t\t// the multilingual text for the name of this data field.\n\n\t}, {\n\t\tkey: 'fieldMenuName',\n\t\tvalue: function fieldMenuName() {\n\t\t\treturn this.defaults.menuName;\n\t\t}\n\n\t\t// the multilingual text for the name of this data field.\n\n\t}, {\n\t\tkey: 'fieldDescription',\n\t\tvalue: function fieldDescription() {\n\t\t\treturn this.defaults.description;\n\t\t}\n\n\t\t/*\n   * @method isValid\n   * check the current values to make sure they are valid.\n   * Here we check the default values provided by ABField.\n   *\n   * @return null or [{OP.Form.validationError()}] objects.\n   */\n\n\t}, {\n\t\tkey: 'isValid',\n\t\tvalue: function isValid() {\n\t\t\tvar _this = this;\n\n\t\t\tvar errors = null;\n\n\t\t\t// .columnName must be unique among fileds on the same object\n\t\t\tvar isNameUnique = this.object.fields(function (f) {\n\t\t\t\tvar isDifferent = f.id != _this.id;\n\t\t\t\treturn f.id != _this.id && f.columnName.toLowerCase() == _this.columnName.toLowerCase();\n\t\t\t}).length == 0;\n\t\t\tif (!isNameUnique) {\n\t\t\t\terrors = OP.Form.validationError({\n\t\t\t\t\tname: 'columnName',\n\t\t\t\t\tmessage: L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.columnName)\n\t\t\t\t}, errors);\n\t\t\t}\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\t/// ABApplication data methods\n\n\n\t\t/**\n   * @method destroy()\n   *\n   * destroy the current instance of ABApplication\n   *\n   * also remove it from our _AllApplications\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: 'destroy',\n\t\tvalue: function destroy() {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// verify we have been .save()d before:\n\t\t\t\tif (_this2.id) {\n\n\t\t\t\t\t_this2.object.fieldRemove(_this2).then(function () {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\n\t\t\t\t\tresolve(); // nothing to do really\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method save()\n   *\n   * persist this instance of ABField with it's parent ABObject\n   *\n   *\n   * @return {Promise}\n   *\t\t\t\t\t\t.resolve( {this} )\n   */\n\n\t}, {\n\t\tkey: 'save',\n\t\tvalue: function save() {\n\t\t\tvar _this3 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// if this is our initial save()\n\t\t\t\tif (!_this3.id) {\n\t\t\t\t\t_this3.id = OP.Util.uuid(); // setup default .id\n\t\t\t\t}\n\n\t\t\t\t_this3.object.fieldSave(_this3).then(function () {\n\t\t\t\t\tresolve(_this3);\n\t\t\t\t}).catch(function (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABField instance\n   * into the values needed for saving to the DB.\n   *\n   * @return {json}\n   */\n\n\t}, {\n\t\tkey: 'toObj',\n\t\tvalue: function toObj() {\n\n\t\t\t// store \"label\" in our translations\n\t\t\tOP.Multilingual.unTranslate(this, this, [\"label\"]);\n\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\ttype: this.type,\n\t\t\t\ticon: this.icon,\n\t\t\t\tcolumnName: this.columnName,\n\t\t\t\tsettings: this.settings,\n\t\t\t\ttranslations: this.translations\n\t\t\t};\n\t\t}\n\t}, {\n\t\tkey: 'fromValues',\n\t\tvalue: function fromValues(values) {\n\n\t\t\tthis.id = values.id; // NOTE: only exists after .save()\n\t\t\tthis.type = values.type || this.fieldType();\n\t\t\tthis.icon = values.icon || this.fieldIcon();\n\n\t\t\t// if this is being instantiated on a read from the Property UI,\n\t\t\t// .label is coming in under .settings.label\n\t\t\tthis.label = values.label || values.settings.label || '?label?';\n\n\t\t\tthis.columnName = values.columnName || '';\n\t\t\tthis.translations = values.translations || [];\n\n\t\t\tthis.settings = values.settings || {};\n\t\t\tthis.settings.showIcon = values.settings.showIcon + \"\" || \"1\";\n\n\t\t\t// convert from \"0\" => 0\n\t\t\tthis.settings.showIcon = parseInt(this.settings.showIcon);\n\t\t}\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t/*\n   * @function columnHeader\n   * Return the column header for a webix grid component for this specific \n   * data field.\n   * @param {bool} isObjectWorkspace is this being used in the Object \n   *\t\t\t\t\t\t\t\t   workspace.\n   * @return {obj}  configuration obj\n   */\n\n\t}, {\n\t\tkey: 'columnHeader',\n\t\tvalue: function columnHeader(isObjectWorkspace) {\n\n\t\t\tvar config = {\n\t\t\t\tid: this.id,\n\t\t\t\theader: this.label\n\t\t\t};\n\n\t\t\tif (isObjectWorkspace) {\n\t\t\t\tif (this.settings.showIcon) {\n\t\t\t\t\tconfig.header = '<span class=\"webix_icon fa-{icon}\"></span>'.replace('{icon}', this.fieldIcon()) + config.header;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn config;\n\t\t}\n\t}], [{\n\t\tkey: 'clearEditor',\n\t\tvalue: function clearEditor(ids) {\n\n\t\t\tvar defaultValues = {\n\t\t\t\tlabel: '',\n\t\t\t\tcolumnName: '',\n\t\t\t\tshowIcon: 1\n\t\t\t};\n\n\t\t\tfor (var f in defaultValues) {\n\t\t\t\tvar component = $$(ids[f]);\n\t\t\t\tcomponent.setValue(defaultValues[f]);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'editorPopulate',\n\t\tvalue: function editorPopulate(ids, field) {\n\n\t\t\t$$(ids.label).setValue(field.label);\n\t\t\t$$(ids.columnName).setValue(field.columnName);\n\t\t\t$$(ids.showIcon).setValue(field.settings.showIcon);\n\t\t}\n\n\t\t/**\n   * @function definitionEditor\n   *\n   * Many DataFields share some base information for their usage\n   * in the AppBuilder.  The UI Editors have a common header\n   * and footer format, and this function allows child DataFields\n   * to not have to define those over and over.\n   *\n   * The common layout header contains:\n   *\t\t[Menu Label]\n   *\t\t[textBox: labelName]\n   *\t\t[text:    description]\n   *\n   * The defined DataField UI will be added at the end of this.\n   *\n   * This routine actually updated the live DataField definition\n   * with the common header info.\n   *\n   * @param {DataField} field  The DataField object to work with.\n   */\n\n\t}, {\n\t\tkey: 'definitionEditor',\n\t\tvalue: function definitionEditor(App, ids, _logic, Field) {\n\n\t\t\t/// TODO: maybe just pass in onChange instead of _logic\n\t\t\t/// if not onChange, then use our default:\n\n\t\t\t// setup our default labelOnChange functionality:\n\t\t\tvar _onChange = function onChange(newVal, oldVal) {\n\n\t\t\t\toldVal = oldVal || '';\n\n\t\t\t\tif (newVal != oldVal && oldVal == $$(ids.columnName).getValue()) {\n\t\t\t\t\t$$(ids.columnName).setValue(newVal);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// if they provided a labelOnChange() override, use that:\n\t\t\tif (_logic.labelOnChange) {\n\t\t\t\t_onChange = _logic.labelOnChange;\n\t\t\t}\n\n\t\t\tvar _ui = {\n\t\t\t\t// id: ids.component,\n\t\t\t\trows: [{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: \"<span class='webix_icon fa-{0}'></span>{1}\".replace('{0}', Field.icon).replace('{1}', Field.menuName)\n\t\t\t\t}, {\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tid: ids.label,\n\t\t\t\t\tname: 'label',\n\t\t\t\t\tlabel: App.labels.dataFieldHeaderLabel,\n\t\t\t\t\tplaceholder: App.labels.dataFieldHeaderLabelPlaceholder,\n\t\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\t\tcss: 'ab-new-label-name',\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: function onChange(newVal, oldVal) {\n\t\t\t\t\t\t\t_onChange(newVal, oldVal);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tid: ids.columnName,\n\t\t\t\t\tname: 'columnName',\n\t\t\t\t\tlabel: App.labels.dataFieldColumnName, // 'Name',\n\t\t\t\t\tlabelWidth: App.config.labelWidthMedium,\n\t\t\t\t\tplaceholder: App.labels.dataFieldColumnNamePlaceholder }, {\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tid: ids.fieldDescription,\n\t\t\t\t\tlabel: Field.description,\n\t\t\t\t\talign: \"right\"\n\t\t\t\t}, {\n\t\t\t\t\tview: 'checkbox',\n\t\t\t\t\tid: ids.showIcon,\n\t\t\t\t\tname: 'showIcon',\n\t\t\t\t\tlabelRight: App.labels.dataFieldShowIcon, // 'Show icon',\n\t\t\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\t\t\tvalue: true\n\t\t\t\t}]\n\t\t\t};\n\n\t\t\treturn _ui;\n\t\t}\n\t}, {\n\t\tkey: 'editorValues',\n\t\tvalue: function editorValues(settings) {\n\n\t\t\tvar obj = {\n\t\t\t\tlabel: settings.label,\n\t\t\t\tcolumnName: settings.columnName,\n\t\t\t\tsettings: settings\n\t\t\t};\n\n\t\t\tdelete settings.label;\n\t\t\tdelete settings.columnName;\n\n\t\t\treturn obj;\n\t\t}\n\t}]);\n\n\treturn ABField;\n}();\n\nexports.default = ABField;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * ABFieldComponent\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * An ABFieldComponent defines the UI component used by an ABField to display it's properties.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _ABField = __webpack_require__(1);\n\nvar _ABField2 = _interopRequireDefault(_ABField);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABFieldComponent = function () {\n\tfunction ABFieldComponent(options) {\n\t\t_classCallCheck(this, ABFieldComponent);\n\n\t\tthis.options = options;\n\n\t\tthis.fieldDefaults = options.fieldDefaults || {};\n\n\t\tthis.elements = options.elements || function (App) {\n\t\t\treturn [];\n\t\t};\n\n\t\tthis.defaultValues = options.defaultValues || {};\n\n\t\tthis.rules = options.rules || {};\n\n\t\tthis.logic = options.logic || {};\n\n\t\tthis.init = options.init || function () {};\n\n\t\tthis.idBase = this.fieldDefaults.name || '??fieldName??';\n\n\t\t// this.ids = options.ids || {};\n\t\tthis.ids = {};\n\t}\n\n\t///\n\t/// Static Methods\n\t///\n\t/// Available to the Class level object.  These methods are not dependent\n\t/// on the instance values of the Application.\n\t///\n\n\n\t///\n\t/// Instance Methods\n\t///\n\n\t_createClass(ABFieldComponent, [{\n\t\tkey: 'component',\n\t\tvalue: function component(App) {\n\t\t\tvar _this = this;\n\n\t\t\t// for each provided element: create an this.ids for it:\n\t\t\tvar elements = this.elements(App, this);\n\n\t\t\t////\n\t\t\t//// prepare our ids\n\t\t\t////\n\n\t\t\tvar ids = {\n\n\t\t\t\tcomponent: App.unique(this.idBase + '_component'),\n\n\t\t\t\t// the common property fields\n\t\t\t\tlabel: App.unique(this.idBase + '_label'),\n\t\t\t\tcolumnName: App.unique(this.idBase + '_columnName'),\n\t\t\t\tfieldDescription: App.unique(this.idBase + '_fieldDescription'),\n\t\t\t\tshowIcon: App.unique(this.idBase + '_showIcon')\n\t\t\t};\n\n\t\t\tthis.eachDeep(elements, function (e) {\n\t\t\t\tif (e.name) {\n\t\t\t\t\t// if element has an .id, then use it in our list as is\n\t\t\t\t\tif (e.id) {\n\t\t\t\t\t\tids[e.name] = e.id;\n\t\t\t\t\t}\n\n\t\t\t\t\t// otherwise create a new entry in our base list\n\t\t\t\t\t_this.ids[e.name] = e.name;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// convert the entries in our base list into a globally acceptable id\n\t\t\t// and use that in our ids list if it doesn't already exist\n\t\t\tfor (var i in this.ids) {\n\t\t\t\tif (!ids[i]) {\n\t\t\t\t\tids[i] = App.unique(this.idBase + '_' + i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// update our elements to include our ids as we have them now.\n\t\t\tthis.eachDeep(elements, function (e) {\n\t\t\t\tif (e.name) {\n\t\t\t\t\te.id = ids[e.name];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t////\n\t\t\t//// our UI definition:\n\t\t\t////\n\n\t\t\t// our base form:\n\t\t\tvar _ui = {\n\t\t\t\tview: 'form',\n\t\t\t\tid: ids.component,\n\t\t\t\tautoheight: true,\n\t\t\t\tborderless: true,\n\t\t\t\telements: [\n\t\t\t\t\t// {\n\t\t\t\t\t// \tview: \"text\",\n\t\t\t\t\t// \tid: ids.textDefault,\n\t\t\t\t\t// \tname:'textDefault',\n\t\t\t\t\t// \tplaceholder: labels.component.defaultText\n\t\t\t\t\t// },\n\t\t\t\t\t// {\n\t\t\t\t\t// \tview: \"checkbox\",\n\t\t\t\t\t// \tid: ids.supportMultilingual,\n\t\t\t\t\t// \tname:'supportMultilingual',\n\t\t\t\t\t// \tlabelRight: labels.component.supportMultilingual,\n\t\t\t\t\t// \tlabelWidth: 0,\n\t\t\t\t\t// \tvalue: true\n\t\t\t\t\t// }\n\t\t\t\t],\n\n\t\t\t\trules: {\n\t\t\t\t\t'label': webix.rules.isNotEmpty,\n\t\t\t\t\t'columnName': webix.rules.isNotEmpty\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar _init = function _init() {\n\n\t\t\t\t// call our provided .init() routine\n\t\t\t\tthis.init(ids);\n\t\t\t};\n\n\t\t\tvar _logic = {\n\n\t\t\t\t/*\n     * @function clear\n     *\n     * clear the form.\n     */\n\t\t\t\tclear: function clear() {\n\n\t\t\t\t\t_ABField2.default.clearEditor(ids);\n\n\t\t\t\t\tfor (var f in _this.defaultValues) {\n\t\t\t\t\t\tvar component = $$(ids[f]);\n\t\t\t\t\t\tif (component) {\n\t\t\t\t\t\t\tcomponent.setValue(_this.defaultValues[f]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn('!! could not find component for default value: name:' + f + ' id:' + ids[f]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$$(ids.component).clearValidation();\n\n\t\t\t\t\t// perform provided .clear()\n\t\t\t\t\tif (_this.logic.clear) {\n\t\t\t\t\t\t_this.logic.clear(ids);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function hide\n     *\n     * hide this component.\n     */\n\t\t\t\thide: function hide() {\n\t\t\t\t\t$$(ids.component).clearValidation();\n\t\t\t\t\t$$(ids.component).hide(false, false);\n\n\t\t\t\t\t// perform provided .hide()\n\t\t\t\t\tif (_this.logic.hide) {\n\t\t\t\t\t\t_this.logic.hide(ids);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function isValid\n     *\n     * checks the current values on the componet to see if they are Valid\n     */\n\t\t\t\tisValid: function isValid() {\n\n\t\t\t\t\tvar isValid = $$(ids.component).validate();\n\n\t\t\t\t\t// perform provided .isValid()\n\t\t\t\t\tif (_this.logic.isValid) {\n\t\t\t\t\t\tisValid = _this.logic.isValid(ids, isValid);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn isValid;\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function labelOnChange\n     *\n     * The ABField.definitionEditor implements a default operation\n     * to update the value of the .columnName with the current value of \n     * label.\n     * \n     * if you want to override that functionality, implement this fn()\n     *\n     * @param {string} newVal\tThe new value of label\n     * @param {string} oldVal\tThe previous value\n     */\n\t\t\t\t// labelOnChange: function (newVal, oldVal) {\n\n\t\t\t\t// \t// When the Label value changes, update our Column Name value \n\t\t\t\t// \t// to match.\n\n\t\t\t\t// \toldVal = oldVal || '';\n\t\t\t\t// \tif (newVal != oldVal &&\n\t\t\t\t// \t\toldVal == $$(ids.columnName).getValue()) {\n\t\t\t\t// \t\t$$(ids.columnName).setValue(newVal);\n\t\t\t\t// \t}\n\t\t\t\t// },\n\n\n\t\t\t\t/*\n     * @function populate\n     *\n     * populate the form with the given ABField instance provided.\n     *\n     * @param {ABField} field\n     */\n\t\t\t\tpopulate: function populate(field) {\n\n\t\t\t\t\tconsole.error('TODO: .populate()');\n\n\t\t\t\t\t// populate the base ABField values:\n\t\t\t\t\t_ABField2.default.editorPopulate(ids, field);\n\n\t\t\t\t\t_this.eachDeep(elements, function (e) {\n\t\t\t\t\t\t$$(ids[e.name]).setValue(field.settings[e.name]);\n\t\t\t\t\t});\n\n\t\t\t\t\t// perform provided .populate()\n\t\t\t\t\tif (_this.logic.populate) {\n\t\t\t\t\t\t_this.logic.populate(ids, field);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function show\n     *\n     * show this component.\n     */\n\t\t\t\tshow: function show(a, b) {\n\t\t\t\t\t$$(ids.component).clearValidation();\n\t\t\t\t\t$$(ids.component).show(a, b);\n\n\t\t\t\t\t// perform provided .show()\n\t\t\t\t\tif (_this.logic.show) {\n\t\t\t\t\t\t_this.logic.show(ids);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t/*\n     * @function values\n     *\n     * return the values for this form.\n     * @return {obj}  \n     */\n\t\t\t\tvalues: function values() {\n\n\t\t\t\t\tvar settings = $$(ids.component).getValues();\n\t\t\t\t\tvar values = _ABField2.default.editorValues(settings);\n\n\t\t\t\t\tvalues.type = _this.fieldDefaults.type;\n\n\t\t\t\t\t// perform provided .values()\n\t\t\t\t\tif (_this.logic.values) {\n\t\t\t\t\t\tvalues = _this.logic.values(ids, values);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn values;\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\t// apply additional logic functions:\n\t\t\tfor (var l in this.logic) {\n\t\t\t\tif (!_logic[l]) _logic[l] = this.logic[l];\n\t\t\t}\n\n\t\t\t// make sure our given elements, have an id set:\n\n\n\t\t\t// get the common UI headers entries, and insert them above ours here:\n\t\t\t// NOTE: put this here so that _logic is defined.\n\t\t\tvar commonUI = _ABField2.default.definitionEditor(App, ids, _logic, this.fieldDefaults);\n\t\t\t_ui.elements = commonUI.rows.concat(elements);\n\n\t\t\tfor (var r in this.rules) {\n\t\t\t\t_ui.rules[r] = this.rules[r];\n\t\t\t}\n\n\t\t\t// return the current instance of this component:\n\t\t\treturn this._component = {\n\t\t\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\t\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\t\t\t// actions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t\t\t// DataField exposed actions:\n\t\t\t\tclear: _logic.clear,\n\t\t\t\thide: _logic.hide,\n\t\t\t\tisValid: _logic.isValid,\n\t\t\t\tpopulate: _logic.populate,\n\t\t\t\tshow: _logic.show,\n\t\t\t\tvalues: _logic.values,\n\n\t\t\t\t_logic: _logic // {obj} \tUnit Testing\n\t\t\t};\n\t\t}\n\n\t\t/**\n   * @function eachDeep\n   * a depth first fn to apply fn() to each element of our list.\n   * @param {array} list  array of webix elements to scan\n   * @param {fn} fn function to apply to each element.\n   */\n\n\t}, {\n\t\tkey: 'eachDeep',\n\t\tvalue: function eachDeep(list, fn) {\n\t\t\tvar _this2 = this;\n\n\t\t\tlist.forEach(function (e) {\n\n\t\t\t\t// process sub columns\n\t\t\t\tif (e.cols) {\n\t\t\t\t\t_this2.eachDeep(e.cols, fn);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// or rows\n\t\t\t\tif (e.rows) {\n\t\t\t\t\t_this2.eachDeep(e.rows, fn);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// or just process this element:\n\t\t\t\tfn(e);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'idsUnique',\n\t\tvalue: function idsUnique(ids, App) {\n\n\t\t\tfor (var i in ids) {\n\t\t\t\tif (ids[i] == '') {\n\t\t\t\t\tids[i] = App.unique(this.idBase + '_' + i);\n\t\t\t\t} else {\n\t\t\t\t\tids[i] = App.unique(this.idBase + '_' + ids[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ids;\n\t\t}\n\n\t\t// populate(field) {\n\t\t// \tthis._component.populate(field);\n\t\t// }\n\n\t}]);\n\n\treturn ABFieldComponent;\n}();\n\nexports.default = ABFieldComponent;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _ABFieldString = __webpack_require__(17);\n\nvar _ABFieldString2 = _interopRequireDefault(_ABFieldString);\n\nvar _ABFieldNumber = __webpack_require__(16);\n\nvar _ABFieldNumber2 = _interopRequireDefault(_ABFieldNumber);\n\nvar _ABFieldImage = __webpack_require__(15);\n\nvar _ABFieldImage2 = _interopRequireDefault(_ABFieldImage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* \n * Fields\n * A name => ABField  hash of the different ABFields available.\n */\nvar Fields = {}; /* \n                  * ABFieldManager\n                  * \n                  * An interface for managing the different ABFields available in our AppBuilder.\n                  *\n                  */\n\nFields[_ABFieldString2.default.defaults().name] = _ABFieldString2.default;\nFields[_ABFieldNumber2.default.defaults().name] = _ABFieldNumber2.default;\n\nFields[_ABFieldImage2.default.defaults().name] = _ABFieldImage2.default;\n\nexports.default = {\n\n\t/*\n  * @function allFields\n  * return all the currently defined ABFields in an array.\n  * @return [{ABField},...]\n  */\n\tallFields: function allFields() {\n\t\tvar fields = [];\n\t\tfor (var f in Fields) {\n\t\t\tfields.push(Fields[f]);\n\t\t}\n\t\treturn fields;\n\t},\n\n\t/*\n  * @function newField\n  * return an instance of an ABField based upon the values.type value.\n  * @return {ABField}\n  */\n\tnewField: function newField(values, object) {\n\n\t\tif (values.type) {\n\t\t\treturn new Fields[values.type](values, object);\n\t\t} else {\n\n\t\t\t//// TODO: what to do here?\n\t\t}\n\t}\n\n};\n\n/***/ }),\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(18);\n\n__webpack_require__(22);\n\nvar _edittree = __webpack_require__(37);\n\nvar _edittree2 = _interopRequireDefault(_edittree);\n\nvar _editlist = __webpack_require__(36);\n\nvar _editlist2 = _interopRequireDefault(_editlist);\n\nvar _AppBuilder = __webpack_require__(42);\n\nvar _AppBuilder2 = _interopRequireDefault(_AppBuilder);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nOP.Component.extend('ab', function (App) {\n\n\tfunction L(key, altText) {\n\t\treturn AD.lang.label.getLabel(key) || altText;\n\t}\n\n\t// setup the common labels for our AppBuilder Application.\n\tApp.labels = {\n\t\tadd: L('ab.common.add', \"*Add\"),\n\t\tcreate: L('ab.common.create', \"*Create\"),\n\t\t\"delete\": L('ab.common.delete', \"*Delete\"),\n\t\tedit: L('ab.common.edit', \"*Edit\"),\n\t\t\"export\": L('ab.common.export', \"*Export\"),\n\t\tformName: L('ab.common.form.name', \"*Name\"),\n\t\t\"import\": L('ab.common.import', \"*Import\"),\n\t\trename: L('ab.common.rename', \"*Rename\"),\n\t\tok: L('ab.common.ok', \"*Ok\"),\n\n\t\tcancel: L('ab.common.cancel', \"*Cancel\"),\n\t\tsave: L('ab.common.save', \"*Save\"),\n\n\t\tyes: L('ab.common.yes', \"*Yes\"),\n\t\tno: L('ab.common.no', \"*No\"),\n\n\t\tcreateErrorMessage: L('ab.common.create.error', \"*System could not create <b>{0}</b>.\"),\n\t\tcreateSuccessMessage: L('ab.common.create.success', \"*<b>{0}</b> is created.\"),\n\n\t\tupdateErrorMessage: L('ab.common.update.error', \"*System could not update <b>{0}</b>.\"),\n\t\tupdateSucessMessage: L('ab.common.update.success', \"*<b>{0}</b> is updated.\"),\n\n\t\tdeleteErrorMessage: L('ab.common.delete.error', \"*System could not delete <b>{0}</b>.\"),\n\t\tdeleteSuccessMessage: L('ab.common.delete.success', \"*<b>{0}</b> is deleted.\"),\n\n\t\trenameErrorMessage: L('ab.common.rename.error', \"*System could not rename <b>{0}</b>.\"),\n\t\trenameSuccessMessage: L('ab.common.rename.success', \"*<b>{0}</b> is renamed.\"),\n\n\t\t// Data Field  common Property labels:\n\t\tdataFieldHeaderLabel: L('ab.dataField.common.headerLabel', '*Label'),\n\t\tdataFieldHeaderLabelPlaceholder: L('ab.dataField.common.headerLabelPlaceholder', '*Header Name'),\n\n\t\tdataFieldColumnName: L('ab.dataField.common.columnName', '*Name'),\n\t\tdataFieldColumnNamePlaceholder: L('ab.dataField.common.columnNamePlaceholder', '*Column Name'),\n\n\t\tdataFieldShowIcon: L('ab.dataField.common.showIcon', '*show icon?')\n\t};\n\n\t// make instances of our Custom Components:\n\tOP.CustomComponent[_edittree2.default.key](App, 'edittree'); // ->  App.custom.edittree  now exists\n\tOP.CustomComponent[_editlist2.default.key](App, 'editlist'); // ->  App.custom.editlist  now exists\n\n\n\tvar ids = {\n\t\tcomponent: App.unique('app_builder_root')\n\t};\n\n\t// Define the external components used in this Component:\n\tvar AppChooser = OP.Component['ab_choose'](App);\n\tvar AppWorkspace = OP.Component['ab_work'](App);\n\n\t// This component's UI definition:\n\t// Application multi-views\n\tvar _ui = {\n\t\tid: ids.component,\n\t\tview: \"multiview\",\n\t\tborderless: true,\n\t\tanimate: false,\n\t\trows: [AppChooser.ui, AppWorkspace.ui]\n\t};\n\n\t// This component's init() definition:\n\tvar _init = function _init() {\n\n\t\tAppChooser.init();\n\t\tAppWorkspace.init();\n\n\t\t// start off only showing the App Chooser:\n\t\tApp.actions.transitionApplicationChooser();\n\n\t\t// perform an initial resize adjustment\n\t\t$$(ids.component).adjust();\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions // {ob}\t\thash of fn() to expose so other components can access.\n\t};\n});\n\n//// REFACTORING TODOs:\n// TODO: AppForm-> Permissions : refresh permission list, remove AppRole permission on Application.delete().\n\n\n// Import our Custom Components here:\n\n/*\n * AB\n *\n * The base AppBuilder component.  It manages these components:\n *   - ab_choose :  choose an application to work with\n *   - ab_work   :  load an application into the work area\n *\n */\n\n// import '../OP/OP'\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(9);\n\nAD.Control.OpsTool.extend('BuildApp', {\n\n\tinit: function init(element, options) {\n\t\tvar self = this;\n\n\t\toptions = AD.defaults({\n\t\t\ttemplateDOM: '/opstools/BuildApp/views/BuildApp/BuildApp.ejs',\n\t\t\tresize_notification: 'BuildApp.resize',\n\t\t\ttool: null // the parent opsPortal Tool() object\n\t\t}, options);\n\t\tself.options = options;\n\n\t\t// Call parent init\n\t\tself._super(element, options);\n\n\t\tself.data = {};\n\n\t\tself.webixUiId = {\n\t\t\tloadingScreen: 'ab-loading-screen',\n\t\t\tsyncButton: 'ab-sync-button'\n\t\t};\n\n\t\tself.initDOM(function () {\n\t\t\tself.initWebixUI();\n\t\t});\n\t},\n\n\tinitDOM: function initDOM(cb) {\n\t\tvar _this = this;\n\n\t\tcan.view(this.options.templateDOM, {}, function (fragment) {\n\t\t\t_this.element.html(fragment);\n\n\t\t\t// _this.element.find(\".ab-app-list\").show();\n\t\t\t// _this.element.find(\".ab-app-workspace\").hide();\n\n\t\t\tcb();\n\t\t});\n\t},\n\n\tinitWebixUI: function initWebixUI() {\n\n\t\t// get the AppBuilder (AB) Webix Component\n\t\tvar AppBuilder = OP.Component['ab']();\n\t\tvar ui = AppBuilder.ui;\n\n\t\t// tell the AppBuilder where to attach\n\t\tui.container = 'ab-main-container';\n\n\t\t// instantiate the UI first\n\t\tthis.AppBuilder = webix.ui(ui);\n\n\t\t// then perform the init()\n\t\tAppBuilder.init();\n\t},\n\n\tresize: function resize(height) {\n\t\tvar self = this;\n\n\t\theight = height.height || height;\n\n\t\tvar appListDom = $(self.element);\n\n\t\tif (appListDom) {\n\t\t\tvar width = appListDom.parent().css('width');\n\t\t\tif (width) {\n\t\t\t\twidth = parseInt(width.replace('px', ''));\n\t\t\t}\n\t\t\tappListDom.width(width);\n\n\t\t\t// Removed this because the 140 pixels was causing the list to not scroll to the bottom of the page\n\t\t\t// var computedHeight = height - 140;\n\n\t\t\tvar computedHeight = height;\n\t\t\tconsole.log(\"computed height: \" + computedHeight);\n\t\t\tvar mh = parseInt(appListDom.css('min-height').replace('px', ''));\n\t\t\tconsole.log(\"min-height: \" + mh);\n\t\t\tif (mh < computedHeight) {\n\t\t\t\tappListDom.height(computedHeight);\n\t\t\t\t$('#ab-main-container').height(computedHeight);\n\t\t\t} else {\n\t\t\t\tappListDom.height(mh);\n\t\t\t\t$('#ab-main-container').height(mh);\n\t\t\t}\n\n\t\t\tif (this.AppBuilder) {\n\t\t\t\t// this.AppBuilder.define('height', height - 140);\n\t\t\t\tthis.AppBuilder.adjust();\n\t\t\t}\n\t\t}\n\t}\n\n});\n// import 'OP';\n// import '../../../../../assets/js/webix/webix'\n\n/***/ }),\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n// import OP from \"OP\"\n\n\nvar _ABFieldManager = __webpack_require__(3);\n\nvar _ABFieldManager2 = _interopRequireDefault(_ABFieldManager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction toDC(data) {\n\treturn new webix.DataCollection({\n\t\tdata: data\n\n\t});\n}\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABObject = function () {\n\tfunction ABObject(attributes, application) {\n\t\tvar _this = this;\n\n\t\t_classCallCheck(this, ABObject);\n\n\t\t/*\n  {\n  \tid: uuid(),\n  \tname: 'name',\n  \tlabelFormat: 'xxxxx',\n  \tisImported: 1/0,\n  \turlPath:'string',\n  \timportFromObject: 'string', // JSON Schema style reference:  '#[ABApplication.id]/objects/[ABObject.id]'\n  \t\t\t\t\t\t\t\t// to get other object:  ABApplication.objectFromRef(obj.importFromObject);\n  \ttranslations:[\n  \t\t{}\n  \t],\n  \tfields:[\n  \t\t{ABDataField}\n  \t]\n  }\n  */\n\n\t\t// ABApplication Attributes\n\t\tthis.id = attributes.id;\n\t\tthis.name = attributes.name || \"\";\n\t\tthis.labelFormat = attributes.labelFormat || \"\";\n\t\tthis.isImported = attributes.isImported || 0;\n\t\tthis.urlPath = attributes.urlPath || \"\";\n\t\tthis.importFromObject = attributes.importFromObject || \"\";\n\t\tthis.translations = attributes.translations;\n\n\t\tthis.objectWorkspace = attributes.objectWorkspace || {\n\t\t\thiddenFields: [] };\n\n\t\t// multilingual fields: label, description\n\t\tOP.Multilingual.translate(this, this, ['label']);\n\n\t\t// import all our ABObjects\n\t\tvar newFields = [];\n\t\t(attributes.fields || []).forEach(function (field) {\n\t\t\tnewFields.push(_this.fieldNew(field));\n\t\t});\n\t\tthis._fields = newFields;\n\n\t\t// link me to my parent ABApplication\n\t\tthis.application = application;\n\t}\n\n\t///\n\t/// Static Methods\n\t///\n\t/// Available to the Class level object.  These methods are not dependent\n\t/// on the instance values of the Application.\n\t///\n\n\n\t//// TODO: Refactor isValid() to ignore op and not error if duplicateName is own .id\n\n\t_createClass(ABObject, [{\n\t\tkey: \"isValid\",\n\t\tvalue: function isValid() {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar errors = null;\n\n\t\t\t// label/name must be unique:\n\t\t\tvar isNameUnique = this.application.objects(function (o) {\n\t\t\t\treturn o.name.toLowerCase() == _this2.name.toLowerCase();\n\t\t\t}).length == 0;\n\t\t\tif (!isNameUnique) {\n\t\t\t\terrors = OP.Form.validationError({\n\t\t\t\t\tname: 'name',\n\t\t\t\t\tmessage: L('ab.validation.object.name.unique', 'Object name must be unique (#name# already used in this Application)').replace('#name#', this.name)\n\t\t\t\t}, errors);\n\t\t\t}\n\n\t\t\t// Check the common validations:\n\t\t\t// TODO:\n\t\t\t// if (!inputValidator.validate(values.label)) {\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\t/// ABApplication data methods\n\n\n\t\t/**\n   * @method destroy()\n   *\n   * destroy the current instance of ABApplication\n   *\n   * also remove it from our _AllApplications\n   *\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"destroy\",\n\t\tvalue: function destroy() {\n\n\t\t\treturn this.application.objectDestroy(this);\n\t\t}\n\n\t\t/**\n   * @method save()\n   *\n   * persist this instance of ABObject with it's parent ABApplication\n   *\n   *\n   * @return {Promise}\n   *\t\t\t\t\t\t.resolve( {this} )\n   */\n\n\t}, {\n\t\tkey: \"save\",\n\t\tvalue: function save() {\n\t\t\tvar _this3 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// if this is our initial save()\n\t\t\t\tif (!_this3.id) {\n\n\t\t\t\t\t_this3.id = OP.Util.uuid(); // setup default .id\n\t\t\t\t\t_this3.label = _this3.label || _this3.name;\n\t\t\t\t\t_this3.urlPath = _this3.urlPath || _this3.application.name + '/' + _this3.name;\n\t\t\t\t}\n\n\t\t\t\t_this3.application.objectSave(_this3).then(function () {\n\t\t\t\t\tresolve(_this3);\n\t\t\t\t}).catch(function (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\n\t}, {\n\t\tkey: \"toObj\",\n\t\tvalue: function toObj() {\n\n\t\t\tOP.Multilingual.unTranslate(this, this, [\"label\"]);\n\n\t\t\t// // for each Object: compile to json\n\t\t\tvar currFields = [];\n\t\t\tthis._fields.forEach(function (obj) {\n\t\t\t\tcurrFields.push(obj.toObj());\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tname: this.name,\n\t\t\t\tlabelFormat: this.labelFormat,\n\t\t\t\tisImported: this.isImported,\n\t\t\t\turlPath: this.urlPath,\n\t\t\t\timportFromObject: this.importFromObject,\n\t\t\t\tobjectWorkspace: this.objectWorkspace,\n\t\t\t\ttranslations: this.translations,\n\t\t\t\tfields: currFields\n\t\t\t};\n\t\t}\n\n\t\t///\n\t\t/// Fields\n\t\t///\n\n\n\t\t/**\n   * @method fields()\n   *\n   * return an array of all the ABFields for this ABObject.\n   *\n   * @return {array}\n   */\n\n\t}, {\n\t\tkey: \"fields\",\n\t\tvalue: function fields(filter) {\n\n\t\t\tfilter = filter || function () {\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\treturn this._fields.filter(filter);\n\t\t}\n\n\t\t/**\n   * @method fieldNew()\n   *\n   * return an instance of a new (unsaved) ABField that is tied to this\n   * ABObject.\n   *\n   * NOTE: this new field is not included in our this.fields until a .save()\n   * is performed on the field.\n   *\n   * @return {ABField}\n   */\n\n\t}, {\n\t\tkey: \"fieldNew\",\n\t\tvalue: function fieldNew(values) {\n\t\t\t// NOTE: ABFieldManager returns the proper ABFieldXXXX instance.\n\t\t\treturn _ABFieldManager2.default.newField(values, this);\n\t\t}\n\n\t\t/**\n   * @method fieldRemove()\n   *\n   * remove the given ABField from our ._fields array and persist the current\n   * values.\n   *\n   * @param {ABField} field The instance of the field to remove.\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"fieldRemove\",\n\t\tvalue: function fieldRemove(field) {\n\t\t\tthis._fields = this.fields(function (o) {\n\t\t\t\treturn o.id != field.id;\n\t\t\t});\n\n\t\t\treturn this.save();\n\t\t}\n\n\t\t/**\n   * @method fieldSave()\n   *\n   * save the given ABField in our ._fields array and persist the current\n   * values.\n   *\n   * @param {ABField} field The instance of the field to save.\n   * @return {Promise}\n   */\n\n\t}, {\n\t\tkey: \"fieldSave\",\n\t\tvalue: function fieldSave(field) {\n\t\t\tvar isIncluded = this.fields(function (o) {\n\t\t\t\treturn o.id == field.id;\n\t\t\t}).length > 0;\n\t\t\tif (!isIncluded) {\n\t\t\t\tthis._fields.push(field);\n\t\t\t}\n\n\t\t\treturn this.save();\n\t\t}\n\n\t\t///\n\t\t///\tObject Workspace Settings\n\t\t///\n\n\n\t}, {\n\t\tkey: \"columnHeaders\",\n\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t// return the column headers for this object\n\t\t// @param {bool} isObjectWorkspace  return the settings saved for the object workspace\n\t\tvalue: function columnHeaders(isObjectWorkspace) {\n\n\t\t\tvar headers = [];\n\t\t\tvar idLookup = {};\n\n\t\t\t// get the header for each of our fields:\n\t\t\tthis._fields.forEach(function (f) {\n\t\t\t\tvar header = f.columnHeader(isObjectWorkspace);\n\t\t\t\theaders.push(header);\n\t\t\t\tidLookup[header.id] = f.id; // name => id\n\t\t\t});\n\n\t\t\t// update our headers with any settings applied in the Object Workspace\n\t\t\tif (isObjectWorkspace) {\n\n\t\t\t\t// set column width to adjust:true by default;\n\t\t\t\theaders.forEach(function (h) {\n\t\t\t\t\th.adjust = true;\n\t\t\t\t});\n\n\t\t\t\t// hide any hiddenfields\n\t\t\t\tthis.workspaceHiddenFields.forEach(function (hfID) {\n\t\t\t\t\theaders.forEach(function (h) {\n\t\t\t\t\t\tif (idLookup[h.id] == hfID) {\n\t\t\t\t\t\t\th.hidden = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn headers;\n\t\t}\n\t}, {\n\t\tkey: \"workspaceHiddenFields\",\n\t\tget: function get() {\n\t\t\treturn this.objectWorkspace.hiddenFields;\n\t\t},\n\t\tset: function set(fields) {\n\t\t\tthis.objectWorkspace.hiddenFields = fields;\n\t\t}\n\t}]);\n\n\treturn ABObject;\n}();\n\nexports.default = ABObject;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _ABField2 = __webpack_require__(1);\n\nvar _ABField3 = _interopRequireDefault(_ABField2);\n\nvar _ABFieldComponent = __webpack_require__(2);\n\nvar _ABFieldComponent2 = _interopRequireDefault(_ABFieldComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ABFieldImage\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * An ABFieldImage defines a Image field type.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABFieldImageDefaults = {\n\tname: 'image', // unique key to reference this specific DataField\n\ttype: 'string', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\ticon: 'file-image-o', // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName: L('ab.dataField.image.menuName', '*Image Attachment'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.image.description', '*Attach an image to this object.')\n};\n\nvar defaultValues = {\n\t'useWidth': 0,\n\t'imageWidth': '',\n\t'useHeight': 0,\n\t'imageHeight': ''\n};\n\n/**\n * ABFieldImageComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\nvar ABFieldImageComponent = new _ABFieldComponent2.default({\n\n\tfieldDefaults: ABFieldImageDefaults,\n\n\telements: function elements(App, field) {\n\n\t\tvar ids = {\n\t\t\timageWidth: '',\n\t\t\timageHeight: ''\n\t\t};\n\t\tids = field.idsUnique(ids, App);\n\n\t\treturn [{\n\t\t\tcols: [{\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname: \"useWidth\",\n\t\t\t\tlabelRight: L('ab.dataField.image.width', \"*width\"),\n\t\t\t\twidth: 80,\n\t\t\t\tlabelWidth: 0,\n\t\t\t\tvalue: 1,\n\t\t\t\tclick: function click() {\n\t\t\t\t\tif (this.getValue()) $$(ids.imageWidth).enable();else $$(ids.imageWidth).disable();\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tview: 'text',\n\t\t\t\tname: 'imageWidth',\n\t\t\t\tid: ids.imageWidth\n\t\t\t}]\n\t\t}, {\n\t\t\tcols: [{\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname: \"useHeight\",\n\t\t\t\t// id:componentIds.useHeight, \n\t\t\t\tlabelRight: L('ab.dataField.image.height', \"*height\"),\n\t\t\t\twidth: 80,\n\t\t\t\tlabelWidth: 0,\n\t\t\t\tvalue: 1,\n\t\t\t\tclick: function click() {\n\t\t\t\t\tif (this.getValue()) $$(ids.imageHeight).enable();else $$(ids.imageHeight).disable();\n\t\t\t\t}\n\n\t\t\t}, {\n\t\t\t\tview: 'text',\n\t\t\t\tname: 'imageHeight',\n\t\t\t\tid: ids.imageHeight\n\t\t\t}]\n\t\t}];\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules: {\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic: {},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit: function init(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n});\n\nvar ABFieldImage = function (_ABField) {\n\t_inherits(ABFieldImage, _ABField);\n\n\tfunction ABFieldImage(values, object) {\n\t\t_classCallCheck(this, ABFieldImage);\n\n\t\t/*\n  {\n  settings: {\n  'useWidth':0,\n  'imageWidth':'',\n  'useHeight': 0,\n  'imageHeight': ''\n  }\n  }\n  */\n\n\t\t// we're responsible for setting up our specific settings:\n\t\tvar _this = _possibleConstructorReturn(this, (ABFieldImage.__proto__ || Object.getPrototypeOf(ABFieldImage)).call(this, values, object, ABFieldImageDefaults));\n\n\t\tfor (var dv in defaultValues) {\n\t\t\t_this.settings[dv] = values.settings[dv] || defaultValues[dv];\n\t\t}\n\n\t\t// text to Int:\n\t\t_this.settings.useWidth = parseInt(_this.settings.useWidth);\n\t\t_this.settings.useHeight = parseInt(_this.settings.useHeight);\n\t\treturn _this;\n\t}\n\n\t// return the default values for this DataField\n\n\n\t_createClass(ABFieldImage, [{\n\t\tkey: \"isValid\",\n\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\tvalue: function isValid() {\n\n\t\t\tvar errors = _get(ABFieldImage.prototype.__proto__ || Object.getPrototypeOf(ABFieldImage.prototype), \"isValid\", this).call(this);\n\n\t\t\t// errors = OP.Form.validationError({\n\t\t\t// \tname:'columnName',\n\t\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t\t// }, errors);\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\t\t// toObj () {\n\n\t\t// \tvar obj = super.toObj();\n\n\t\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t\t// \treturn obj;\n\t\t// }\n\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t// return the grid column header definition for this instance of ABFieldImage\n\n\t}, {\n\t\tkey: \"columnHeader\",\n\t\tvalue: function columnHeader(isObjectWorkspace) {\n\t\t\tvar config = _get(ABFieldImage.prototype.__proto__ || Object.getPrototypeOf(ABFieldImage.prototype), \"columnHeader\", this).call(this, isObjectWorkspace);\n\n\t\t\tconfig.editor = 'text'; // '[edit_type]'   for your unique situation\n\t\t\tconfig.sort = 'string'; // '[sort_type]'   for your unique situation\n\n\t\t\treturn config;\n\t\t}\n\t}], [{\n\t\tkey: \"defaults\",\n\t\tvalue: function defaults() {\n\t\t\treturn ABFieldImageDefaults;\n\t\t}\n\n\t\t/*\n   * @function propertiesComponent\n   *\n   * return a UI Component that contains the property definitions for this Field.\n   *\n   * @param {App} App the UI App instance passed around the Components.\n   * @return {Component}\n   */\n\n\t}, {\n\t\tkey: \"propertiesComponent\",\n\t\tvalue: function propertiesComponent(App) {\n\t\t\treturn ABFieldImageComponent.component(App);\n\t\t}\n\t}]);\n\n\treturn ABFieldImage;\n}(_ABField3.default);\n\n//// NOTE: if you need a unique [edit_type] by your returned config.editor above:\n// webix.editors = {\n//   \"[edit_type]\": {\n//     focus: function () {...}\n//     getValue: function () {...},\n//     setValue: function (value) {...},\n//     render: function () {...}\n//   }\n// };\n\n\n//// NOTE: if you need a unique [sort_type] by your returned config.sort above:\n// webix.DataStore.prototype.sorting.as.[sort_type] = function(a,b){ \n//     return a > b ? 1 : -1; \n// }\n\n\nexports.default = ABFieldImage;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _ABField2 = __webpack_require__(1);\n\nvar _ABField3 = _interopRequireDefault(_ABField2);\n\nvar _ABFieldComponent = __webpack_require__(2);\n\nvar _ABFieldComponent2 = _interopRequireDefault(_ABFieldComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ABFieldNumber\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * An ABFieldNumber defines a Number field type.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABFieldNumberDefaults = {\n\tname: 'number', // unique key to reference this specific DataField\n\ttype: 'number', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\t// NOTE: the server side implementation will read the instance.settings and return either a:\n\t//\t'float', or 'integer'\n\n\ticon: 'slack', // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName: L('ab.dataField.number.menuName', '*Number'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.number.description', '*A Float or Integer Value')\n};\n\nvar formatList = [{ id: 'none', value: L('ab.dataField.number.none', \"*None\") }, { id: 'dollar', value: L('ab.dataField.number.format.dollar', \"$\"), sign: \"$\", position: \"prefix\" }, { id: 'pound', value: L('ab.dataField.number.format.pound', \"£\"), sign: \"£\", position: \"prefix\" }, { id: 'euroBefore', value: L('ab.dataField.number.format.euroBefore', \"€ (before)\"), sign: \"€\", position: \"prefix\" }, { id: 'euroAfter', value: L('ab.dataField.number.format.euroAfter', \"€ (after)\"), sign: \"€\", position: \"postfix\" }, { id: 'percent', value: L('ab.dataField.number.format.percent', \"%\"), sign: \"%\", position: \"postfix\" }];\n\nvar defaultValues = {\n\t'allowRequired': 0,\n\t'numberDefault': '',\n\t'typeFormat': 'none',\n\t'typeDecimals': 'none',\n\t'typeDecimalPlaces': 'none',\n\t'typeRounding': 'none',\n\t'typeThousands': 'none',\n\t'validation': 0,\n\t'validateMinimum': '',\n\t'validateMaximum': ''\n};\n\n/**\n * ABFieldNumberComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\nvar ABFieldNumberComponent = new _ABFieldComponent2.default({\n\n\tfieldDefaults: ABFieldNumberDefaults,\n\n\telements: function elements(App, field) {\n\n\t\t// var idBase = ABFieldNumberDefaults.type;\n\t\t// var ids = {\n\t\t// \ttypeDecimalPlaces: this.unique(App, '_typeDecimalPlaces'),  // App.unique(idBase +'_typeDecimalPlaces'),\n\t\t// \ttypeRounding: App.unique(idBase +'_typeRounding'),\n\t\t// \tvalidateMinimum: App.unique(idBase + '_validateMinimum'),\n\t\t// \tvalidateMaximum: App.unique(idBase + '_validateMaximum')\n\t\t// }\n\n\t\tvar ids = {\n\t\t\ttypeDecimalPlaces: '',\n\t\t\ttypeRounding: '',\n\t\t\tvalidateMinimum: '',\n\t\t\tvalidateMaximum: ''\n\t\t};\n\t\tids = field.idsUnique(ids, App);\n\n\t\treturn [\n\t\t// {\n\t\t// \tview: \"text\",\n\t\t// \tname:'textDefault',\n\t\t// \tlabelWidth: App.config.labelWidthLarge,\n\t\t// \tplaceholder: L('ab.dataField.string.default', '*Default text')\n\t\t// },\n\t\t{\n\t\t\tview: \"checkbox\",\n\t\t\t// id: componentIds.allowRequired,\n\t\t\tname: \"allowRequired\",\n\t\t\tlabelRight: L(\"ab.dataField.number.required\", \"*Required\"),\n\t\t\tinputWidth: 130,\n\t\t\tlabelWidth: 0\n\t\t}, {\n\t\t\tview: \"text\",\n\t\t\tlabel: L(\"ab.dataField.number.defaultValue\", \"*Default Value\"),\n\t\t\tlabelWidth: \"100\",\n\t\t\t// id: componentIds.numberDefault,\n\t\t\tname: \"numberDefault\",\n\t\t\tplaceholder: L('ab.dataField.number.defaultNumber', '*Default number'),\n\t\t\ton: {\n\t\t\t\tonChange: function onChange(newVal, oldVal) {\n\t\t\t\t\t// Validate number\n\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t// $$(componentIds.numberDefault).setValue(oldVal);\n\t\t\t\t\t\tthis.setValue(oldVal);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tview: \"richselect\",\n\t\t\t// id: componentIds.typeFormat,\n\t\t\tname: 'typeFormat',\n\t\t\tlabel: L('ab.dataField.number.format', \"*Format\"),\n\t\t\tvalue: 'none',\n\t\t\toptions: formatList\n\t\t}, {\n\t\t\tcols: [{\n\t\t\t\tview: \"richselect\",\n\t\t\t\t// id: componentIds.typeDecimals,\n\t\t\t\tname: 'typeDecimals',\n\t\t\t\tlabel: L('ab.dataField.number.decimals', \"*Decimals\"),\n\t\t\t\tvalue: 'none',\n\t\t\t\toptions: [{ id: 'none', value: L('ab.dataField.number.none', \"*None\") }, { id: 'period', value: L('ab.dataField.number.period', \"*Period\") }, { id: 'comma', value: L('ab.dataField.number.comma', \"*Comma\") }],\n\t\t\t\ton: {\n\t\t\t\t\t'onChange': function onChange(newValue, oldValue) {\n\t\t\t\t\t\tif (newValue == 'none') {\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).disable();\n\t\t\t\t\t\t\t$$(ids.typeRounding).disable();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$$(ids.typeDecimalPlaces).enable();\n\t\t\t\t\t\t\t$$(ids.typeRounding).enable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tview: \"richselect\",\n\t\t\t\tid: ids.typeDecimalPlaces,\n\t\t\t\tname: 'typeDecimalPlaces',\n\t\t\t\tlabel: \"Places\",\n\t\t\t\tvalue: 'none',\n\t\t\t\tdisabled: true,\n\t\t\t\toptions: [{ id: 'none', value: \"0\" }, { id: 1, value: \"1\" }, { id: 2, value: \"2\" }, { id: 3, value: \"3\" }, { id: 4, value: \"4\" }, { id: 5, value: \"5\" }, { id: 10, value: \"10\" }]\n\t\t\t}]\n\t\t}, {\n\t\t\tview: \"radio\",\n\t\t\tid: ids.typeRounding,\n\t\t\tname: 'typeRounding',\n\t\t\tlabel: L('ab.dataField.number.rounding', \"*Rounding\"),\n\t\t\tvalue: 'none',\n\t\t\tvertical: true,\n\t\t\tdisabled: true,\n\t\t\toptions: [{ id: 'none', value: L('ab.dataField.number.default', \"*Default\") }, { id: 'roundUp', value: L('ab.dataField.number.roundUp', \"*Round Up\") }, { id: 'roundDown', value: L('ab.dataField.number.roundDown', \"*Round Down\") }]\n\t\t}, {\n\t\t\tview: \"radio\",\n\t\t\t// id: componentIds.typeThousands,\n\t\t\tname: 'typeThousands',\n\t\t\tlabel: L('ab.dataField.number.thousands', \"*Thousands\"),\n\t\t\tvalue: 'none',\n\t\t\tvertical: true,\n\t\t\toptions: [{ id: 'none', value: L('ab.dataField.number.none', \"*None\") }, { id: 'comma', value: L('ab.dataField.number.comma', \"*Comma\") }, { id: 'period', value: L('ab.dataField.number.period', \"*Period\") }, { id: 'space', value: L('ab.dataField.number.space', \"*Space\") }]\n\t\t}, {\n\t\t\tview: 'checkbox',\n\t\t\t// id: componentIds.validate,\n\t\t\tname: 'validation',\n\t\t\tlabelWidth: 0,\n\t\t\tlabelRight: L('ab.dataField.number.validation', \"*Validation\"),\n\t\t\ton: {\n\t\t\t\tonChange: function onChange(newVal) {\n\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\t$$(ids.validateMinimum).enable();\n\t\t\t\t\t\t$$(ids.validateMaximum).enable();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$$(ids.validateMinimum).disable();\n\t\t\t\t\t\t$$(ids.validateMaximum).disable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tview: 'text',\n\t\t\tid: ids.validateMinimum,\n\t\t\tname: 'validateMinimum',\n\t\t\tlabel: L('ab.dataField.number.minimum', \"*Minimum\"),\n\t\t\ton: {\n\t\t\t\tonChange: function onChange(newVal, oldVal) {\n\t\t\t\t\t// Validate number\n\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t$$(ids.validateMinimum).setValue(oldVal || '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tview: 'text',\n\t\t\tid: ids.validateMaximum,\n\t\t\tname: 'validateMaximum',\n\t\t\tlabel: L('ab.dataField.number.maximum', \"*Maximum\"),\n\t\t\ton: {\n\t\t\t\tonChange: function onChange(newVal, oldVal) {\n\t\t\t\t\t// Validate number\n\t\t\t\t\tif (!new RegExp('^[0-9.]*$').test(newVal)) {\n\t\t\t\t\t\t$$(ids.validateMaximum).setValue(oldVal || '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}];\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: defaultValues,\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules: {\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic: {\n\n\t\tpopulate: function populate(ids, values) {\n\t\t\tif (values.settings.validation) {\n\t\t\t\t$$(ids.validateMinimum).enable();\n\t\t\t\t$$(ids.validateMaximum).enable();\n\t\t\t} else {\n\t\t\t\t$$(ids.validateMinimum).disable();\n\t\t\t\t$$(ids.validateMaximum).disable();\n\t\t\t}\n\t\t}\n\t},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit: function init(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n});\n\nvar ABFieldNumber = function (_ABField) {\n\t_inherits(ABFieldNumber, _ABField);\n\n\tfunction ABFieldNumber(values, object) {\n\t\t_classCallCheck(this, ABFieldNumber);\n\n\t\t/*\n  {\n  settings: {\n  'allowRequired':0,\n  'numberDefault':null,\n  'typeFormat': 'none',\n  'typeDecimals': 'none',\n  'typeDecimalPlaces': 'none',\n  'typeRounding' : 'none',\n  'typeThousands': 'none',\n  'validation':0,\n  'validateMinimum':null,\n  'validateMaximum':null\n  }\n  }\n  */\n\n\t\t// we're responsible for setting up our specific settings:\n\t\tvar _this = _possibleConstructorReturn(this, (ABFieldNumber.__proto__ || Object.getPrototypeOf(ABFieldNumber)).call(this, values, object, ABFieldNumberDefaults));\n\n\t\tfor (var dv in defaultValues) {\n\t\t\t_this.settings[dv] = values.settings[dv] || defaultValues[dv];\n\t\t}\n\n\t\t// text to Int:\n\t\t_this.settings.allowRequired = parseInt(_this.settings.allowRequired);\n\t\t_this.settings.validation = parseInt(_this.settings.validation);\n\n\t\treturn _this;\n\t}\n\n\t// return the default values for this DataField\n\n\n\t_createClass(ABFieldNumber, [{\n\t\tkey: \"isValid\",\n\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\tvalue: function isValid() {\n\n\t\t\tvar errors = _get(ABFieldNumber.prototype.__proto__ || Object.getPrototypeOf(ABFieldNumber.prototype), \"isValid\", this).call(this);\n\n\t\t\t// errors = OP.Form.validationError({\n\t\t\t// \tname:'columnName',\n\t\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t\t// }, errors);\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\t\t// toObj () {\n\n\t\t// \tvar obj = super.toObj();\n\n\t\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t\t// \treturn obj;\n\t\t// }\n\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t// return the grid column header definition for this instance of ABFieldNumber\n\n\t}, {\n\t\tkey: \"columnHeader\",\n\t\tvalue: function columnHeader(isObjectWorkspace) {\n\t\t\tvar config = _get(ABFieldNumber.prototype.__proto__ || Object.getPrototypeOf(ABFieldNumber.prototype), \"columnHeader\", this).call(this, isObjectWorkspace);\n\n\t\t\tconfig.editor = 'number'; // [edit_type] simple inline editing.\n\t\t\tconfig.sort = 'int'; // [sort_type]\n\n\t\t\treturn config;\n\t\t}\n\t}], [{\n\t\tkey: \"defaults\",\n\t\tvalue: function defaults() {\n\t\t\treturn ABFieldNumberDefaults;\n\t\t}\n\n\t\t/*\n   * @function propertiesComponent\n   *\n   * return a UI Component that contains the property definitions for this Field.\n   *\n   * @param {App} App the UI App instance passed around the Components.\n   * @return {Component}\n   */\n\n\t}, {\n\t\tkey: \"propertiesComponent\",\n\t\tvalue: function propertiesComponent(App) {\n\t\t\treturn ABFieldNumberComponent.component(App);\n\t\t}\n\t}]);\n\n\treturn ABFieldNumber;\n}(_ABField3.default);\n\n// NOTE: if you need a unique [edit_type] by your returned config.editor above:\n\n\nwebix.editors.number = webix.extend({\n\t// TODO : Validate number only\n}, webix.editors.text);\n\n//// NOTE: if you need a unique [sort_type] by your returned config.sort above:\n// webix.DataStore.prototype.sorting.as.[sort_type] = function(a,b){ \n//     return a > b ? 1 : -1; \n// }\n\nexports.default = ABFieldNumber;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _ABField2 = __webpack_require__(1);\n\nvar _ABField3 = _interopRequireDefault(_ABField2);\n\nvar _ABFieldComponent = __webpack_require__(2);\n\nvar _ABFieldComponent2 = _interopRequireDefault(_ABFieldComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ABFieldString\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * An ABFieldString defines a string field type.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar ABFieldStringDefaults = {\n\tname: 'string', // unique key to reference this specific DataField\n\ttype: 'string', // http://sailsjs.org/documentation/concepts/models-and-orm/attributes#?attribute-options\n\ticon: 'font', // font-awesome icon reference.  (without the 'fa-').  so 'user'  to reference 'fa-user'\t\t\n\n\t// menuName: what gets displayed in the Editor drop list\n\tmenuName: L('ab.dataField.string.menuName', '*Single line text'),\n\n\t// description: what gets displayed in the Editor description.\n\tdescription: L('ab.dataField.string.description', '*short string value')\n};\n\n/**\n * ABFieldStringComponent\n *\n * Defines the UI Component for this Data Field.  The ui component is responsible\n * for displaying the properties editor, populating existing data, retrieving\n * property values, etc.\n *\n * @param {obj} App  the current Component Application instance for the current UI.\n * @return {obj} the Component object.\n */\n// var ABFieldStringComponent = function(App) {\n\n// \tlabels.common = App.labels;\n\n// \tvar idBase = 'ab_datafield_string';\n\n\n// \tvar componentDefaults = {\n// \t\ttextDefault: '', \n// \t\tsupportMultilingual:1\n// \t};\n\n\n// \tvar ids = {\n\n// \t\tcomponent: App.unique(idBase+'_component'),\n\n\n// \t\ttextDefault: App.unique(idBase+'_textdefault'),\n// \t\tsupportMultilingual: App.unique(idBase+'_supportMultilingual'),\n\n\n// \t\t// the common property fields\n// \t\tlabel: App.unique(idBase+'_label'),\n// \t\tcolumnName: App.unique(idBase+'_columnName'),\n// \t\tfieldDescription: App.unique(idBase+'_fieldDescription'),\n// \t\tshowIcon: App.unique(idBase+'_showIcon'),\n// \t}\n\n\n// \t//// NOTE: we merge in the common headers below.\n// \tvar _ui = {\n// \t\tview:'form',\n// \t\tid: ids.component,\n// \t\tautoheight:true,\n// \t\tborderless:true,\n// \t\telements: [\n// \t\t\t{\n// \t\t\t\tview: \"text\",\n// \t\t\t\tid: ids.textDefault,\n// \t\t\t\tname:'textDefault',\n// \t\t\t\tplaceholder: labels.component.defaultText\n// \t\t\t},\n// \t\t\t{\n// \t\t\t\tview: \"checkbox\",\n// \t\t\t\tid: ids.supportMultilingual,\n// \t\t\t\tname:'supportMultilingual',\n// \t\t\t\tlabelRight: labels.component.supportMultilingual,\n// \t\t\t\tlabelWidth: 0,\n// \t\t\t\tvalue: true\n// \t\t\t}\n// \t\t],\n\n// \t\trules:{\n// \t\t\t'label':webix.rules.isNotEmpty,\n// \t\t\t'columnName':webix.rules.isNotEmpty\n// \t\t}\n// \t}\n\n\n// \tvar _init = function() {\n\n// \t\t// perform any additional setup actions.\n// \t\t// for example, don't want to show the description, then .hide() it here:\n// \t\t// $$(ids.fieldDescription).hide();\n// \t}\n\n\n// \tvar _logic = {\n\n// \t\t/*\n// \t\t * @function clear\n// \t\t *\n// \t\t * clear the form.\n// \t\t */\n// \t\tclear: function () {\n\n// \t\t\tABField.clearEditor(App, ids);\n\n// \t\t\tfor(var f in componentDefaults) { \n// \t\t\t\tvar component = $$(ids[f]);\n// \t\t\t\tcomponent.setValue(componentDefaults[f]);\n// \t\t\t}\n\n// \t\t\t$$(ids.component).clearValidation();\n// \t\t},\n\n\n// \t\t/*\n// \t\t * @function isValid\n// \t\t *\n// \t\t * checks the current values on the componet to see if they are Valid\n// \t\t */\n// \t\tisValid: function () {\n\n// \t\t\treturn $$(ids.component).validate();\n\n// \t\t},\n\n\n// \t\t * @function labelOnChange\n// \t\t *\n// \t\t * The ABField.definitionEditor implements a default operation\n// \t\t * to update the value of the .columnName with the current value of \n// \t\t * label.\n// \t\t * \n// \t\t * if you want to override that functionality, implement this fn()\n// \t\t *\n// \t\t * @param {string} newVal\tThe new value of label\n// \t\t * @param {string} oldVal\tThe previous value\n\n// \t\t// labelOnChange: function (newVal, oldVal) {\n\n// \t\t// \t// When the Label value changes, update our Column Name value \n// \t\t// \t// to match.\n\n// \t\t// \toldVal = oldVal || '';\n// \t\t// \tif (newVal != oldVal &&\n// \t\t// \t\toldVal == $$(ids.columnName).getValue()) {\n// \t\t// \t\t$$(ids.columnName).setValue(newVal);\n// \t\t// \t}\n// \t\t// },\n\n\n// \t\t/*\n// \t\t * @function populate\n// \t\t *\n// \t\t * populate the form with the given ABField instance provided.\n// \t\t *\n// \t\t * @param {ABFieldString} field\n// \t\t */\n// \t\tpopulate: function (field) {\n// console.error('TODO: .populate()');\n// \t\t},\n\n\n// \t\t/*\n// \t\t * @function show\n// \t\t *\n// \t\t * show this component.\n// \t\t */\n// \t\tshow: function() {\n// \t\t\t$$(ids.component).clearValidation();\n// \t\t\t$$(ids.component).show();\n// \t\t},\n\n\n// \t\t/*\n// \t\t * @function values\n// \t\t *\n// \t\t * return the values for this form.\n// \t\t * @return {obj}  \n// \t\t */\n// \t\tvalues: function () {\n\n// \t\t\tvar settings = $$(ids.component).getValues();\n// \t\t\tvar values = ABField.editorValues(settings);\n\n// \t\t\tvalues.type = ABFieldStringDefaults.type;\n\n// \t\t\treturn values;\n// \t\t}\n\n// \t}\n\n\n// \t// get the common UI headers entries, and insert them above ours here:\n// \t// NOTE: put this here so that _logic is defined.\n// \tvar commonUI = ABField.definitionEditor(App, ids, _logic, ABFieldStringDefaults);\n// \t_ui.elements = commonUI.rows.concat(_ui.elements);\n\n\n// \t// return the current instance of this component:\n// \treturn {\n// \t\tui:_ui,\t\t\t\t\t// {obj} \tthe webix ui definition for this component\n// \t\tinit:_init,\t\t\t\t// {fn} \tinit() to setup this component  \n// \t\t// actions:_actions,\t\t// {ob}\t\thash of fn() to expose so other components can access.\n\n\n// \t\t// DataField exposed actions:\n// \t\tclear: _logic.clear,\n// \t\tisValid:_logic.isValid,\n// \t\tpopulate: _logic.populate,\n// \t\tshow: _logic.show,\n// \t\tvalues: _logic.values,\n\n\n// \t\t_logic: _logic\t\t\t// {obj} \tUnit Testing\n// \t}\n// }\n\n\nvar ABFieldStringComponent = new _ABFieldComponent2.default({\n\n\tfieldDefaults: ABFieldStringDefaults,\n\n\telements: function elements(App) {\n\t\treturn [{\n\t\t\tview: \"text\",\n\t\t\tname: 'textDefault',\n\t\t\tlabelWidth: App.config.labelWidthLarge,\n\t\t\tplaceholder: L('ab.dataField.string.default', '*Default text')\n\t\t}, {\n\t\t\tview: \"checkbox\",\n\t\t\tname: 'supportMultilingual',\n\t\t\tlabelRight: L('ab.dataField.string.supportMultilingual', '*Support multilingual'),\n\t\t\tlabelWidth: App.config.labelWidthCheckbox,\n\t\t\tvalue: true\n\t\t}];\n\t},\n\n\t// defaultValues: the keys must match a .name of your elements to set it's default value.\n\tdefaultValues: {\n\t\t'textDefault': '',\n\t\t'supportMultilingual': 1\n\t},\n\n\t// rules: basic form validation rules for webix form entry.\n\t// the keys must match a .name of your .elements for it to apply\n\trules: {\n\t\t// 'textDefault':webix.rules.isNotEmpty,\n\t\t// 'supportMultilingual':webix.rules.isNotEmpty\n\t},\n\n\t// include additional behavior on default component operations here:\n\t// The base routines will be processed first, then these.  Any results\n\t// from the base routine, will be passed on to these: \n\t// \t@param {obj} ids  the list of ids used to generate the UI.  your \n\t//\t\t\t\t\t  provided .elements will have matching .name keys\n\t//\t\t\t\t\t  to access them here.\n\t//  @param {obj} values the current set of values provided for this instance\n\t// \t\t\t\t\t  of ABField:\n\t//\t\t\t\t\t  {\n\t//\t\t\t\t\t\tid:'',\t\t\t// if already .saved()\n\t// \t\t\t\t\t\tlabel:'',\n\t// \t\t\t\t\t\tcolumnName:'',\n\t//\t\t\t\t\t\tsettings:{\n\t//\t\t\t\t\t\t\tshowIcon:'',\n\t//\n\t//\t\t\t\t\t\t\tyour element key=>values here\t\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t  }\n\t//\n\t// \t\t.clear(ids)  : reset the display to an empty state\n\t// \t\t.isValid(ids, isValid): perform validation on the current editor values\n\t// \t\t.populate(ids, values) : populate the form with your current settings\n\t// \t\t.show(ids)   : display the form in the editor\n\t// \t\t.values(ids, values) : return the current values from the form\n\tlogic: {},\n\n\t// perform any additional setup actions here.\n\t// @param {obj} ids  the hash of id values for all the current form elements.\n\t//\t\t\t\t\t it should have your elements + the default Header elements:\n\t//\t\t\t\t\t\t.label, .columnName, .fieldDescription, .showIcon\n\tinit: function init(ids) {\n\t\t// want to hide the description? :\n\t\t// $$(ids.fieldDescription).hide();\n\t}\n\n});\n\nvar ABFieldString = function (_ABField) {\n\t_inherits(ABFieldString, _ABField);\n\n\tfunction ABFieldString(values, object) {\n\t\t_classCallCheck(this, ABFieldString);\n\n\t\t/*\n  {\n  settings: {\n  textDefault: 'string',\n  supportMultilingual: true/false\n  }\n  }\n  */\n\n\t\t// we're responsible for setting up our specific settings:\n\t\tvar _this = _possibleConstructorReturn(this, (ABFieldString.__proto__ || Object.getPrototypeOf(ABFieldString)).call(this, values, object, ABFieldStringDefaults));\n\n\t\t_this.settings.textDefault = values.settings.textDefault || '';\n\t\t_this.settings.supportMultilingual = values.settings.supportMultilingual + \"\" || \"1\";\n\n\t\t// text to Int:\n\t\t_this.settings.supportMultilingual = parseInt(_this.settings.supportMultilingual);\n\n\t\treturn _this;\n\t}\n\n\t// return the default values for this DataField\n\n\n\t_createClass(ABFieldString, [{\n\t\tkey: \"isValid\",\n\n\n\t\t///\n\t\t/// Instance Methods\n\t\t///\n\n\n\t\tvalue: function isValid() {\n\n\t\t\tvar errors = _get(ABFieldString.prototype.__proto__ || Object.getPrototypeOf(ABFieldString.prototype), \"isValid\", this).call(this);\n\n\t\t\t// errors = OP.Form.validationError({\n\t\t\t// \tname:'columnName',\n\t\t\t// \tmessage:L('ab.validation.object.name.unique', 'Field columnName must be unique (#name# already used in this Application)').replace('#name#', this.name),\n\t\t\t// }, errors);\n\n\t\t\treturn errors;\n\t\t}\n\n\t\t/**\n   * @method toObj()\n   *\n   * properly compile the current state of this ABApplication instance\n   * into the values needed for saving to the DB.\n   *\n   * Most of the instance data is stored in .json field, so be sure to\n   * update that from all the current values of our child fields.\n   *\n   * @return {json}\n   */\n\t\t// toObj () {\n\n\t\t// \tvar obj = super.toObj();\n\n\t\t// \t// obj.settings = this.settings;  // <--  super.toObj()\n\n\t\t// \treturn obj;\n\t\t// }\n\n\n\t\t///\n\t\t/// Working with Actual Object Values:\n\t\t///\n\n\t\t// return the grid column header definition for this instance of ABFieldString\n\n\t}, {\n\t\tkey: \"columnHeader\",\n\t\tvalue: function columnHeader(isObjectWorkspace) {\n\t\t\tvar config = _get(ABFieldString.prototype.__proto__ || Object.getPrototypeOf(ABFieldString.prototype), \"columnHeader\", this).call(this, isObjectWorkspace);\n\n\t\t\tconfig.editor = 'text';\n\t\t\tconfig.sort = 'string';\n\n\t\t\treturn config;\n\t\t}\n\t}], [{\n\t\tkey: \"defaults\",\n\t\tvalue: function defaults() {\n\t\t\treturn ABFieldStringDefaults;\n\t\t}\n\n\t\t/*\n   * @function propertiesComponent\n   *\n   * return a UI Component that contains the property definitions for this Field.\n   *\n   * @param {App} App the UI App instance passed around the Components.\n   * @return {Component}\n   */\n\n\t}, {\n\t\tkey: \"propertiesComponent\",\n\t\tvalue: function propertiesComponent(App) {\n\t\t\treturn ABFieldStringComponent.component(App);\n\t\t}\n\t}]);\n\n\treturn ABFieldString;\n}(_ABField3.default);\n\nexports.default = ABFieldString;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(20);\n\n__webpack_require__(19);\n\n/*\n * AB Choose\n *\n * When choosing an initial application to work with, we can\n *   - select an application from a list  :  ab_choose_list\n *   - create an application from a form  :  ab_choose_form\n *\n */\n\nvar idBase = 'ab_choose';\nOP.Component.extend(idBase, function (App) {\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\t};\n\n\t// Define the external components used in this Component:\n\tvar AppList = OP.Component['ab_choose_list'](App);\n\tvar AppForm = OP.Component['ab_choose_form'](App);\n\n\t// This component's UI definition:\n\t// Application multi-views\n\tvar _ui = {\n\t\tview: \"multiview\",\n\t\tanimate: false,\n\t\tid: ids.component,\n\t\tcells: [AppList.ui, AppForm.ui]\n\t};\n\n\t// This component's Init definition:\n\tvar _init = function _init() {\n\n\t\tAppList.init();\n\t\tAppForm.init();\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t/**\n   * @function transitionApplicationChooser\n   *\n   * Switch the AppBuilder UI to show the Application Chooser component.\n   */\n\t\ttransitionApplicationChooser: function transitionApplicationChooser() {\n\t\t\t$$(ids.component).show();\n\t\t}\n\n\t};\n\n\tvar _logic = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\t\tactions: _actions,\n\n\t\t_logic: _logic // Unit Testing\n\t};\n});\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * AB Choose Form\n *\n * Display the form for creating a new Application.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tformHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\tplaceholderName: L('ab.application.form.placeholderName', \"*Application name\"),\n\t\tplaceholderDescription: L('ab.application.form.placeholderDescription', \"*Application description\"),\n\t\tformDescription: L('ab.application.form.formDescription', \"*Description\"),\n\n\t\tsectionPermission: L('ab.application.form.sectionPermission', \"*Permission\"),\n\t\tpermissionHeader: L('ab.application.form.headerPermission', \"*Who can use this app?\"),\n\t\tcreateNewRole: L('ab.application.form.createNewRoleButton', \"*Create new roll\"),\n\n\t\tinvalidName: L('ab.application.invalidName', \"*This application name is invalid\"),\n\t\tduplicateName: L('ab.application.duplicateName', \"*Name must be unique.\")\n\n\t}\n};\n\nvar idBase = 'ab_choose_form';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tform: App.unique(idBase + '_form'),\n\t\tappFormPermissionList: App.unique(idBase + '_permission'),\n\t\tappFormCreateRoleButton: App.unique(idBase + '_createRole'),\n\n\t\tsaveButton: App.unique(idBase + '_buttonSave')\n\t};\n\n\tvar _ui = {\n\n\t\tid: ids.component,\n\t\tresponsive: \"hide\",\n\t\tcols: [{\n\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t}, {\n\t\t\tresponsiveCell: false,\n\t\t\trows: [{\n\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\thidden: App.config.hideMobile\n\t\t\t}, {\n\t\t\t\tview: \"toolbar\",\n\t\t\t\tcols: [{ view: \"label\", label: labels.component.formHeader, fillspace: true }]\n\t\t\t}, {\n\t\t\t\tview: \"form\",\n\t\t\t\tid: ids.form,\n\t\t\t\tautoheight: true,\n\t\t\t\tmargin: 0,\n\t\t\t\telements: [\n\t\t\t\t//{ type: \"section\", template: '<span class=\"webix_icon fa-edit\" style=\"max-width:32px;\"></span>Information', margin: 0 },\n\t\t\t\t{\n\t\t\t\t\tname: \"label\",\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tlabel: labels.common.formName,\n\t\t\t\t\trequired: true,\n\t\t\t\t\tplaceholder: labels.component.placeholderName,\n\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: function onChange(newValue, oldValue) {\n\t\t\t\t\t\t\t_logic.permissionRenameRole(newValue, oldValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, { height: App.config.smallSpacer }, {\n\t\t\t\t\tname: \"description\",\n\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t// label: labels.common.formDescription,\n\t\t\t\t\tlabel: \"Description\",\n\t\t\t\t\tlabelAlign: \"left\",\n\t\t\t\t\tlabelWidth: 100,\n\t\t\t\t\tplaceholder: labels.component.placeholderDescription,\n\t\t\t\t\theight: 100\n\t\t\t\t}, { height: App.config.smallSpacer }, {\n\t\t\t\t\tview: \"toolbar\",\n\t\t\t\t\tcss: \"ab-toolbar-submenu\",\n\t\t\t\t\tcols: [{\n\t\t\t\t\t\ttemplate: labels.component.permissionHeader,\n\t\t\t\t\t\ttype: 'header',\n\t\t\t\t\t\tborderless: true\n\t\t\t\t\t}, {\n\t\t\t\t\t\tview: \"toggle\",\n\t\t\t\t\t\tid: ids.appFormCreateRoleButton,\n\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\talign: \"right\",\n\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\tcss: \"ab-standard-button\",\n\t\t\t\t\t\toffIcon: \"square-o\",\n\t\t\t\t\t\tonIcon: \"check-square-o\",\n\t\t\t\t\t\tlabel: labels.component.createNewRole,\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonItemClick: function onItemClick(id, e) {\n\t\t\t\t\t\t\t\t_logic.createRoleButtonClick();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\tname: \"permissions\",\n\t\t\t\t\tid: ids.appFormPermissionList,\n\t\t\t\t\tview: \"list\",\n\t\t\t\t\t//height: 130,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tautoheight: true,\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tcss: \"ab-app-form-permission\",\n\t\t\t\t\ttemplate: \"{common.markCheckbox()} #name#\",\n\t\t\t\t\ttype: {\n\t\t\t\t\t\tmarkCheckbox: function markCheckbox(obj) {\n\t\t\t\t\t\t\treturn \"<span class='check webix_icon fa-\" + (obj.markCheckbox ? \"check-\" : \"\") + \"square-o'></span>\";\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonItemClick: function onItemClick(id, e, node) {\n\t\t\t\t\t\t\t_logic.permissionClick(id, e, node);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, { height: App.config.smallSpacer }, {\n\t\t\t\t\tmargin: 5,\n\t\t\t\t\tcols: [{ fillspace: true }, {\n\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\tvalue: labels.common.cancel,\n\t\t\t\t\t\twidth: App.config.buttonWidthSmall,\n\t\t\t\t\t\tcss: \"ab-cancel-button\",\n\t\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t\t_logic.cancel();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid: ids.saveButton,\n\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\tlabel: labels.common.save,\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\twidth: App.config.buttonWidthSmall,\n\t\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t\t_logic.buttonSaveClick();\n\t\t\t\t\t\t} // end click()\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t}, {\n\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\thidden: App.config.hideMobile\n\t\t\t}]\n\t\t}, {\n\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t}]\n\t};\n\n\tvar FormFields = ['label', 'description'];\n\n\tvar _init = function _init() {\n\t\twebix.extend($$(ids.form), webix.ProgressBar);\n\t\twebix.extend($$(ids.appFormPermissionList), webix.ProgressBar);\n\t};\n\n\tvar _logic = {\n\n\t\t/**\n   * @function applicationCreate\n   *\n   * Step through the process of creating an ABApplication with the\n   * current state of the Form.\n   *\n   * @param {obj} values \tcurrent value hash of the form values.\n   */\n\t\tapplicationCreate: function applicationCreate(values) {\n\n\t\t\tvar newApp = {\n\t\t\t\tname: values.label,\n\t\t\t\tlabel: values.label,\n\t\t\t\tdescription: values.description\n\t\t\t};\n\n\t\t\tasync.waterfall([function (cb) {\n\t\t\t\t// Create application data\n\t\t\t\t_ABApplication2.default.create(newApp).then(function (result) {\n\t\t\t\t\tcb(null, result);\n\t\t\t\t}).catch(cb);\n\t\t\t}, function (createdApp, cb) {\n\t\t\t\t_logic.permissionSave(createdApp).then(function () {\n\t\t\t\t\tcb();\n\t\t\t\t}).catch(cb);\n\t\t\t}], function (err) {\n\t\t\t\t_logic.formReady();\n\n\t\t\t\tif (err) {\n\t\t\t\t\twebix.message({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttext: labels.common.createErrorMessage.replace('{0}', values.label)\n\t\t\t\t\t});\n\n\t\t\t\t\tAD.error.log('App Builder : Error create application data', { error: err });\n\n\t\t\t\t\t_logic.buttonSaveEnable();\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tApp.actions.transitionApplicationList();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\ttext: labels.common.createSuccessMessage.replace('{0}', values.label)\n\t\t\t\t});\n\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function applicationUpdate\n   *\n   * Step through the process of updating an ABApplication with the\n   * current state of the Form.\n   *\n   * @param {ABApplication} application\n   */\n\t\tapplicationUpdate: function applicationUpdate(Application) {\n\t\t\tvar values = _logic.formValues();\n\n\t\t\tasync.waterfall([function (next) {\n\t\t\t\t_logic.permissionSave(Application).then(function (result) {\n\t\t\t\t\tnext(null, result);\n\t\t\t\t}).catch(next);\n\t\t\t}, function (app_role, next) {\n\t\t\t\t// Update application data\n\t\t\t\tApplication.label = values.label;\n\t\t\t\tApplication.description = values.description;\n\n\t\t\t\tif (app_role && app_role.id) Application.role = app_role.id;else Application.role = null;\n\n\t\t\t\tApplication.save().then(function () {\n\t\t\t\t\tnext();\n\t\t\t\t}).catch(next);\n\t\t\t}], function (err) {\n\n\t\t\t\t_logic.formReady();\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\tif (err) {\n\t\t\t\t\twebix.message({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttext: labels.common.updateErrorMessage.replace('{0}', Application.label)\n\t\t\t\t\t});\n\t\t\t\t\tAD.error.log('App Builder : Error update application data', { error: err });\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tApp.actions.transitionApplicationList();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\ttext: labels.common.updateSucessMessage.replace('{0}', Application.label)\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function buttonSaveClick\n   *\n   * Process the user clicking on the [Save] button.\n   */\n\t\tbuttonSaveClick: function buttonSaveClick() {\n\n\t\t\t_logic.buttonSaveDisable();\n\t\t\t_logic.formBusy();\n\n\t\t\t// if there is a selected Application, then this is an UPDATE\n\t\t\tvar updateApp = App.actions.getSelectedApplication();\n\t\t\tif (updateApp) {\n\n\t\t\t\tif (_logic.formValidate('update')) {\n\n\t\t\t\t\t_logic.applicationUpdate(updateApp);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// else this is a Create\n\t\t\t\tif (_logic.formValidate('add')) {\n\n\t\t\t\t\t_logic.applicationCreate(_logic.formValues());\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function buttonSaveDisable\n   *\n   * Disable the save button.\n   */\n\t\tbuttonSaveDisable: function buttonSaveDisable() {\n\t\t\t$$(ids.saveButton).disable();\n\t\t},\n\n\t\t/**\n   * @function buttonSaveEnable\n   *\n   * Re-enable the save button.\n   */\n\t\tbuttonSaveEnable: function buttonSaveEnable() {\n\t\t\t$$(ids.saveButton).enable();\n\t\t},\n\n\t\t/**\n   * @function cancel\n   *\n   * Cancel the current Form Operation and return us to the AppList.\n   */\n\t\tcancel: function cancel() {\n\n\t\t\t_logic.formReset();\n\t\t\tApp.actions.transitionApplicationList();\n\t\t},\n\n\t\t/**\n   * @function createRoleButtonClick\n   *\n   * The user clicked the [Create Role] button.  Update the UI and add a\n   * unique Application permission to our list.\n   */\n\t\tcreateRoleButtonClick: function createRoleButtonClick() {\n\n\t\t\tif ($$(ids.appFormCreateRoleButton).getValue()) {\n\n\t\t\t\t// TODO: if not called from anywhere else, then move the name gathering into .permissionAddNew()\n\t\t\t\t// Add new app role\n\t\t\t\tvar appName = $$(ids.form).elements[\"label\"].getValue();\n\t\t\t\t_logic.permissionAddNew(appName);\n\t\t\t} else {\n\t\t\t\t// Remove app role\n\t\t\t\t_logic.permissionRemoveNew();\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function formBusy\n   *\n   * Show the progress indicator to indicate a Form operation is in\n   * progress.\n   */\n\t\tformBusy: function formBusy() {\n\n\t\t\t$$(ids.form).showProgress({ type: 'icon' });\n\t\t},\n\n\t\t/**\n   * @function formPopulate()\n   *\n   * populate the form values from the given ABApplication\n   *\n   * @param {ABApplication} application  instance of the ABApplication\n   */\n\t\tformPopulate: function formPopulate(application) {\n\n\t\t\tvar Form = $$(ids.form);\n\n\t\t\t// Populate data to form\n\t\t\tif (application) {\n\t\t\t\tFormFields.forEach(function (f) {\n\t\t\t\t\tif (Form.elements[f]) {\n\t\t\t\t\t\tForm.elements[f].setValue(application[f]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// _logic.permissionPopulate(application);\n\t\t},\n\n\t\t/**\n   * @function formReady()\n   *\n   * remove the busy indicator from the form.\n   */\n\t\tformReady: function formReady() {\n\t\t\t$$(ids.form).hideProgress();\n\t\t},\n\n\t\t/**\n   * @function formReset()\n   *\n   * return the form to an empty state.\n   */\n\t\tformReset: function formReset() {\n\n\t\t\t$$(ids.form).clear();\n\t\t\t$$(ids.form).clearValidation();\n\t\t\t// $$(self.webixUiids.appFormPermissionList).clearValidation();\n\t\t\t// $$(self.webixUiids.appFormPermissionList).clearAll();\n\t\t\t// $$(self.webixUiids.appFormCreateRoleButton).setValue(0);\n\t\t},\n\n\t\t/**\n   * @function formValidate()\n   *\n   * validate the form values.\n   *\n   * @return {bool}  true if all values pass validation.  false otherwise.\n   */\n\t\tformValidate: function formValidate(op) {\n\t\t\t// op : ['add', 'update', 'destroy']\n\n\t\t\tvar Form = $$(ids.form);\n\t\t\tif (!Form.validate()) {\n\t\t\t\t// TODO : Error message\n\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar errors = _ABApplication2.default.isValid(op, Form.getValues());\n\t\t\tif (OP.Form.isValidationError(errors, Form)) {\n\t\t\t\t_logic.formReady();\n\t\t\t\t_logic.buttonSaveEnable();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t///// TODO: \n\t\t\t// Implement common Form Input Validations\n\t\t\t// convert this to:  \n\t\t\t// app = ABApplication.newApplication(Form.getValues())\n\t\t\t// errors = app.inValid()\n\t\t\t// if (OP.Form.isValidationError(errors, Form)) { }\n\n\n\t\t\t// var appName = $$(ids.form).elements['label'].getValue(),\n\t\t\t// \tappDescription = $$(ids.form).elements['description'].getValue();\n\n\t\t\t// if (!inputValidator.validate(appName)) {\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\t\t\t// // Prevent duplicate application name\n\t\t\t// if (self.data.filter(function (app) { return app.name.trim().toLowerCase() == appName.trim().replace(/ /g, '_').toLowerCase(); }).length > 0) {\n\t\t\t// \tOP.Dialog.Alert({\n\t\t\t// \t\ttitle: labels.component.invalidName,\n\t\t\t// \t\ttext: labels.component.duplicateName.replace(\"#appName#\", appName),\n\t\t\t// \t\tok: labels.common.ok\n\t\t\t// \t});\n\n\t\t\t// \t$$(ids.form).elements['label'].focus();\n\t\t\t// \t_logic.buttonSaveEnable();\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\t\t\treturn true;\n\t\t},\n\n\t\t/**\n   * @function formValues()\n   *\n   * return an object hash of name:value pairs of the current Form.\n   *\n   * @return {obj}\n   */\n\t\tformValues: function formValues() {\n\t\t\t// return the current values of the Form elements.\n\t\t\treturn $$(ids.form).getValues();\n\t\t},\n\n\t\t/**\n   * @function permissionAddNew\n   *\n   * create a new permission entry based upon the current Application.label\n   *\n   * This not only adds it to our Permission List, but also selects it.\n   *\n   * @param {string} appName\tThe Application.label of the current Application\n   */\n\t\tpermissionAddNew: function permissionAddNew(appName) {\n\n\t\t\t// add new role entry\n\t\t\t$$(ids.appFormPermissionList).add({\n\t\t\t\tid: 'newRole',\n\t\t\t\tname: _logic.permissionName(appName),\n\t\t\t\tisApplicationRole: true,\n\t\t\t\tmarkCheckbox: 1\n\t\t\t}, 0);\n\n\t\t\t// Select new role\n\t\t\tvar selectedIds = $$(ids.appFormPermissionList).getSelectedId(true);\n\t\t\tselectedIds.push('newRole');\n\t\t\t$$(ids.appFormPermissionList).select(selectedIds);\n\t\t},\n\n\t\t/**\n   * @function permissionClick\n   *\n   * Process when a permission entry in the list is clicked.\n   */\n\t\tpermissionClick: function permissionClick(id, e, node) {\n\n\t\t\tvar List = $$(ids.appFormPermissionList);\n\n\t\t\tvar item = List.getItem(id);\n\n\t\t\tif (List.getItem(id).isApplicationRole) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (List.isSelected(id)) {\n\t\t\t\titem.markCheckbox = 0;\n\t\t\t\tList.unselect(id);\n\t\t\t} else {\n\t\t\t\titem.markCheckbox = 1;\n\t\t\t\tvar selectedIds = List.getSelectedId();\n\n\t\t\t\tif (typeof selectedIds === 'string' || !isNaN(selectedIds)) {\n\t\t\t\t\tif (selectedIds) selectedIds = [selectedIds];else selectedIds = [];\n\t\t\t\t}\n\n\t\t\t\tselectedIds.push(id);\n\n\t\t\t\tList.select(selectedIds);\n\n\t\t\t\tList.updateItem(id, item);\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function permissionName\n   *\n   * returns a formatted name for a Permission Role based upon the provided Application.label\n   *\n   * @param {string} appName\tthe current value of the Application.label\n   * @return {string} \tPermission Role Name.\n   */\n\t\tpermissionName: function permissionName(appName) {\n\t\t\treturn appName + \" Application Role\";\n\t\t},\n\n\t\t/**\n   * @function permissionPopulate\n   *\n   * fill out the Permission list\n   *\n   * @param {ABApplication} application\tthe current ABApplication we are editing\n   */\n\t\tpermissionPopulate: function permissionPopulate(application) {\n\n\t\t\tvar PermForm = $$(ids.appFormPermissionList);\n\t\t\t// Get user's roles\n\t\t\tPermForm.showProgress({ type: 'icon' });\n\t\t\tasync.waterfall([function (next) {\n\t\t\t\tAD.comm.service.get({ url: '/app_builder/user/roles' }).fail(function (err) {\n\t\t\t\t\tnext(err);\n\t\t\t\t}).done(function (roles) {\n\n\t\t\t\t\t// scan the roles and determine if any of them have been created\n\t\t\t\t\t// after the current Application.name:\n\t\t\t\t\tvar parsedRoles = roles.map(function (r) {\n\t\t\t\t\t\tif (application) {\n\t\t\t\t\t\t\tif (r.name == _logic.permissionName(application.name.split('_').join(' '))) {\n\t\t\t\t\t\t\t\tr.isApplicationRole = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn r;\n\t\t\t\t\t});\n\t\t\t\t\tnext(null, parsedRoles);\n\t\t\t\t});\n\t\t\t}, function (available_roles, next) {\n\t\t\t\tif (application && application.id) {\n\t\t\t\t\tapplication.getPermissions().then(function (selected_role_ids) {\n\t\t\t\t\t\tnext(null, available_roles, selected_role_ids);\n\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\tnext(err);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tnext(null, available_roles, []);\n\t\t\t\t}\n\t\t\t}, function (available_roles, selected_role_ids, next) {\n\n\t\t\t\t// mark the role(s) in available_roles that is tied\n\t\t\t\t// this application:\n\t\t\t\tif (application && application.role) {\n\t\t\t\t\tavailable_roles.forEach(function (r) {\n\t\t\t\t\t\tif (r.id == (application.role.id || application.role)) {\n\t\t\t\t\t\t\tr.isApplicationRole = true;\n\t\t\t\t\t\t\tr.markCheckbox = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Sort permission list\n\t\t\t\tavailable_roles.sort(function (a, b) {\n\t\t\t\t\treturn a.isApplicationRole === b.isApplicationRole ? 0 : a.isApplicationRole ? -1 : 1;\n\t\t\t\t});\n\n\t\t\t\t// reload list from our available_roles\n\t\t\t\tPermForm.clearAll();\n\t\t\t\tPermForm.parse(available_roles);\n\n\t\t\t\t// mark which roles have already been selected\n\t\t\t\tif (selected_role_ids && selected_role_ids.length > 0) {\n\t\t\t\t\t// Select permissions\n\t\t\t\t\tPermForm.select(selected_role_ids);\n\t\t\t\t\tavailable_roles.forEach(function (r) {\n\t\t\t\t\t\tif (selected_role_ids.indexOf(r.id) > -1) {\n\t\t\t\t\t\t\tvar item = $$(ids.appFormPermissionList).getItem(r.id);\n\t\t\t\t\t\t\titem.markCheckbox = 1;\n\t\t\t\t\t\t\t$$(ids.appFormPermissionList).updateItem(r.id, item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Select create role application button\n\t\t\t\t\tvar markCreateButton = available_roles.filter(function (r) {\n\t\t\t\t\t\treturn r.isApplicationRole;\n\t\t\t\t\t}).length > 0 ? 1 : 0;\n\t\t\t\t\t$$(ids.appFormCreateRoleButton).setValue(markCreateButton);\n\t\t\t\t}\n\n\t\t\t\tnext();\n\t\t\t}], function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\twebix.message(err.message);\n\t\t\t\t}\n\n\t\t\t\tPermForm.hideProgress();\n\t\t\t});\n\n\t\t\t// return appName  + \" Application Role\";\n\t\t},\n\n\t\t/**\n   * @function permissionRemoveNew()\n   *\n   * Intended to be called when the USER unselects the option to create a Permission\n   * for this Application.\n   *\n   * We remove any Permission Role created for this Application.\n   */\n\t\tpermissionRemoveNew: function permissionRemoveNew() {\n\n\t\t\t// find any roles that are put here from our application form:\n\t\t\tvar appRoles = $$(ids.appFormPermissionList).find(function (perm) {\n\t\t\t\treturn perm.isApplicationRole;\n\t\t\t});\n\n\t\t\t// remove them:\n\t\t\tappRoles.forEach(function (r) {\n\t\t\t\t$$(ids.appFormPermissionList).remove(r.id);\n\t\t\t});\n\t\t},\n\n\t\t/*\n   * permissionRenameRole\n   *\n   * When the name of the Appliction changes, change the Name of the Permission as well.\n   *\n   * @param {string} newValue  the current name of the application\n   * @param {string} oldValue  the previous name of the application\n   */\n\t\tpermissionRenameRole: function permissionRenameRole(newValue, oldValue) {\n\n\t\t\tvar editRole = $$(ids.appFormPermissionList).find(function (d) {\n\t\t\t\treturn d.name === _logic.permissionName(oldValue);\n\t\t\t});\n\n\t\t\teditRole.forEach(function (r) {\n\t\t\t\tvar editItem = $$(ids.appFormPermissionList).getItem(r.id);\n\t\t\t\teditItem.name = _logic.permissionName(newValue);\n\n\t\t\t\t$$(ids.appFormPermissionList).updateItem(editItem.id, editItem);\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function permissionSave()\n   *\n   * step through saving the current Permission Settings and associating\n   * them with the current Application.\n   *\n   * @param {ABApplication} App  \tThe current Application we are working with.\n   * @return {Promise}\t\t\t.resolve( {Permission} ) if one is created for this App\n   */\n\t\tpermissionSave: function permissionSave(app) {\n\t\t\t//// REFACTOR:\n\t\t\t// this step implies that ab_choose_form understands the intracies of how\n\t\t\t// ABApplication and Permissions work.\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar saveRoleTasks = [],\n\t\t\t\t    appRole = null;\n\n\t\t\t\t//// Process the option to create a newRole For this Application:\n\n\t\t\t\t// if the button is set\n\t\t\t\tif ($$(ids.appFormCreateRoleButton).getValue()) {\n\n\t\t\t\t\t// check to see if we already have a permission that isApplicationRole\n\t\t\t\t\tvar selectedPerms = $$(ids.appFormPermissionList).getSelectedItem(true);\n\t\t\t\t\tselectedPerms = selectedPerms.filter(function (perm) {\n\t\t\t\t\t\treturn perm.isApplicationRole;\n\t\t\t\t\t});\n\n\t\t\t\t\t// if not, then create one:\n\t\t\t\t\tif (selectedPerms.length == 0) {\n\n\t\t\t\t\t\t// Create new role for application\n\t\t\t\t\t\tsaveRoleTasks.push(function (cb) {\n\t\t\t\t\t\t\tapp.createPermission().then(function (result) {\n\n\t\t\t\t\t\t\t\t// remember the Role we just created\n\t\t\t\t\t\t\t\tappRole = result;\n\t\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t\t}).catch(cb);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Delete any existing application roles\n\t\t\t\t\tsaveRoleTasks.push(function (cb) {\n\t\t\t\t\t\tapp.deletePermission().then(function () {\n\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t}).catch(cb);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//// Now process any additional roles:\n\n\t\t\t\t// get array of selected permissions that are not our newRole\n\t\t\t\tvar permItems = $$(ids.appFormPermissionList).getSelectedItem(true);\n\t\t\t\tpermItems = permItems.filter(function (item) {\n\t\t\t\t\treturn item.id !== 'newRole';\n\t\t\t\t}); // Remove new role item\n\n\n\t\t\t\t// Make sure Application is linked to selected permission items:\n\t\t\t\tsaveRoleTasks.push(function (cb) {\n\n\t\t\t\t\t// ok, so we removed the 'newRole' entry, but we might\n\t\t\t\t\t// have created an entry for it earlier, if so, add in\n\t\t\t\t\t// the created one here:\n\t\t\t\t\tif ($$(ids.appFormCreateRoleButton).getValue() && appRole) {\n\n\t\t\t\t\t\t// make sure it isn't already in there:\n\t\t\t\t\t\tvar appRoleItem = permItems.filter(function (item) {\n\t\t\t\t\t\t\treturn item.id == appRole.id;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!appRoleItem || appRoleItem.length < 1) {\n\n\t\t\t\t\t\t\t// if not, add it :\n\t\t\t\t\t\t\tpermItems.push({\n\t\t\t\t\t\t\t\tid: appRole.id,\n\t\t\t\t\t\t\t\tisApplicationRole: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Assign Role Permissions\n\t\t\t\t\tapp.assignPermissions(permItems).then(function () {\n\t\t\t\t\t\tcb();\n\t\t\t\t\t}).catch(cb);\n\t\t\t\t});\n\n\t\t\t\tasync.series(saveRoleTasks, function (err, results) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// we return the instance of the newly created Permission.\n\t\t\t\t\t\tresolve(appRole);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t//// REFACTOR QUESTION:\n\t\t\t// why are we updating the app.permissions with this data structure?\n\t\t\t// where is this data structure being used?\n\t\t\t// Earlier we are using another structure (permissionAddNew()) ... how is that related to this?\n\n\t\t\t// // Final task\n\t\t\t// saveRoleTasks.push(function (cb) {\n\t\t\t// \t// Update store app data\n\t\t\t// \tvar applicationData = self.data.filter(function (d) { return d.id == app.id; });\n\t\t\t// \tapplicationData.forEach(function (app) {\n\t\t\t// \t\tapp.attr('permissions', $.map(permItems, function (item) {\n\t\t\t// \t\t\treturn {\n\t\t\t// \t\t\t\tapplication: app.id,\n\t\t\t// \t\t\t\tpermission: item.id,\n\t\t\t// \t\t\t\tisApplicationRole: item.isApplicationRole\n\t\t\t// \t\t\t}\n\t\t\t// \t\t}));\n\t\t\t// \t});\n\n\t\t\t// \tq.resolve(appRole);\n\t\t\t// \tcb();\n\t\t\t// })\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show the Form Component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t// initiate a request to create a new Application\n\t\ttransitionApplicationForm: function transitionApplicationForm(application) {\n\n\t\t\t// if no application is given, then this should be a [create] operation,\n\n\t\t\t// so clear our AppList\n\t\t\tif ('undefined' == typeof application) {\n\t\t\t\tApp.actions.unselectApplication();\n\t\t\t}\n\n\t\t\t// now prepare our form:\n\t\t\t_logic.formReset();\n\t\t\tif (application) {\n\t\t\t\t// populate Form here:\n\t\t\t\t_logic.formPopulate(application);\n\t\t\t}\n\t\t\t_logic.permissionPopulate(application);\n\t\t\t_logic.show();\n\t\t}\n\n\t};\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\t\tactions: _actions,\n\n\t\t_logic: _logic\n\t};\n});\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(21);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * AB Choose List\n *\n * Display a list of Applications for the user to select.\n *\n */\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\ttitle: L('ab.application.application', '*Application'),\n\n\t\tcreateNew: L('ab.application.createNew', '*Add new application'),\n\t\tnoApplication: L('ab.application.noApplication', \"*There is no application data\")\n\t}\n};\n\nvar idBase = 'ab_choose_list';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tuploader: App.unique(idBase + '_uploader'),\n\t\tlist: App.unique(idBase + '_list'),\n\t\ttoolBar: App.unique(idBase + '_toolbar'),\n\t\tbuttonCreateNewApplication: App.unique(idBase + '_buttonNewApp')\n\t};\n\n\tvar MenuComponent = OP.Component['ab_choose_list_menu'](App);\n\tvar PopupMenu = webix.ui(MenuComponent.ui);\n\tPopupMenu.hide();\n\n\tvar _ui = {\n\n\t\tid: ids.component,\n\t\tresponsive: \"hide\",\n\n\t\tcols: [{\n\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t}, {\n\t\t\tresponsiveCell: false,\n\t\t\trows: [{\n\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\thidden: App.config.hideMobile\n\t\t\t},\n\t\t\t//\n\t\t\t// ToolBar\n\t\t\t//\n\t\t\t{\n\t\t\t\tview: \"toolbar\",\n\t\t\t\tid: ids.toolBar,\n\t\t\t\tcols: [{ view: \"label\", label: labels.component.title, fillspace: true }, {\n\t\t\t\t\tid: ids.buttonCreateNewApplication,\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tlabel: labels.component.createNew,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\ticon: \"plus\",\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t// Inform our Chooser we have a request to create an Application:\n\t\t\t\t\t\tApp.actions.transitionApplicationForm();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"uploader\",\n\t\t\t\t\tid: ids.uploader,\n\t\t\t\t\tlabel: labels.common.import,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tupload: '/app_builder/appJSON',\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\ticon: \"upload\",\n\t\t\t\t\tautosend: true,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonAfterFileAdd: function onAfterFileAdd() {\n\t\t\t\t\t\t\t_logic.onAfterFileAdd();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonFileUpload: function onFileUpload(item, response) {\n\t\t\t\t\t\t\t_logic.onFileUpload(item, response);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonFileUploadError: function onFileUploadError(details, response) {\n\t\t\t\t\t\t\t_logic.onFileUploadError(details, response);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t},\n\n\t\t\t//\n\t\t\t// The List of Applications\n\t\t\t//\n\t\t\t{\n\t\t\t\tid: ids.list,\n\t\t\t\tview: \"list\",\n\t\t\t\tcss: 'ab-app-select-list',\n\t\t\t\ttemplate: function template(obj, common) {\n\t\t\t\t\treturn _logic.templateListItem(obj, common);\n\t\t\t\t},\n\t\t\t\ttype: {\n\t\t\t\t\theight: App.config.appListRowHeight, // Defines item height\n\t\t\t\t\ticonGear: \"<span class='webix_icon fa-cog'></span>\"\n\t\t\t\t},\n\t\t\t\tselect: false,\n\t\t\t\tonClick: {\n\t\t\t\t\t\"ab-app-list-item\": function abAppListItem(ev, id, trg) {\n\t\t\t\t\t\treturn _logic.onClickListItem(ev, id, trg);\n\t\t\t\t\t},\n\t\t\t\t\t\"ab-app-list-edit\": function abAppListEdit(ev, id, trg) {\n\t\t\t\t\t\treturn _logic.onClickListEdit(ev, id, trg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tmaxHeight: App.config.appListSpacerRowHeight,\n\t\t\t\thidden: App.config.hideMobile\n\t\t\t}]\n\t\t}, {\n\t\t\tmaxWidth: App.config.appListSpacerColMaxWidth,\n\t\t\tminWidth: App.config.appListSpacerColMinWidth,\n\t\t\twidth: App.config.appListSpacerColMaxWidth\n\t\t}]\n\t};\n\n\tvar _data = {};\n\n\tvar _logic = {\n\n\t\t/**\n   * @function busy\n   *\n   * show a busy indicator on our App List\n   */\n\t\tbusy: function busy() {\n\t\t\tif ($$(ids.list).showProgress) $$(ids.list).showProgress({ icon: 'cursor' });\n\t\t},\n\n\t\t/**\n   * @function loadData\n   *\n   * Load all the ABApplications and display them in our App List\n   */\n\t\tloadData: function loadData() {\n\n\t\t\t// Get applications data from the server\n\t\t\t_logic.busy();\n\t\t\t_ABApplication2.default.allApplications().then(function (data) {\n\n\t\t\t\t_logic.ready();\n\n\t\t\t\t// make sure our overlay is updated when items are added/removed\n\t\t\t\t// from our data list.\n\t\t\t\tdata.attachEvent(\"onAfterAdd\", function (id, index) {\n\t\t\t\t\t_logic.refreshOverlay();\n\t\t\t\t});\n\n\t\t\t\tdata.attachEvent(\"onAfterDelete\", function (id) {\n\t\t\t\t\t_logic.refreshOverlay();\n\t\t\t\t});\n\n\t\t\t\t_data.listApplications = data;\n\n\t\t\t\t_logic.refreshList();\n\t\t\t}).catch(function (err) {\n\t\t\t\t_logic.ready();\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\ttext: err\n\t\t\t\t});\n\t\t\t\tAD.error.log('App Builder : Error loading application data', { error: err });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function onAfterFileAdd\n   *\n   * UI updates for when a file upload is initiated\n   */\n\t\tonAfterFileAdd: function onAfterFileAdd() {\n\t\t\t$$(ids.uploader).disable();\n\t\t\t_logic.busy();\n\t\t},\n\n\t\t/**\n   * @function onClickListEdit\n   *\n   * UI updates for when the edit gear is clicked\n   */\n\t\tonClickListEdit: function onClickListEdit(ev, id, trg) {\n\n\t\t\t// Show menu\n\t\t\tPopupMenu.show(trg);\n\t\t\t$$(ids.list).select(id);\n\n\t\t\treturn false; // block default behavior\n\t\t},\n\n\t\t/**\n   * @function onClickListItem\n   *\n   * An item in the list is selected. So update the workspace with that \n   * object.\n   */\n\t\tonClickListItem: function onClickListItem(ev, id, trg) {\n\n\t\t\t_logic.busy();\n\n\t\t\t$$(ids.list).select(id);\n\n\t\t\tvar selectedApp = $$(ids.list).getItem(id);\n\n\t\t\tif (selectedApp) {\n\n\t\t\t\t_logic.ready();\n\n\t\t\t\t// We've selected an Application to work with\n\t\t\t\tApp.actions.transitionWorkspace(selectedApp);\n\t\t\t}\n\n\t\t\treturn false; // block default behavior\n\t\t},\n\n\t\t/**\n   * @function onFileUpload\n   *\n   * The File Upload process finished.\n   */\n\t\tonFileUpload: function onFileUpload(item, response) {\n\t\t\t_logic.loadData(); // refresh app list\n\t\t\t$$(ids.uploader).enable();\n\t\t\t_logic.ready();\n\t\t},\n\n\t\t/**\n   * @function onFileUploadError\n   *\n   * The File Upload process exited with an error.\n   */\n\t\tonFileUploadError: function onFileUploadError(details, response) {\n\n\t\t\tvar errorMessage = 'Error: ' + (response && response.message);\n\t\t\tOP.Dialog.Alert({\n\t\t\t\ttext: errorMessage\n\t\t\t});\n\t\t\t// webix.message({\n\t\t\t// \ttype: 'error',\n\t\t\t// \ttext: errorMessage\n\t\t\t// });\n\t\t\t_logic.loadData(); // refresh app list\n\t\t\t$$(ids.uploader).enable();\n\t\t\t_logic.ready();\n\t\t},\n\n\t\t/**\n   * @function refreshOverlay\n   *\n   * If we have no items in our list, display a Message.\n   */\n\t\trefreshOverlay: function refreshOverlay() {\n\t\t\tvar appList = $$(ids.list);\n\n\t\t\tif (!appList.count()) //if no data is available\n\t\t\t\tappList.showOverlay(labels.component.noApplication);else appList.hideOverlay();\n\t\t},\n\n\t\t/**\n   * @function ready\n   *\n   * remove the busy indicator on our App List\n   */\n\t\tready: function ready() {\n\t\t\tif ($$(ids.list).hideProgress) $$(ids.list).hideProgress();\n\t\t},\n\n\t\t/**\n   * @function reset\n   *\n   * Return our App List to an unselected state.\n   */\n\t\treset: function reset() {\n\t\t\t$$(ids.list).unselectAll();\n\t\t},\n\n\t\t/**\n   * @function refreshList\n   *\n   * Apply our list of ABApplication data to our AppList\n   */\n\t\trefreshList: function refreshList() {\n\n\t\t\tvar appList = $$(ids.list);\n\n\t\t\tappList.clearAll();\n\t\t\tappList.data.unsync();\n\t\t\tappList.data.sync(_data.listApplications);\n\n\t\t\t_logic.refreshOverlay();\n\n\t\t\tappList.refresh();\n\n\t\t\t_logic.ready();\n\t\t},\n\n\t\t/**\n   * @function show\n   *\n   * Trigger our List component to show\n   */\n\t\tshow: function show() {\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\t\t/**\n   * @function templateListItem\n   *\n   * Defines the template for each row of our AppList.\n   *\n   * @param {obj} obj the current instance of ABApplication for the row.\n   * @param {?} common the webix.common icon data structure\n   * @return {string}\n   */\n\t\ttemplateListItem: function templateListItem(obj, common) {\n\t\t\treturn _templateListItem.replace('#label#', obj.label || '').replace('#description#', obj.description || '').replace('{common.iconGear}', common.iconGear);\n\t\t}\n\t};\n\n\t/*\n  * _templateListItem\n  *\n  * The AppList Row template definition.\n  */\n\tvar _templateListItem = [\"<div class='ab-app-list-item'>\", \"<div class='ab-app-list-info'>\", \"<div class='ab-app-list-name'>#label#</div>\", \"<div class='ab-app-list-description'>#description#</div>\", \"</div>\", \"<div class='ab-app-list-edit'>\", \"{common.iconGear}\", \"</div>\", \"</div>\"].join('');\n\n\t/*\n  * @function _init\n  *\n  * The init() that performs the necessary setup for our AppList chooser.\n  */\n\tvar _init = function _init() {\n\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t\twebix.extend($$(ids.list), webix.OverlayBox);\n\n\t\tMenuComponent.init();\n\n\t\t// start things off by loading the current list of Applications\n\t\t_logic.loadData();\n\t};\n\n\t/*\n  * {json} _actions\n  *\n  * The exported methods available to other Components.\n  */\n\tvar _actions = {\n\n\t\t/**\n   * @function unselectApplication\n   *\n   * resets the AppList to an unselected state.\n   */\n\t\tunselectApplication: function unselectApplication() {\n\t\t\t_logic.reset();\n\t\t},\n\n\t\t/**\n   * @function getSelectedApplication\n   *\n   * returns which ABApplication is currently selected.\n   * @return {ABApplication}  or {null} if nothing selected.\n   */\n\t\tgetSelectedApplication: function getSelectedApplication() {\n\t\t\treturn $$(ids.list).getSelectedItem();\n\t\t},\n\n\t\t/**\n   * @function deleteApplication\n   *\n   * deletes the given ABAppliction.\n   *\n   * NOTE: this assumes the component using this method has already\n   * provided the delete confirmation.\n   *\n   * @param {ABApplication} app  the ABAppliction to delete.\n   */\n\t\tdeleteApplication: function deleteApplication(app) {\n\n\t\t\tif (!app) return;\n\n\t\t\t// Delete application data\n\t\t\t_logic.busy();\n\n\t\t\tapp.destroy().then(function (result) {\n\t\t\t\t_logic.reset();\n\t\t\t\t_logic.ready();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\ttext: labels.common.deleteSuccessMessage.replace('{0}', app.label)\n\t\t\t\t});\n\t\t\t}).catch(function (err) {\n\t\t\t\t_logic.reset();\n\t\t\t\t_logic.ready();\n\n\t\t\t\twebix.message({\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\ttext: labels.common.deleteErrorMessage.replace(\"{0}\", app.label)\n\t\t\t\t});\n\n\t\t\t\tAD.error.log('App Builder : Error delete application data', { error: err });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function transitionApplicationList\n   *\n   * Trigger our List component to show\n   */\n\t\ttransitionApplicationList: function transitionApplicationList() {\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\t\tactions: _actions,\n\n\t\t_logic: _logic // exposed for Unit Testing\n\t};\n});\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n * AB Choose List\n *\n * Display a list of Applications for the user to select.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\tmenu: L('ab.application.menu', \"*Application Menu\"),\n\t\tconfirmDeleteTitle: L('ab.application.delete.title', \"*Delete application\"),\n\t\tconfirmDeleteMessage: L('ab.application.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\t}\n};\n\nvar idBase = 'ab_choose_list_menu';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\tvar ids = {\n\t\tmenu: App.unique(idBase + '_menu')\n\t};\n\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.menu,\n\t\thead: labels.component.menu,\n\t\twidth: 100,\n\t\tbody: {\n\t\t\tview: \"list\",\n\t\t\tborderless: true,\n\t\t\tdata: [{ command: labels.common.edit, icon: \"fa-pencil-square-o\" }, { command: labels.common.export, icon: \"fa-download\" }, { command: labels.common.delete, icon: \"fa-trash\" }],\n\t\t\tdatatype: \"json\",\n\n\t\t\ttemplate: \"<i class='fa #icon#' aria-hidden='true'></i> #command#\",\n\t\t\tautoheight: true,\n\t\t\tselect: false,\n\t\t\ton: {\n\t\t\t\t'onItemClick': function onItemClick(timestamp, e, trg) {\n\t\t\t\t\treturn _logic.onItemClick(timestamp, e, trg);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _data = {};\n\n\tvar _init = function _init() {};\n\n\tvar _logic = {\n\n\t\t/**\n   * @function onItemClick\n   * process which item in our popup was selected.\n   */\n\t\tonItemClick: function onItemClick(timestamp, e, trg) {\n\n\t\t\t// hide our popup before we trigger any other possible UI animation: (like .edit)\n\t\t\t// NOTE: if the UI is animating another component, and we do .hide()\n\t\t\t// while it is in progress, the UI will glitch and give the user whiplash.\n\t\t\t$$(ids.menu).hide();\n\n\t\t\tvar selectedApp = App.actions.getSelectedApplication();\n\n\t\t\tswitch (trg.textContent.trim()) {\n\t\t\t\tcase labels.common.edit:\n\t\t\t\t\tApp.actions.transitionApplicationForm(selectedApp);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase labels.common.delete:\n\t\t\t\t\tOP.Dialog.ConfirmDelete({\n\t\t\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t\t\t\ttext: labels.component.confirmDeleteMessage.replace('{0}', selectedApp.label),\n\t\t\t\t\t\tcallback: function callback(result) {\n\n\t\t\t\t\t\t\tif (!result) return;\n\n\t\t\t\t\t\t\tApp.actions.deleteApplication(selectedApp);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase labels.common.export:\n\t\t\t\t\t// Download the JSON file to disk\n\t\t\t\t\twindow.location.assign('/app_builder/appJSON/' + selectedApp.id + '?download=1');\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t};\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\n\t\t_logic: _logic // exposed for Unit Testing\n\t};\n});\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(24);\n\n__webpack_require__(23);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work\n *\n * Display the component for working with an ABApplication.\n *\n */\n\nvar labels = {\n\n\tapplication: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\tbackToApplication: L('ab.application.backToApplication', \"*Back to Applications page\"),\n\t\tsynchronize: L('ab.application.synchronize', \"*Synchronize\"),\n\t\tobjectTitle: L('ab.object.title', \"*Objects\"),\n\t\tinterfaceTitle: L('ab.interface.title', \"*Interface\")\n\t}\n};\n\nOP.Component.extend('ab_work', function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique('ab_work_component'),\n\t\ttoolBar: App.unique('ab_work_toolbar'),\n\t\tbuttonSync: App.unique('ab_work_button_sync'),\n\t\tlabelAppName: App.unique('ab_work_label_appname'),\n\t\ttabbar: App.unique('ab_work_tabbar'),\n\t\ttab_object: App.unique('ab_work_tab_object'),\n\t\ttab_interface: App.unique('ab_work_tab_interface'),\n\t\tworkspace: App.unique('ab_work_workspace')\n\t};\n\n\tvar AppObjectWorkspace = OP.Component['ab_work_object'](App);\n\tvar AppInterfaceWorkspace = OP.Component['ab_work_interface'](App);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\trows: [{\n\t\t\tview: \"toolbar\",\n\t\t\tid: ids.toolBar,\n\t\t\tautowidth: true,\n\t\t\tcols: [{\n\t\t\t\tview: \"button\",\n\t\t\t\tlabel: labels.application.backToApplication,\n\t\t\t\twidth: 200,\n\t\t\t\ttype: \"icon\",\n\t\t\t\ticon: \"arrow-left\",\n\t\t\t\talign: \"left\",\n\n\t\t\t\tclick: function click() {\n\t\t\t\t\tApp.actions.transitionApplicationChooser();\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tview: \"label\",\n\t\t\t\tid: ids.labelAppName,\n\t\t\t\talign: \"center\"\n\t\t\t}, {\n\t\t\t\tview: \"spacer\",\n\t\t\t\twidth: 200,\n\t\t\t\talrign: \"right\"\n\t\t\t}\n\t\t\t// {\n\t\t\t// \tid: ids.buttonSync,\n\t\t\t// \tview: \"button\",\n\t\t\t// \ttype: \"icon\",\n\t\t\t// \ticon: \"refresh\",\n\t\t\t// \tlabel: labels.application.synchronize,\n\t\t\t// \tautowidth: true,\n\t\t\t// \talign: \"right\",\n\t\t\t// \tclick: function () {\n\t\t\t// \t\t_logic.synchronize();\n\t\t\t// \t}\n\t\t\t// }\n\t\t\t]\n\t\t},\n\t\t//{ height: App.config.mediumSpacer },\n\t\t// {\n\t\t// \tview:\"segmented\",\n\t\t// \tid: ids.tabbar,\n\t\t// \tvalue: ids.tab_object,\n\t\t// \tmultiview: true,\n\t\t// \talign: \"center\",\n\t\t// \toptions:[\n\t\t// \t\t{\n\t\t// \t\t\tid: ids.tab_object,\n\t\t// \t\t\tvalue: labels.application.objectTitle,\n\t\t// \t\t\twidth: App.config.tabWidthMedium\n\t\t// \t\t},\n\t\t// \t\t{\n\t\t// \t\t\tid: ids.tab_interface,\n\t\t// \t\t\tvalue: labels.application.interfaceTitle,\n\t\t// \t\t\twidth: App.config.tabWidthMedium\n\t\t// \t\t}\n\t\t// \t],\n\t\t// \ton: {\n\t\t// \t\tonChange: function (idNew, idOld) {\n\t\t// \t\t\tif (idNew != idOld) {\n\t\t// \t\t\t\t_logic.tabSwitch(idNew, idOld);\n\t\t// \t\t\t}\n\t\t// \t\t}\n\t\t// \t}\n\t\t// },\n\t\t{ height: App.config.mediumSpacer }, {\n\t\t\tcols: [{\n\t\t\t\twidth: App.config.mediumSpacer\n\t\t\t}, {\n\t\t\t\trows: [{\n\t\t\t\t\tview: \"tabbar\",\n\t\t\t\t\tid: ids.tabbar,\n\t\t\t\t\tvalue: ids.tab_object,\n\t\t\t\t\tmultiview: true,\n\t\t\t\t\toptions: [{\n\t\t\t\t\t\tid: ids.tab_object,\n\t\t\t\t\t\tvalue: labels.application.objectTitle,\n\t\t\t\t\t\twidth: App.config.tabWidthMedium\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid: ids.tab_interface,\n\t\t\t\t\t\tvalue: labels.application.interfaceTitle,\n\t\t\t\t\t\twidth: App.config.tabWidthMedium\n\t\t\t\t\t}],\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: function onChange(idNew, idOld) {\n\t\t\t\t\t\t\tif (idNew != idOld) {\n\t\t\t\t\t\t\t\t_logic.tabSwitch(idNew, idOld);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tid: ids.workspace,\n\t\t\t\t\tcells: [AppObjectWorkspace.ui, AppInterfaceWorkspace.ui]\n\t\t\t\t}]\n\t\t\t}, {\n\t\t\t\twidth: App.config.mediumSpacer\n\t\t\t}]\n\t\t}, { height: App.config.mediumSpacer }]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {\n\n\t\tAppObjectWorkspace.init();\n\t\tAppInterfaceWorkspace.init();\n\n\t\t// initialize the Object Workspace to show first.\n\t\t_logic.tabSwitch(ids.tab_object);\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\tapplicationInit: function applicationInit(application) {\n\n\t\t\t// setup Application Label:\n\t\t\t$$(ids.labelAppName).define('label', application.label);\n\t\t\t$$(ids.labelAppName).refresh();\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\t\t/**\n   * @function synchronize\n   *\n   * Kick off the Synchronization process.\n   */\n\t\tsynchronize: function synchronize() {\n\n\t\t\t// self.element.trigger(self.options.synchronizeEvent, {\n\t\t\t// \tappID: AD.classes.AppBuilder.currApp.id\n\t\t\t// });\n\t\t\t//// Question: where should this logic go?  Here or in ab.js ?\n\n\t\t\tconsole.error('TODO: ab_work.logic.synchronize()!');\n\t\t},\n\n\t\t/**\n   * @function tabSwitch\n   *\n   * Every time a tab switch happens, decide which workspace to show.\n   *\n   * @param {string} idTab\tthe id of the tab that was changed to.\n   * @param {string} idOld\tthe previous tab id\n   */\n\t\ttabSwitch: function tabSwitch(idTab, idOld) {\n\n\t\t\tswitch (idTab) {\n\n\t\t\t\t// Object Workspace Tab\n\t\t\t\tcase ids.tab_object:\n\n\t\t\t\t\t// $$(ids.buttonSync).show();\n\t\t\t\t\tAppObjectWorkspace.show();\n\t\t\t\t\tbreak;\n\n\t\t\t\t// Interface Workspace Tab\n\t\t\t\tcase ids.tab_interface:\n\n\t\t\t\t\t// $$(ids.buttonSync).hide();\n\t\t\t\t\tAppInterfaceWorkspace.show();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t/**\n   * @function transitionWorkspace\n   *\n   * Switch the UI to view the App Workspace screen.\n   *\n   * @param {ABApplication} application\n   */\n\t\ttransitionWorkspace: function transitionWorkspace(application) {\n\n\t\t\t_logic.applicationInit(application);\n\t\t\tAppObjectWorkspace.applicationLoad(application);\n\t\t\tAppInterfaceWorkspace.applicationLoad(application);\n\n\t\t\t_logic.show();\n\t\t}\n\n\t};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_interface\n *\n * Display the Interface for designing Pages and Views in the App Builder.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\n\t}\n};\n\nvar idBase = 'ab_work_interface';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\t//scroll: true,\n\t\trows: [{\n\t\t\tview: \"label\",\n\t\t\tlabel: \"interface workspace\"\n\t\t}]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {}\n\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t// our internal business logic\n\t;var _logic = {\n\n\t\t/**\n   * @function applicationLoad\n   *\n   * Initialize the Object Workspace with the given ABApplication.\n   *\n   * @param {ABApplication} application \n   */\n\t\tapplicationLoad: function applicationLoad(application) {\n\t\t\tconsole.error('TODO: ab_work_interface.applicationLoad()');\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\tapplicationLoad: _logic.applicationLoad,\n\t\tshow: _logic.show,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(25);\n\n__webpack_require__(29);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object\n *\n * Display the Object Tab UI:\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\n\t}\n};\n\nvar idBase = 'ab_work_object';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\n\t};\n\n\tvar ObjectList = OP.Component['ab_work_object_list'](App);\n\tvar ObjectWorkspace = OP.Component['ab_work_object_workspace'](App);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\tautoheight: true,\n\t\tmargin: 20,\n\t\tcols: [ObjectList.ui, { view: \"resizer\" }, ObjectWorkspace.ui]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {\n\n\t\tObjectWorkspace.init();\n\t\tObjectList.init();\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\t/**\n   * @function applicationLoad\n   *\n   * Initialize the Object Workspace with the given ABApplication.\n   *\n   * @param {ABApplication} application \n   */\n\t\tapplicationLoad: function applicationLoad(application) {\n\t\t\tObjectList.applicationLoad(application);\n\t\t\tApp.actions.clearObjectWorkspace();\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\tapplicationLoad: _logic.applicationLoad,\n\t\tshow: _logic.show,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(26);\n\n__webpack_require__(28);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_list\n *\n * Manage the Object List\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\taddNew: L('ab.object.addNew', '*Add new object'),\n\n\t\tconfirmDeleteTitle: L('ab.object.delete.title', \"*Delete object\"),\n\t\tconfirmDeleteMessage: L('ab.object.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\n\t}\n};\n\nvar idBase = 'ab_work_object_list';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tlist: App.unique(idBase + '_editlist'),\n\t\tbuttonNew: App.unique(idBase + '_buttonNew')\n\n\t};\n\n\tvar ObjectEditPopup = OP.Component['ab_work_object_list_popupEditMenu'](App);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\trows: [{\n\t\t\tview: App.custom.editlist.view, // \"editlist\",\n\t\t\tid: ids.list,\n\t\t\twidth: 250,\n\n\t\t\theight: 800, // #Hack!\n\n\t\t\tselect: true,\n\t\t\teditaction: 'custom',\n\t\t\teditable: true,\n\t\t\teditor: \"text\",\n\t\t\teditValue: \"label\",\n\t\t\ttemplate: function template(obj, common) {\n\t\t\t\treturn _logic.templateListItem(obj, common);\n\t\t\t},\n\t\t\ttype: {\n\t\t\t\theight: 35,\n\t\t\t\ticonGear: \"<div class='ab-object-list-edit'><span class='webix_icon fa-cog'></span></div>\"\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonAfterRender: function onAfterRender() {\n\t\t\t\t\t_logic.onAfterRender();\n\t\t\t\t},\n\t\t\t\tonAfterSelect: function onAfterSelect(id) {\n\t\t\t\t\t_logic.selectObject(id);\n\t\t\t\t},\n\t\t\t\tonBeforeEditStop: function onBeforeEditStop(state, editor) {\n\t\t\t\t\t_logic.onBeforeEditStop(state, editor);\n\t\t\t\t},\n\t\t\t\tonAfterEditStop: function onAfterEditStop(state, editor, ignoreUpdate) {\n\t\t\t\t\t_logic.onAfterEditStop(state, editor, ignoreUpdate);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\t\"ab-object-list-edit\": function abObjectListEdit(e, id, trg) {\n\t\t\t\t\t_logic.clickEditMenu(e, id, trg);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tview: 'button',\n\t\t\tid: ids.buttonNew,\n\t\t\tvalue: labels.component.addNew,\n\t\t\tclick: function click() {\n\t\t\t\t_logic.clickNewObject();\n\t\t\t}\n\t\t}]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {\n\n\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t\t$$(ids.component).adjust();\n\t\t$$(ids.list).adjust();\n\n\t\tObjectEditPopup.init({\n\t\t\tonClick: _logic.callbackObjectEditorMenu\n\t\t});\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\t/**\n   * @function applicationLoad\n   *\n   * Initialize the Object List from the provided ABApplication\n   *\n   * If no ABApplication is provided, then show an empty form. (create operation)\n   *\n   * @param {ABApplication} application  \t[optional] The current ABApplication\n   *\t\t\t\t\t\t\t\t\t\twe are working with.\n   */\n\t\tapplicationLoad: function applicationLoad(application) {\n\t\t\t_logic.listBusy();\n\n\t\t\tCurrentApplication = application;\n\n\t\t\t// get a DataCollection of all our objects\n\t\t\tobjectList = new webix.DataCollection({\n\t\t\t\tdata: application.objects()\n\t\t\t});\n\n\t\t\t// clear our list and display our objects:\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.clearAll();\n\t\t\tList.data.unsync();\n\t\t\tList.data.sync(objectList);\n\t\t\tList.refresh();\n\t\t\tList.unselectAll();\n\n\t\t\t//\n\t\t\t_logic.syncNumberRefresh();\n\t\t\t_logic.listReady();\n\n\t\t\t// prepare our Popup with the current Application\n\t\t\tPopupNewObjectComponent.applicationLoad(application);\n\t\t},\n\n\t\tclickEditMenu: function clickEditMenu(e, id, trg) {\n\t\t\t// Show menu\n\t\t\tObjectEditPopup.show(trg);\n\n\t\t\treturn false;\n\t\t},\n\n\t\tlistBusy: function listBusy() {\n\t\t\t$$(ids.list).showProgress({ type: \"icon\" });\n\t\t},\n\n\t\tlistReady: function listReady() {\n\t\t\t$$(ids.list).hideProgress();\n\t\t},\n\n\t\tonAfterRender: function onAfterRender() {\n\t\t\tconsole.error('!! todo: onAfterRender() editing');\n\t\t\t// webix.once(function () {\n\t\t\t// \t$$(self.webixUiId.objectList).data.each(function (d) {\n\t\t\t// \t\t$($$(self.webixUiId.objectList).getItemNode(d.id)).find('.ab-object-unsync-number').html(99);\n\t\t\t// \t});\n\t\t\t// });\n\n\t\t\t// // Show gear icon\n\t\t\t// if (this.getSelectedId(true).length > 0) {\n\t\t\t// \t$(this.getItemNode(this.getSelectedId(false))).find('.ab-object-list-edit').show();\n\t\t\t// \tself.refreshUnsyncNumber();\n\t\t\t// }\n\t\t},\n\n\t\tonAfterEditStop: function onAfterEditStop(state, editor, ignoreUpdate) {\n\n\t\t\t_logic.showGear(editor.id);\n\n\t\t\tif (state.value != state.old) {\n\t\t\t\t_logic.listBusy();\n\n\t\t\t\tvar selectedObject = $$(ids.list).getSelectedItem(false);\n\t\t\t\tselectedObject.label = state.value;\n\n\t\t\t\t// Call server to rename\n\t\t\t\tselectedObject.save().catch(function () {\n\t\t\t\t\t_logic.listReady();\n\n\t\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\t\ttext: labels.common.renameErrorMessage.replace(\"{0}\", state.old)\n\t\t\t\t\t});\n\t\t\t\t}).then(function () {\n\t\t\t\t\t_logic.listReady();\n\n\t\t\t\t\t// TODO : should use message box\n\t\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\t\ttext: labels.common.renameSuccessMessage.replace(\"{0}\", state.value)\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tonBeforeEditStop: function onBeforeEditStop(state, editor) {\n\t\t\tconsole.error('!! todo: onBeforeEditStop() editing');\n\t\t\t// if (!inputValidator.validateFormat(state.value)) {\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\t\t\t// // Validation - check duplicate\n\t\t\t// if (!inputValidator.rules.preventDuplicateObjectName(state.value, editor.id) && state.value != state.old) {\n\t\t\t// \twebix.alert({\n\t\t\t// \t\ttitle: self.labels.object.invalidName,\n\t\t\t// \t\tok: self.labels.common.ok,\n\t\t\t// \t\ttext: self.labels.object.duplicateName.replace(\"{0}\", state.value)\n\t\t\t// \t});\n\n\t\t\t// \treturn false;\n\t\t\t// }\n\t\t},\n\n\t\t/**\n   * @function selectObject()\n   *\n   * Perform these actions when an Object is selected in the List.\n   */\n\t\tselectObject: function selectObject(id) {\n\n\t\t\tvar object = $$(ids.list).getItem(id);\n\t\t\tApp.actions.populateObjectWorkspace(object);\n\n\t\t\t//// TODO: do we need these?\n\n\t\t\t// // Refresh unsync number\n\t\t\t// self.refreshUnsyncNumber();\n\n\t\t\t_logic.showGear(id);\n\t\t},\n\n\t\tshowGear: function showGear(id) {\n\t\t\tvar gearIcon = $$(ids.list).getItemNode(id).querySelector('.ab-object-list-edit');\n\t\t\tgearIcon.style.visibility = \"visible\";\n\t\t\tgearIcon.style.display = \"block\";\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\t\tsyncNumberRefresh: function syncNumberRefresh() {\n\n\t\t\t//// NOTE: I think we are removing Sync Numbers with the refactor.\n\t\t\t//// probably wont need this.\n\t\t\tconsole.error('TODO: syncNumRefresh()');\n\t\t\t// var self = this,\n\t\t\t// \tobjects = [];\n\n\t\t\t// objects = $$(self.webixUiId.objectList).data.find(function (d) {\n\t\t\t// \treturn objectName ? d.name == objectName : true;\n\t\t\t// }, false, true);\n\n\t\t\t// objects.forEach(function (obj) {\n\t\t\t// \tvar objectModel = modelCreator.getModel(AD.classes.AppBuilder.currApp, obj.name),\n\t\t\t// \t\tunsyncNumber = (objectModel && objectModel.Cached ? objectModel.Cached.count() : 0),\n\t\t\t// \t\thtmlItem = $($$(self.webixUiId.objectList).getItemNode(obj.id));\n\n\t\t\t// \tif (unsyncNumber > 0) {\n\t\t\t// \t\thtmlItem.find('.ab-object-unsync-number').html(unsyncNumber);\n\t\t\t// \t\thtmlItem.find('.ab-object-unsync').show();\n\t\t\t// \t}\n\t\t\t// \telse {\n\t\t\t// \t\thtmlItem.find('.ab-object-unsync').hide();\n\t\t\t// \t}\n\t\t\t// });\n\t\t},\n\n\t\t/**\n   * @function templateListItem\n   *\n   * Defines the template for each row of our ObjectList.\n   *\n   * @param {obj} obj the current instance of ABObject for the row.\n   * @param {?} common the webix.common icon data structure\n   * @return {string}\n   */\n\t\ttemplateListItem: function templateListItem(obj, common) {\n\t\t\treturn _templateListItem.replace('#label#', obj.label || '??label??').replace('{common.iconGear}', common.iconGear);\n\t\t},\n\n\t\t/**\n   * @function callbackNewObject\n   *\n   * Once a New Object was created in the Popup, follow up with it here.\n   */\n\t\tcallbackNewObject: function callbackNewObject(err, object) {\n\n\t\t\tif (err) {\n\t\t\t\tOP.Error.log('Error creating New Object', { error: err });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tobjectList.add(object, 0);\n\t\t\t$$(ids.list).select(newObject.id);\n\t\t},\n\n\t\t/**\n   * @function clickNewObject\n   *\n   * Manages initiating the transition to the new Object Popup window\n   */\n\t\tclickNewObject: function clickNewObject() {\n\n\t\t\t// show the new popup\n\t\t\tPopupNewObject.show();\n\t\t},\n\n\t\trename: function rename() {\n\t\t\tvar objectId = $$(ids.list).getSelectedId(false);\n\t\t\t$$(ids.list).edit(objectId);\n\t\t},\n\n\t\tremove: function remove() {\n\n\t\t\tvar selectedObject = $$(ids.list).getSelectedItem(false);\n\n\t\t\t// verify they mean to do this:\n\t\t\tOP.Dialog.Confirm({\n\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t\tmessage: labels.component.confirmDeleteMessage.replace('{0}', selectedObject.label),\n\t\t\t\tcallback: function callback(isOK) {\n\n\t\t\t\t\tif (isOK) {\n\t\t\t\t\t\t_logic.listBusy();\n\n\t\t\t\t\t\tselectedObject.destroy().then(function () {\n\t\t\t\t\t\t\t_logic.listReady();\n\n\t\t\t\t\t\t\t$$(ids.list).remove(selectedObject.id);\n\t\t\t\t\t\t\tApp.actions.clearObjectWorkspace();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tcallbackObjectEditorMenu: function callbackObjectEditorMenu(action) {\n\t\t\tswitch (action) {\n\t\t\t\tcase 'rename':\n\t\t\t\t\t_logic.rename();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'delete':\n\t\t\t\t\t_logic.remove();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n  * _templateListItem\n  *\n  * The Object Row template definition.\n  */\n\tvar _templateListItem = [\"<div class='ab-object-list-item'>\", \"#label#\",\n\t// \"{common.unsyncNumber}\",\n\t\"{common.iconGear}\", \"</div>\"].join('');\n\n\t// Note: put these here so _logic is defined:\n\t// There is a Popup for adding a new Object:\n\tvar PopupNewObjectComponent = OP.Component['ab_work_object_list_newObject'](App);\n\tvar PopupNewObject = webix.ui(PopupNewObjectComponent.ui);\n\tPopupNewObjectComponent.init({\n\t\tonDone: _logic.callbackNewObject\n\t});\n\n\tvar CurrentApplication = null;\n\tvar objectList = null;\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t/**\n   * @function getSelectedObject\n   *\n   * returns which ABObject is currently selected.\n   * @return {ABObject}  or {null} if nothing selected.\n   */\n\t\tgetSelectedObject: function getSelectedObject() {\n\t\t\treturn $$(ids.list).getSelectedItem();\n\t\t}\n\n\t};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tapplicationLoad: _logic.applicationLoad,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(27);\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_list_newObject\n *\n * Display the form for creating a new Object.  This Popup will manage several \n * different sub components for gathering Object data for saving.\n *\n * The sub components will gather the data for the object and do basic form \n * validations on their interface.  \n *\n * when ready, the sub component will call onSave(values, cb)  to allow this \n * component to manage the actual final object validation, and saving to this\n * application.  On success, cb(null) will be called.  on error cb(err) will\n * be called.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t\taddNew: L('ab.object.addNew', '*Add new object')\n\n\t}\n};\n\nvar idBase = 'ab_work_object_list_newObject';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\t};\n\n\tvar BlankTab = OP.Component['ab_work_object_list_newObject_blank'](App);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"window\",\n\t\tid: ids.component,\n\t\twidth: 400,\n\t\tposition: \"center\",\n\t\tmodal: true,\n\t\thead: labels.component.addNew,\n\t\tselectNewObject: true,\n\t\tbody: {\n\t\t\tview: \"tabview\",\n\t\t\tcells: [BlankTab.ui]\n\t\t}\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\tvar ourCBs = {\n\t\t\tonCancel: _logic.hide,\n\t\t\tonSave: _logic.save\n\t\t};\n\n\t\tBlankTab.init(ourCBs);\n\t};\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\t/**\n   * @function applicationLoad()\n   *\n   * prepare ourself with the current application\n   */\n\t\tapplicationLoad: function applicationLoad(application) {\n\t\t\t// _logic.show();\n\t\t\tcurrentApplication = application; // remember our current Application.\n\t\t},\n\n\t\tcallbacks: {\n\t\t\tonDone: function onDone() {}\n\t\t},\n\n\t\t/**\n   * @function hide()\n   *\n   * remove the busy indicator from the form.\n   */\n\t\thide: function hide() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\t/**\n   * @function save\n   *\n   * take the data gathered by our child creation tabs, and \n   * add it to our current application.\n   *\n   * @param {obj} values  key=>value hash of model values.\n   * @param {fn}  cb \t\tnode style callback to indicate success/failure\n   */\n\t\tsave: function save(values, cb) {\n\n\t\t\t// must have an application set.\n\t\t\tif (!currentApplication) {\n\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\ttitle: 'Shoot!',\n\t\t\t\t\ttest: 'No Application Set!  Why?'\n\t\t\t\t});\n\t\t\t\tcb(true); // there was an error.\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// create a new (unsaved) instance of our object:\n\t\t\tvar newObject = currentApplication.objectNew(values);\n\n\t\t\t// have newObject validate it's values.\n\t\t\tvar validationErrors = newObject.isValid();\n\t\t\tif (validationErrors) {\n\t\t\t\tcb(validationErrors); // tell current Tab component the errors\n\t\t\t\treturn false; // stop here.\n\t\t\t}\n\n\t\t\t// if we get here, save the new Object\n\t\t\tnewObject.save().then(function (obj) {\n\n\t\t\t\t// successfully done:\n\t\t\t\tcb(); // tell current tab component save successful\n\t\t\t\t_logic.hide(); // hide our popup\n\t\t\t\t_logic.callbacks.onDone(null, obj); // tell parent component we're done\n\t\t\t}).catch(function (err) {\n\t\t\t\tcb(err); // tell current Tab component there was an error\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\tvar currentApplication = null;\n\t// var currentCallBack = null;\n\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tapplicationLoad: _logic.applicationLoad,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n * ab_work_object_list_newObject_blank\n *\n * Display the form for creating a new Application.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\tplaceholderName: L('ab.object.form.placeholderName', \"*Object name\")\n\t}\n};\n\nvar idBase = 'ab_work_object_list_newObject_blank';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tform: App.unique(idBase + '_blank'),\n\t\tbuttonSave: App.unique(idBase + '_save'),\n\t\tbuttonCancel: App.unique(idBase + '_cancel')\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tid: ids.component,\n\t\theader: labels.common.create,\n\t\tbody: {\n\t\t\tview: \"form\",\n\t\t\tid: ids.form,\n\t\t\twidth: 400,\n\t\t\trules: {\n\n\t\t\t\t// TODO:\n\t\t\t\t// name: inputValidator.rules.validateObjectName\n\t\t\t},\n\t\t\telements: [{ view: \"text\", label: labels.common.formName, name: \"name\", required: true, placeholder: labels.component.placeholderName, labelWidth: 70 }, {\n\t\t\t\tmargin: 5,\n\t\t\t\tcols: [{\n\t\t\t\t\tview: \"button\", id: ids.buttonCancel, value: labels.common.cancel,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.cancel();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"button\", id: ids.buttonSave, value: labels.common.add, type: \"form\",\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\treturn _logic.save();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\t\t}\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t\t// load up our callbacks.\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\t};\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\tcallbacks: {\n\t\t\tonCancel: function onCancel() {\n\t\t\t\tconsole.warn('NO onCancel()!');\n\t\t\t},\n\t\t\tonSave: function onSave(values, cb) {\n\t\t\t\tconsole.warn('NO onSave()!');\n\t\t\t}\n\t\t},\n\n\t\tcancel: function cancel() {\n\n\t\t\t_logic.formClear();\n\t\t\t_logic.callbacks.onCancel();\n\t\t},\n\n\t\tformClear: function formClear() {\n\t\t\t$$(ids.form).clearValidation();\n\t\t\t$$(ids.form).clear();\n\t\t},\n\n\t\t/**\n   * @function hide()\n   *\n   * hide this component.\n   */\n\t\thide: function hide() {\n\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\t/**\n   * @function save\n   *\n   * verify the current info is ok, package it, and return it to be \n   * added to the application.createModel() method.\n   */\n\t\tsave: function save() {\n\t\t\tvar saveButton = $$(ids.buttonSave);\n\t\t\tsaveButton.disable();\n\n\t\t\tvar Form = $$(ids.form);\n\n\t\t\tForm.clearValidation();\n\n\t\t\t// if it doesn't pass the basic form validation, return:\n\t\t\tif (!Form.validate()) {\n\t\t\t\tsaveButton.enable();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar values = Form.getValues();\n\n\t\t\t// now send data back to be added:\n\t\t\t_logic.callbacks.onSave(values, function (err) {\n\n\t\t\t\tif (err) {\n\t\t\t\t\tif (OP.Form.isValidationError(err, Form)) {}\n\t\t\t\t\t// do I do anything else here?\n\t\t\t\t\t// this auto updates the form\n\n\n\t\t\t\t\t// get notified if there was an error saving.\n\t\t\t\t\tsaveButton.enable();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// if there was no error, clear the form for the next\n\t\t\t\t// entry:\n\t\t\t\t_logic.formClear();\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {}\n\n\t/**\n  * @function populateApplicationForm()\n  *\n  * Initialze the Form with the values from the provided ABApplication.\n  *\n  * If no ABApplication is provided, then show an empty form. (create operation)\n  *\n  * @param {ABApplication} Application  \t[optional] The current ABApplication \n  *\t\t\t\t\t\t\t\t\t\twe are working with.\n  */\n\t// populateApplicationForm:function(Application){\n\n\t// \t_logic.formReset();\n\t// \tif (Application) {\n\t// \t\t// populate Form here:\n\t// \t\t_logic.formPopulate(Application);\n\t// \t}\n\t// \t_logic.permissionPopulate(Application);\n\t// \t_logic.show();\n\t// }\n\n\t// return the current instance of this component:\n\t;return {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n * Edit object popup \n *\n * .\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\tmenu: L('ab.application.menu', \"*Application Menu\"),\n\t\tconfirmDeleteTitle: L('ab.application.delete.title', \"*Delete application\"),\n\t\tconfirmDeleteMessage: L('ab.application.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\t}\n};\n\nvar idBase = 'ab_work_object_list_popupEditMenu';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\tvar ids = {\n\t\tmenu: App.unique(idBase + '_menu')\n\t};\n\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.menu,\n\t\thead: labels.component.menu,\n\t\twidth: 120,\n\t\tbody: {\n\t\t\tview: \"list\",\n\t\t\tborderless: true,\n\t\t\tdata: [{ command: labels.common.rename, icon: \"fa-pencil-square-o\" }, { command: labels.common.delete, icon: \"fa-trash\" }],\n\t\t\tdatatype: \"json\",\n\t\t\ttemplate: \"<i class='fa #icon#' aria-hidden='true'></i> #command#\",\n\t\t\tautoheight: true,\n\t\t\tselect: false,\n\t\t\ton: {\n\t\t\t\t'onItemClick': function onItemClick(timestamp, e, trg) {\n\t\t\t\t\treturn _logic.onItemClick(timestamp, e, trg);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _data = {};\n\n\tvar _init = function _init(options) {\n\t\twebix.ui(_ui);\n\n\t\t_logic.hide();\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\tif (options && options[c]) {\n\t\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _logic = {\n\n\t\tcallbacks: {\n\t\t\tonClick: function onClick(action) {}\n\t\t},\n\n\t\t/**\n   * @function onItemClick\n   * process which item in our popup was selected.\n   */\n\t\tonItemClick: function onItemClick(timestamp, e, trg) {\n\n\t\t\t// hide our popup before we trigger any other possible UI animation: (like .edit)\n\t\t\t// NOTE: if the UI is animating another component, and we do .hide()\n\t\t\t// while it is in progress, the UI will glitch and give the user whiplash.\n\n\t\t\tswitch (trg.textContent.trim()) {\n\t\t\t\tcase labels.common.rename:\n\t\t\t\t\tthis.callbacks.onClick('rename');\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.common['delete']:\n\t\t\t\t\tthis.callbacks.onClick('delete');\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.hide();\n\n\t\t\treturn false;\n\t\t},\n\n\t\tshow: function show(itemNode) {\n\t\t\tif ($$(ids.menu) && itemNode) $$(ids.menu).show(itemNode);\n\t\t},\n\n\t\thide: function hide() {\n\t\t\tif ($$(ids.menu)) $$(ids.menu).hide();\n\t\t}\n\n\t};\n\n\treturn {\n\t\tui: _ui,\n\t\tinit: _init,\n\n\t\tshow: _logic.show,\n\n\t\t_logic: _logic // exposed for Unit Testing\n\t};\n});\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\n__webpack_require__(30);\n\n__webpack_require__(31);\n\n__webpack_require__(33);\n\n__webpack_require__(34);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_workspace\n *\n * Manage the Object Workspace area.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\taddNewRow: L('ab.object.addNewRow', \"*Add new row\"),\n\n\t\tselectObject: L('ab.object.selectObject', \"*Select an object to work with.\"),\n\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\n\t\t// Toolbar:\n\t\thideFields: L('ab.object.toolbar.hideFields', \"*Hide fields\"),\n\t\tfilterFields: L('ab.object.toolbar.filterFields', \"*Add filters\"),\n\t\tsortFields: L('ab.object.toolbar.sortFields', \"*Apply sort\"),\n\t\tfrozenColumns: L('ab.object.toolbar.frozenColumns', \"*Frozen columns\"),\n\t\tdefineLabel: L('ab.object.toolbar.defineLabel', \"*Define label\"),\n\t\tpermission: L('ab.object.toolbar.permission', \"*Permission\"),\n\t\taddFields: L('ab.object.toolbar.addFields', \"*Add new column\"),\n\t\t\"export\": L('ab.object.toolbar.export', \"*Export\"),\n\n\t\tconfirmDeleteTitle: L('ab.object.delete.title', \"*Delete data field\"),\n\t\tconfirmDeleteMessage: L('ab.object.delete.message', \"*Do you want to delete <b>{0}</b>?\")\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tbuttonAddField: App.unique(idBase + '_buttonAddField'),\n\t\tbuttonExport: App.unique(idBase + '_buttonExport'),\n\t\tbuttonFieldsVisible: App.unique(idBase + '_buttonFieldsVisible'),\n\t\tbuttonFilter: App.unique(idBase + '_buttonFilter'),\n\t\tbuttonFrozen: App.unique(idBase + '_buttonFrozen'),\n\t\tbuttonLabel: App.unique(idBase + '_buttonLabel'),\n\t\tbuttonRowNew: App.unique(idBase + '_buttonRowNew'),\n\t\tbuttonSort: App.unique(idBase + '_buttonSort'),\n\n\t\tdatatable: App.unique(idBase + '_datatable'),\n\n\t\t// Toolbar:\n\t\ttoolbar: App.unique(idBase + '_toolbar'),\n\n\t\tnoSelection: App.unique(idBase + '_noSelection'),\n\t\tselectedObject: App.unique(idBase + '_selectedObject')\n\n\t};\n\n\t// The DataTable that displays our object:\n\tvar DataTable = OP.Component['ab_work_object_workspace_datatable'](App);\n\n\t// Various Popups on our page:\n\tvar PopupDefineLabelComponent = OP.Component['ab_work_object_workspace_popupDefineLabel'](App);\n\tvar PopupDefineLabel = webix.ui(PopupDefineLabelComponent.ui);\n\n\tvar PopupNewDataFieldComponent = OP.Component['ab_work_object_workspace_popupNewDataField'](App);\n\t// var PopupNewDataField = webix.ui(PopupNewDataFieldComponent.ui);\n\twebix.ui(PopupNewDataFieldComponent.ui);\n\n\tvar PopupHideFieldComponent = OP.Component['ab_work_object_workspace_popupHideFields'](App);\n\tvar PopupHideField = webix.ui(PopupHideFieldComponent.ui);\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: 'multiview',\n\t\tid: ids.component,\n\t\trows: [{\n\t\t\tid: ids.noSelection,\n\t\t\trows: [{\n\t\t\t\tview: 'label',\n\t\t\t\tlabel: labels.component.selectObject\n\t\t\t}]\n\t\t}, {\n\t\t\tid: ids.selectedObject,\n\t\t\trows: [{\n\t\t\t\tview: 'toolbar',\n\t\t\t\tid: ids.toolbar,\n\t\t\t\thidden: true,\n\t\t\t\tcss: \"ab-data-toolbar\",\n\t\t\t\tcols: [{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tid: ids.buttonFieldsVisible,\n\t\t\t\t\tlabel: labels.component.hideFields,\n\t\t\t\t\t// popup: 'self.webixUiId.visibleFieldsPopup',\n\t\t\t\t\ticon: \"eye-slash\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 120,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tbadge: 0,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarFieldsVisible(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonFilter,\n\t\t\t\t\tlabel: labels.component.filterFields,\n\t\t\t\t\ticon: \"filter\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 120,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tbadge: 0,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarFilter(this);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonSort,\n\t\t\t\t\tlabel: labels.component.sortFields,\n\t\t\t\t\ticon: \"sort\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 120,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tbadge: 0,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarSort(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonFrozen,\n\t\t\t\t\tlabel: labels.component.frozenColumns,\n\t\t\t\t\ticon: \"thumb-tack\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tbadge: 0,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarFrozen(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonLabel,\n\t\t\t\t\tlabel: labels.component.defineLabel,\n\t\t\t\t\ticon: \"crosshairs\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 130,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarDefineLabel(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tlabel: labels.component.permission,\n\t\t\t\t\ticon: \"lock\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarPermission(this.$view);\n\t\t\t\t\t}\n\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonAddField,\n\t\t\t\t\tlabel: labels.component.addFields,\n\t\t\t\t\ticon: \"plus\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t// width: 150,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarAddFields(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tid: ids.buttonExport,\n\t\t\t\t\tlabel: labels.component.export,\n\t\t\t\t\ticon: \"download\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.toolbarButtonExport(this.$view);\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}, DataTable.ui, {\n\t\t\t\tcols: [{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tid: ids.buttonRowNew,\n\t\t\t\t\tvalue: labels.component.addNewRow,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t// TODO:\n\t\t\t\t\t\t_logic.rowAdd();\n\t\t\t\t\t\t// self.addNewRow({});\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\n\t\t}]\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init() {\n\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\n\t\tDataTable.init({\n\t\t\tonEditorMenu: _logic.callbackHeaderEditorMenu\n\t\t});\n\n\t\tPopupDefineLabelComponent.init({\n\t\t\tonChange: _logic.callbackDefineLabel // be notified when there is a change in the label\n\t\t});\n\n\t\tPopupNewDataFieldComponent.init({\n\t\t\tonSave: _logic.callbackAddFields // be notified when a new Field is created & saved\n\t\t});\n\n\t\tPopupHideFieldComponent.init({\n\t\t\tonChange: _logic.callbackFieldsVisible // be notified when there is a change in the hidden fields\n\t\t});\n\n\t\t$$(ids.noSelection).show();\n\t};\n\n\tvar CurrentObject = null;\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\t/**\n   * @function callbackDefineLabel\n   *\n   * call back for when the Define Label popup is finished.\n   */\n\t\tcallbackAddFields: function callbackAddFields(field) {\n\t\t\tDataTable.refresh();\n\t\t},\n\n\t\t/**\n   * @function callbackDefineLabel\n   *\n   * call back for when the Define Label popup is finished.\n   */\n\t\tcallbackDefineLabel: function callbackDefineLabel() {},\n\n\t\t/**\n   * @function callbackFieldsVisible\n   *\n   * call back for when the hidden fields have changed.\n   */\n\t\tcallbackFieldsVisible: function callbackFieldsVisible() {\n\n\t\t\tvar hiddenFields = CurrentObject.workspaceHiddenFields;\n\t\t\t$$(ids.buttonFieldsVisible).define('badge', hiddenFields.length);\n\t\t\t$$(ids.buttonFieldsVisible).refresh();\n\n\t\t\tDataTable.refresh();\n\t\t},\n\n\t\t/**\n   * @function callbackFieldsVisible\n   *\n   * call back for when an editor menu action has been selected.\n   * @param {string} action [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n   */\n\t\tcallbackHeaderEditorMenu: function callbackHeaderEditorMenu(action, field, node) {\n\n\t\t\tswitch (action) {\n\n\t\t\t\tcase 'hide':\n\t\t\t\tcase 'filter':\n\t\t\t\tcase 'sort':\n\t\t\t\t\tconsole.error('!! TODO: callbackHeaderEditorMenu():  unimplemented action:' + action);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'edit':\n\t\t\t\t\t// pass control on to our Popup:\n\t\t\t\t\tPopupNewDataFieldComponent.show(node, field);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'delete':\n\n\t\t\t\t\t// verify they mean to do this:\n\t\t\t\t\tOP.Dialog.Confirm({\n\t\t\t\t\t\ttitle: labels.component.confirmDeleteTitle,\n\t\t\t\t\t\tmessage: labels.component.confirmDeleteMessage.replace('{0}', field.label),\n\t\t\t\t\t\tcallback: function callback(isOK) {\n\n\t\t\t\t\t\t\tif (isOK) {\n\n\t\t\t\t\t\t\t\tfield.destroy().then(function () {\n\t\t\t\t\t\t\t\t\tDataTable.refresh();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t},\n\n\t\t/**\n   * @function toolbarAddFields\n   *\n   * Show the popup to allow the user to create new fields for \n   * this object.\n   */\n\t\ttoolbarAddFields: function toolbarAddFields($view) {\n\t\t\tPopupNewDataFieldComponent.show($view);\n\t\t},\n\n\t\ttoolbarButtonExport: function toolbarButtonExport($view) {\n\t\t\tconsole.error('TODO: Button Export()');\n\t\t},\n\n\t\t/**\n   * @function toolbarDefineLabel\n   *\n   * Show the popup to allow the user to define the default label for \n   * this object.\n   */\n\t\ttoolbarDefineLabel: function toolbarDefineLabel($view) {\n\t\t\tPopupDefineLabel.show($view);\n\t\t},\n\n\t\t/**\n   * @function toolbarFieldsVisible\n   *\n   * Show the popup to allow the user to hide columns for this view.\n   */\n\t\ttoolbarFieldsVisible: function toolbarFieldsVisible($view) {\n\t\t\tPopupHideField.show($view);\n\t\t},\n\n\t\t/**\n   * @function toolbarFilter\n   *\n   * show the popup to add a filter to the datatable\n   */\n\t\ttoolbarFilter: function toolbarFilter($view) {\n\t\t\t// self.refreshPopupData();\n\t\t\t// $$(self.webixUiId.filterFieldsPopup).show($view);\n\t\t\tconsole.error('TODO: button filterFields()');\n\t\t},\n\n\t\t/**\n   * @function toolbarFrozen\n   *\n   * show the popup to freeze columns for the datatable\n   */\n\t\ttoolbarFrozen: function toolbarFrozen($view) {\n\t\t\tconsole.error('TODO: toolbarFrozen()');\n\t\t},\n\n\t\ttoolbarPermission: function toolbarPermission($view) {\n\t\t\tconsole.error('TODO: toolbarPermission()');\n\t\t},\n\n\t\t/**\n   * @function toolbarSort\n   *\n   * show the popup to sort the datatable\n   */\n\t\ttoolbarSort: function toolbarSort($view) {\n\t\t\t// self.refreshPopupData();\n\t\t\t// $$(self.webixUiId.sortFieldsPopup).show($view);\n\t\t\tconsole.error('TODO: toolbarSort()');\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\t/**\n   * @function clearObjectWorkspace()\n   *\n   * Clear the object workspace. \n   */\n\t\tclearObjectWorkspace: function clearObjectWorkspace() {\n\n\t\t\t// NOTE: to clear a visual glitch when multiple views are updating\n\t\t\t// at one time ... stop the animation on this one:\n\t\t\t$$(ids.noSelection).show(false, false);\n\t\t},\n\n\t\t/**\n   * @function populateObjectWorkspace()\n   *\n   * Initialize the Object Workspace with the provided ABObject.\n   *\n   * @param {ABObject} object  \tcurrent ABObject instance we are working with.\n   */\n\t\tpopulateObjectWorkspace: function populateObjectWorkspace(object) {\n\n\t\t\t$$(ids.toolbar).show();\n\t\t\t$$(ids.selectedObject).show();\n\n\t\t\tCurrentObject = object;\n\n\t\t\tApp.actions.populateObjectPopupAddDataField(object);\n\n\t\t\t// update hiddenFields \n\t\t\t_logic.callbackFieldsVisible();\n\n\t\t\tPopupDefineLabelComponent.objectLoad(object);\n\t\t\tPopupHideFieldComponent.objectLoad(object);\n\t\t\tDataTable.objectLoad(object);\n\t\t}\n\n\t};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(32);\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_workspace\n *\n * Manage the Object Workspace area.\n *\n */\n\nvar labels = {\n\n\tcomponent: {}\n};\n\nvar idBase = 'ab_work_object_workspace_datatable';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component')\n\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"datatable\",\n\t\tid: ids.component,\n\t\tresizeColumn: true,\n\t\tresizeRow: true,\n\t\tprerender: false,\n\t\teditable: true,\n\t\tfixedRowHeight: false,\n\t\teditaction: \"custom\",\n\t\tselect: \"cell\",\n\t\tdragColumn: true,\n\t\t//height:800,  // #hack!\n\t\ton: {\n\t\t\tonBeforeSelect: function onBeforeSelect(data, preserve) {\n\t\t\t\tconsole.error('!! ToDo: onBeforeSelect()');\n\t\t\t\t// var itemNode = this.getItemNode({ row: data.row, column: data.column });\n\n\t\t\t\t// var column = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == data.column; });\n\t\t\t\t// if (!column || column.length < 1) {\n\t\t\t\t// \tconsole.log('System could not found this column data');\n\t\t\t\t// \treturn false;\n\t\t\t\t// } else\n\t\t\t\t// \tcolumn = column[0];\n\n\t\t\t\t// return dataFieldsManager.customEdit(AD.classes.AppBuilder.currApp, AD.classes.AppBuilder.currApp.currObj, column, data.row, itemNode);\n\t\t\t},\n\t\t\tonAfterSelect: function onAfterSelect(data, prevent) {\n\t\t\t\tconsole.error('!! todo: onAfterSelect()');\n\t\t\t\t// var columnConfig = $$(self.webixUiId.objectDatatable).getColumnConfig(data.column),\n\t\t\t\t// \tfieldData = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == data.column; });\n\n\t\t\t\t// if (!fieldData || fieldData.length < 1) {\n\t\t\t\t// \tconsole.log('System could not found this column data');\n\t\t\t\t// \treturn false;\n\t\t\t\t// } else\n\t\t\t\t// \tfieldData = fieldData[0];\n\n\t\t\t\t// // Custom update data\n\t\t\t\t// if (dataFieldsManager.hasCustomEdit(columnConfig.fieldName, fieldData))\n\t\t\t\t// \treturn false;\n\n\t\t\t\t// // Normal update data\n\t\t\t\t// this.editCell(data.row, data.column);\n\t\t\t},\n\t\t\tonCheck: function onCheck(row, col, val) {\n\t\t\t\t// Update checkbox data\n\t\t\t\tconsole.error('!! ToDo: onCheck()');\n\t\t\t\t// var item = $$(self.webixUiId.objectDatatable).getItem(row);\n\n\t\t\t\t// self.updateRowData({ value: (val > 0 ? true : false) }, { row: row, column: col }, false)\n\t\t\t\t// \t.fail(function (err) {\n\t\t\t\t// \t\t// Rollback\n\t\t\t\t// \t\titem[col] = !val;\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).updateItem(row, item);\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).refresh(row);\n\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t})\n\t\t\t\t// \t.then(function (result) {\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t});\n\t\t\t},\n\t\t\tonBeforeEditStop: function onBeforeEditStop(state, editor) {\n\t\t\t\tconsole.error('!! ToDo: onCheck()');\n\t\t\t\t// var column = AD.classes.AppBuilder.currApp.currObj.columns.filter(function (col) { return col.name == editor.column; });\n\n\t\t\t\t// if (!column || column.length < 1) return true;\n\t\t\t\t// column = column[0];\n\n\t\t\t\t// var passValidate = dataFieldsManager.validate(column, state.value);\n\n\t\t\t\t// if (!passValidate) {\n\t\t\t\t// \t$$(self.webixUiId.objectDatatable).editCancel();\n\t\t\t\t// }\n\n\t\t\t\t// return passValidate;\n\t\t\t},\n\t\t\tonAfterEditStop: function onAfterEditStop(state, editor, ignoreUpdate) {\n\t\t\t\tconsole.error('!! ToDo: onAfterEditStop()');\n\t\t\t\t// var item = $$(self.webixUiId.objectDatatable).getItem(editor.row);\n\n\t\t\t\t// self.updateRowData(state, editor, ignoreUpdate)\n\t\t\t\t// \t.fail(function (err) { // Cached\n\t\t\t\t// \t\titem[editor.column] = state.old;\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).updateItem(editor.row, item);\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).refresh(editor.row);\n\n\t\t\t\t// \t\t// TODO : Message\n\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t})\n\t\t\t\t// \t.then(function (result) {\n\t\t\t\t// \t\tif (item) {\n\t\t\t\t// \t\t\titem[editor.column] = state.value;\n\n\t\t\t\t// \t\t\tif (result && result.constructor.name === 'Cached' && result.isUnsync())\n\t\t\t\t// \t\t\t\titem.isUnsync = true;\n\n\t\t\t\t// \t\t\t$$(self.webixUiId.objectDatatable).updateItem(editor.row, item);\n\t\t\t\t// \t\t}\n\n\t\t\t\t// \t\t// TODO : Message\n\n\t\t\t\t// \t\t$$(self.webixUiId.objectDatatable).hideProgress();\n\t\t\t\t// \t});\n\t\t\t},\n\t\t\tonColumnResize: function onColumnResize(id, newWidth, oldWidth, user_action) {\n\t\t\t\tconsole.error('!! ToDo: onColumnResize()');\n\t\t\t\t// var columnConfig = $$(self.webixUiId.objectDatatable).getColumnConfig(id);\n\t\t\t\t// var column = self.data.columns.filter(function (col) { return col.id == columnConfig.dataId; });\n\t\t\t\t// if (column && column[0])\n\t\t\t\t// \tcolumn[0].setWidth(newWidth);\n\n\t\t\t\t// // if (typeof columnConfig.template !== 'undefined' && columnConfig.template !== null) {\n\t\t\t\t// // \t// For calculate/refresh row height\n\t\t\t\t// // \t$$(self.webixUiId.objectDatatable).render();\n\t\t\t\t// // }\n\t\t\t},\n\t\t\tonBeforeColumnDrag: function onBeforeColumnDrag(sourceId, event) {\n\t\t\t\tconsole.error('!! ToDo: onBeforeColumnDrag()');\n\t\t\t\t// if (sourceId === 'appbuilder_trash') // Remove column\n\t\t\t\t// \treturn false;\n\t\t\t\t// else\n\t\t\t\t// \treturn true;\n\t\t\t},\n\t\t\tonBeforeColumnDrop: function onBeforeColumnDrop(sourceId, targetId, event) {\n\t\t\t\tconsole.error('!! ToDo: onBeforeColumnDrag()');\n\t\t\t\t// if (targetId === 'appbuilder_trash') // Remove column\n\t\t\t\t// \treturn false;\n\n\t\t\t\t// if ($$(self.webixUiId.visibleButton).config.badge > 0) {\n\t\t\t\t// \twebix.alert({\n\t\t\t\t// \t\ttitle: self.labels.object.couldNotReorderField,\n\t\t\t\t// \t\tok: self.labels.common.ok,\n\t\t\t\t// \t\ttext: self.labels.object.couldNotReorderFieldDetail\n\t\t\t\t// \t});\n\n\t\t\t\t// \treturn false;\n\t\t\t\t// }\n\t\t\t},\n\t\t\tonAfterColumnDrop: function onAfterColumnDrop(sourceId, targetId, event) {\n\t\t\t\tconsole.error('!! ToDo: onAfterColumnDrop()');\n\t\t\t\t// self.reorderColumns();\n\t\t\t},\n\t\t\tonAfterColumnShow: function onAfterColumnShow(id) {\n\t\t\t\tconsole.error('!! ToDo: onAfterColumnShow()');\n\t\t\t\t// $$(self.webixUiId.visibleFieldsPopup).showField(id);\n\t\t\t},\n\t\t\tonAfterColumnHide: function onAfterColumnHide(id) {\n\t\t\t\tconsole.error('!! ToDo: onAfterColumnHide()');\n\t\t\t\t// $$(self.webixUiId.visibleFieldsPopup).hideField(id);\n\t\t\t},\n\n\t\t\tonHeaderClick: function onHeaderClick(id, e, node) {\n\t\t\t\t_logic.onHeaderClick(id, e, node);\n\t\t\t}\n\t\t}\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\t// webix.extend($$(ids.form), webix.ProgressBar);\n\t};\n\n\tvar CurrentObject = null; // current ABObject being displayed\n\tvar EditField = null; // which field (column header) is popup editor for\n\tvar EditNode = null; // which html node (column header) is popup editor for\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\tcallbacks: {\n\n\t\t\t/**\n    * @function onEditorMenu\n    * report back which menu action was clicked.\n    * We get the info from our popupHeaderEditor component, but all the \n    * logic to respond to those options are in our parent. So we pass it \n    * on ...\n    * \n    * @param {string} action [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n    * @param {ABField} field  the field to which the action is to be applied\n    * @param {dom} node  the optional html node for this header item.\n    */\n\t\t\tonEditorMenu: function onEditorMenu(action, field) {}\n\t\t},\n\n\t\t/**\n   * @function callbackHeaderEdit\n   *\n   * call back for when an item in the Header Edit Menu has been selected.\n   * @param {string} action the action requested for this field:\n   */\n\t\tcallbackHeaderEdit: function callbackHeaderEdit(action) {\n\n\t\t\tPopupHeaderEdit.hide();\n\t\t\t_logic.callbacks.onEditorMenu(action, EditField, EditNode);\n\t\t},\n\n\t\t/**\n   * @function onHeaderClick\n   * \n   * process the user clicking on the header for one of our columns.\n   */\n\t\tonHeaderClick: function onHeaderClick(id, e, node) {\n\n\t\t\t// Ignore system columns\n\t\t\tif (id.column == 'appbuilder_trash') return false;\n\n\t\t\t// save our EditNode & EditField:\n\t\t\tEditNode = node;\n\n\t\t\tEditField = CurrentObject.fields(function (f) {\n\t\t\t\treturn f.id == id.column;\n\t\t\t})[0];\n\t\t\tif (EditField) {\n\n\t\t\t\t// show the popup\n\t\t\t\tPopupHeaderEdit.show(node);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\tobjectLoad: function objectLoad(object) {\n\n\t\t\tCurrentObject = object;\n\n\t\t\tPopupHeaderEditComponent.objectLoad(object);\n\n\t\t\t_logic.refresh();\n\t\t},\n\n\t\t// rebuild the data table view:\n\t\trefresh: function refresh() {\n\n\t\t\t// wait until we have an Object defined:\n\t\t\tif (CurrentObject) {\n\n\t\t\t\tvar DataTable = $$(ids.component);\n\t\t\t\tDataTable.clearAll();\n\n\t\t\t\t// update DataTable structure:\n\t\t\t\tvar columnHeaders = CurrentObject.columnHeaders(true);\n\t\t\t\tDataTable.refreshColumns(columnHeaders);\n\n\t\t\t\t// update DataTable Content\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   */\n\t\tshow: function show() {\n\n\t\t\t$$(ids.component).show();\n\t\t}\n\n\t};\n\n\t//// NOTE: declare these after _logic  for the callbacks:\n\n\tvar PopupHeaderEditComponent = OP.Component['ab_work_object_workspace_popupHeaderEditMenu'](App);\n\tvar PopupHeaderEdit = webix.ui(PopupHeaderEditComponent.ui);\n\tPopupHeaderEditComponent.init({\n\t\tonClick: _logic.callbackHeaderEdit // be notified when there is a change in the hidden fields\n\t});\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\t\t// interface methods for parent component:\n\t\tobjectLoad: _logic.objectLoad,\n\t\trefresh: _logic.refresh,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n * ab_work_object_workspace_popupDefineLabel\n *\n * Manage the Add New Data Field popup.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tlabelFormat: L('ab.define_label.labelFormat', \"*Label format\"),\n\t\tselectFieldToGenerate: L('ab.define_label.selectFieldToGenerate', \"*Select field item to generate format.\"),\n\t\tlabelFields: L('ab.define_label.labelFields', \"*Fields\")\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace_popupDefineLabel';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t\tformat: App.unique(idBase + '_format'),\n\t\tlist: App.unique(idBase + '_list'),\n\n\t\tbuttonSave: App.unique(idBase + '_buttonSave')\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.component,\n\t\tmodal: true,\n\t\tautoheight: true,\n\t\t// maxHeight: 420,\n\n\t\twidth: 500,\n\t\tbody: {\n\t\t\trows: [{\n\t\t\t\tview: \"label\",\n\t\t\t\tlabel: \"<b>{0}</b>\".replace(\"{0}\", labels.component.labelFormat)\n\t\t\t}, {\n\t\t\t\tview: \"textarea\",\n\t\t\t\tid: ids.format,\n\t\t\t\theight: 100\n\t\t\t}, {\n\t\t\t\tview: \"label\",\n\t\t\t\tlabel: labels.component.selectFieldToGenerate\n\t\t\t}, {\n\t\t\t\tview: \"label\",\n\t\t\t\tlabel: \"<b>{0}</b>\".replace(\"{0}\", labels.component.labelFields)\n\t\t\t}, {\n\t\t\t\tview: 'list',\n\t\t\t\tid: ids.list,\n\t\t\t\twidth: 500,\n\t\t\t\tmaxHeight: 180,\n\t\t\t\tselect: false,\n\t\t\t\ttemplate: '#label#',\n\t\t\t\ton: {\n\t\t\t\t\tonItemClick: function onItemClick(id, e, node) {\n\t\t\t\t\t\t_logic.onItemClick(id, e, node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\theight: 10\n\t\t\t}, {\n\t\t\t\tcols: [{\n\t\t\t\t\tview: \"button\", value: labels.common.cancel, width: 100,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.buttonCancel();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"button\", id: ids.buttonSave, label: labels.common.save, type: \"form\", width: 120,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.buttonSave();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\ton: {\n\t\t\tonShow: function onShow() {\n\t\t\t\t_logic.onShow();\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _currentObject = null;\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\twebix.extend($$(ids.list), webix.ProgressBar);\n\t};\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\tbuttonCancel: function buttonCancel() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\tbuttonSave: function buttonSave() {\n\n\t\t\t// disable our save button\n\t\t\tvar ButtonSave = $$(ids.buttonSave);\n\t\t\tButtonSave.disable();\n\n\t\t\t// get our current labelFormt\n\t\t\tvar labelFormat = $$(ids.format).getValue();\n\n\t\t\t// start our spinner\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.showProgress({ type: 'icon' });\n\n\t\t\t// convert from our User Friendly {Label} format to our \n\t\t\t// object friendly {Name} format\n\t\t\tList.data.each(function (d) {\n\t\t\t\tlabelFormat = labelFormat.replace(new RegExp('{' + d.label + '}', 'g'), '{' + d.id + '}');\n\t\t\t});\n\n\t\t\t// save the value\n\t\t\t_currentObject.labelFormat = labelFormat;\n\t\t\t_currentObject.save().then(function () {\n\n\t\t\t\t// all good, so\n\t\t\t\tList.hideProgress(); // hide the spinner\n\t\t\t\tButtonSave.enable(); // enable the save button\n\t\t\t\t_logic.hide(); // hide the popup\n\n\t\t\t\t// alert our parent component we are done with our changes:\n\t\t\t\t_logic.callbacks.onSave();\n\t\t\t}).catch(function (err) {\n\t\t\t\tList.hideProgress(); // hide the spinner\n\t\t\t\tButtonSave.enable(); // enable the save button\n\n\t\t\t\t// display some error to the user:\n\t\t\t\tOP.Error.log('Error trying to save our Object', { error: err });\n\t\t\t});\n\t\t},\n\n\t\tcallbacks: {\n\t\t\tonCancel: function onCancel() {\n\t\t\t\tconsole.warn('NO onCancel()!');\n\t\t\t},\n\t\t\tonSave: function onSave(field) {\n\t\t\t\tconsole.warn('NO onSave()!');\n\t\t\t}\n\t\t},\n\n\t\thide: function hide() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\tobjectLoad: function objectLoad(object) {\n\t\t\t_currentObject = object;\n\n\t\t\t// clear our list\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.clearAll();\n\n\t\t\t// refresh list with new set of fields\n\t\t\tvar allFields = _currentObject.fields();\n\t\t\tvar listFields = [];\n\t\t\tallFields.forEach(function (f) {\n\t\t\t\tlistFields.push({\n\t\t\t\t\tid: f.name,\n\t\t\t\t\tlabel: f.label\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tList.parse(allFields);\n\t\t},\n\n\t\tonItemClick: function onItemClick(id, e, node) {\n\n\t\t\tvar selectedItem = $$(ids.list).getItem(id);\n\n\t\t\tvar labelFormat = $$(ids.format).getValue();\n\t\t\tlabelFormat += '{{0}}'.replace('{0}', selectedItem.label);\n\n\t\t\t$$(ids.format).setValue(labelFormat);\n\t\t},\n\n\t\tonShow: function onShow() {\n\n\t\t\tvar labelFormat = _currentObject.labelFormat;\n\n\t\t\tvar Format = $$(ids.format);\n\t\t\tvar List = $$(ids.list);\n\n\t\t\tFormat.setValue('');\n\n\t\t\tFormat.enable();\n\t\t\tList.enable();\n\t\t\t$$(ids.buttonSave).enable();\n\n\t\t\t// our labelFormat should be in a computer friendly {name} format\n\t\t\t// here we want to convert it to a user friendly {label} format\n\t\t\t// to use in our popup:\n\t\t\tif (labelFormat) {\n\t\t\t\tif (List.data && List.data.count() > 0) {\n\t\t\t\t\tList.data.each(function (d) {\n\t\t\t\t\t\tlabelFormat = labelFormat.replace('{' + d.id + '}', '{' + d.label + '}');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// no label format:\n\t\t\t\t// Default to first field\n\t\t\t\tif (List.data && List.data.count() > 0) {\n\t\t\t\t\tvar field = List.getItem(List.getFirstId());\n\t\t\t\t\tlabelFormat = '{' + field.label + '}';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tFormat.setValue(labelFormat || '');\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   * @param {obj} $view  the webix.$view to hover the popup around.\n   */\n\t\tshow: function show($view) {\n\n\t\t\t$$(ids.component).show($view);\n\t\t}\n\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t// interface methods for parent component:\n\t\tobjectLoad: _logic.objectLoad,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n * ab_work_object_workspace_popupHeaderEditMenu\n *\n * Manage the Add New Data Field popup.\n *\n */\n\n// import ABApplication from \"../classes/ABApplication\"\n// import ABFieldManager from \"../classes/ABFieldManager\"\n\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\n\t\thideField: L('ab.object.hideField', \"*Hide field\"),\n\t\tfilterField: L('ab.object.filterField', \"*Filter field\"),\n\t\tsortField: L('ab.object.sortField', \"*Sort field\"),\n\t\teditField: L('ab.object.editField', \"*Edit field\"),\n\t\tdeleteField: L('ab.object.deleteField', \"*Delete field\")\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace_popupHeaderEditMenu';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\n\t\tlist: App.unique(idBase + '_list')\n\t};\n\n\t// the list of options shown in the popup menu:\n\tvar menuItems = {\n\n\t\t// Normally all items are available\n\t\t'default': [{ command: labels.component.hideField, icon: \"fa-columns\" }, { command: labels.component.filterField, icon: \"fa-filter\" }, { command: labels.component.sortField, icon: \"fa-sort\" }, { command: labels.component.editField, icon: \"fa-pencil-square-o\" }, { command: labels.component.deleteField, icon: \"fa-trash\" }],\n\t\t// But for imported objects, edit & delete are disabled\n\t\t'imported': [{ command: labels.component.hideField, icon: \"fa-columns\" }, { command: labels.component.filterField, icon: \"fa-filter\" }, { command: labels.component.sortField, icon: \"fa-sort\" }]\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.component,\n\t\tmodal: false,\n\t\tautoheight: true,\n\n\t\twidth: 180,\n\t\tbody: {\n\t\t\tid: ids.list,\n\t\t\tview: 'list',\n\t\t\tdatatype: \"json\",\n\t\t\tautoheight: true,\n\t\t\tselect: false,\n\t\t\ttemplate: \"<i class='fa #icon#' aria-hidden='true'></i> #command#\",\n\t\t\tdata: menuItems['default'], // start with the default set:\n\t\t\ton: {\n\t\t\t\t'onItemClick': function onItemClick(timestamp, e, node) {\n\t\t\t\t\t_logic.onItemClick(timestamp, e, node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar CurrentObject = null;\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\t// $$(ids.editDefinitions).cells() // define the edit Definitions here.\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\tcallbacks: {\n\t\t\t/**\n    * @function onClick\n    * report back which menu action was clicked.\n    * possible actions: [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n    */\n\t\t\tonClick: function onClick(action) {}\n\t\t},\n\n\t\thide: function hide() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\t/**\n   * @function objectLoad\n   * Ready the Popup according to the current object\n   * @param {ABObject} object  the currently selected object.\n   */\n\t\tobjectLoad: function objectLoad(object) {\n\t\t\tCurrentObject = object;\n\n\t\t\t// TODO:\n\t\t\t// check if object is imported, if so, then switch the shown fields to the imported menu:\n\n\t\t\tvar listItems = menuItems['default'];\n\t\t\t// if (object.isImported) {\n\t\t\t// \tlistItems = menuItems['imported'];\n\t\t\t// }\n\t\t\tvar List = $$(ids.list);\n\t\t\tList.clearAll();\n\t\t\tList.parse(listItems);\n\t\t},\n\n\t\t/**\n   * @function onItemClick\n   * when an entry in our popup menu is selected, make sure our parent component is\n   * alerted to the action requested.\n   *\n   * possible return action values: [ 'hide', 'filter', 'sort', 'edit', 'delete' ]\n   *\n   */\n\t\tonItemClick: function onItemClick(timestamp, e, node) {\n\n\t\t\tvar action = null;\n\t\t\tvar menu = node.textContent.trim();\n\t\t\tswitch (menu) {\n\t\t\t\tcase labels.component.hideField:\n\t\t\t\t\taction = 'hide';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.filterField:\n\t\t\t\t\taction = 'filter';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.sortField:\n\t\t\t\t\taction = 'sort';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.editField:\n\t\t\t\t\taction = 'edit';\n\t\t\t\t\tbreak;\n\t\t\t\tcase labels.component.deleteField:\n\t\t\t\t\taction = 'delete';\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t_logic.callbacks.onClick(action);\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   * @param {obj} $view  the webix.$view to hover the popup around.\n   */\n\t\tshow: function show($view) {\n\n\t\t\t$$(ids.component).show($view);\n\t\t}\n\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {}\n\n\t// populateObjectPopupAddDataField: function(object) {\n\t// \t_currentObject = object;\n\t// }\n\n\t// return the current instance of this component:\n\t;return {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\thide: _logic.hide,\n\t\tobjectLoad: _logic.objectLoad,\n\t\tshow: _logic.show, // function($view, field_id) \n\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n/*\n * ab_work_object_workspace_popupHideFields\n *\n * Manage the Hide Fields popup.\n *\n */\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tshowAll: L('ab.visible_fields.showAll', \"*Show All\"),\n\t\thideAll: L('ab.visible_fields.hideAll', \"*Hide All\")\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace_popupHideFields';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t\tlist: App.unique(idBase + \"_list\")\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.component,\n\t\t// modal: true,\n\t\tautoheight: true,\n\t\tbody: {\n\t\t\trows: [{\n\t\t\t\tcols: [{\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tvalue: labels.component.showAll,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.clickShowAll();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: 'button',\n\t\t\t\t\tvalue: labels.component.hideAll,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.clickHideAll();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}, {\n\t\t\t\tview: 'list',\n\t\t\t\tid: ids.list,\n\t\t\t\tautoheight: true,\n\t\t\t\tselect: false,\n\t\t\t\ttemplate: '<span style=\"min-width: 18px; display: inline-block;\"><i class=\"fa fa-circle ab-visible-field-icon\"></i>&nbsp;</span> #label#',\n\t\t\t\ton: {\n\t\t\t\t\tonItemClick: function onItemClick(id, e, node) {\n\t\t\t\t\t\t_logic.listItemClick(id, e, node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]\n\t\t},\n\t\ton: {\n\t\t\tonShow: function onShow() {\n\t\t\t\t_logic.iconsReset();\n\t\t\t}\n\t\t}\n\t};\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\t};\n\n\tvar CurrentObject = null;\n\n\t// our internal business logic \n\tvar _logic = {\n\n\t\tcallbacks: {\n\n\t\t\t/**\n    * @function onChange\n    * called when we have made changes to the hidden field settings \n    * of our Current Object.\n    *\n    * this is meant to alert our parent component to respond to the \n    * change.\n    */\n\t\t\tonChange: function onChange() {}\n\t\t},\n\n\t\t/**\n   * @function clickHideAll\n   * the user clicked the [hide all] option.  So hide all our fields.\n   */\n\t\tclickHideAll: function clickHideAll() {\n\n\t\t\t// create an array of all our field.id's:\n\t\t\tvar allFields = CurrentObject.fields();\n\t\t\tvar newHidden = [];\n\t\t\tallFields.forEach(function (f) {\n\t\t\t\tnewHidden.push(f.id);\n\t\t\t});\n\n\t\t\t// store that\n\t\t\tCurrentObject.workspaceHiddenFields = newHidden;\n\t\t\tCurrentObject.save().then(function () {\n\t\t\t\t_logic.iconsReset();\n\t\t\t\t_logic.callbacks.onChange();\n\t\t\t}).catch(function (err) {\n\t\t\t\tOP.Error.log('Error trying to save workspaceHiddenFields', { error: err, fields: newHidden });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function clickShowAll\n   * the user clicked the [show all] option.  So show all our fields.\n   */\n\t\tclickShowAll: function clickShowAll() {\n\n\t\t\t// store an empty array of hidden fields\n\t\t\tCurrentObject.workspaceHiddenFields = [];\n\t\t\tCurrentObject.save().then(function () {\n\t\t\t\t_logic.iconsReset();\n\t\t\t\t_logic.callbacks.onChange();\n\t\t\t}).catch(function (err) {\n\t\t\t\tOP.Error.log('Error trying to save workspaceHiddenFields', { error: err, fields: newHidden });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function listItemClick\n   * update the clicked field setting.\n   */\n\t\tlistItemClick: function listItemClick(id, e, node) {\n\t\t\tvar newFields = [];\n\t\t\tvar isHidden = CurrentObject.workspaceHiddenFields.filter(function (fID) {\n\t\t\t\treturn fID == id;\n\t\t\t}).length > 0;\n\t\t\tif (isHidden) {\n\t\t\t\t// unhide this field\n\n\t\t\t\t// get remaining fields \n\t\t\t\tnewFields = CurrentObject.workspaceHiddenFields.filter(function (fID) {\n\t\t\t\t\treturn fID != id;\n\t\t\t\t});\n\n\t\t\t\t// find the icon and display it:\n\t\t\t\t_logic.iconShow(node);\n\t\t\t} else {\n\t\t\t\tnewFields = CurrentObject.workspaceHiddenFields;\n\t\t\t\tnewFields.push(id);\n\n\t\t\t\t_logic.iconHide(node);\n\t\t\t}\n\n\t\t\t// update our Object with current hidden fields\n\t\t\tCurrentObject.workspaceHiddenFields = newFields;\n\t\t\tCurrentObject.save().then(function () {\n\t\t\t\t_logic.callbacks.onChange();\n\t\t\t}).catch(function (err) {\n\t\t\t\tOP.Error.log('Error trying to save workspaceHiddenFields', { error: err, fields: newFields });\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @function iconHide\n   * Hide the icon for the given node\n   * @param {DOM} node  the html dom node of the element that contains our icon\n   */\n\t\ticonHide: function iconHide(node) {\n\t\t\tif (node) {\n\t\t\t\tnode.querySelector('.ab-visible-field-icon').style.visibility = \"hidden\";\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function iconShow\n   * Show the icon for the given node\n   * @param {DOM} node  the html dom node of the element that contains our icon\n   */\n\t\ticonShow: function iconShow(node) {\n\t\t\tif (node) {\n\t\t\t\tnode.querySelector('.ab-visible-field-icon').style.visibility = \"visible\";\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function iconsReset\n   * Reset the icon displays according to the current values in our Object\n   */\n\t\ticonsReset: function iconsReset() {\n\n\t\t\tvar List = $$(ids.list);\n\n\t\t\t// for each item in the List\n\t\t\tvar id = List.getFirstId();\n\t\t\twhile (id) {\n\n\t\t\t\t// find it's HTML Node\n\t\t\t\tvar node = List.getItemNode(id);\n\n\t\t\t\t// if this item is not hidden, show it.\n\t\t\t\tif (CurrentObject.workspaceHiddenFields.indexOf(id) == -1) {\n\t\t\t\t\t_logic.iconShow(node);\n\t\t\t\t} else {\n\t\t\t\t\t// else hide it\n\t\t\t\t\t_logic.iconHide(node);\n\t\t\t\t}\n\n\t\t\t\t// next item\n\t\t\t\tid = List.getNextId(id);\n\t\t\t}\n\t\t},\n\n\t\t/**\n   * @function objectLoad\n   * Ready the Popup according to the current object\n   * @param {ABObject} object  the currently selected object.\n   */\n\t\tobjectLoad: function objectLoad(object) {\n\t\t\tCurrentObject = object;\n\n\t\t\t// refresh list\n\t\t\tvar allFields = CurrentObject.fields();\n\t\t\tvar listFields = [];\n\t\t\tallFields.forEach(function (f) {\n\t\t\t\tlistFields.push({\n\t\t\t\t\tid: f.id,\n\t\t\t\t\tlabel: f.label\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$$(ids.list).parse(allFields);\n\t\t}\n\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component  \n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\t// interface methods for parent component:\n\t\tobjectLoad: _logic.objectLoad,\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ABApplication = __webpack_require__(0);\n\nvar _ABApplication2 = _interopRequireDefault(_ABApplication);\n\nvar _ABFieldManager = __webpack_require__(3);\n\nvar _ABFieldManager2 = _interopRequireDefault(_ABFieldManager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * ab_work_object_workspace_popupNewDataField\n *\n * Manage the Add New Data Field popup.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\n\t\tchooseType: L('ab.add_fields.chooseType', \"*Choose field type...\"),\n\t\tlabel: L('ab.add_fields.label', \"*Label\"),\n\t\taddNewField: L('ab.add_fields.addNewField', \"*Add Column\")\n\n\t}\n};\n\nvar idBase = 'ab_work_object_workspace_popupNewDataField';\nOP.Component.extend(idBase, function (App) {\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\n\tvar ids = {\n\t\tcomponent: App.unique(idBase + '_component'),\n\t\ttypes: App.unique(idBase + '_types'),\n\t\teditDefinitions: App.unique(idBase + '_editDefinitions'),\n\n\t\tbuttonSave: App.unique(idBase + '_buttonSave'),\n\t\tbuttonCancel: App.unique(idBase + '_buttonCancel')\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tview: \"popup\",\n\t\tid: ids.component,\n\t\tmodal: true,\n\t\tautoheight: true,\n\t\t// maxHeight: 420,\n\n\t\t// ready: function () {\n\t\t// \tconsole.error('ready() called!!!')\n\t\t// \t_logic.resetState();\n\t\t// },\n\n\t\tbody: {\n\t\t\tcss: 'ab-add-fields-popup',\n\t\t\tborderless: true,\n\t\t\trows: [{\n\t\t\t\tview: \"menu\",\n\t\t\t\tid: ids.types,\n\t\t\t\tdata: [{\n\t\t\t\t\tvalue: labels.component.chooseType,\n\t\t\t\t\tsubmenu: ['dataFieldsManager', '.getFieldMenuList()']\n\t\t\t\t}],\n\t\t\t\tclick: function click(id, ev, node) {\n\t\t\t\t\t_logic.typeClick();\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t},\n\t\t\t\ton: {\n\t\t\t\t\tonMenuItemClick: function onMenuItemClick(id, ev, node) {\n\t\t\t\t\t\t_logic.onMenuItemClick(id);\n\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tview: 'multiview',\n\t\t\t\tid: ids.editDefinitions,\n\t\t\t\t// NOTE: can't leave this an empty []. We redefine this value later.\n\t\t\t\tcells: [{ id: 'del_me', view: 'label', label: 'edit definition here' }]\n\t\t\t}, { height: 10 }, {\n\t\t\t\tcols: [{ fillspace: true }, {\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tvalue: labels.common.cancel,\n\t\t\t\t\tcss: \"ab-cancel-button\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.buttonCancel();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tid: ids.buttonSave,\n\t\t\t\t\tlabel: labels.component.addNewField,\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\ttype: \"form\",\n\t\t\t\t\tclick: function click() {\n\t\t\t\t\t\t_logic.buttonSave();\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\ton: {\n\t\t\tonBeforeShow: function onBeforeShow() {\n\t\t\t\t_logic.resetState();\n\t\t\t},\n\t\t\tonShow: function onShow() {\n\t\t\t\t_logic.onShow();\n\t\t\t},\n\t\t\tonHide: function onHide() {\n\t\t\t\t_logic.resetState();\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _objectHash = {}; // 'name' => ABFieldXXX object\n\tvar _componentHash = {}; // 'name' => ABFieldXXX ui component\n\tvar _componentsByType = {}; // 'type' => ABFieldXXX ui component\n\tvar _currentEditor = null;\n\tvar _currentObject = null;\n\n\tvar defaultEditorComponent = null; // the default editor.\n\n\tvar _editField = null; // field instance being edited\n\n\t// Our init() function for setting up our UI\n\tvar _init = function _init(options) {\n\n\t\t// register our callbacks:\n\t\tfor (var c in _logic.callbacks) {\n\t\t\t_logic.callbacks[c] = options[c] || _logic.callbacks[c];\n\t\t}\n\n\t\tvar Fields = _ABFieldManager2.default.allFields();\n\n\t\t//// we need to load a submenu entry and an editor definition for each\n\t\t//// of our Fields\n\n\n\t\tvar submenus = []; // Create the submenus for our Data Fields:\n\t\tvar newEditorList = {\n\t\t\tview: 'multiview',\n\t\t\tid: ids.editDefinitions,\n\t\t\trows: []\n\t\t};\n\n\t\tFields.forEach(function (F) {\n\n\t\t\tvar menuName = F.defaults().menuName;\n\t\t\tvar type = F.defaults().type;\n\n\t\t\t// add a submenu for the fields multilingual key\n\t\t\tsubmenus.push(menuName);\n\n\t\t\t// Add the Field's definition editor here:\n\t\t\tvar editorComponent = F.propertiesComponent(App);\n\t\t\tif (!defaultEditorComponent) {\n\t\t\t\tdefaultEditorComponent = editorComponent;\n\t\t\t}\n\t\t\tnewEditorList.rows.push(editorComponent.ui);\n\n\t\t\t_objectHash[menuName] = F;\n\t\t\t_componentHash[menuName] = editorComponent;\n\t\t\t_componentsByType[type] = editorComponent;\n\t\t});\n\n\t\t// the submenu button has a placeholder we need to remove and update\n\t\t// with one that has all our submenus in it.\n\t\tvar firstID = $$(ids.types).getFirstId();\n\t\t$$(ids.types).updateItem(firstID, {\n\t\t\tvalue: labels.component.chooseType,\n\t\t\tsubmenu: submenus\n\t\t});\n\n\t\t// now remove the 'del_me' definition editor placeholder.\n\t\twebix.ui(newEditorList, $$(ids.editDefinitions));\n\n\t\t// hide all the unused editors:\n\t\tfor (var c in _componentHash) {\n\t\t\t_componentHash[c].hide();\n\t\t}\n\n\t\tdefaultEditorComponent.show(); // show the default editor\n\t\t_currentEditor = defaultEditorComponent;\n\n\t\t// $$(ids.editDefinitions).show();\n\n\t\t// $$(ids.editDefinitions).cells() // define the edit Definitions here.\n\t};\n\n\t// our internal business logic\n\tvar _logic = {\n\n\t\tbuttonCancel: function buttonCancel() {\n\n\t\t\t_logic.resetState();\n\n\t\t\t// clear all editors:\n\t\t\tfor (var c in _componentHash) {\n\t\t\t\t_componentHash[c].clear();\n\t\t\t}\n\n\t\t\t// hide this popup.\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\tbuttonSave: function buttonSave() {\n\n\t\t\t$$(ids.buttonSave).disable();\n\n\t\t\tvar editor = _currentEditor;\n\t\t\tif (editor) {\n\n\t\t\t\t// the editor can define some basic form validations.\n\t\t\t\tif (editor.isValid()) {\n\n\t\t\t\t\tvar values = editor.values();\n\n\t\t\t\t\tvar field = null;\n\t\t\t\t\tvar oldData = null;\n\n\t\t\t\t\t// if this is an ADD operation, (_editField will be undefined)\n\t\t\t\t\tif (!_editField) {\n\n\t\t\t\t\t\t// get a new instance of a field:\n\t\t\t\t\t\tfield = _currentObject.fieldNew(values);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// use our _editField, backup our oldData\n\t\t\t\t\t\toldData = _editField.toObj();\n\t\t\t\t\t\t_editField.fromValues(values);\n\n\t\t\t\t\t\tfield = _editField;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar errors = field.isValid();\n\t\t\t\t\tif (errors) {\n\t\t\t\t\t\tOP.Form.isValidationError(errors, $$(editor.ui.id));\n\n\t\t\t\t\t\t// keep our old data\n\t\t\t\t\t\tif (oldData) {\n\t\t\t\t\t\t\tfield.fromValues(oldData);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfield.save().then(function () {\n\n\t\t\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t\t\t\t_logic.hide();\n\t\t\t\t\t\t\t_currentEditor.clear();\n\t\t\t\t\t\t\t_logic.callbacks.onSave(field);\n\t\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tOP.Dialog.Alert({\n\t\t\t\t\ttitle: '! Could not find the current editor.',\n\t\t\t\t\ttext: 'go tell a developer about this.'\n\t\t\t\t});\n\t\t\t\t$$(ids.buttonSave).enable();\n\t\t\t}\n\n\t\t\t// if (!inputValidator.validateFormat(fieldInfo.name)) {\n\t\t\t// \tself.enable();\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\t// // Validate duplicate field name\n\t\t\t// var existsColumn = $.grep(dataTable.config.columns, function (c) { return c.id == fieldInfo.name.replace(/ /g, '_'); });\n\t\t\t// if (existsColumn && existsColumn.length > 0 && !data.editFieldId) {\n\t\t\t// \twebix.alert({\n\t\t\t// \t\ttitle: labels.add_fields.duplicateFieldTitle,\n\t\t\t// \t\ttext: labels.add_fields.duplicateFieldDescription,\n\t\t\t// \t\tok: labels.common.ok\n\t\t\t// \t});\n\t\t\t// \tthis.enable();\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\t// if (fieldInfo.weight == null)\n\t\t\t// \tfieldInfo.weight = dataTable.config.columns.length;\n\n\t\t\t// // Call callback function\n\t\t\t// if (base.saveFieldCallback && base.fieldName) {\n\t\t\t// \tbase.saveFieldCallback(base.fieldName, fieldInfo)\n\t\t\t// \t\t.then(function () {\n\t\t\t// \t\t\tself.enable();\n\t\t\t// \t\t\tbase.resetState();\n\t\t\t// \t\t\tbase.hide();\n\t\t\t// \t\t});\n\t\t\t// }\n\n\t\t},\n\n\t\tcallbacks: {\n\t\t\tonCancel: function onCancel() {\n\t\t\t\tconsole.warn('NO onCancel()!');\n\t\t\t},\n\t\t\tonSave: function onSave(field) {\n\t\t\t\tconsole.warn('NO onSave()!');\n\t\t\t}\n\t\t},\n\n\t\thide: function hide() {\n\t\t\t$$(ids.component).hide();\n\t\t},\n\n\t\tmodeAdd: function modeAdd() {\n\n\t\t\t// show default editor:\n\t\t\tdefaultEditorComponent.show(false, false);\n\t\t\t_currentEditor = defaultEditorComponent;\n\n\t\t\t// show the ability to switch data types\n\t\t\t$$(ids.types).show();\n\n\t\t\t// change button text to 'add'\n\t\t\t$$(ids.buttonSave).define('label', labels.component.addNewField);\n\t\t\t$$(ids.buttonSave).refresh();\n\t\t},\n\n\t\tmodeEdit: function modeEdit(field) {\n\n\t\t\tif (_currentEditor) _currentEditor.hide();\n\n\t\t\t// switch to this field's editor:\n\t\t\t// hide the rest\n\t\t\tfor (var c in _componentsByType) {\n\t\t\t\tif (c == field.type) {\n\t\t\t\t\t_componentsByType[c].populate(field);\n\t\t\t\t\t_componentsByType[c].show(false, false);\n\t\t\t\t\t_currentEditor = _componentsByType[c];\n\t\t\t\t} else {\n\t\t\t\t\t_componentsByType[c].hide();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// hide the ability to switch data types\n\t\t\t$$(ids.types).hide();\n\n\t\t\t// change button text to 'save'\n\t\t\t$$(ids.buttonSave).define('label', labels.common.save);\n\t\t\t$$(ids.buttonSave).refresh();\n\t\t},\n\n\t\t/**\n   * @function onMenuItemClick\n   * swap the editor view to match the data field selected in the menu.\n   *\n   * @param {string} name  the menuName() of the submenu that was selected.\n   */\n\t\tonMenuItemClick: function onMenuItemClick(name) {\n\n\t\t\t// note, the submenu returns the Field.menuName() values.\n\t\t\t// we use that to lookup the Field here:\n\t\t\tvar editor = _componentHash[name];\n\t\t\tif (editor) {\n\t\t\t\teditor.show();\n\t\t\t\t_currentEditor = editor;\n\t\t\t} else {\n\n\t\t\t\t// most likely they clicked on the menu button itself.\n\t\t\t\t// do nothing.\n\n\t\t\t\t// OP.Error.log(\"App Builder:Workspace:Object:NewDataField: could not find editor for submenu item:\"+name, { name:name });\n\t\t\t}\n\t\t},\n\n\t\tonShow: function onShow() {\n\t\t\t// if (!AD.comm.isServerReady()) {\n\t\t\t// \tthis.getTopParentView().hide();\n\n\t\t\t// \twebix.alert({\n\t\t\t// \t\ttitle: labels.add_fields.cannotUpdateFields,\n\t\t\t// \t\ttext: labels.add_fields.waitRestructureObjects,\n\t\t\t// \t\tok: labels.common.ok\n\t\t\t// \t});\n\t\t\t// }\n\t\t\t// else { // Set default field type\n\t\t\t// \tthis.showFieldData('string');\n\t\t\t// }\n\t\t\tconsole.error('TODO: onShow();');\n\t\t},\n\n\t\tresetState: function resetState() {\n\n\t\t\t// add mode :  change button text to 'Add'\n\t\t\t// show the default editor\n\t\t\tconsole.error('TODO: resetState()');\n\t\t},\n\n\t\t/**\n   * @function show()\n   *\n   * Show this component.\n   * @param {obj} $view  the webix.$view to hover the popup around.\n   * @param {ABField} field the ABField to edit.  If not provided, then\n   *\t\t\t\t\t\t  this is an ADD operation.\n   */\n\t\tshow: function show($view, field) {\n\n\t\t\t_editField = field;\n\n\t\t\tif (_editField) {\n\n\t\t\t\t_logic.modeEdit(field);\n\t\t\t} else {\n\n\t\t\t\t_logic.modeAdd();\n\t\t\t}\n\n\t\t\t$$(ids.component).show($view);\n\t\t},\n\n\t\ttypeClick: function typeClick() {\n\t\t\t// NOTE: for functional testing we need a way to display the submenu\n\t\t\t// (functional tests don't do .hover very well)\n\t\t\t// so this routine is to enable .click() to show the submenu.\n\n\t\t\tvar subMenuId = $$(ids.types).config.data[0].submenu;\n\n\t\t\t// #HACK Sub-menu popup does not render on initial\n\t\t\t// Force it to render popup by use .getSubMenu()\n\t\t\tif (typeof subMenuId != 'string') {\n\t\t\t\t$$(ids.types).getSubMenu($$(ids.types).config.data[0].id);\n\t\t\t\tsubMenuId = $$(ids.types).config.data[0].submenu;\n\t\t\t}\n\n\t\t\tif ($$(subMenuId)) $$(subMenuId).show();\n\t\t}\n\t};\n\n\t// Expose any globally accessible Actions:\n\tvar _actions = {\n\n\t\tpopulateObjectPopupAddDataField: function populateObjectPopupAddDataField(object) {\n\t\t\t_currentObject = object;\n\t\t}\n\n\t};\n\n\t// return the current instance of this component:\n\treturn {\n\t\tui: _ui, // {obj} \tthe webix ui definition for this component\n\t\tinit: _init, // {fn} \tinit() to setup this component\n\t\tactions: _actions, // {ob}\t\thash of fn() to expose so other components can access.\n\n\n\t\tshow: _logic.show, // {fn} \tfn(node, ABField)\n\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n});\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//\n// REFACTORING:\n//\n// Our goal here is to create a Model object that will interact with Sails' blueprints and \n// return native Webix DataCollections.\n//\n// We also want to listen for updates on Sails Sockets and notify the DataCollections.\n//\n// Until we have the refactoring in place, we will reuse the AD.Model.extent() objects,\n// and convert the results to DataCollections.\n//\n\n\n// Namespacing conventions:\n// OP.Model.extend('[application].[Model]', {static}, {instance} );  --> Object\nOP.Model.extend('opstools.BuildApp.ABApplication', {\n\tuseSockets: true,\n\trestURL: '/app_builder/abapplication'\n}, {\n\t// instance Methods\n});\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n/*\n * custom_editlist\n *\n * Create a custom webix component.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t}\n};\n\nvar ComponentKey = 'ab_custom_editlist';\nOP.CustomComponent.extend(ComponentKey, function (App, componentKey) {\n\t// App \t{obj}\tour application instance object.\n\t// componentKey {string}\tthe destination key in App.custom[componentKey] for the instance of this component:\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique('custom_editlist_component')\n\n\t};\n\n\t// Our webix UI definition:\n\tvar _ui = {\n\t\tname: App.unique(\"custom_editlist\") // keep this unique for this App instance.\n\t};\n\n\t// our internal business logic \n\tvar _logic = {};\n\n\t// Tell Webix to create an INSTANCE of our custom component:\n\twebix.protoUI(_ui, webix.EditAbility, webix.ui.list);\n\n\t// current definition of our Component \n\tvar Component = {\n\t\tview: _ui.name, // {string} the webix.view value for this custom component\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n\n\t// Save our definition into App.custom.[key]\n\tApp.custom = App.custom || {};\n\tApp.custom[componentKey] = Component;\n\n\t// return the current definition of this component:\n\treturn Component;\n});\n\n// After importing this custom component, you get back the .key to use to \n// lookup the OP.Component[] to create an application instance of \nexports.default = { key: ComponentKey };\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n/*\n * custom_edittree\n *\n * Create a custom webix component.\n *\n */\n\nfunction L(key, altText) {\n\treturn AD.lang.label.getLabel(key) || altText;\n}\n\nvar labels = {\n\n\tcomponent: {\n\t\t// formHeader: L('ab.application.form.header', \"*Application Info\"),\n\t}\n};\n\nvar ComponentKey = 'ab_custom_edittree';\nOP.CustomComponent.extend(ComponentKey, function (App, componentKey) {\n\t// App \t{obj}\tour application instance object.\n\t// componentKey {string}\tthe destination key in App.custom[componentKey] for the instance of this component:\n\n\n\tlabels.common = App.labels;\n\n\t// internal list of Webix IDs to reference our UI components.\n\tvar ids = {\n\t\tcomponent: App.unique('custom_edittree_component')\n\n\t};\n\n\t// Our webix Prototype definition:\n\tvar _ui = {\n\t\tname: App.unique(\"custom_edittree\") // keep this unique for this App instance.\n\t};\n\n\t// our internal business logic \n\tvar _logic = {};\n\n\t// Tell Webix to create an INSTANCE of our custom component:\n\twebix.protoUI(_ui, webix.EditAbility, webix.ui.tree);\n\n\t// current definition of our Component \n\tvar Component = {\n\t\tview: _ui.name, // {string} the webix.view value for this custom component\n\n\t\t_logic: _logic // {obj} \tUnit Testing\n\t};\n\n\t// Save our definition into App.custom.[key]\n\tApp.custom = App.custom || {};\n\tApp.custom[componentKey] = Component;\n\n\t// return the current definition of this component:\n\treturn Component;\n});\n\n// After importing this custom component, you get back the .key to use to \n// lookup the OP.Component[] to create an application instance of \nexports.default = { key: ComponentKey };\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif (item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function (modules, mediaQuery) {\n\t\tif (typeof modules === \"string\") modules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif (typeof id === \"number\") alreadyImportedModules[id] = true;\n\t\t}\n\t\tfor (i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif (typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif (mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if (mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n\t// get current location\n\tvar location = typeof window !== \"undefined\" && window.location;\n\n\tif (!location) {\n\t\tthrow new Error(\"fixUrls requires window.location\");\n\t}\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t\treturn css;\n\t}\n\n\tvar baseUrl = location.protocol + \"//\" + location.host;\n\tvar currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n This regular expression is just a way to recursively match brackets within\n a string.\n \t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n    (  = Start a capturing group\n      (?:  = Start a non-capturing group\n          [^)(]  = Match anything that isn't a parentheses\n          |  = OR\n          \\(  = Match a start parentheses\n              (?:  = Start another non-capturing groups\n                  [^)(]+  = Match anything that isn't a parentheses\n                  |  = OR\n                  \\(  = Match a start parentheses\n                      [^)(]*  = Match anything that isn't a parentheses\n                  \\)  = Match a end parentheses\n              )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n  \\)  = Match a close parens\n \t /gi  = Get all matches, not the first.  Be case insensitive.\n  */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function (fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl.trim().replace(/^\"(.*)\"$/, function (o, $1) {\n\t\t\treturn $1;\n\t\t}).replace(/^'(.*)'$/, function (o, $1) {\n\t\t\treturn $1;\n\t\t});\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t\treturn fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t\t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(38)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".webix_view, .webix_el_colorpicker input, .webix_el_combo input, .webix_el_datepicker input, .webix_el_search input, .webix_el_text input, .webix_control button, .webix_control input, .webix_control textarea, .webix_el_label, .webix_inp_bottom_label, .webix_inp_label, .webix_inp_top_label {\\n\\tfont-family: \\\"Helvetica Neue\\\",Helvetica,Arial,sans-serif !important;\\n}\\n.ab-generated-page {\\n\\toverflow-y: auto;\\n}\\n.ab-main-container {\\n\\tposition: relative;\\n\\tdisplay: block;\\n\\twidth: 100%;\\n\\tbackground: -moz-linear-gradient(top, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0) 100%); /* FF3.6-15 */\\n\\tbackground: -webkit-linear-gradient(top, rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 100%); /* Chrome10-25,Safari5.1-6 */\\n\\tbackground: linear-gradient(to bottom, rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\\n}\\n.ab-main-container .pointer {\\n\\tcursor: pointer;\\n}\\n.ab-main-container .right {\\n\\ttext-align: right;\\n}\\n.ab-main-container .center {\\n\\ttext-align: center;\\n}\\n.ab-main-container .left {\\n\\ttext-align: left;\\n}\\n.ab-text-bold {\\n\\tfont-weight: bold !important;\\n}\\n.ab-scroll-y {\\n\\toverflow-y: auto !important;\\n}\\n.ab-ellipses-text, .ab-ellipses-text > div {\\n\\toverflow: hidden;\\n\\twhite-space: nowrap;\\n\\ttext-overflow: ellipsis;\\n}\\n.float-left {\\n\\tfloat: left;\\n}\\n.float-right {\\n\\tfloat: right;\\n}\\n\\n/* Webix icon */\\n.ab-main-container .webix_icon {\\n\\tline-height: inherit;\\n}\\n\\n/* Fix overflow-x */\\n.ab-generated-page .webix_scroll_cont {\\n\\toverflow: auto !important;\\n}\\n\\n/* == Webix datatable == */\\n/* Checkbox column */\\n.ab-main-container .webix_hcell.center input[type=checkbox] {\\n\\twidth:20px;\\n\\theight:20px;\\n\\tmargin-top:12px;\\n  }\\n.ab-main-container .webix_table_checkbox {\\n\\twidth:20px;\\n\\theight:20px;\\n\\tmargin-top:5px;\\n}\\n/* Last column */\\n.ab-main-container .webix_column.webix_last > div,\\n.ab-main-container .webix_hs_center td.webix_last,\\n.ab-main-container .ab-app-list-descriptionwebix_hs_right td.webix_last {\\n\\tborder-right-width: 1px !important;\\n}\\n/* No padding/margin column */\\n.ab-column-no-padding div {\\n\\tpadding: 0px !important;\\n\\tmargin: 0px !important;\\n}\\n.ab-main-container .ab-cell-warn {\\n\\tbackground-color: #F5AE0F !important;\\n}\\n\\n/* Webix selected item */\\n.webix_list_item.webix_selected,\\n.webix_column>div.webix_cell_select,\\n.webix_column>div.webix_column_select,\\n.webix_column>div.webix_row_select {\\n\\tbackground-color: #3498db !important;\\n}\\n\\n/* Webix message */\\n.webix_success {\\n  background-color: #BFF2BF;\\n}\\n.webix_success div {\\n  background-color: #BFF2BF;\\n  border: 1px solid #007A00;\\n  color: #000;\\n}\\n\\n/* Webix list */\\n.ab-main-container .webix_list_item .webix_selected,\\n.ab-main-container .webix_tree_item.webix_selected {\\n\\tcolor: #fff !important;\\n\\tbackground-color: #3498db !important;\\n}\\n.ab-app-form-permission .webix_selected {\\n\\tcolor: #333 !important;\\n\\tbackground-color: transparent !important;\\n}\\n\\n/* Webix toolbar */\\n.ab-toolbar-submenu, .ab-toolbar-submenu .webix_header>div {\\n\\tbackground: #EEE !important;\\n\\tcolor: #666 !important;\\n\\tfont-size: 15px !important;\\n\\tfont-weight: bold !important;\\n\\tborder-bottom: 0px !important;\\n}\\n\\n/* Webix segmented */\\n.ab-form-component-item .webix_segment_0.webix_selected,\\n.ab-form-component-item .webix_segment_1.webix_selected,\\n.ab-form-component-item .webix_segment_N.webix_selected,\\n.ab-component-view-edit-field .webix_segment_0.webix_selected,\\n.ab-component-view-edit-field .webix_segment_1.webix_selected,\\n.ab-component-view-edit-field .webix_segment_N.webix_selected {\\n\\tcolor: #fff !important;\\n\\tbackground-color: #3498db !important;\\n}\\n\\n.ab-form-component-item .webix_segment_0,\\n.ab-form-component-item .webix_segment_1,\\n.ab-form-component-item .webix_segment_N,\\n.ab-component-view-edit-field .webix_segment_0,\\n.ab-component-view-edit-field .webix_segment_1,\\n.ab-component-view-edit-field .webix_segment_N {\\n\\tcolor: #3498db;\\n\\tbackground: #fff;\\n}\\n\\n/* Add new columns popup */\\n.ab-add-fields-popup {\\n\\toverflow-y: auto;\\n}\\n\\n/* Application list */\\n.ab-app-list {\\n/*\\n\\tmin-height: 300px;\\n\\tpadding: 40px 100px;\\n*/\\n}\\n.ab-app-select-list .webix_selected {\\n\\tbackground-color: #FFF !important;\\n\\tcolor: #333 !important;\\n}\\n.ab-app-select-list .webix_list_item:hover {\\n\\tbackground: #ebebeb;\\n}\\n.ab-app-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n\\tmargin: -2px -10px;\\n\\tpadding: 15px;\\n\\tline-height: 20px;\\n}\\ndiv[view_id='ab-app-list'] div.webix_list_item:hover,\\ndiv[view_id='ab-object-list'] div.webix_list_item:hover,\\ndiv[view_id='ab-object-list-menu'] div.webix_list_item:hover,\\ndiv[view_id='ab-new-connectObject-list-item'] div.webix_list_item:hover,\\ndiv[view_id='ab-edit-header-items'] div.webix_list_item:hover,\\ndiv[view_id='ab-frozen-field-list'] div.webix_list_item:hover {\\n\\tbackground-color: #eee;\\n}\\n.ab-app-list-name {\\n\\tfont-size: large;\\n}\\n.ab-app-list-description {\\n\\tcolor: #999;\\n\\tfont-size: small;\\n}\\n.ab-app-list-info {\\n\\twidth: 95%;\\n\\tdisplay: inline-block;\\n}\\n.ab-app-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tright: 10px;\\n\\topacity: 0.4;\\n\\tline-height: 70px;\\n\\theight: 70px;\\n}\\n.ab-app-list-edit:hover {\\n\\topacity: 1;\\n}\\n\\n/* Application workspace */\\n.ab-app-workspace {\\n\\t/*min-height: 100px;*/\\n}\\n.ab-unsync-data-warning {\\n\\tcursor: pointer;\\n    color: #fff;\\n    background-color: #F5962F;\\n    border: #fff dotted 1px !important;\\n    padding-left: 2px;\\n}\\n.ab-unsync-data-popup .webix_win_head {\\n\\tbackground-color: #F5962F;\\n}\\n.ab-unsync-data-popup .webix_win_head .header {\\n\\tpadding-left: 5px;\\n\\tfont-weight: bold;\\n    color: #fff;\\n}\\n.ab-unsync-data-status {\\n\\tpadding: 3px;\\n}\\n.ab-unsync-data-in-progress {\\n\\tbackground-color: #F5AE0F;\\n}\\n.ab-unsync-data-done {\\n\\tbackground-color: #3AB349;\\n}\\n.ab-unsync-data-error {\\n\\tbackground-color: #EC2F2F;\\n}\\n\\n/* Object list */\\n.ab-object-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n}\\n.ab-object-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0px;\\n\\tright: 5px;\\n\\tdisplay: none;\\n}\\n.ab-object-unsync {\\n\\tbackground-color: #d2e3ef;\\n\\tcolor: #4a4a4a;\\n\\tposition: absolute;\\n\\ttop: 4px;\\n\\tright: 30px;\\n\\tfont-size: 12px;\\n\\tborder-radius: 6px;\\n\\tpadding: 0px 4px;\\n\\theight: 20px;\\n\\tline-height: 20px;\\n\\tdisplay: none;\\n}\\n\\n/* Interface list */\\n.ab-page-list-item {\\n\\tposition: relative;\\n\\theight: 100%;\\n}\\n.ab-page-list-edit {\\n\\tposition: absolute;\\n\\ttop: 0px;\\n\\tright: 5px;\\n\\tdisplay: none;\\n\\tcursor: pointer;\\n}\\n\\n/* Object datatable */\\n.ab-object-data-header {\\n\\tposition: relative;\\n}\\n.ab-object-data-new-header {\\n\\tbackground-color: #cfd9e0;\\n}\\n\\n.ab-object-data-header-edit {\\n\\tdisplay: none;\\n\\tposition: absolute;\\n\\ttop: 15px;\\n\\tright: 10px;\\n}\\n.ab-object-data-header:hover .ab-object-data-header-edit {\\n\\tdisplay: block;\\n}\\n.ab-object-unsync-data {\\n\\tbackground-color: #dae6fb;\\n}\\n.ab-object-view-column {\\n\\tcolor: #3498db;\\n\\tfont-weight: bold;\\n\\ttext-align: center;\\n\\tcursor: pointer;\\n}\\n\\n/* Connect object data */\\n.ab-connect-data-info {\\n\\tdisplay: inline-block;\\n\\twidth: 90px;\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n}\\n\\n.ab-connect-data-disable {\\n\\tbackground-color: #aaa;\\n}\\n\\n/* Custom selectivity */\\n.ab-main-container .selectivity-multiple-input-container {\\n\\tbackground: none !important;\\n\\tpadding: 0px !important;\\n\\toverflow: hidden !important;\\n\\tmax-height: 100% !important;\\n}\\n.ab-main-container .selectivity-multiple-selected-item {\\n\\tbackground: #3498db !important;\\n\\tpadding-right: 5px;\\n\\t/*max-width: 100px !important;*/\\n}\\n\\n/* Interface tree view */\\n.ab-main-container .webix_tree_item.webix_selected span {\\n\\tpadding: 0px;\\n\\tbackground: #3498db !important;\\n}\\n\\n/* Interface new page popup */\\n.ab-interface-new-quick-page {\\n    overflow: scroll !important;\\n\\toverflow-x: hidden !important;\\n\\toverflow-y: auto !important;\\n}\\n\\n.ab-interface-new-quick-page .webix_inp_checkbox_border label {\\n\\tfont-weight: normal; /* Override bootstrap*/\\n}\\n\\n/* Interface page layout */\\n.ab-component-drop-area {\\n\\tmargin-right: 2px;\\n\\tborder: 1px dashed #000 !important;\\n\\tbackground-color: #D3E9EF;\\n\\tbackground-image:url(\\\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='30px' width='90px'><text x='20' y='20' fill='#95CBEF' font-size='15'>Drop Here</text></svg>\\\");\\n}\\n\\ndiv[view_id='ab-interface-layout-page'] .webix_list_item,\\n.ab-component-in-page {\\n\\twidth: 100%;\\n\\tposition: relative;\\n\\tbackground-color: #fff;\\n\\tclear: both;\\n}\\n\\n.ab-component-item-name {\\n\\tfloat: left;\\n\\tfont-size: 18px;\\n\\tborder-right: 1px solid #ebebeb;\\n\\tvertical-align: top;\\n\\tpadding-top: 10px;\\n\\twidth: 90px;\\n\\tmargin-bottom: -500em; /* CSS hack: equal height of right float */\\n\\tpadding-bottom: 500em;\\n}\\n\\n.ab-component-item-display {\\n\\tfloat: right;\\n\\tvertical-align: top;\\n\\tpadding: 10px;\\n\\twidth: 87%;\\n\\tline-height: 100%;\\n\\toverflow-x: auto;\\n}\\n\\n.ab-component-remove {\\n\\tposition: absolute;\\n\\ttop: 5px;\\n\\tright: 1px;\\n}\\n\\n.ab-component-link {\\n\\tcolor: #003B7E;\\n\\ttext-decoration: underline;\\n\\tcursor: pointer;\\n}\\n\\n/* Interface component list */\\n.ab-component-item-drag {\\n\\tborder: 1px dotted #000 !important;\\n\\tfont-size: 35px;\\n\\tbackground-color: #fff;\\n}\\n\\n/* Header component */\\n.ab-component-header {\\n\\tfont-size: 25px;\\n\\tfont-weight: bold;\\n\\tmargin: 0px;\\n\\tpadding: 0px;\\n}\\n.ab-component-description {\\n\\tfont-size: 14px;\\n\\tpadding: 0px;\\n}\\n\\n/* Menu component */\\n.ab-page-list-item .webix_tree_checkbox {\\n\\tmargin: 0px !important;\\n}\\n\\n/* Object toolbar */\\n.ab-data-toolbar {\\n\\tbackground: #aaa !important;\\n}\\n.ab-data-toolbar button {\\n\\ttext-align: center;\\n\\tfont-size: 14px;\\n}\\n.ab-data-toolbar button:hover, .ab-data-toolbar button:active {\\n\\tbackground: #aaa !important;\\n}\\n.ab-data-toolbar button .webix_icon_btn {\\n\\topacity: 0.6;\\n\\tfont-size: 15px;\\n}\\n.ab-data-toolbar button:hover .webix_icon_btn {\\n\\topacity: 1;\\n}\\n\\n/* Grid component */\\n.ab-page-grid-column-item .column-checkbox {\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\ttop: -5px;\\n\\twidth: 30px;\\n}\\n\\n.ab-page-grid-column-item .column-empty-checkbox {\\n\\tposition: relative;\\n\\twidth: 50px;\\n\\theight: 38px;\\n}\\n\\n.ab-page-grid-column-item .column-name {\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\ttop: -18px;\\n}\\n\\n/* Form component */\\n.ab-standard-button button, .ab-standard-button button:hover, .ab-standard-button button:active, .ab-standard-button .webix_icon_btn {\\n\\tbackground: transparent !important;\\n\\tborder-color: transparent !important;\\n\\tcolor: #666 !important;\\n\\tbox-shadow: none !important;\\n}\\n.ab-cancel-button button {\\n\\tbackground: transparent !important;\\n\\tcolor: #AAA;\\n\\tborder-color: transparent;\\n}\\n.ab-cancel-button button:hover {\\n\\ttext-decoration: underline;\\n}\\n.ab-cancel-button button:active {\\n\\tbox-shadow: none;\\n}\\n.ab-form-connect-data {\\n\\tfloat: left;\\n\\tborder: #CCC solid 1px;\\n\\tpadding: 0px 5px;\\n\\tmin-width: 70%;\\n\\tborder-radius: 6px;\\n}\\n\\n.ab-main-container .webix_layout_form {\\n\\tbackground-color: #fff !important;\\n}\\n\\n/* Loading Screen */\\n.ab-loading-screen {\\n\\tbackground: #000;\\n\\topacity: 0.7;\\n\\tposition: absolute !important;\\n}\\n.ab-loading-body {\\n\\tbackground: #000;\\n\\tborder-width: 0px !important;\\n}\\n.ab-loading-message {\\n\\tcolor: #fff !important;\\n\\tbackground: #000 !important;\\n\\tfont-size: 30px !important;\\n\\ttext-align: center;\\n\\tvertical-align: middle;\\n\\tborder-width: 0px !important;\\n\\tpadding-top: 20% !important;\\n\\theight: 100px !important;\\n}\\n.ab-loading-button {\\n\\ttext-align: center;\\n}\\n.ab-loading-button button {\\n\\tbackground-color: #003B7E;\\n\\twidth: 200px;\\n}\\n.ab-loading-cancel-button {\\n\\ttext-align: center;\\n\\tbackground: transparent;\\n}\\n.ab-loading-cancel-button a {\\n\\tcolor: #fff !important;\\n}\\n.ab-loading-screen .webix_progress_bottom {\\n\\theight: 40px !important;\\n\\topacity: 1;\\n}\\n.ab-loading-screen .webix_progress_bottom .webix_progress_state {\\n\\theight: 40px !important;\\n}\\n\\n/* Dynamic DataTable */\\n.dynamic-datatable-view .webix_badge {\\n\\tmargin: 0 !important;\\n}\\n\\n/* Number data field */\\n.ab-number-format-show {\\n\\twhite-space: nowrap;\\n}\\n\\n/* Icon Picker */\\n.ab-main-container .iconpicker .iconpicker-items {\\n\\tcolor: #000;\\n}\\n\\n/* Webix Tabs */\\ndiv.webix_item_tab {\\n\\tfont-size: 16px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\t// Test for IE <= 9 as proposed by Browserhacks\n\t\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t\t// Tests for existence of standard globals is to allow style-loader \n\t\t// to operate correctly into non-standard environments\n\t\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\t\treturn window && document && document.all && !window.atob;\n\t}),\n\tgetElement = (function(fn) {\n\t\tvar memo = {};\n\t\treturn function(selector) {\n\t\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t\t}\n\t\t\treturn memo[selector]\n\t\t};\n\t})(function (styleTarget) {\n\t\treturn document.querySelector(styleTarget)\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [],\n\tfixUrls = __webpack_require__(39);\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (typeof options.insertInto === \"undefined\") options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar styleTarget = getElement(options.insertInto)\n\tif (!styleTarget) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\tstyleTarget.insertBefore(styleElement, styleTarget.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\tstyleTarget.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\tstyleTarget.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\tstyleTarget.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\toptions.attrs.type = \"text/css\";\n\n\tattachTagAttrs(styleElement, options.attrs);\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\tattachTagAttrs(linkElement, options.attrs);\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction attachTagAttrs(element, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\telement.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement, options);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/* If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls){\n\t\tcss = fixUrls(css);\n\t}\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(40);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(41)(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!./AppBuilder.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!./AppBuilder.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ })\n],[10]);\n//# sourceMappingURL=BuildApp.js.map\n\n\n// WEBPACK FOOTER //\n// /home/pong/Desktop/AppBuilder/~/app_builder/assets/opstools/BuildApp/BuildApp.js","/******/ (function(modules) { // webpackBootstrap\n/******/ \t// install a JSONP callback for chunk loading\n/******/ \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n/******/ \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {\n/******/ \t\t// add \"moreModules\" to the modules object,\n/******/ \t\t// then flag all \"chunkIds\" as loaded and fire callback\n/******/ \t\tvar moduleId, chunkId, i = 0, resolves = [], result;\n/******/ \t\tfor(;i < chunkIds.length; i++) {\n/******/ \t\t\tchunkId = chunkIds[i];\n/******/ \t\t\tif(installedChunks[chunkId]) {\n/******/ \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n/******/ \t\t\t}\n/******/ \t\t\tinstalledChunks[chunkId] = 0;\n/******/ \t\t}\n/******/ \t\tfor(moduleId in moreModules) {\n/******/ \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n/******/ \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);\n/******/ \t\twhile(resolves.length) {\n/******/ \t\t\tresolves.shift()();\n/******/ \t\t}\n/******/ \t\tif(executeModules) {\n/******/ \t\t\tfor(i=0; i < executeModules.length; i++) {\n/******/ \t\t\t\tresult = __webpack_require__(__webpack_require__.s = executeModules[i]);\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t\treturn result;\n/******/ \t};\n/******/\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// objects to store loaded and loading chunks\n/******/ \tvar installedChunks = {\n/******/ \t\t1: 0\n/******/ \t};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/ \t// This file contains only the entry chunk.\n/******/ \t// The chunk loading function for additional chunks\n/******/ \t__webpack_require__.e = function requireEnsure(chunkId) {\n/******/ \t\tif(installedChunks[chunkId] === 0) {\n/******/ \t\t\treturn Promise.resolve();\n/******/ \t\t}\n/******/\n/******/ \t\t// a Promise means \"currently loading\".\n/******/ \t\tif(installedChunks[chunkId]) {\n/******/ \t\t\treturn installedChunks[chunkId][2];\n/******/ \t\t}\n/******/\n/******/ \t\t// setup Promise in chunk cache\n/******/ \t\tvar promise = new Promise(function(resolve, reject) {\n/******/ \t\t\tinstalledChunks[chunkId] = [resolve, reject];\n/******/ \t\t});\n/******/ \t\tinstalledChunks[chunkId][2] = promise;\n/******/\n/******/ \t\t// start chunk loading\n/******/ \t\tvar head = document.getElementsByTagName('head')[0];\n/******/ \t\tvar script = document.createElement('script');\n/******/ \t\tscript.type = 'text/javascript';\n/******/ \t\tscript.charset = 'utf-8';\n/******/ \t\tscript.async = true;\n/******/ \t\tscript.timeout = 120000;\n/******/\n/******/ \t\tif (__webpack_require__.nc) {\n/******/ \t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n/******/ \t\t}\n/******/ \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".js\";\n/******/ \t\tvar timeout = setTimeout(onScriptComplete, 120000);\n/******/ \t\tscript.onerror = script.onload = onScriptComplete;\n/******/ \t\tfunction onScriptComplete() {\n/******/ \t\t\t// avoid mem leaks in IE.\n/******/ \t\t\tscript.onerror = script.onload = null;\n/******/ \t\t\tclearTimeout(timeout);\n/******/ \t\t\tvar chunk = installedChunks[chunkId];\n/******/ \t\t\tif(chunk !== 0) {\n/******/ \t\t\t\tif(chunk) {\n/******/ \t\t\t\t\tchunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));\n/******/ \t\t\t\t}\n/******/ \t\t\t\tinstalledChunks[chunkId] = undefined;\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t\thead.appendChild(script);\n/******/\n/******/ \t\treturn promise;\n/******/ \t};\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// on error function for async loading\n/******/ \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 11);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _configDesktop = __webpack_require__(12);\n\nvar _configDesktop2 = _interopRequireDefault(_configDesktop);\n\nvar _configMobile = __webpack_require__(13);\n\nvar _configMobile2 = _interopRequireDefault(_configMobile);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @class config\n *\n * Manage our configuration settings.\n */\n\nexports.default = {\n\tconfig: function config() {\n\n\t\t// TODO: decide which config file to return here:\n\t\tif (window.innerWidth < 768) {\n\t\t\treturn _configMobile2.default;\n\t\t}\n\t\treturn _configDesktop2.default;\n\t}\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = {\n\n\t/**\n  * @function OP.Form.validationError\n  *\n  * creates an error object that can be used in OP.Form.isValidationError()\n  * to update a webix form with error validation messages.\n  *\n  * @param {json} error \tan error object\n  *\t\t\t\terror.name\t{string} the attribute name (Form.element[error.name])\n  *\t\t\t\terror.message {string} the message to display for the error\n  *\n  * @return {obj} an error object.\n  */\n\tvalidationError: function validationError(error, errorObj) {\n\n\t\terrorObj = errorObj || {\n\t\t\terror: 'E_VALIDATION',\n\t\t\tinvalidAttributes: {}\n\t\t};\n\n\t\tvar attr = errorObj.invalidAttributes;\n\t\tattr[error.name] = attr[error.name] || [];\n\n\t\tattr[error.name].push(error);\n\n\t\treturn errorObj;\n\t},\n\n\t/**\n  * @function OP.Form.isValidationError\n  *\n  * scans the given error to see if it is a sails' respone about an invalid\n  * value from one of the form elements.\n  *\n  * @codestart\n  * var form = $$('formID');\n  * var values = form.getValues();\n  * model.attr(values);\n  * model.save()\n  * .fail(function(err){\n  *     if (!OP.Form.isValidationError(err, form)) {\n  *         OP.error.log('Error saving current model ()', {error:err, values:values});\n  *     }\n  * })\n  * .then(function(newData){\n  * \n  * });\n  * @codeend\n  *\n  * @param {obj} error  the error response object\n  * @param {obj} form   the webix form instance (or reference)\n  * @return {bool}      true if error was about a form element.  false otherwise.\n  */\n\tisValidationError: function isValidationError(error, form) {\n\n\t\t// {bool} have we set focus to form component?\n\t\tvar hasFocused = false;\n\n\t\t// if we have an error object:\n\t\tif (error) {\n\n\t\t\t//// if the error obj is provided by Sails response, \n\t\t\t//// do some clean up on the error object:\n\n\n\t\t\t// dig down to sails provided error object:\n\t\t\tif (error.error && error.error == 'E_UNKNOWN' && error.raw && error.raw.length > 0) {\n\n\t\t\t\terror = error.raw[0];\n\t\t\t}\n\n\t\t\t// drill down to the embedded .err object if it exists\n\t\t\tif (error.err) {\n\t\t\t\terror = error.err;\n\t\t\t}\n\n\t\t\t//// Now process the error object\n\t\t\t//// \n\t\t\tif (error.error && error.error == 'E_VALIDATION' || error.code && error.code == 'E_VALIDATION') {\n\n\t\t\t\tvar attrs = error.invalidAttributes;\n\t\t\t\tif (attrs) {\n\n\t\t\t\t\tvar wasForm = false;\n\t\t\t\t\tfor (var attr in attrs) {\n\n\t\t\t\t\t\t// if this is a field in the form:\n\t\t\t\t\t\tif (form.elements[attr]) {\n\n\t\t\t\t\t\t\tvar errors = attrs[attr];\n\t\t\t\t\t\t\tvar msg = [];\n\t\t\t\t\t\t\terrors.forEach(function (err) {\n\t\t\t\t\t\t\t\tmsg.push(err.message);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// set the invalid error message\n\t\t\t\t\t\t\tform.markInvalid(attr, msg.join(', '));\n\n\t\t\t\t\t\t\t// set focus to the 1st form element we mark:\n\t\t\t\t\t\t\tif (!hasFocused) {\n\t\t\t\t\t\t\t\tform.elements[attr].focus();\n\t\t\t\t\t\t\t\thasFocused = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\twasForm = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (wasForm) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// if we missed updating our form with an error\n\t\t// this was not a validation error so return false\n\t\treturn false;\n\t}\n\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _restURLs = {\n\tfindAll: 'GET #url#',\n\tfindOne: 'GET #url#/{id}',\n\tcreate: 'POST #url#',\n\tupdate: 'PUT #url#/{id}',\n\tdestroy: 'DELETE #url#/{id}'\n};\n\nvar _Models = {};\n\nvar OPModel = function () {\n\tfunction OPModel(key, staticData, instanceData) {\n\t\t_classCallCheck(this, OPModel);\n\n\t\tthis.key = key;\n\t\tthis.staticData = staticData;\n\t\tthis.instanceData = instanceData;\n\t\tthis.Model = staticData.Model;\n\n\t\tthis.url = {};\n\t\tfor (var r in _restURLs) {\n\t\t\tthis.url[r] = staticData[r];\n\t\t}\n\t}\n\n\t_createClass(OPModel, [{\n\t\tkey: 'Models',\n\t\tvalue: function Models(Model) {\n\t\t\tthis.Model = Model;\n\t\t}\n\t}, {\n\t\tkey: 'findAll',\n\t\tvalue: function findAll(cond) {\n\t\t\tvar _this = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t// NOTE: currently reusing AD.Model\n\n\t\t\t\t// var Model = AD.Model.get(this.key);\n\t\t\t\t// Model.findAll(cond)\n\n\t\t\t\tvar service = _this.service('findAll');\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: cond }).fail(reject).done(function (data) {\n\n\t\t\t\t\tdata = data.data || data;\n\n\t\t\t\t\t// our findAll() should return an array of items.\n\t\t\t\t\tif (!Array.isArray(data)) {\n\t\t\t\t\t\tdata = [data];\n\t\t\t\t\t}\n\n\t\t\t\t\t// return instances of this.Model if provided:\n\t\t\t\t\tif (_this.Model) {\n\t\t\t\t\t\tvar newList = []; // Model.List();\n\t\t\t\t\t\tdata.forEach(function (l) {\n\t\t\t\t\t\t\tif (l) {\n\t\t\t\t\t\t\t\tnewList.push(new _this.Model(l));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdata = newList;\n\t\t\t\t\t}\n\n\t\t\t\t\t// convert to a WebixDataCollection:\n\t\t\t\t\tvar dc = new webix.DataCollection({\n\t\t\t\t\t\tdata: data,\n\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonAfterDelete: function onAfterDelete(id) {}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// dc._toArray = function() {\n\t\t\t\t\t// \tvar data = [];\n\t\t\t\t\t// \tvar id = this.getFirstId();\n\t\t\t\t\t// \twhile(id) {\n\t\t\t\t\t// \t\tdata.push(this.getItem(id));\n\t\t\t\t\t// \t\tid = this.getNextId(id);\n\t\t\t\t\t// \t}\n\t\t\t\t\t// \treturn data;\n\t\t\t\t\t// }\n\n\n\t\t\t\t\tresolve(dc);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'findOne',\n\t\tvalue: function findOne(cond) {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar service = _this2.service('findOne');\n\n\t\t\t\tvar nURI = service.url;\n\t\t\t\tfor (var k in cond) {\n\t\t\t\t\tvar oURI = nURI;\n\t\t\t\t\tnURI = AD.util.string.replaceAll(nURI, \"{\" + k + \"}\", cond[k]);\n\n\t\t\t\t\t// if there was a change, remove k from cond:\n\t\t\t\t\tif (oURI != nURI) {\n\t\t\t\t\t\tdelete cond[k];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tservice.url = nURI;\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: cond }).fail(reject).done(function (item) {\n\t\t\t\t\tif (item.translate) item.translate();\n\n\t\t\t\t\tresolve(item.attr ? item.attr() : item);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'create',\n\t\tvalue: function create(attr) {\n\t\t\tvar _this3 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar service = _this3.service('create');\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: attr }).fail(reject).done(function (item) {\n\t\t\t\t\tif (item.translate) item.translate();\n\n\t\t\t\t\tresolve(item.attr ? item.attr() : item);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update(id, attr) {\n\t\t\tvar _this4 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar service = _this4.service('update', id);\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: attr }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'destroy',\n\t\tvalue: function destroy(id) {\n\t\t\tvar _this5 = this;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar service = _this5.service('destroy', id);\n\n\t\t\t\tAD.comm.service[service.verb]({ url: service.url, params: {} }).fail(reject).done(resolve);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'service',\n\t\tvalue: function service(key, id) {\n\t\t\tvar parts = this.url[key].split(' ');\n\t\t\tvar verb = parts[0].toLowerCase();\n\t\t\tvar uri = parts.pop();\n\n\t\t\tif (id) {\n\t\t\t\tvar key = '{id}';\n\t\t\t\turi = AD.util.string.replaceAll(uri, key, id);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tverb: verb,\n\t\t\t\turl: uri\n\t\t\t};\n\t\t}\n\t}]);\n\n\treturn OPModel;\n}();\n\nexports.default = {\n\n\textend: function extend(key, staticData, instance) {\n\n\t\t//\n\t\t// Create the AD.Model from this definition\n\t\t//\n\n\t\tif (staticData.restURL) {\n\t\t\tfor (var u in _restURLs) {\n\t\t\t\tstaticData[u] = _restURLs[u].replace('#url#', staticData.restURL);\n\t\t\t}\n\t\t}\n\n\t\t// var alreadyThere = AD.Model.get(key);\n\t\t// if (!alreadyThere) {\n\n\t\t// \tAD.Model.Base.extend(key, staticData, instance);\n\t\t// \tAD.Model.extend(key, staticData, instance);\n\t\t// }\n\n\t\t//\n\t\t// Now create our OP.Model:\n\t\t//\n\t\tvar curr = nameSpace(_Models, key);\n\t\tvar modelName = objectName(key);\n\n\t\tcurr[modelName] = new OPModel(key, staticData, instance);\n\t},\n\n\tget: function get(key) {\n\t\treturn findObject(_Models, key);\n\t}\n};\n\n/*\n * @function findObject\n *\n * Return the object specified by the given name space:\n *\n * @param {object} baseObj  The base object to search on\n *                          usually AD.models or AD.models_base\n *\n * @param {string} name   The provided namespace to parse and search for\n *                        The name can be spaced using '.' \n *                        eg.  'coolTool.Resource1' => AD.models.coolTool.Resource1\n *                             'coolerApp.tool1.Resource1' => AD.models.coolerApp.tool1.Resource1\n *\n * @returns {object}  the object resolved by the namespaced base \n *                    eg:  findObject(AD.models, 'Resource') => return AD.models.Resource\n *                         findObject(AD.models, 'coolTool.Resource1') => AD.models.coolTool.Resource1\n *\n *                    if an object is not found, null is returned.\n */\n\nvar findObject = function findObject(baseObj, name) {\n\n\t// first lets figure out our namespacing:\n\tvar nameList = name.split('.');\n\n\t// for each remaining name segments, make sure we have a \n\t// namespace container for it:\n\tvar curr = baseObj;\n\tnameList.forEach(function (name) {\n\n\t\tif (curr == null) {\n\t\t\tvar whoops = true;\n\t\t\tconsole.error('! current name segment is null.  Check your given name to make sure it is properly given: ', name);\n\t\t}\n\t\tif (curr) {\n\t\t\tif (typeof curr[name] == 'undefined') {\n\t\t\t\tcurr = null;\n\t\t\t}\n\t\t\tif (curr) curr = curr[name];\n\t\t}\n\t});\n\n\treturn curr;\n};\n\n/*\n * @function objectName\n *\n * parse the name and return the name of the object we will create.\n *\n * @param {string} name   The provided namespace to parse \n *                        The name can be spaced using '.' \n *\n * @returns {string}  the name of the model object \n *                    eg:  objectName('Resource') => return 'Resource'\n *                         objectName('coolTool.Resource1') => 'Resource1'\n */\nvar objectName = function objectName(name) {\n\n\t// first lets figure out our namespacing:\n\tvar nameList = name.split('.');\n\tvar objName = nameList.pop(); // remove the last one.\n\n\treturn objName;\n};\n\n/*\n * @function nameSpace\n *\n * Make sure the proper name space is created on the given base.\n *\n * @param {object} baseObj  The base object to create the namespace on\n *                          usually AD.models or AD.models_base\n *\n * @param {string} name   The provided namespace to parse and create\n *                        The name can be spaced using '.' \n *                        eg.  'coolTool.Resource1' => AD.models.coolTool.Resource1\n *                             'coolerApp.tool1.Resource1' => AD.models.coolerApp.tool1.Resource1\n *\n * @returns {object}  the object that represents the namespaced base \n *                    that the Model is to be created on.\n *                    eg:  nameSpace(AD.models, 'Resource') => return AD.models\n *                         nameSpace(AD.models, 'coolTool.Resource1') => AD.models.coolTool\n */\nvar nameSpace = function nameSpace(baseObj, name) {\n\n\t// first lets figure out our namespacing:\n\tvar nameList = name.split('.');\n\tvar controlName = nameList.pop(); // remove the last one.\n\n\t// for each remaining name segments, make sure we have a \n\t// namespace container for it:\n\tvar curr = baseObj;\n\tnameList.forEach(function (name) {\n\n\t\tif (typeof curr[name] == 'undefined') {\n\t\t\tcurr[name] = {};\n\t\t}\n\t\tcurr = curr[name];\n\t});\n\n\treturn curr;\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/*\n * OP.Multilingual\n *\n * A set of helpers for Multilingual Data.\n *\n */\n\nexports.default = {\n\n\t/**\n  * @function OP.Multilingual.translate\n  *\n  * Given a set of json data, pull out any multilingual translations\n  * and flatten those values to the base object.\n  *\n  * @param {obj} obj  The instance of the object being translated\n  * @param {json} json The json data being used for translation.\n  *\t\t\t\t\t\tThere should be json.translations = [ {transEntry}, ...]\n  *\t\t\t\t\t\twhere transEntry = {\n  *\t\t\t\t\t\t\tlanguage_code:'en',\n  *\t\t\t\t\t\t\tfield1:'value',\n  *\t\t\t\t\t\t\t...\n  *\t\t\t\t\t\t}\n  * @param {array} fields an Array of multilingual fields to pull to \n  *\t\t\t\t\t\t the obj[field] value.\n  *\n  */\n\ttranslate: function translate(obj, json, fields) {\n\n\t\tif (!json.translations) {\n\t\t\tjson.translations = [];\n\t\t}\n\n\t\tvar currLanguage = AD.lang.currentLanguage || 'en';\n\n\t\tif (fields && fields.length > 0) {\n\n\t\t\tjson.translations.forEach(function (t) {\n\t\t\t\t// find the translation for the current language code\n\t\t\t\tif (t.language_code == currLanguage) {\n\n\t\t\t\t\t// copy each field to the root object\n\t\t\t\t\tfields.forEach(function (f) {\n\t\t\t\t\t\tobj[f] = t[f] || ''; // default to '' if not found. \n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n  * @function OP.Multilingual.unTranslate\n  *\n  * Take the multilingual information in the base obj, and push that \n  * down into the json.translations data.\n  *\n  * @param {obj} obj  The instance of the object with the translation\n  * @param {json} json The json data being used for translation.\n  *\t\t\t\t\t\tThere should be json.translations = [ {transEntry}, ...]\n  *\t\t\t\t\t\twhere transEntry = {\n  *\t\t\t\t\t\t\tlanguage_code:'en',\n  *\t\t\t\t\t\t\tfield1:'value',\n  *\t\t\t\t\t\t\t...\n  *\t\t\t\t\t\t}\n  * @param {array} fields an Array of multilingual fields to pull from \n  *\t\t\t\t\t\t the obj[field] value.\n  *\n  */\n\tunTranslate: function unTranslate(obj, json, fields) {\n\n\t\tjson = json || {};\n\t\tfields = fields || [];\n\n\t\tif (!json.translations) {\n\t\t\tjson.translations = [];\n\t\t}\n\n\t\tvar currLanguage = AD.lang.currentLanguage || 'en';\n\n\t\tif (fields && fields.length > 0) {\n\n\t\t\tvar foundOne = false;\n\n\t\t\tjson.translations.forEach(function (t) {\n\t\t\t\t// find the translation for the current language code\n\t\t\t\tif (t.language_code == currLanguage) {\n\n\t\t\t\t\t// copy each field to the root object\n\t\t\t\t\tfields.forEach(function (f) {\n\t\t\t\t\t\tt[f] = obj[f];\n\t\t\t\t\t});\n\n\t\t\t\t\tfoundOne = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// if we didn't update an existing translation\n\t\t\tif (!foundOne) {\n\n\t\t\t\t// create a translation entry:\n\t\t\t\tvar trans = {};\n\n\t\t\t\t// assume current languageCode:\n\t\t\t\ttrans.language_code = currLanguage;\n\n\t\t\t\tfields.forEach(function (field) {\n\t\t\t\t\tif (obj[field] != null) {\n\t\t\t\t\t\ttrans[field] = obj[field];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tjson.translations.push(trans);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = {\n\n\tuuid: AD.util.uuid\n\n};\n\n/***/ }),\n/* 9 */,\n/* 10 */,\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _form = __webpack_require__(5);\n\nvar _form2 = _interopRequireDefault(_form);\n\nvar _multilingual = __webpack_require__(7);\n\nvar _multilingual2 = _interopRequireDefault(_multilingual);\n\nvar _model = __webpack_require__(6);\n\nvar _model2 = _interopRequireDefault(_model);\n\nvar _util = __webpack_require__(8);\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _config = __webpack_require__(4);\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.OP = {};\n\n// OP.xxxx      These properties hold the defined Class/Controller/Model definitions\n//              for our loaded projects.\n// OP.UI = {};    \t\t// webix UI definitions\n// OP.Logic = {}; \t\t// logic references for webix application\n\n/**\n * @class AD_Client\n * @parent index 4\n *\n * ###Client side global OpsPortal (OP) namespace.\n *\n * This file defines standard functions and calls for OpsPortal\n * objects on the client side.\n */\n\n// Create our OP  Namespace only if it hasn't been created already\n\n//// TODO: how to disable 'use strict'?  or perform this check without an error\n//// in 'use strict' ?\n\n// if (!window.OP) {\nOP.Component = {}; // our defined components\n\nOP.CustomComponent = {}; // separate holder for Webix Custom Components\n\n\n// OP.UI.extend = function(key, definition) {\n// \tOP.UI[key] = definition;\n// }\n\nOP.Component.extend = function (key, fn) {\n\tOP.Component[key] = function (App) {\n\n\t\t//// TODO: verify App has proper structure:\n\t\tif (!App) {\n\t\t\tApp = OP.Component._newApp();\n\t\t}\n\n\t\t// make an instance of the component.\n\t\tvar component = fn(App);\n\n\t\t// transfer to App, any actions in the component:\n\t\tif (component.actions) {\n\t\t\tfor (var a in component.actions) {\n\t\t\t\tApp.actions[a] = component.actions[a];\n\t\t\t}\n\t\t}\n\n\t\treturn component;\n\t};\n};\n\nOP.Component._newApp = function () {\n\treturn {\n\n\t\tuuid: webix.uid(),\n\n\t\t/*\n   * actions:\n   * a hash of exposed application methods that are shared among our\n   * components, so one component can invoke an action that updates\n   * another component.\n   */\n\t\tactions: {},\n\n\t\t/*\n   * config\n   * webix configuration settings for our current browser\n   */\n\t\tconfig: _config2.default.config(),\n\n\t\t/*\n   * custom\n   * a collection of custom components for this App Instance.\n   */\n\t\tcustom: {},\n\n\t\t/*\n   * labels\n   * a collection of labels that are common for the Application.\n   */\n\t\tlabels: {},\n\n\t\t/*\n   * unique()\n   * A function that returns a globally unique Key.\n   * @param {string} key   The key to modify and return.\n   * @return {string}\n   */\n\t\tunique: function unique(key) {\n\t\t\treturn key + this.uuid;\n\t\t}\n\n\t};\n};\n\nOP.CustomComponent.extend = function (key, fn) {\n\tOP.CustomComponent[key] = function (App, key) {\n\n\t\tif (!App) {\n\t\t\tApp = OP.Component._newApp();\n\t\t}\n\n\t\t// make an instance of the component.\n\t\treturn fn(App, key);\n\t};\n};\n\nOP.Dialog = AD.op.Dialog;\n\nOP.Error = AD.error;\n\nOP.Form = _form2.default;\n\nOP.Multilingual = _multilingual2.default;\nOP.Model = _model2.default;\n\nOP.Util = _util2.default;\n\nexports.default = OP;\n// }\n\n\n// import \"./model.js\"\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n/**\n * @class configDesktop\n *\n * Manage our configuration settings for Desktop styles.\n\n */\n\nexports.default = {\n\n\t// Application List\n\tappListRowHeight: 70,\n\n\t// button types\n\tbuttonWidthLarge: 200,\n\tbuttonWidthMedium: 150,\n\tbuttonWidthSmall: 100,\n\tbuttonWidthExtraSmall: 50,\n\n\t// tab types\n\ttabWidthLarge: 200,\n\ttabWidthMedium: 120,\n\ttabWidthSmall: 100,\n\ttabWidthExtraSmall: 50,\n\n\t// column types\n\n\n\t// spacers\n\tsmallSpacer: 10,\n\tmediumSpacer: 25,\n\tlargeSpacer: 50,\n\tappListSpacerRowHeight: 100,\n\tappListSpacerColMinWidth: 100,\n\tappListSpacerColMaxWidth: 200,\n\tobjectWorkspaceColWidth: 20,\n\n\t// labels\n\tlabelWidthSmall: 50,\n\tlabelWidthMedium: 80,\n\tlabelWidthLarge: 150,\n\tlabelWidthCheckbox: 0,\n\n\t// show elements on desktop\n\thideMobile: false\n\n};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n/**\n * @class configMobile\n *\n * Manage our configuration settings for mobile styles.\n\n */\n\nexports.default = {\n\n\t// Application List\n\tappListRowHeight: 70,\n\n\t// button types\n\tbuttonWidthLarge: 200,\n\n\t// column types\n\n\n\t// spacers\n\tsmallSpacer: 1,\n\tmediumSpacer: 10,\n\tlargeSpacer: 20,\n\tappListSpacerRowHeight: 10,\n\tappListSpacerColMinWidth: 1,\n\tappListSpacerColMaxWidth: 1,\n\tobjectWorkspaceColWidth: 1,\n\n\t// labels\n\tlabelWidthSmall: 50,\n\tlabelWidthMedium: 80,\n\tlabelWidthLarge: 120,\n\tlabelWidthCheckbox: 0,\n\n\t// hide elements for mobile\n\thideMobile: true\n\n};\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=OP_Bundle.js.map\n\n\n// WEBPACK FOOTER //\n// /home/pong/Desktop/AppBuilder/~/app_builder/assets/opstools/BuildApp/OP_Bundle.js","// Import App builder dependencies\nimport '../../BuildApp/OP_Bundle'\nimport '../../BuildApp/BuildApp'\n\n// Import component test cases\nimport './components/ab_work_object_list_popupEditMenu'\n\n\n// WEBPACK FOOTER //\n// ./test_app_builder.js"],"sourceRoot":""}